window.__require=function t(e,o,i){function n(r,a){if(!o[r]){if(!e[r]){var c=r.split("/");if(c=c[c.length-1],!e[c]){var p="function"==typeof __require&&__require;if(!a&&p)return p(c,!0);if(s)return s(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var l=o[r]={exports:{}};e[r][0].call(l.exports,function(t){return n(e[r][1][t]||t)},l,l.exports,t,e,o,i)}return o[r].exports}for(var s="function"==typeof __require&&__require,r=0;r<i.length;r++)n(i[r]);return n}({"19EXPL04SCI08E01_Rotate_Around":[function(t,e,o){"use strict";cc._RF.push(e,"23e0ewBImVP646uPVvgUxV3","19EXPL04SCI08E01_Rotate_Around");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=s.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=1,e}return i(e,t),e.prototype.update=function(t){this.node.angle+=this.speed},n([a],e.prototype,"speed",void 0),e=n([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],"19EXPL04SCI08E01_drag_drop":[function(t,e,o){"use strict";cc._RF.push(e,"33ac7ZuV7xG4JGmMRgxEFcA","19EXPL04SCI08E01_drag_drop");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=s.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dropPlace=null,e.startPos=null,e.gameNode=null,e.placeHolderObject=null,e.currentDraggingObject=null,e}return i(e,t),e.prototype.start=function(){this.startPos=new cc.Vec2(this.node.position.x,this.node.position.y),this.gameNode.on("OnOptionDraggingStarted",function(t){this.currentDraggingObject=t}.bind(this)),this.gameNode.on("OnOptionDraggingEnded",function(t){this.currentDraggingObject=t}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_START,function(t){null!=this.currentDraggingObject&&""!=this.currentDraggingObject||this.gameNode.emit("OnOptionDraggingStarted",this.node.name)}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){if(this.currentDraggingObject==this.node.name){var e=t.touch.getDelta();this.node.x+=e.x,this.node.y+=e.y}}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_END,function(t){if(this.currentDraggingObject==this.node.name){this.gameNode.emit("OnOptionDraggingEnded","");var e=this.node.parent.convertToWorldSpaceAR(this.node.position),o=this.dropPlace.convertToNodeSpaceAR(e);cc.Intersection.pointInPolygon(new cc.Vec2(o.x,o.y),this.dropPlace.getComponent(cc.PolygonCollider).world.points)?(this.placeHolderObject.active=!0,this.node.getComponent(cc.Sprite).enabled=!1,this.gameNode.emit("OnOptionDropped",this.node.name),this.node.position=this.startPos):this.node.runAction(cc.moveTo(.3,this.startPos))}}.bind(this))},n([a(cc.Node)],e.prototype,"dropPlace",void 0),n([a(cc.Node)],e.prototype,"gameNode",void 0),n([a(cc.Node)],e.prototype,"placeHolderObject",void 0),e=n([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],"19EXPL04SCI08E01_solar_system":[function(t,e,o){"use strict";cc._RF.push(e,"430adKWnNNBJL5RrOEiUEUl","19EXPL04SCI08E01_solar_system");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/AudioManager"),r=t("../../../../framework/scripts/StepsController"),a=t("../../../../framework/scripts/UIManager"),c=cc._decorator,p=c.ccclass,l=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.clip_bgMusic1=null,e.step1=null,e.step3_question1=null,e.options_question1=null,e.step3_q1_incorrectFeedback1=null,e.step3_q1_incorrectFeedback2=null,e.step3_q1_correctFeedback=null,e.step5_question2=null,e.step5_options_question2=null,e.step5_q2_incorrectFeedback1And2=null,e.step5_q2_correctFeedback=null,e.step7_question3=null,e.step7_options_question3=null,e.step7_q3_incorrectFeedback1And2=null,e.step7_q3_correctFeedback=null,e.step9_question4=null,e.step9_options_question4=null,e.step9_q4_incorrectFeedback1=null,e.step9_q4_incorrectFeedback2=null,e.step9_q4_correctFeedback=null,e.step11_question5=null,e.step11_options_question5=null,e.step11_q5_incorrectFeedback1=null,e.step11_q5_incorrectFeedback2=null,e.step13_question6=null,e.step13_options_question6=null,e.step13_q6_incorrectFeedback1=null,e.step13_q6_incorrectFeedback2=null,e.step13_q6_correctFeedback=null,e.step14=null,e.optionsShowPos=50,e.optionsHidePos=-300,e}return i(e,t),e.prototype.onLoad=function(){this.stepsController=this.canvas.getComponent(r.default),this.uiManager=this.canvas.getComponent(a.default),this.audioManager=this.canvas.getComponent(s.default),this.canvas.on("OnLoadStep",this.stepsHandler.bind(this)),this.canvas.on("OnCommonButtonClick",this.onCommonButtonClick.bind(this)),this.canvas.on("OnAnswerVerification",this.onAnswerVerification.bind(this)),this.node.on("OnOptionDropped",this.onOptionDropped.bind(this)),this.node.on("OnOptionDraggingStarted",this.onOptionDragStartd.bind(this))},e.prototype.start=function(){this.stepsController.Initialise("19EXPL04SCI08E01_solar_system"),this.setupSceneForStep1(),this.audioManager.play("clip_bgMusic1",this.clip_bgMusic1,!0)},e.prototype.stepsHandler=function(t){switch(t){case 3:this.setupSceneForQuestion1();break;case 4:this.setupSceneForStep4();break;case 5:this.setupSceneForQuestion2();break;case 6:this.setupSceneForStep6();break;case 7:this.setupSceneForQuestion3();break;case 8:this.setupSceneForStep8();break;case 9:this.setupSceneForQuestion4();break;case 10:this.setupSceneForStep10();break;case 11:this.setupSceneForQuestion5();break;case 12:this.setupSceneForStep12();break;case 13:this.setupSceneForQuestion6();break;case 14:this.setupSceneForStep14()}},e.prototype.onAnswerVerification=function(t){switch(this.stepsController.getCurrentStep()){case 3:this.giveFeedbackForQestion1(t);break;case 5:this.giveFeedbackForQestion2(t);break;case 7:this.giveFeedbackForQestion3(t);break;case 9:this.giveFeedbackForQestion4(t);break;case 11:this.giveFeedbackForQestion5(t);break;case 13:this.giveFeedbackForQestion6(t)}},e.prototype.resetAfterTryAgain=function(){switch(this.stepsController.getCurrentStep()){case 3:this.setupSceneForQuestion1(),this.stepsController.loadNextStep(this.stepsController.getCurrentStep());break;case 5:this.setupSceneForStep4(),this.stepsController.loadNextStep(this.stepsController.getCurrentStep()-1);break;case 7:this.setupSceneForStep6(),this.stepsController.loadNextStep(this.stepsController.getCurrentStep()-1);break;case 9:this.setupSceneForStep8(),this.stepsController.loadNextStep(this.stepsController.getCurrentStep()-1);break;case 11:this.setupSceneForStep10(),this.stepsController.loadNextStep(this.stepsController.getCurrentStep()-1);break;case 13:this.setupSceneForStep12(),this.stepsController.loadNextStep(this.stepsController.getCurrentStep()-1)}},e.prototype.onOptionDragStartd=function(t){this.stepsController.onOptionDragStarted({optionName:t})},e.prototype.onOptionDropped=function(t){switch(this.stepsController.getCurrentStep()){case 3:this.stepsController.onOptionDropped({optionName:t}),this.hideOptions(this.options_question1,t);break;case 5:this.stepsController.onOptionDropped({optionName:t}),this.hideOptions(this.step5_options_question2,t);break;case 7:this.stepsController.onOptionDropped({optionName:t}),this.hideOptions(this.step7_options_question3,t);break;case 9:this.stepsController.onOptionDropped({optionName:t}),this.hideOptions(this.step9_options_question4,t);break;case 11:this.stepsController.onOptionDropped({optionName:t}),this.hideOptions(this.step11_options_question5,t);break;case 13:this.stepsController.onOptionDropped({optionName:t}),this.hideOptions(this.step13_options_question6,t)}},e.prototype.hideOptions=function(t,e){cc.tween(t).to(1,{position:cc.v2(0,-300)}).call(function(){t.getChildByName(e).getComponent(cc.Sprite).enabled=!0}).start()},e.prototype.onCommonButtonClick=function(t){this.uiManager.CommonButtonType.NextQuestion==t?this.stepsController.loadNextStep():this.uiManager.CommonButtonType.TryAgain==t&&this.resetAfterTryAgain()},e.prototype.setupSceneForStep1=function(){this.disableAllExceptThis(this.step1)},e.prototype.setupSceneForQuestion1=function(){this.disableAllExceptThis(this.step3_question1),cc.tween(this.options_question1).to(1,{position:cc.v2(0,this.optionsShowPos)}).start(),this.step3_question1.getChildByName("planet_place_holder").getChildByName("sun").active=!1,this.step3_question1.getChildByName("planet_place_holder").getChildByName("jupiter").active=!1,this.step3_question1.getChildByName("planet_place_holder").getChildByName("milkyway").active=!1,this.step3_q1_incorrectFeedback1.active=!1,this.step3_q1_incorrectFeedback2.active=!1,this.step3_q1_correctFeedback.active=!1},e.prototype.setupSceneForStep4=function(){this.disableAllExceptThis(this.step5_question2),this.step5_q2_correctFeedback.active=!1,this.step5_q2_incorrectFeedback1And2.active=!1,this.step5_question2.getChildByName("base_question").getChildByName("planet_place_holder").getChildByName("mercury").active=!1,this.step5_question2.getChildByName("base_question").getChildByName("planet_place_holder").getChildByName("venus").active=!1,this.step5_question2.getChildByName("base_question").getChildByName("planet_place_holder").getChildByName("saturn").active=!1},e.prototype.giveFeedbackForQestion1=function(t){t.isCorrect?(this.step3_q1_correctFeedback.active=!0,this.step3_q1_correctFeedback.getComponent(cc.Animation).play()):"jupiter"==t.answer?this.scheduleOnce(function(){this.step3_q1_incorrectFeedback1.active=!0,this.step3_q1_incorrectFeedback1.getComponent(cc.Animation).play()}.bind(this),5):this.scheduleOnce(function(){this.step3_q1_incorrectFeedback2.active=!0,this.step3_q1_incorrectFeedback2.getComponent(cc.Animation).play()}.bind(this),5)},e.prototype.setupSceneForQuestion2=function(){this.disableAllExceptThis(this.step5_question2),cc.tween(this.step5_options_question2).delay(3).to(1,{position:cc.v2(0,this.optionsShowPos)}).start(),this.step5_question2.getChildByName("base_question").getChildByName("planet_place_holder").getChildByName("mercury").active=!1,this.step5_question2.getChildByName("base_question").getChildByName("planet_place_holder").getChildByName("venus").active=!1,this.step5_question2.getChildByName("base_question").getChildByName("planet_place_holder").getChildByName("saturn").active=!1,this.step5_q2_correctFeedback.active=!1,this.step5_q2_incorrectFeedback1And2.active=!1},e.prototype.setupSceneForStep6=function(){this.disableAllExceptThis(this.step7_question3),this.step7_q3_correctFeedback.active=!1,this.step7_q3_incorrectFeedback1And2.active=!1,this.step7_question3.getChildByName("base_question").getChildByName("planet_place_holder").getChildByName("earth").active=!1,this.step7_question3.getChildByName("base_question").getChildByName("planet_place_holder").getChildByName("mars").active=!1,this.step7_question3.getChildByName("base_question").getChildByName("planet_place_holder").getChildByName("pluto").active=!1},e.prototype.giveFeedbackForQestion2=function(t){t.isCorrect?this.step5_q2_correctFeedback.active=!0:"saturn"==t.answer?this.scheduleOnce(function(){this.step5_q2_incorrectFeedback1And2.active=!0,this.step5_q2_incorrectFeedback1And2.getComponent(cc.Animation).setCurrentTime(0),this.step5_q2_incorrectFeedback1And2.getComponent(cc.Animation).play("step5_question2_incorrectFeedback1")}.bind(this),5):this.scheduleOnce(function(){this.step5_q2_incorrectFeedback1And2.active=!0,this.step5_q2_incorrectFeedback1And2.getComponent(cc.Animation).setCurrentTime(0),this.step5_q2_incorrectFeedback1And2.getComponent(cc.Animation).play("step5_question2_incorrectFeedback2")}.bind(this),5)},e.prototype.setupSceneForQuestion3=function(){cc.tween(this.step7_options_question3).delay(3).to(1,{position:cc.v2(0,this.optionsShowPos)}).start()},e.prototype.giveFeedbackForQestion3=function(t){t.isCorrect?this.step7_q3_correctFeedback.active=!0:"mars"==t.answer?this.scheduleOnce(function(){this.step7_q3_incorrectFeedback1And2.active=!0,this.step7_q3_incorrectFeedback1And2.getComponent(cc.Animation).setCurrentTime(0),this.step7_q3_incorrectFeedback1And2.getComponent(cc.Animation).play("step7_question2_incorrectFeedback1")}.bind(this),5):this.scheduleOnce(function(){this.step7_q3_incorrectFeedback1And2.active=!0,this.step7_q3_incorrectFeedback1And2.getComponent(cc.Animation).setCurrentTime(0),this.step7_q3_incorrectFeedback1And2.getComponent(cc.Animation).play("step7_question2_incorrectFeedback2")}.bind(this),5)},e.prototype.setupSceneForStep8=function(){this.disableAllExceptThis(this.step9_question4),this.step9_q4_correctFeedback.active=!1,this.step9_q4_incorrectFeedback1.active=!1,this.step9_q4_incorrectFeedback2.active=!1,this.step9_question4.getChildByName("base_question").getChildByName("planet_place_holder").getChildByName("satellite_belt").active=!1,this.step9_question4.getChildByName("base_question").getChildByName("planet_place_holder").getChildByName("asteroid_belt").active=!1,this.step9_question4.getChildByName("base_question").getChildByName("planet_place_holder").getChildByName("comet_belt").active=!1},e.prototype.setupSceneForQuestion4=function(){cc.tween(this.step9_options_question4).delay(3).to(1,{position:cc.v2(0,this.optionsShowPos)}).start()},e.prototype.giveFeedbackForQestion4=function(t){t.isCorrect?this.step9_q4_correctFeedback.active=!0:"satellite_belt"==t.answer?this.scheduleOnce(function(){this.step9_q4_incorrectFeedback1.active=!0}.bind(this),5):this.scheduleOnce(function(){this.step9_q4_incorrectFeedback2.active=!0,this.step9_q4_incorrectFeedback2.getComponent(cc.Animation).play("step9_question4_incorrectFeedback2")}.bind(this),5)},e.prototype.setupSceneForStep10=function(){this.disableAllExceptThis(this.step11_question5),this.step11_q5_incorrectFeedback1.active=!1,this.step11_q5_incorrectFeedback2.active=!1,this.step11_question5.getChildByName("base_question").getChildByName("planet_place_holder").getChildByName("ceres").active=!1,this.step11_question5.getChildByName("base_question").getChildByName("planet_place_holder").getChildByName("uranus").active=!1,this.step11_question5.getChildByName("base_question").getChildByName("planet_place_holder").getChildByName("jupiter").active=!1},e.prototype.setupSceneForQuestion5=function(){cc.tween(this.step11_options_question5).delay(3).to(1,{position:cc.v2(0,this.optionsShowPos)}).start()},e.prototype.giveFeedbackForQestion5=function(t){t.isCorrect||("ceres"==t.answer?this.scheduleOnce(function(){this.step11_q5_incorrectFeedback1.active=!0}.bind(this),5):this.scheduleOnce(function(){this.step11_q5_incorrectFeedback2.active=!0,this.step11_q5_incorrectFeedback2.getComponent(cc.Animation).play("step11_question5_incorrectFeedback1")}.bind(this),5))},e.prototype.setupSceneForStep12=function(){this.disableAllExceptThis(this.step13_question6),this.step13_q6_incorrectFeedback1.active=!1,this.step13_q6_incorrectFeedback2.active=!1,this.step13_question6.getChildByName("base_question").getChildByName("planet_place_holder").getChildByName("ganymede").active=!1,this.step13_question6.getChildByName("base_question").getChildByName("planet_place_holder").getChildByName("neptune").active=!1,this.step13_question6.getChildByName("base_question").getChildByName("planet_place_holder").getChildByName("eris").active=!1},e.prototype.setupSceneForQuestion6=function(){cc.tween(this.step13_options_question6).delay(3).to(1,{position:cc.v2(0,this.optionsShowPos)}).start()},e.prototype.giveFeedbackForQestion6=function(t){t.isCorrect?this.step13_q6_correctFeedback.active=!0:"ganymede"==t.answer?this.scheduleOnce(function(){this.step13_q6_incorrectFeedback1.active=!0}.bind(this),5):this.scheduleOnce(function(){this.step13_q6_incorrectFeedback2.active=!0}.bind(this),5)},e.prototype.setupSceneForStep14=function(){this.disableAllExceptThis(this.step14)},e.prototype.disableAllExceptThis=function(t){this.step1.active=!1,this.step3_question1.active=!1,this.step5_question2.active=!1,this.step7_question3.active=!1,this.step9_question4.active=!1,this.step11_question5.active=!1,this.step13_question6.active=!1,this.step14.active=!1,t.active=!0},n([l(cc.Node)],e.prototype,"canvas",void 0),n([l({type:cc.AudioClip})],e.prototype,"clip_bgMusic1",void 0),n([l(cc.Node)],e.prototype,"step1",void 0),n([l(cc.Node)],e.prototype,"step3_question1",void 0),n([l(cc.Node)],e.prototype,"options_question1",void 0),n([l(cc.Node)],e.prototype,"step3_q1_incorrectFeedback1",void 0),n([l(cc.Node)],e.prototype,"step3_q1_incorrectFeedback2",void 0),n([l(cc.Node)],e.prototype,"step3_q1_correctFeedback",void 0),n([l(cc.Node)],e.prototype,"step5_question2",void 0),n([l(cc.Node)],e.prototype,"step5_options_question2",void 0),n([l(cc.Node)],e.prototype,"step5_q2_incorrectFeedback1And2",void 0),n([l(cc.Node)],e.prototype,"step5_q2_correctFeedback",void 0),n([l(cc.Node)],e.prototype,"step7_question3",void 0),n([l(cc.Node)],e.prototype,"step7_options_question3",void 0),n([l(cc.Node)],e.prototype,"step7_q3_incorrectFeedback1And2",void 0),n([l(cc.Node)],e.prototype,"step7_q3_correctFeedback",void 0),n([l(cc.Node)],e.prototype,"step9_question4",void 0),n([l(cc.Node)],e.prototype,"step9_options_question4",void 0),n([l(cc.Node)],e.prototype,"step9_q4_incorrectFeedback1",void 0),n([l(cc.Node)],e.prototype,"step9_q4_incorrectFeedback2",void 0),n([l(cc.Node)],e.prototype,"step9_q4_correctFeedback",void 0),n([l(cc.Node)],e.prototype,"step11_question5",void 0),n([l(cc.Node)],e.prototype,"step11_options_question5",void 0),n([l(cc.Node)],e.prototype,"step11_q5_incorrectFeedback1",void 0),n([l(cc.Node)],e.prototype,"step11_q5_incorrectFeedback2",void 0),n([l(cc.Node)],e.prototype,"step13_question6",void 0),n([l(cc.Node)],e.prototype,"step13_options_question6",void 0),n([l(cc.Node)],e.prototype,"step13_q6_incorrectFeedback1",void 0),n([l(cc.Node)],e.prototype,"step13_q6_incorrectFeedback2",void 0),n([l(cc.Node)],e.prototype,"step13_q6_correctFeedback",void 0),n([l(cc.Node)],e.prototype,"step14",void 0),e=n([p],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../../framework/scripts/AudioManager":"AudioManager","../../../../framework/scripts/StepsController":"StepsController","../../../../framework/scripts/UIManager":"UIManager"}],AnalyticsManager:[function(t,e,o){"use strict";cc._RF.push(e,"04e7cfZT65MwI+flELMmdRE","AnalyticsManager");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=(s.property,function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.Phylum=cc.Enum({Click:"click",View:"view",Auto:"auto"}),t}return i(o,e),o.prototype.onLoad=function(){this.bridge=t("dsbridge"),this.bridgeIntegration=this.node.getComponent("BridgeIntegration")},o.prototype.sendInteractionStart=function(){this.bridge.call("byjus.sendExploreAnalyticsEvent",{m_priority:"high",u_event_id:"5000002",kingdom:"explore",phylum:"view",counter:"",value1:"",value2:""})},o.prototype.sendInteractionEnd=function(){console.log("!!!!!!!!!!!!! Analytics 5000003: Game End");this.bridge.call("byjus.sendExploreAnalyticsEvent",{m_priority:"high",u_event_id:"5000003",kingdom:"explore",phylum:"view",counter:"",value1:"",value2:""})},o.prototype.sendNextQuestionStart=function(t,e,o){void 0===o&&(o=this.Phylum.Click),console.log("!!!!!!!!!!!!! Analytics 5000007: phylum "+o+" : questionID = "+t+" : isLastLevel "+e);var i={m_priority:"high",u_event_id:"5000007",kingdom:"explore",phylum:o,counter:"",value1:t,value2:e?2:1};this.bridge.call("byjus.sendExploreAnalyticsEvent",i),console.log("!!!!!!!!!!!!! Analytics 5000007: ",JSON.stringify(i))},o.prototype.sendAnswerTap=function(t,e,o){console.log("!!!!!!!!!!!!!Analytics 5000006: questionID "+t+" : AnswerID = "+e+" : isanswer correct "+o);var i={m_priority:"high",u_event_id:"5000006",kingdom:"explore",phylum:"click",counter:"boolean"==typeof o?o?"correct":"incorrect":o,value1:t,value2:e};this.bridge.call("byjus.sendExploreAnalyticsEvent",i),console.log("Analytics 5000006: ",JSON.stringify(i))},o.prototype.sendOnOptionDrop=function(t,e,o){console.log("!!!!!!!!!!!!!Analytics 5000005: questionID "+t+" : AnswerID = "+e+" : isanswer correct "+o);var i={m_priority:"high",u_event_id:"5000005",kingdom:"explore",phylum:"drop",counter:"boolean"==typeof o?o?"correct":"incorrect":o,value1:t,value2:e};this.bridge.call("byjus.sendExploreAnalyticsEvent",i),console.log("Analytics 5000005: ",JSON.stringify(i))},o.prototype.sendOnOptionDrag=function(t,e,o){console.log("!!!!!!!!!!!!!Analytics 5000004: questionID "+t+" : AnswerID = "+e+" : isanswer correct "+o);var i={m_priority:"high",u_event_id:"5000004",kingdom:"explore",phylum:"drag",counter:"boolean"==typeof o?o?"correct":"incorrect":o,value1:t,value2:e};this.bridge.call("byjus.sendExploreAnalyticsEvent",i),console.log("Analytics 5000004: ",JSON.stringify(i))},o.prototype.sendOnTryAgain=function(t,e,o){void 0===e&&(e=""),void 0===o&&(o=this.Phylum.Click),console.log("!!!!!!!!!!!!!Analytics 5000008: questionID "+t+" : AnswerID = "+e);var i={m_priority:"high",u_event_id:"5000008",kingdom:"explore",phylum:o,counter:"",value1:t,value2:e};this.bridge.call("byjus.sendExploreAnalyticsEvent",i),console.log("Analytics 5000008: ",JSON.stringify(i))},o.prototype.sendSubmitAnswers=function(t,e,o){void 0===o&&(o="click"),console.log("!!!!!!!!!!!!!Analytics 5000013: questionID "+t+" : phylum = "+o+" : isanswer correct "+e);var i={m_priority:"high",u_event_id:"5000013",kingdom:"explore",phylum:o,counter:e?"correct":"incorrect",value1:t};this.bridge.call("byjus.sendExploreAnalyticsEvent",i),console.log("Analytics 5000013: ",JSON.stringify(i))},o.prototype.sendCloseButtonClick=function(t){console.log("!!!!!!!!!!!!!Analytics 500009: QuestionID "+t);var e={m_priority:"low",u_event_id:"5000009",kingdom:"explore",phylum:"click",counter:"",value1:t,value2:""};this.bridge.call("byjus.sendExploreAnalyticsEvent",e),console.log("Analytics 5000009: ",JSON.stringify(e))},o.prototype.sendOnPlayAgainButtonClick=function(t){console.log("!!!!!!!!!!!!!Analytics 500010: QuestionID "+t);var e={m_priority:"low",u_event_id:"5000010",kingdom:"explore",phylum:"click",counter:"",value1:t,value2:""};this.bridge.call("byjus.sendExploreAnalyticsEvent",e),console.log("Analytics 5000010: ",JSON.stringify(e))},o.prototype.sendOnScrollWheelChange=function(t,e,o){console.log("!!!!!!!!!!!!!Analytics 5000014: questionID "+t+" : AnswerID = "+o);var i={m_priority:"high",u_event_id:"5000014",kingdom:"explore",phylum:"click",counter:e,value1:t,value2:o};this.bridge.call("byjus.sendExploreAnalyticsEvent",i),console.log("Analytics 5000014: ",JSON.stringify(i))},o.prototype.sendOnHintButtonClick=function(t,e){void 0===e&&(e=null),console.log("!!!!!!!!!!!!!Analytics 500017: QuestionID "+t);var o={};o=null===e?{m_priority:"high",u_event_id:"5000017",kingdom:"explore",phylum:"click",counter:"click_hint",value1:t}:{m_priority:"high",u_event_id:"5000017",kingdom:"explore",phylum:"click",counter:"click_hint",value1:t,value2:e},this.bridge.call("byjus.sendExploreAnalyticsEvent",o),console.log("Analytics 5000017: ",JSON.stringify(o))},o.prototype.sendOnHintView=function(t,e){void 0===e&&(e=null),console.log("!!!!!!!!!!!!!Analytics 500019: QuestionID "+t);var o={};o=null===e?{m_priority:"high",u_event_id:"5000019",kingdom:"explore",phylum:"view",counter:"hint_viewed",value1:t}:{m_priority:"high",u_event_id:"5000019",kingdom:"explore",phylum:"view",counter:"hint_viewed",value1:t,value2:e},this.bridge.call("byjus.sendExploreAnalyticsEvent",o),console.log("Analytics 5000019: ",JSON.stringify(o))},o.prototype.sendOnOptionsSelect=function(t,e,o){console.log("!!!!!!!!!!!!!Analytics 5000012: questionID "+t+" : AnswerID = "+o+" :counter "+e);var i={m_priority:"high",u_event_id:"5000012",kingdom:"explore",phylum:"click",counter:e,value1:t,value2:o};this.bridge.call("byjus.sendExploreAnalyticsEvent",i),console.log("Analytics 5000012: ",JSON.stringify(i))},o.prototype.sendOnLevelStart=function(t){console.log("!!!!!!!!!!!!!Analytics 5000020: questionID "+t);var e={m_priority:"high",u_event_id:"5000020",kingdom:"explore",phylum:"trigger",value1:t};this.bridge.call("byjus.sendExploreAnalyticsEvent",e),console.log("Analytics 5000020: ",JSON.stringify(e))},o.prototype.sendOnLevelEnd=function(t){console.log("!!!!!!!!!!!!!Analytics 5000021: questionID "+t);var e={m_priority:"high",u_event_id:"5000021",kingdom:"explore",phylum:"trigger",value1:t};this.bridge.call("byjus.sendExploreAnalyticsEvent",e),console.log("Analytics 5000021: ",JSON.stringify(e))},o.prototype.sendOnGenericButtonClick=function(t,e){console.log("!!!!!!!!!!!!!Analytics 5000022: questionID "+t);var o={m_priority:"high",u_event_id:"5000022",kingdom:"explore",phylum:"trigger",counter:e,value1:t};this.bridge.call("byjus.sendExploreAnalyticsEvent",o),console.log("Analytics 5000022: ",JSON.stringify(o))},o.prototype.sendOnViewTutorial=function(t){console.log("!!!!!!!!!!!!!Analytics 5000018: questionID "+t);var e={m_priority:"high",u_event_id:"5000018",kingdom:"explore",phylum:"view",counter:"view_tutorial",value1:t};this.bridge.call("byjus.sendExploreAnalyticsEvent",e),console.log("Analytics 5000018: ",JSON.stringify(e))},o=n([r],o)}(cc.Component));o.default=a,cc._RF.pop()},{dsbridge:"dsbridge"}],AudioManager:[function(t,e,o){"use strict";cc._RF.push(e,"755c8leyPNJpomnapfEEXXk","AudioManager");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.audio=null,e}return i(e,t),e.prototype.onLoad=function(){this.audioList=[],this.audio={name:"",id:-1,clip:cc.AudioClip,isLoop:!1,volume:1,durationAtPause:0,isPlayAfterGameResume:!1},this.node.on("OnGamePause",function(){this.onGamePause()}.bind(this)),this.node.on("OnCloseButtonClick",function(){this.onGamePause()}.bind(this)),this.node.on("OnGameResume",function(){this.onGameResume()}.bind(this))},e.prototype.start=function(){},e.prototype.play=function(t,e,o,i,n){void 0===i&&(i="OTH"),void 0===n&&(n=1),"VO"==i&&this.stopVOAudios();var s=cc.audioEngine.play(e,o,n);return this.audio={name:t,id:s,clip:e,isLoop:o,volume:n,durationAtPause:0,isPlayAfterGameResume:!1,type:i},this.audioList.push(this.audio),s},e.prototype.stop=function(t){this.audioList.forEach(function(e){e.name==t&&cc.audioEngine.stop(e.id)})},e.prototype.stopVOAudios=function(){for(var t=0;t<this.audioList.length;t++)cc.audioEngine.getState(this.audioList[t].id)===cc.audioEngine.AudioState.PLAYING&&"VO"===this.audioList[t].type&&cc.audioEngine.stop(this.audioList[t].id)},e.prototype.pause=function(t){this.audioList.forEach(function(e){e.name==t&&cc.audioEngine.pause(e.id)})},e.prototype.stopAll=function(){cc.audioEngine.stopAll()},e.prototype.playAudioByPath=function(t,e){void 0===e&&(e="VO"),cc.loader.loadRes(t,cc.AudioClip,function(t,o){t?cc.warn(t.message||t):this.play(o.name,o,!1,e)}.bind(this))},e.prototype.onGamePause=function(){var t=0;for(t=0;t<this.audioList.length;t++)cc.audioEngine.getState(this.audioList[t].id)===cc.audioEngine.AudioState.PLAYING&&(this.audioList[t].durationAtPause=cc.audioEngine.getCurrentTime(this.audioList[t].id),this.audioList[t].isPlayAfterGameResume=!0,cc.audioEngine.stop(this.audioList[t].id))},e.prototype.onGameResume=function(){var t=0;for(t=0;t<this.audioList.length;t++)this.audioList[t].isPlayAfterGameResume&&(this.audioList[t].id=cc.audioEngine.play(this.audioList[t].clip,this.audioList[t].isLoop,this.audioList[t].volume),this.audioList[t].isPlayAfterGameResume=!1,cc.audioEngine.setCurrentTime(this.audioList[t].id,this.audioList[t].durationAtPause))},e=n([r],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],BridgeIntegration:[function(t,e,o){"use strict";cc._RF.push(e,"7d5fc33lcpH1pkGDiZqqxZJ","BridgeIntegration"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.bridge=t("dsbridge"),this.node.on("OnJsonLoadComplete",this.onJosnLoadComplete.bind(this)),this.isCloseButtonClicked=!1,this.bridge.call("byjus.sendExploreUIEvent",{tag:"init",data:""}),this.bridge.register("init",function(t){return 1}.bind(this)),this.bridge.register("appEvent",function(t){"start"==t&&this.node.emit("OnStart"),"resume"==t&&(console.log("BridgeIntegration resume event received. Ispaused ",cc.game.isPaused()),this.node.emit("OnGameResume"),this.isCloseButtonClicked&&(this.isCloseButtonClicked=!1,cc.game.resume(),this.node.emit("OnGameResume"))),"pause"==t&&(console.log("BridgeIntegration pause event received. Ispaused ",cc.game.isPaused()),this.node.emit("OnGamePause"),this.isCloseButtonClicked&&cc.game.pause())}.bind(this)),cc.game.on(cc.game.EVENT_HIDE,function(){}.bind(this)),cc.game.on(cc.game.EVENT_SHOW,function(){}.bind(this)),cc.loader.loadRes("common/audio/button_click",cc.AudioClip,function(t,e){t?cc.error(t.message||t):this.clipButtonTap=e}.bind(this))},start:function(){},onCloseButtonClick:function(){this.isCloseButtonClicked||(console.log("Close button clicked"),cc.audioEngine.play(this.clipButtonTap,!1,1),this.node.emit("OnCloseButtonClick"),this.isCloseButtonClicked=!0)},onGameFinish:function(){this.bridge.call("byjus.sendExploreUIEvent",{tag:"finish",data:""})},onJosnLoadComplete:function(t){var e={};e.gameid="com.explore."+t.gameID,e.gamestatus="in game",e.totalgametime_secs=0,e.interactions={},e.currentInteractionTime=0,console.log("----------- payload data ",JSON.stringify(e)),this.bridge.call("byjus.sendExploreUIEvent",{tag:"ready",data:JSON.stringify(e)}),console.log("********* on json comple called in bridge integration  "+t.gameID)}}),cc._RF.pop()},{dsbridge:"dsbridge"}],CustomPositioningUI:[function(t,e,o){"use strict";cc._RF.push(e,"5f5f7vkV8lBN6ImmFKFBcjJ","CustomPositioningUI");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=s.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.isLeftCornered=!0,e.isRightCornered=!1,e}return i(e,t),e.prototype.start=function(){this.isLeftCornered?this.positionAtLeftCorner():this.positionAtRightCorner()},e.prototype.positionAtLeftCorner=function(){var t=this.node.getPosition();t.x=-this.canvas.getContentSize().width/2+this.node.width/2-cc.view.getViewportRect().x*this.canvas.getContentSize().width/cc.view.getViewportRect().width+20,t.y=this.canvas.getContentSize().height/2-this.node.height/2+cc.view.getViewportRect().y*this.canvas.getContentSize().height/cc.view.getViewportRect().height-20,this.node.setPosition(t)},e.prototype.positionAtRightCorner=function(){var t=this.node.getPosition();t.x=this.canvas.getContentSize().width/2-this.node.width/2+cc.view.getViewportRect().x*this.canvas.getContentSize().width/cc.view.getViewportRect().width-20,t.y=this.canvas.getContentSize().height/2-this.node.height/2+cc.view.getViewportRect().y*this.canvas.getContentSize().height/cc.view.getViewportRect().height-20,console.log("Position is "+t),this.node.setPosition(t)},n([a(cc.Node)],e.prototype,"canvas",void 0),n([a],e.prototype,"isLeftCornered",void 0),n([a],e.prototype,"isRightCornered",void 0),e=n([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],Drag_Drop:[function(t,e,o){"use strict";cc._RF.push(e,"6288a54rxpDMbwkuT0tHWiW","Drag_Drop");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=s.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dropPlace=[],e.startPos=null,e.eventReceiverNode=null,e.placeHolderObject=[],e.currentDraggingObject=null,e.filledDropPlaces=[],e}return i(e,t),e.prototype.start=function(){this.startPos=new cc.Vec2(this.node.position.x,this.node.position.y),this.eventReceiverNode.on("OnOptionDraggingStarted",function(t){this.currentDraggingObject=t.dragObject}.bind(this)),this.eventReceiverNode.on("OnOptionDraggingEnded",function(t){this.currentDraggingObject=t}.bind(this)),this.eventReceiverNode.on("OnOptionDropped",function(t){this.filledDropPlaces.push(t.dropPlace)}.bind(this)),this.eventReceiverNode.on("OnDragDropReset",this.reset.bind(this)),this.node.on(cc.Node.EventType.TOUCH_START,function(t){if(null==this.currentDraggingObject||""==this.currentDraggingObject){var e={};e.dragObject=this.node.name,this.eventReceiverNode.emit("OnOptionDraggingStarted",e)}}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){if(this.currentDraggingObject==this.node.name){var e=t.touch.getDelta();this.node.x+=e.x,this.node.y+=e.y}}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_END,function(t){if(this.currentDraggingObject==this.node.name){this.eventReceiverNode.emit("OnOptionDraggingEnded","");for(var e=!1,o=0;o<this.dropPlace.length;o++){var i=this.node.parent.convertToWorldSpaceAR(this.node.position),n=this.dropPlace[o].convertToNodeSpaceAR(i);if(cc.Intersection.pointInPolygon(new cc.Vec2(n.x,n.y),this.dropPlace[o].getComponent(cc.PolygonCollider).world.points)&&!this.filledDropPlaces.includes(this.dropPlace[o].name)){this.placeHolderObject[o].active=!0,this.node.active=!1;var s={};s.dragObject=this.node.name,s.dropPlace=this.dropPlace[o].name,this.eventReceiverNode.emit("OnOptionDropped",s),this.node.position=this.startPos,e=!0}}e||this.node.runAction(cc.moveTo(.3,this.startPos))}}.bind(this))},e.prototype.reset=function(){this.filledDropPlaces=[]},n([a({type:cc.Node})],e.prototype,"dropPlace",void 0),n([a(cc.Node)],e.prototype,"eventReceiverNode",void 0),n([a(cc.Node)],e.prototype,"placeHolderObject",void 0),e=n([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],EXPL04MAT13E01_dragNdrop:[function(t,e,o){"use strict";cc._RF.push(e,"90315rYRPdCraXIm268Y5/V","EXPL04MAT13E01_dragNdrop");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=s.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bg=null,e.dropPlace=null,e.startPos=null,e.gameNode=null,e.placeHolderObject=null,e.isAnotherOptionDragging=!1,e.currentDraggingObject=null,e}return i(e,t),e.prototype.start=function(){this.startPos=new cc.Vec2(this.node.position.x,this.node.position.y),this.gameNode.on("OnOptionDraggingStarted",function(t){this.currentDraggingObject=t}.bind(this)),this.gameNode.on("OnOptionDraggingEnded",function(t){this.currentDraggingObject=t}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_START,function(t){console.log("touch_start = ",this.node.name),null!=this.currentDraggingObject&&""!=this.currentDraggingObject||(this.gameNode.emit("OnOptionDraggingStarted",this.node.name),this.bg.runAction(cc.fadeTo(.25,120)))}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){if(this.currentDraggingObject==this.node.name){var e=t.getLocation(),o=this.node.parent.convertToNodeSpaceAR(e);this.node.setPosition(o)}}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_END,function(t){this.gameNode.emit("OnOptionDraggingEnded","");var e=this.node.parent.convertToWorldSpaceAR(this.node.position),o=this.dropPlace.convertToNodeSpaceAR(e);cc.Intersection.pointInPolygon(new cc.Vec2(o.x,o.y),this.dropPlace.getComponent(cc.PolygonCollider).world.points)?(console.log("Dropped inside dropzone"),this.placeHolderObject.active=!0,this.node.active=!1,this.gameNode.emit("OnOptionDropped",this.node.name),this.bg.runAction(cc.fadeIn(.25)),this.node.position=this.startPos,this.hideOptions(this.node.parent)):(this.node.runAction(cc.moveTo(.3,this.startPos)),this.bg.runAction(cc.fadeIn(.2)))}.bind(this))},e.prototype.hideOptions=function(t){var e=this;cc.tween(t).to(.5,{position:cc.v2(0,-600)}).call(function(){e.node.active=!0}).start()},n([a(cc.Node)],e.prototype,"bg",void 0),n([a(cc.Node)],e.prototype,"dropPlace",void 0),n([a(cc.Node)],e.prototype,"gameNode",void 0),n([a(cc.Node)],e.prototype,"placeHolderObject",void 0),e=n([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],EXPL04MAT13E01_patterns1:[function(t,e,o){"use strict";cc._RF.push(e,"70ee6OlxHJJVai/J73lbUHa","EXPL04MAT13E01_patterns1");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/AudioManager"),r=t("../../../../framework/scripts/StepsController"),a=t("../../../../framework/scripts/UIManager"),c=cc._decorator,p=c.ccclass,l=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.bgm=null,e.firstBGM=null,e.patternShow=null,e.correctResponse=null,e.doorOpening=null,e.wrongResponse=null,e.doorNotOpening=null,e.step1=null,e.step2=null,e.step3=null,e.step4=null,e.step4_diamond_options=null,e.step5=null,e.step6=null,e.step7=null,e.step7_shapes_options=null,e.step8=null,e.step9=null,e.step10=null,e.step10_shapes_options=null,e.step11=null,e.step12=null,e.step13=null,e.step13_shapes_options=null,e.step14=null,e}return i(e,t),e.prototype.onLoad=function(){this.stepsController=this.canvas.getComponent(r.default),this.uiManager=this.canvas.getComponent(a.default),this.audioManager=this.canvas.getComponent(s.default),this.canvas.on("OnLoadStep",this.stepsHandler.bind(this)),this.canvas.on("OnCommonButtonClick",this.onCommonButtonClick.bind(this)),this.canvas.on("OnAnswerVerification",this.onAnswerVerification.bind(this)),this.node.on("OnOptionDropped",this.onOptionDropped.bind(this)),this.node.on("OnOptionDraggingStarted",this.onOptionDragStartd.bind(this))},e.prototype.start=function(){this.stepsController.Initialise("EXPL04MAT13E01_patterns1/EXPL04MAT13E01_patterns1"),this.disableAllExceptThis(this.step1),this.audioManager.play("firstBGM",this.firstBGM,!1),this.scheduleOnce(function(){this.audioManager.play("bgm",this.bgm,!0)}.bind(this),4)},e.prototype.onCommonButtonClick=function(t){this.uiManager.CommonButtonType.NextQuestion==t?this.stepsController.loadNextStep():this.uiManager.CommonButtonType.TryAgain==t&&this.resetAfterTryAgain()},e.prototype.resetAfterTryAgain=function(){switch(this.stepsController.getCurrentStep()){case 4:case 7:case 10:case 13:this.stepsController.loadNextStep(this.stepsController.getCurrentStep())}},e.prototype.stepsHandler=function(t){switch(console.log("Steps handler. Next step is "+t),t){case 1:break;case 2:this.setupSceneforStep2();break;case 3:this.setupSceneforStep3();break;case 4:this.setupSceneforStep4();break;case 5:this.setupSceneforStep5();break;case 6:this.setupSceneforStep6();break;case 7:this.setupSceneforStep7();break;case 8:this.setupSceneforStep8();break;case 9:this.setupSceneforStep9();break;case 10:this.setupSceneforStep10();break;case 11:this.setupSceneforStep11();break;case 12:this.setupSceneforStep12();break;case 13:this.setupSceneforStep13();break;case 14:this.setupSceneforStep14()}},e.prototype.onOptionDragStartd=function(t){this.stepsController.onOptionDragStarted({optionName:t})},e.prototype.onOptionDropped=function(t){console.log("step = ",this.stepsController.getCurrentStep(),", ondrop = ",t),this.stepsController.onOptionDropped({optionName:t})},e.prototype.onAnswerVerification=function(t){switch(console.log("Answer submitted "+t.isCorrect),this.stepsController.getCurrentStep()){case 4:this.giveFeedbackForQestion1(t);break;case 7:this.giveFeedbackForQestion2(t);break;case 10:this.giveFeedbackForQestion3(t);break;case 13:this.giveFeedbackForQestion4(t)}},e.prototype.giveFeedbackForQestion1=function(t){t.isCorrect?(this.audioManager.play("correctResponse",this.correctResponse,!1),this.step4.getComponent(cc.Animation).play()):(this.audioManager.play("wrongResponse",this.wrongResponse,!1),this.audioManager.play("doorNotOpening",this.doorNotOpening,!1))},e.prototype.giveFeedbackForQestion2=function(t){t.isCorrect?(this.audioManager.play("correctResponse",this.correctResponse,!1),this.step7.getComponent(cc.Animation).play()):(this.audioManager.play("wrongResponse",this.wrongResponse,!1),this.audioManager.play("doorNotOpening",this.doorNotOpening,!1))},e.prototype.giveFeedbackForQestion3=function(t){t.isCorrect?(this.audioManager.play("correctResponse",this.correctResponse,!1),this.step10.getComponent(cc.Animation).play()):(this.audioManager.play("wrongResponse",this.wrongResponse,!1),this.audioManager.play("doorNotOpening",this.doorNotOpening,!1))},e.prototype.giveFeedbackForQestion4=function(t){t.isCorrect?(this.audioManager.play("correctResponse",this.correctResponse,!1),this.step13.getComponent(cc.Animation).play()):(this.audioManager.play("wrongResponse",this.wrongResponse,!1),this.audioManager.play("doorNotOpening",this.doorNotOpening,!1))},e.prototype.setupSceneforStep2=function(){this.disableAllExceptThis(this.step2),this.step2.getChildByName("diamonds_options_slots").getComponent(cc.Animation).play(),this.audioManager.play("patternShow",this.patternShow,!1)},e.prototype.setupSceneforStep3=function(){this.disableAllExceptThis(this.step3)},e.prototype.setupSceneforStep4=function(){this.disableAllExceptThis(this.step4),this.step4.getChildByName("dropzone").children.forEach(function(t){t.active=!1}),this.step4_diamond_options.runAction(cc.moveBy(1.5,cc.v2(0,350)))},e.prototype.setupSceneforStep5=function(){this.disableAllExceptThis(this.step5),this.step5.getComponent(cc.Animation).play(),this.audioManager.play("doorOpening",this.doorOpening,!1)},e.prototype.setupSceneforStep6=function(){this.disableAllExceptThis(this.step6),this.step6.getChildByName("shapes_options_slots").getComponent(cc.Animation).play(),this.audioManager.play("patternShow",this.patternShow,!1)},e.prototype.setupSceneforStep7=function(){this.disableAllExceptThis(this.step7),this.step7.getChildByName("dropzone").children.forEach(function(t){t.active=!1}),this.step7_shapes_options.runAction(cc.moveBy(1.5,cc.v2(0,350)))},e.prototype.setupSceneforStep8=function(){this.disableAllExceptThis(this.step8),this.step8.getComponent(cc.Animation).play(),this.audioManager.play("doorOpening",this.doorOpening,!1)},e.prototype.setupSceneforStep9=function(){this.disableAllExceptThis(this.step9),this.step9.getChildByName("shapes_options_slots").getComponent(cc.Animation).play(),this.audioManager.play("patternShow",this.patternShow,!1)},e.prototype.setupSceneforStep10=function(){this.disableAllExceptThis(this.step10),this.step10.getChildByName("dropzone").children.forEach(function(t){t.active=!1}),this.step10_shapes_options.runAction(cc.moveBy(1.5,cc.v2(0,350)))},e.prototype.setupSceneforStep11=function(){this.disableAllExceptThis(this.step11),this.step11.getComponent(cc.Animation).play(),this.audioManager.play("doorOpening",this.doorOpening,!1)},e.prototype.setupSceneforStep12=function(){this.disableAllExceptThis(this.step12),this.step12.getChildByName("shapes_options_slots").getComponent(cc.Animation).play(),this.audioManager.play("patternShow",this.patternShow,!1)},e.prototype.setupSceneforStep13=function(){this.disableAllExceptThis(this.step13),this.step13.getChildByName("dropzone").children.forEach(function(t){t.active=!1}),this.step13_shapes_options.runAction(cc.moveBy(1.5,cc.v2(0,350)))},e.prototype.setupSceneforStep14=function(){this.disableAllExceptThis(this.step14),this.step14.getComponent(cc.Animation).play(),this.audioManager.play("doorOpening",this.doorOpening,!1)},e.prototype.disableAllExceptThis=function(t){this.step1.active=!1,this.step2.active=!1,this.step3.active=!1,this.step4.active=!1,this.step5.active=!1,this.step6.active=!1,this.step7.active=!1,this.step8.active=!1,this.step9.active=!1,this.step10.active=!1,this.step11.active=!1,this.step12.active=!1,this.step13.active=!1,this.step14.active=!1,t.active=!0},n([l(cc.Node)],e.prototype,"canvas",void 0),n([l({type:cc.AudioClip})],e.prototype,"bgm",void 0),n([l({type:cc.AudioClip})],e.prototype,"firstBGM",void 0),n([l({type:cc.AudioClip})],e.prototype,"patternShow",void 0),n([l({type:cc.AudioClip})],e.prototype,"correctResponse",void 0),n([l({type:cc.AudioClip})],e.prototype,"doorOpening",void 0),n([l({type:cc.AudioClip})],e.prototype,"wrongResponse",void 0),n([l({type:cc.AudioClip})],e.prototype,"doorNotOpening",void 0),n([l(cc.Node)],e.prototype,"step1",void 0),n([l(cc.Node)],e.prototype,"step2",void 0),n([l(cc.Node)],e.prototype,"step3",void 0),n([l(cc.Node)],e.prototype,"step4",void 0),n([l(cc.Node)],e.prototype,"step4_diamond_options",void 0),n([l(cc.Node)],e.prototype,"step5",void 0),n([l(cc.Node)],e.prototype,"step6",void 0),n([l(cc.Node)],e.prototype,"step7",void 0),n([l(cc.Node)],e.prototype,"step7_shapes_options",void 0),n([l(cc.Node)],e.prototype,"step8",void 0),n([l(cc.Node)],e.prototype,"step9",void 0),n([l(cc.Node)],e.prototype,"step10",void 0),n([l(cc.Node)],e.prototype,"step10_shapes_options",void 0),n([l(cc.Node)],e.prototype,"step11",void 0),n([l(cc.Node)],e.prototype,"step12",void 0),n([l(cc.Node)],e.prototype,"step13",void 0),n([l(cc.Node)],e.prototype,"step13_shapes_options",void 0),n([l(cc.Node)],e.prototype,"step14",void 0),e=n([p],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../../framework/scripts/AudioManager":"AudioManager","../../../../framework/scripts/StepsController":"StepsController","../../../../framework/scripts/UIManager":"UIManager"}],EXPL04SCI09E01_magnets:[function(t,e,o){"use strict";cc._RF.push(e,"7c0f8siF+hPW7kVWm1Ber+E","EXPL04SCI09E01_magnets");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/AudioManager"),r=t("../../../../framework/scripts/StepsController"),a=t("../../../../framework/scripts/UIManager"),c=cc._decorator,p=c.ccclass,l=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e}return i(e,t),e.prototype.onLoad=function(){this.scr_stepsController=this.canvas.getComponent(r.default),this.scr_uiManager=this.canvas.getComponent(a.default),this.scr_audioManager=this.canvas.getComponent(s.default),this.canvas.on("OnLoadStep",this.stepsHandler.bind(this)),this.node.on("OnOptionDropped",this.onOptionDropped.bind(this)),this.node.on("OnOptionDraggingStarted",this.onOptionDragStarted.bind(this)),this.unionType=!0,"string"==typeof this.unionType&&console.log("Type of union type is string "),"boolean"==typeof this.unionType&&console.log("Type of union type is boolean ")},e.prototype.start=function(){this.scr_stepsController.Initialise("EXPL04SCI09E01_magnets/EXPL04SCI09E01_magnets")},e.prototype.stepsHandler=function(t){switch(console.log("Steps handler. Next step is "+t),t){case 3:this.scr_stepsController.onOptionDragStarted({optionName:"option1"})}},e.prototype.onOptionDragStarted=function(t){this.scr_stepsController.onOptionDragStarted({optionName:t})},e.prototype.onOptionDropped=function(t){switch(this.scr_stepsController.getCurrentStep()){case 3:this.scr_stepsController.onOptionDropped({optionName:t})}},n([l(cc.Node)],e.prototype,"canvas",void 0),e=n([p],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../../framework/scripts/AudioManager":"AudioManager","../../../../framework/scripts/StepsController":"StepsController","../../../../framework/scripts/UIManager":"UIManager"}],EXPL06SCI01E01_animal_nutrition:[function(t,e,o){"use strict";cc._RF.push(e,"af27eX4gdRJI4jHMF8mSult","EXPL06SCI01E01_animal_nutrition");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/AudioManager"),r=t("../../../../framework/scripts/StepsController"),a=t("../../../../framework/scripts/UIManager"),c=cc._decorator,p=c.ccclass,l=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.feedbackIndeices=[],e.step0=null,e.step1_2=null,e.step3_question1=null,e}return i(e,t),e.prototype.onLoad=function(){this.canvas=cc.find("CommonCanvas"),this.scr_stepsController=this.canvas.getComponent(r.default),this.scr_uiManager=this.canvas.getComponent(a.default),this.scr_audioManager=this.canvas.getComponent(s.default),this.canvas.on("OnLoadStep",this.stepsHandler.bind(this)),this.canvas.on("OnAnswerVerification",this.onAnswerVerification.bind(this)),this.node.on("OnOptionDropped",this.onOptionDropped.bind(this)),this.node.on("OnOptionDraggingStarted",this.onOptionDragStarted.bind(this))},e.prototype.start=function(){this.scr_stepsController.Initialise("EXPL06SCI01E01_animal_nutrition/storyBoard")},e.prototype.stepsHandler=function(t){switch(console.log("Steps handler. Next step is "+t),t){case 1:this.setupSceneForStep1();break;case 3:this.setupSceneForStep3()}},e.prototype.onAnswerVerification=function(t){switch(console.log("Answer submitted "+t.isCorrect),this.scr_stepsController.getCurrentStep()){case 3:this.scr_stepsController.playFeedback(this.feedbackIndeices,t.isCorrect)}},e.prototype.onOptionDragStarted=function(t){console.log("Optioin is drag started ",t),this.scr_stepsController.onOptionDragStarted({optionName:t.dragObject})},e.prototype.onOptionDropped=function(t){switch(console.log("Optioin is dropped ",t),this.scr_stepsController.getCurrentStep()){case 3:this.analyseOptionDropStep3(t)}},e.prototype.setupSceneForStep0=function(){this.disableAllExceptThis(this.step0)},e.prototype.setupSceneForStep1=function(){this.disableAllExceptThis(this.step1_2)},e.prototype.setupSceneForStep3=function(){this.feedbackIndeices=new Array(4),this.disableAllExceptThis(this.step3_question1)},e.prototype.analyseOptionDropStep3=function(t){if("deer"==t.dropPlace?"banana"==t.dragObject||"apple"==t.dragObject?this.feedbackIndeices[0]=0:this.feedbackIndeices[0]=2:"cow"==t.dropPlace?"banana"==t.dragObject||"apple"==t.dragObject?this.feedbackIndeices[1]=0:this.feedbackIndeices[1]=2:"lion"==t.dropPlace?"chicken1"==t.dragObject||"chicken2"==t.dragObject?this.feedbackIndeices[2]=1:this.feedbackIndeices[2]=3:"snake"==t.dropPlace&&("chicken1"==t.dragObject||"chicken2"==t.dragObject?this.feedbackIndeices[3]=1:this.feedbackIndeices[3]=3),this.feedbackIndeices.includes(void 0))this.scr_stepsController.onOptionDropped({optionName:void 0,dropCountInCurrentZone:1,dropZone:void 0,isCorrect:void 0,isDropCompletedInCurrentZone:void 0,totalDropzones:4,optionIndex:void 0});else{var e="correct";e=JSON.stringify(this.feedbackIndeices)==JSON.stringify([0,0,1,1])?"correct":"wrong",console.log("The feedback indeices are ",this.feedbackIndeices),this.scr_stepsController.onOptionDropped({optionName:void 0,dropCountInCurrentZone:1,dropZone:void 0,isCorrect:void 0,isDropCompletedInCurrentZone:void 0,totalDropzones:4,optionIndex:void 0,finalValue:e,isAllDropComplete:!0})}},e.prototype.disableAllExceptThis=function(t){this.step0.active=!1,this.step1_2.active=!1,this.step3_question1.active=!1,t.active=!0},n([l(cc.Node)],e.prototype,"step0",void 0),n([l(cc.Node)],e.prototype,"step1_2",void 0),n([l(cc.Node)],e.prototype,"step3_question1",void 0),e=n([p],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../../framework/scripts/AudioManager":"AudioManager","../../../../framework/scripts/StepsController":"StepsController","../../../../framework/scripts/UIManager":"UIManager"}],EXPL06SCI08E01_Bones:[function(t,e,o){"use strict";cc._RF.push(e,"bb950ib4ptOwYA2luas0OgK","EXPL06SCI08E01_Bones");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/AudioManager"),r=t("../../../../framework/scripts/StepsController"),a=t("../../../../framework/scripts/UIManager"),c=cc._decorator,p=c.ccclass,l=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.aud_bgm=null,e.aud_gramaphone=null,e.aud_skeletonFalling=null,e.aud_dragdrop=null,e.aud_rightdrop=null,e.aud_wrongdrop=null,e.prev_droppedNode=null,e.step7_dropCount=0,e.step10_dropCount=0,e.step11_dropCount=0,e}return i(e,t),e.prototype.onLoad=function(){this.scr_stepsController=this.canvas.getComponent(r.default),this.uiManager=this.canvas.getComponent(a.default),this.audioManager=this.canvas.getComponent(s.default),this.canvas.on("OnLoadStep",this.stepsHandler.bind(this)),this.canvas.on("OnCommonButtonClick",this.onCommonButtonClick.bind(this)),this.canvas.on("OnAnswerVerification",this.onAnswerVerification.bind(this)),this.node.on("OnOptionDropped",this.onOptionDropped.bind(this)),this.node.on("OnOptionDraggingStarted",this.onOptionDragStartd.bind(this)),this.skeleton.getChildByName("body").getComponent(sp.Skeleton).enabled=!1,this.skeleton.active=!1},e.prototype.start=function(){this.scr_stepsController.Initialise("EXPL06SCI08E01_Bones"),this.disableAllExceptThis(this.step012),this.audioManager.play("bgm",this.aud_bgm,!0,"BGM")},e.prototype.onCommonButtonClick=function(t){this.uiManager.CommonButtonType.NextQuestion==t?7==this.scr_stepsController.getCurrentStep()?(this.step7_dropCount<2&&this.step7OptionShow(),2==this.step7_dropCount&&this.scr_stepsController.loadNextStep()):10==this.scr_stepsController.getCurrentStep()?(this.step10_dropCount<2&&this.step10OptionShow(),2==this.step10_dropCount&&this.scr_stepsController.loadNextStep()):this.scr_stepsController.loadNextStep():this.uiManager.CommonButtonType.TryAgain==t&&(7==this.scr_stepsController.getCurrentStep()?this.step7_dropCount<2&&this.step7OptionShow():10==this.scr_stepsController.getCurrentStep()?this.step10_dropCount<2&&this.step10OptionShow():this.resetAfterTryAgain())},e.prototype.resetAfterTryAgain=function(){this.stepsHandler(this.scr_stepsController.getCurrentStep())},e.prototype.stepsHandler=function(t){switch(console.log("Steps handler. Next step is "+t),t){case 0:this.skeleton.getChildByName("body").getComponent(sp.Skeleton).enabled=!0,this.skeleton.active=!0,this.skeleton.getChildByName("body").getComponent(sp.Skeleton).setAnimation(0,"DanceIntro",!1),this.audioManager.play("gramaphone",this.aud_gramaphone,!1,"SFX"),this.scheduleOnce(function(){this.audioManager.play("skeletonfall",this.aud_skeletonFalling,!1),this.scheduleOnce(function(){this.audioManager.stop("gramaphone")}.bind(this),.5)}.bind(this),4.75),this.skeleton.getChildByName("backbonebend").getComponent(sp.Skeleton).enabled=!1,this.skeleton.getChildByName("skull").active=!1,this.step012.getChildByName("gramophone").active=!0,this.step012.getChildByName("gramophone").getComponent(cc.Animation).play();break;case 1:this.step012.getChildByName("gramophone").getComponent(cc.Animation).stop(),this.step012.getChildByName("gramophone").active=!1;break;case 3:this.skeleton.getChildByName("body").getComponent(sp.Skeleton).enabled=!1,this.skeleton.getChildByName("skull").active=!0,this.skeleton.getChildByName("skull").getComponent(sp.Skeleton).setAnimation(0,"Skull_idle",!1),this.setupSceneforStep3();break;case 4:this.skeleton.active=!0,this.skeleton.getChildByName("skull").active=!0,this.skeleton.getChildByName("skull").getComponent(sp.Skeleton).setAnimation(0,"Skull_idle",!1),this.setupSceneforStep4();break;case 5:this.skeleton.active=!0,this.skeleton.getChildByName("skull").active=!0,this.skeleton.getChildByName("skull").getComponent(sp.Skeleton).setAnimation(0,"Skull_idle",!1),this.setupSceneforStep5();break;case 6:this.skeleton.active=!0,this.skeleton.getChildByName("skull").active=!0,this.skeleton.getChildByName("skull").getComponent(sp.Skeleton).setAnimation(0,"Skull_idle",!1),this.setupSceneforStep6();break;case 7:this.step7_dropCount=0,this.skeleton.active=!0,this.skeleton.getChildByName("skull").active=!0,this.skeleton.getChildByName("skull").getComponent(sp.Skeleton).setAnimation(0,"Skull_idle",!1),this.setupSceneforStep7();break;case 8:this.skeleton.active=!0,this.skeleton.getChildByName("skull").active=!0,this.skeleton.getChildByName("skull").getComponent(sp.Skeleton).setAnimation(0,"Skull_idle",!1),this.setupSceneforStep8();break;case 9:this.skeleton.active=!0,this.skeleton.getChildByName("skull").active=!0,this.skeleton.getChildByName("skull").getComponent(sp.Skeleton).setAnimation(0,"Skull_idle",!1),this.setupSceneforStep9();break;case 10:this.step10_dropCount=0,this.skeleton.active=!0,this.skeleton.getChildByName("skull").active=!0,this.skeleton.getChildByName("skull").getComponent(sp.Skeleton).setAnimation(0,"Skull_idle",!1),this.setupSceneforStep10();break;case 11:this.step11_dropCount=0,this.skeleton.active=!0,this.skeleton.getChildByName("skull").active=!0,this.skeleton.getChildByName("skull").getComponent(sp.Skeleton).setAnimation(0,"Skull_idle",!1),this.setupSceneforStep11();break;case 12:this.canvas.emit("OnEndScreenReach",{}),this.uiManager.setActiveCloseButton(!1),this.skeleton.getChildByName("body").getComponent(sp.Skeleton).enabled=!0,this.skeleton.active=!0,this.skeleton.getChildByName("body").getComponent(sp.Skeleton).setAnimation(0,"DanceEnd",!0),this.skeleton.getChildByName("backbonebend").getComponent(sp.Skeleton).enabled=!1,this.skeleton.getChildByName("skull").active=!1}},e.prototype.onOptionDragStartd=function(t){switch(console.log("Paarent is ",t.parent),this.scr_stepsController.getCurrentStep()){case 3:var e=t.parent.getSiblingIndex();this.scr_stepsController.onOptionDragStarted({optionName:t.name,optionIndex:e+1});break;case 4:var o=t.parent.getSiblingIndex();this.scr_stepsController.onOptionDragStarted({optionName:t.name,optionIndex:o+1});break;case 5:var i=t.parent.getSiblingIndex();this.scr_stepsController.onOptionDragStarted({optionName:t.name,optionIndex:i+1});break;case 6:var n=t.parent.getSiblingIndex();this.scr_stepsController.onOptionDragStarted({optionName:t.name,optionIndex:n+1});break;case 7:var s=t.parent.getSiblingIndex();"ulna"==t.name||"radius"==t.name?this.scr_stepsController.onOptionDragStarted({optionName:t.name,optionIndex:s+1,isCorrect:!0}):this.scr_stepsController.onOptionDragStarted({optionName:t.name,optionIndex:s+1,isCorrect:!1});break;case 8:var r=t.parent.getSiblingIndex();this.scr_stepsController.onOptionDragStarted({optionName:t.name,optionIndex:r+1});break;case 9:var a=t.parent.getSiblingIndex();this.scr_stepsController.onOptionDragStarted({optionName:t.name,optionIndex:a+1});break;case 10:var c=t.parent.getSiblingIndex();"tibia"==t.name||"fibula"==t.name?this.scr_stepsController.onOptionDragStarted({optionName:t.name,optionIndex:c+1,isCorrect:!0}):this.scr_stepsController.onOptionDragStarted({optionName:t.name,optionIndex:c+1,isCorrect:!1});break;case 11:var p=t.parent.getSiblingIndex();this.scr_stepsController.onOptionDragStarted({optionName:t.name,optionIndex:p+1})}},e.prototype.onOptionDropped=function(t){this.audioManager.play("dragdrop",this.aud_dragdrop,!1);var e=t.dragObjectNode;switch(console.log("step = ",this.scr_stepsController.getCurrentStep(),", ondrop = ",e.name),this.prev_droppedNode=e,this.scheduleOnce(function(){11!=this.scr_stepsController.getCurrentStep()&&(e.active=!0)}.bind(this),1.5),this.scr_stepsController.getCurrentStep()){case 3:this.scr_stepsController.onOptionDropped({optionName:e.name}),this.HideOptionsAndDropSprite(this.step3);break;case 4:this.scr_stepsController.onOptionDropped({optionName:e.name}),this.HideOptionsAndDropSprite(this.step4);break;case 5:this.scr_stepsController.onOptionDropped({optionName:e.name}),this.HideOptionsAndDropSprite(this.step5);break;case 6:this.scr_stepsController.onOptionDropped({optionName:e.name}),this.HideOptionsAndDropSprite(this.step6);break;case 7:this.HideOptionsAndDropSprite(this.step7),this.onOptionDroppedQuestion4(e);break;case 8:this.scr_stepsController.onOptionDropped({optionName:e.name}),this.HideOptionsAndDropSprite(this.step8);break;case 9:this.scr_stepsController.onOptionDropped({optionName:e.name}),this.HideOptionsAndDropSprite(this.step9);break;case 10:this.HideOptionsAndDropSprite(this.step10),this.onOptionDroppedQuestion6(e);break;case 11:this.onOptionDroppedQuestion7(t)}},e.prototype.onOptionDroppedQuestion4=function(t){var e;"ulna"==t.name&&(this.skullHappy(),this.step7_dropCount++,t.parent.active=!1,this.scr_stepsController.playFeedback([0],!0,!1),(e=this.skeleton.getChildByName("body").getComponent(sp.Skeleton)).enabled=!0,1==this.step7_dropCount?e.setAnimation(0,"05_Ulna",!1):2==this.step7_dropCount&&(e.setAnimation(0,"06_UlnaRadius",!1),this.ShowFlexAnimation("body","ArmFlex",new cc.Vec2(100,-40),!1,!1)),this.step7.getChildByName("dropzone").getComponent(cc.Sprite).spriteFrame=this.dropzone_double_left);"radius"==t.name&&(this.skullHappy(),this.step7_dropCount++,t.parent.active=!1,this.scr_stepsController.playFeedback([1],!0,!1),(e=this.skeleton.getChildByName("body").getComponent(sp.Skeleton)).enabled=!0,1==this.step7_dropCount?e.setAnimation(0,"05_Radius",!1):2==this.step7_dropCount&&(e.setAnimation(0,"06_RadiusUlna",!1),this.ShowFlexAnimation("body","ArmFlex",new cc.Vec2(100,-40),!1,!1)),this.step7.getChildByName("dropzone").getComponent(cc.Sprite).spriteFrame=this.dropzone_double_right);"femur"==t.name&&this.step7WrongFeedback(2),"fibula"==t.name&&this.step7WrongFeedback(3),"pelvicgirdle"==t.name&&this.step7WrongFeedback(4);var o=t.parent.getSiblingIndex();"ulna"==t.name||"radius"==t.name?this.scr_stepsController.onOptionDropped({optionName:t.name,optionIndex:o+1,isCorrect:!0}):this.scr_stepsController.onOptionDropped({optionName:t.name,optionIndex:o+1,isCorrect:!1})},e.prototype.step7OptionShow=function(){this.step7.getChildByName("dropzone").getComponent(cc.Sprite).enabled=!0,this.ShowOptions(this.step7),this.step7.getChildByName("dropzone").children.forEach(function(t){t.active=!1})},e.prototype.step7WrongFeedback=function(t){var e=this;this.scr_stepsController.playFeedback([t],!1,!1),this.skullSad(),this.step7.getChildByName("dropzone").children.forEach(function(t){t.name==e.prev_droppedNode.name&&(t.active=!0,t.getChildByName("highlighter").runAction(cc.sequence(cc.fadeOut(.5),cc.fadeIn(.5)).repeatForever()))})},e.prototype.onOptionDroppedQuestion6=function(t){var e;"fibula"==t.name&&(this.skullHappy(),this.step10_dropCount++,t.parent.active=!1,this.scr_stepsController.playFeedback([0],!0,!1),(e=this.skeleton.getChildByName("body").getComponent(sp.Skeleton)).enabled=!0,1==this.step10_dropCount?e.setAnimation(0,"09_Fibula",!1):2==this.step10_dropCount&&(e.setAnimation(0,"10_FibulaTibia",!1),this.ShowFlexAnimation("legflex","LegFlex",new cc.Vec2(0,200))),this.step10.getChildByName("dropzone").getComponent(cc.Sprite).spriteFrame=this.dropzone_double_left);"tibia"==t.name&&(this.skullHappy(),this.step10_dropCount++,t.parent.active=!1,this.scr_stepsController.playFeedback([0],!0,!1),(e=this.skeleton.getChildByName("body").getComponent(sp.Skeleton)).enabled=!0,1==this.step10_dropCount?e.setAnimation(0,"09_Tibia",!1):2==this.step10_dropCount&&(e.setAnimation(0,"10_TibiaFibula",!1),this.ShowFlexAnimation("legflex","LegFlex",new cc.Vec2(0,200))),this.step10.getChildByName("dropzone").getComponent(cc.Sprite).spriteFrame=this.dropzone_double_right);"bonyfeet"==t.name&&this.step10WrongFeedback(1),"bonyhand"==t.name&&this.step10WrongFeedback(1);var o=t.parent.getSiblingIndex();"tibia"==t.name||"fibula"==t.name?this.scr_stepsController.onOptionDropped({optionName:t.name,optionIndex:o+1,isCorrect:!0}):this.scr_stepsController.onOptionDropped({optionName:t.name,optionIndex:o+1,isCorrect:!1})},e.prototype.step10OptionShow=function(){this.step10.getChildByName("dropzone").getComponent(cc.Sprite).enabled=!0,this.ShowOptions(this.step10),this.step10.getChildByName("dropzone").children.forEach(function(t){t.active=!1})},e.prototype.step10WrongFeedback=function(t){var e=this;this.scr_stepsController.playFeedback([t],!1,!1),this.skullSad(),this.step10.getChildByName("dropzone").children.forEach(function(t){t.name==e.prev_droppedNode.name&&(t.active=!0,t.getChildByName("highlighter").runAction(cc.sequence(cc.fadeOut(.5),cc.fadeIn(.5)).repeatForever()))})},e.prototype.onOptionDroppedQuestion7=function(t){var e=this;console.log("onDropped Q7 ",t);var o,i=!1,n=!1,s=t.dragObject,r=1;r="bonyfeet"==t.dragObject?1:2,o="dropzoneFeet"==t.dropPlace?2:1;var a="0";if("bonyfeet"==t.dragObject&&"dropzoneFeet"==t.dropPlace)this.step11_dropCount++,n=!0,a="1",this.HideOptionsAndDropSprite(this.step11),t.dragObjectNode.parent.getChildByName("label").active=!1,this.skullHappy(),(c=this.skeleton.getChildByName("body").getComponent(sp.Skeleton)).enabled=!0,this.step11.getChildByName("dropzoneFeet").getComponent(cc.Sprite).enabled=!1,this.step11.getChildByName("dropzoneHand").getComponent(cc.Sprite).enabled=!1,1==this.step11_dropCount?(c.setAnimation(0,"11_Foot",!1),this.scheduleOnce(function(){this.scheduleOnce(function(){this.step11.getChildByName("dropzoneFeet").getComponent(cc.PolygonCollider).enabled=!1,this.step11.getChildByName("dropzoneHand").getComponent(cc.Sprite).enabled=!0}.bind(this),1),this.ShowOptions(this.step11,1)}.bind(this),6)):2==this.step11_dropCount&&(this.scr_stepsController.playFeedback([0],!0,!0),c.setAnimation(0,"11_FootHand",!1),i=!0,this.scheduleOnce(function(){this.uiManager.setActiveNextButton(!0)}.bind(this),5)),this.ShowFlexAnimation("feetflex","FootFlex",new cc.Vec2(0,300));else if("bonyhand"==t.dragObject&&"dropzoneHand"==t.dropPlace){var c;this.step11_dropCount++,n=!0,"correct",a="1",this.HideOptionsAndDropSprite(this.step11),t.dragObjectNode.parent.getChildByName("label").active=!1,this.skullHappy(),(c=this.skeleton.getChildByName("body").getComponent(sp.Skeleton)).enabled=!0,this.step11.getChildByName("dropzoneHand").getComponent(cc.Sprite).enabled=!1,this.step11.getChildByName("dropzoneFeet").getComponent(cc.Sprite).enabled=!1,1==this.step11_dropCount?(c.setAnimation(0,"11_Hand",!1),this.scheduleOnce(function(){this.scheduleOnce(function(){this.step11.getChildByName("dropzoneHand").getComponent(cc.PolygonCollider).enabled=!1,this.step11.getChildByName("dropzoneFeet").getComponent(cc.Sprite).enabled=!0}.bind(this),1),this.ShowOptions(this.step11,1)}.bind(this),6)):2==this.step11_dropCount&&(this.scr_stepsController.playFeedback([0],!0,!0),c.setAnimation(0,"11_HandFoot",!1),i=!0,this.scheduleOnce(function(){this.uiManager.setActiveNextButton(!0)}.bind(this),5)),this.ShowFlexAnimation("handflex","HandFlex",new cc.Vec2(100,40))}else this.step11_dropCount++,this.skullSad(),2==this.step11_dropCount&&(this.HideOptionsAndDropSprite(this.step11),this.scr_stepsController.playFeedback([1],!0,!0),this.scheduleOnce(function(){this.uiManager.setActiveTryAgainButton(!0),this.step11.getChildByName("options_parts").children.forEach(function(t){t.children.forEach(function(t){t.active=!0})})}.bind(this),4)),"bonyfeet"==t.dragObject?(this.step11.getChildByName("dropzoneHand").getComponent(cc.PolygonCollider).enabled=!1,this.step11.getChildByName("dropzoneHand").getComponent(cc.Sprite).enabled=!1,this.step11.getChildByName("dropzoneHand").children.forEach(function(t){t.name==e.prev_droppedNode.name&&(t.active=!0,t.getChildByName("highlighter").runAction(cc.sequence(cc.fadeOut(.5),cc.fadeIn(.5)).repeatForever()))})):"bonyhand"==t.dragObject&&(this.step11.getChildByName("dropzoneFeet").getComponent(cc.PolygonCollider).enabled=!1,this.step11.getChildByName("dropzoneFeet").getComponent(cc.Sprite).enabled=!1,this.step11.getChildByName("dropzoneFeet").children.forEach(function(t){t.name==e.prev_droppedNode.name&&(t.active=!0,t.getChildByName("highlighter").runAction(cc.sequence(cc.fadeOut(.5),cc.fadeIn(.5)).repeatForever()))}));this.scr_stepsController.onOptionDropped({optionName:s,optionIndex:r,isCorrect:n,dropZone:o,totalDropzones:2,dropCountInCurrentZone:1,isDropCompletedInCurrentZone:a,isAllDropComplete:i})},e.prototype.ShowFlexAnimation=function(t,e,o,i,n){void 0===i&&(i=!0),void 0===n&&(n=!0),this.scheduleOnce(function(){n&&this.skeleton.getChildByName("skull").runAction(cc.fadeOut(.5));var s=this.skeleton.getChildByName(t).getComponent(sp.Skeleton);"body"!=s.node.name&&(this.skeleton.getChildByName("body").runAction(cc.fadeOut(.5)),s.enabled=!0),this.scheduleOnce(function(){s.setAnimation(0,e,i)}.bind(this),.75),this.skeleton.runAction(cc.scaleTo(.5,1.5)),this.bgNode.runAction(cc.scaleTo(.5,1.5)),this.bgNode.runAction(cc.moveBy(.5,cc.v2(+o.x,+o.y))),this.skeleton.runAction(cc.moveBy(.5,cc.v2(+o.x,+o.y))),this.scheduleOnce(function(){this.skeleton.runAction(cc.scaleTo(.5,1)),this.bgNode.runAction(cc.scaleTo(.5,1)),this.bgNode.runAction(cc.moveBy(.5,cc.v2(-o.x,-o.y))),this.skeleton.runAction(cc.moveBy(.5,cc.v2(-o.x,-o.y))),i&&s.setAnimation(0,e,!1),"body"!=s.node.name&&(this.skeleton.getChildByName(t).runAction(cc.fadeOut(.5)),s.enabled=!1,this.skeleton.getChildByName("body").runAction(cc.fadeIn(.5))),n&&this.skeleton.getChildByName("skull").runAction(cc.fadeIn(.5))}.bind(this),3.5)}.bind(this),2.5)},e.prototype.ShowOptions=function(t,e){void 0===e&&(e=2.5),this.scheduleOnce(function(){t.getChildByName("options_parts").runAction(cc.moveTo(.5,cc.v2(0,-300)))}.bind(this),e)},e.prototype.HideOptionsAndDropSprite=function(t){t.getChildByName("options_parts").runAction(cc.moveTo(.5,cc.v2(0,-600))),t==this.step11?(t.getChildByName("dropzoneFeet").getComponent(cc.Sprite).enabled=!1,t.getChildByName("dropzoneHand").getComponent(cc.Sprite).enabled=!1):t.getChildByName("dropzone").getComponent(cc.Sprite).enabled=!1},e.prototype.onAnswerVerification=function(t){switch(console.log("Answer submitted "+t.isCorrect),this.scr_stepsController.getCurrentStep()){case 3:this.giveFeedbackForQestion1(t);break;case 4:this.giveFeedbackForQestion2(t);break;case 5:this.giveFeedbackForQestion3a(t);break;case 6:this.giveFeedbackForQestion3b(t);break;case 8:this.giveFeedbackForQestion5a(t);break;case 9:this.giveFeedbackForQestion5b(t)}},e.prototype.giveFeedbackForQestion1=function(t){var e=this;if(t.isCorrect){this.skullHappy();var o=this.skeleton.getChildByName("body").getComponent(sp.Skeleton);o.enabled=!0,o.setAnimation(0,"01_Spine",!1),this.ShowFlexAnimation("backbonebend","BackboneBend",new cc.Vec2(0,-50),!1)}else this.skullSad(),this.step3.getChildByName("dropzone").children.forEach(function(t){t.name==e.prev_droppedNode.name&&(t.active=!0,t.getChildByName("highlighter").runAction(cc.sequence(cc.fadeOut(.5),cc.fadeIn(.5)).repeatForever()))})},e.prototype.giveFeedbackForQestion2=function(t){var e=this;if(t.isCorrect){this.skullHappy();var o=this.skeleton.getChildByName("body").getComponent(sp.Skeleton);o.enabled=!0,o.setAnimation(0,"02_Ripcage",!1)}else this.skullSad(),this.step4.getChildByName("dropzone").children.forEach(function(t){t.name==e.prev_droppedNode.name&&(t.active=!0,t.getChildByName("highlighter").runAction(cc.sequence(cc.fadeOut(.5),cc.fadeIn(.5)).repeatForever()))})},e.prototype.giveFeedbackForQestion3a=function(t){var e=this;if(t.isCorrect){this.skullHappy();var o=this.skeleton.getChildByName("body").getComponent(sp.Skeleton);o.enabled=!0,o.setAnimation(0,"03_Clavicle",!1)}else this.skullSad(),this.step5.getChildByName("dropzone").children.forEach(function(t){t.name==e.prev_droppedNode.name&&(t.active=!0,t.getChildByName("highlighter").runAction(cc.sequence(cc.fadeOut(.5),cc.fadeIn(.5)).repeatForever()))})},e.prototype.giveFeedbackForQestion3b=function(t){var e=this;if(t.isCorrect){this.skullHappy();var o=this.skeleton.getChildByName("body").getComponent(sp.Skeleton);o.enabled=!0,o.setAnimation(0,"04_Humerus",!1),this.ShowFlexAnimation("body","ShoulderMovement",new cc.Vec2(-100,-50),!1,!1)}else this.skullSad(),this.step6.getChildByName("dropzone").children.forEach(function(t){t.name==e.prev_droppedNode.name&&(t.active=!0,t.getChildByName("highlighter").runAction(cc.sequence(cc.fadeOut(.5),cc.fadeIn(.5)).repeatForever()))})},e.prototype.giveFeedbackForQestion5a=function(t){var e=this;if(t.isCorrect){this.skullHappy();var o=this.skeleton.getChildByName("body").getComponent(sp.Skeleton);o.enabled=!0,o.setAnimation(0,"07_Pelvic",!1)}else this.skullSad(),this.step8.getChildByName("dropzone").children.forEach(function(t){t.name==e.prev_droppedNode.name&&(t.active=!0,t.getChildByName("highlighter").runAction(cc.sequence(cc.fadeOut(.5),cc.fadeIn(.5)).repeatForever()))})},e.prototype.giveFeedbackForQestion5b=function(t){var e=this;if(t.isCorrect){this.skullHappy();var o=this.skeleton.getChildByName("body").getComponent(sp.Skeleton);o.enabled=!0,o.setAnimation(0,"08_Femur",!1),this.ShowFlexAnimation("body","ShakingHip",new cc.Vec2(0,0),!0,!1),this.scheduleOnce(function(){o.setAnimation(0,"08_Femur",!1)}.bind(this),6.5)}else this.skullSad(),this.step9.getChildByName("dropzone").children.forEach(function(t){t.name==e.prev_droppedNode.name&&(t.active=!0,t.getChildByName("highlighter").runAction(cc.sequence(cc.fadeOut(.5),cc.fadeIn(.5)).repeatForever()))})},e.prototype.skullHappy=function(){this.scheduleOnce(function(){this.audioManager.play("rightdrop",this.aud_rightdrop,!1)}.bind(this),.25),this.skeleton.getChildByName("skull").getComponent(sp.Skeleton).setAnimation(0,"Skull_Happy",!1)},e.prototype.skullSad=function(){this.scheduleOnce(function(){this.audioManager.play("wrongdrop",this.aud_wrongdrop,!1)}.bind(this),.25),this.skeleton.getChildByName("skull").getComponent(sp.Skeleton).setAnimation(0,"Skull_Sad",!1)},e.prototype.setupSceneforStep3=function(){this.disableAllExceptThis(this.step3),this.step3.getChildByName("dropzone").getComponent(cc.Sprite).enabled=!0,this.step3.getChildByName("dropzone").children.forEach(function(t){t.active=!1}),this.ShowOptions(this.step3)},e.prototype.setupSceneforStep4=function(){this.disableAllExceptThis(this.step4),this.step4.getChildByName("dropzone").getComponent(cc.Sprite).enabled=!0,this.step4.getChildByName("dropzone").children.forEach(function(t){t.active=!1}),this.ShowOptions(this.step4)},e.prototype.setupSceneforStep5=function(){this.disableAllExceptThis(this.step5),this.step5.getChildByName("dropzone").getComponent(cc.Sprite).enabled=!0,this.step5.getChildByName("dropzone").children.forEach(function(t){t.active=!1}),this.ShowOptions(this.step5)},e.prototype.setupSceneforStep6=function(){this.disableAllExceptThis(this.step6),this.step6.getChildByName("dropzone").getComponent(cc.Sprite).enabled=!0,this.step6.getChildByName("dropzone").children.forEach(function(t){t.active=!1}),this.ShowOptions(this.step6)},e.prototype.setupSceneforStep7=function(){this.disableAllExceptThis(this.step7),this.step7.getChildByName("dropzone").getComponent(cc.Sprite).spriteFrame=this.dropzone_double,this.step7.getChildByName("dropzone").getComponent(cc.Sprite).enabled=!0,this.step7.getChildByName("dropzone").children.forEach(function(t){t.active=!1}),this.ShowOptions(this.step7)},e.prototype.setupSceneforStep8=function(){this.disableAllExceptThis(this.step8),this.step8.getChildByName("dropzone").getComponent(cc.Sprite).enabled=!0,this.step8.getChildByName("dropzone").children.forEach(function(t){t.active=!1}),this.ShowOptions(this.step8)},e.prototype.setupSceneforStep9=function(){this.disableAllExceptThis(this.step9),this.step9.getChildByName("dropzone").getComponent(cc.Sprite).enabled=!0,this.step9.getChildByName("dropzone").children.forEach(function(t){t.active=!1}),this.ShowOptions(this.step9)},e.prototype.setupSceneforStep10=function(){this.disableAllExceptThis(this.step10),this.step10.getChildByName("dropzone").getComponent(cc.Sprite).enabled=!0,this.step10.getChildByName("dropzone").children.forEach(function(t){t.active=!1}),this.ShowOptions(this.step10)},e.prototype.setupSceneforStep11=function(){this.disableAllExceptThis(this.step11),this.step11.getChildByName("dropzoneHand").getComponent(cc.PolygonCollider).enabled=!0,this.step11.getChildByName("dropzoneHand").getComponent(cc.Sprite).enabled=!0,this.step11.getChildByName("dropzoneHand").children.forEach(function(t){t.active=!1}),this.step11.getChildByName("dropzoneFeet").getComponent(cc.PolygonCollider).enabled=!0,this.step11.getChildByName("dropzoneFeet").getComponent(cc.Sprite).enabled=!0,this.step11.getChildByName("dropzoneFeet").children.forEach(function(t){t.active=!1}),this.ShowOptions(this.step11,5)},e.prototype.disableAllExceptThis=function(t){this.step012.active=!1,this.step3.active=!1,this.step4.active=!1,this.step5.active=!1,this.step6.active=!1,this.step7.active=!1,this.step8.active=!1,this.step9.active=!1,this.step10.active=!1,this.step11.active=!1,t.active=!0},n([l(cc.Node)],e.prototype,"canvas",void 0),n([l(cc.Node)],e.prototype,"bgNode",void 0),n([l(cc.SpriteFrame)],e.prototype,"dropzone_double",void 0),n([l(cc.SpriteFrame)],e.prototype,"dropzone_double_right",void 0),n([l(cc.SpriteFrame)],e.prototype,"dropzone_double_left",void 0),n([l(cc.Node)],e.prototype,"skeleton",void 0),n([l(cc.Node)],e.prototype,"step012",void 0),n([l(cc.Node)],e.prototype,"step3",void 0),n([l(cc.Node)],e.prototype,"step4",void 0),n([l(cc.Node)],e.prototype,"step5",void 0),n([l(cc.Node)],e.prototype,"step6",void 0),n([l(cc.Node)],e.prototype,"step7",void 0),n([l(cc.Node)],e.prototype,"step8",void 0),n([l(cc.Node)],e.prototype,"step9",void 0),n([l(cc.Node)],e.prototype,"step10",void 0),n([l(cc.Node)],e.prototype,"step11",void 0),n([l({type:cc.AudioClip})],e.prototype,"aud_bgm",void 0),n([l({type:cc.AudioClip})],e.prototype,"aud_gramaphone",void 0),n([l({type:cc.AudioClip})],e.prototype,"aud_skeletonFalling",void 0),n([l({type:cc.AudioClip})],e.prototype,"aud_dragdrop",void 0),n([l({type:cc.AudioClip})],e.prototype,"aud_rightdrop",void 0),n([l({type:cc.AudioClip})],e.prototype,"aud_wrongdrop",void 0),e=n([p],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../../framework/scripts/AudioManager":"AudioManager","../../../../framework/scripts/StepsController":"StepsController","../../../../framework/scripts/UIManager":"UIManager"}],EXPL06SCI08E01_dragNdrop:[function(t,e,o){"use strict";cc._RF.push(e,"8afc1miD+RD84w9ahSlmLar","EXPL06SCI08E01_dragNdrop");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=s.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bg=null,e.dropPlace=null,e.isSecondDropPlace=!1,e.dropPlace2=null,e.startPos=null,e.gameNode=null,e.placeHolderObject=null,e.isAnotherOptionDragging=!1,e.currentDraggingObject=null,e}return i(e,t),e.prototype.start=function(){this.startPos=new cc.Vec2(this.node.position.x,this.node.position.y),this.gameNode.on("OnOptionDraggingStarted",function(t){this.currentDraggingObject=t.name}.bind(this)),this.gameNode.on("OnOptionDraggingEnded",function(t){this.currentDraggingObject=t}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_START,function(t){console.log("touch_start = ",this.node.name),null!=this.currentDraggingObject&&""!=this.currentDraggingObject||this.gameNode.emit("OnOptionDraggingStarted",this.node)}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){if(this.currentDraggingObject==this.node.name){var e=t.getLocation(),o=this.node.parent.convertToNodeSpaceAR(e);this.node.setPosition(o)}}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_END,function(t){this.gameNode.emit("OnOptionDraggingEnded","");var e=this.node.parent.convertToWorldSpaceAR(this.node.position),o=this.dropPlace.convertToNodeSpaceAR(e);if(this.isSecondDropPlace)var i=this.dropPlace2.convertToNodeSpaceAR(e);if(this.dropPlace.getComponent(cc.PolygonCollider).enabled&&cc.Intersection.pointInPolygon(new cc.Vec2(o.x,o.y),this.dropPlace.getComponent(cc.PolygonCollider).world.points))console.log("Dropped inside dropzone"),this.node.active=!1,this.node.position=this.startPos,(n={}).dragObject=this.node.name,n.dragObjectNode=this.node,n.dropPlace=this.dropPlace.name,this.gameNode.emit("OnOptionDropped",n);else if(this.isSecondDropPlace){var n;if(this.dropPlace2.getComponent(cc.PolygonCollider).enabled&&cc.Intersection.pointInPolygon(new cc.Vec2(i.x,i.y),this.dropPlace2.getComponent(cc.PolygonCollider).world.points))console.log("Dropped inside dropzone"),this.node.active=!1,this.node.position=this.startPos,(n={}).dragObject=this.node.name,n.dragObjectNode=this.node,n.dropPlace=this.dropPlace2.name,this.gameNode.emit("OnOptionDropped",n);else this.node.runAction(cc.moveTo(.3,this.startPos))}else this.node.runAction(cc.moveTo(.3,this.startPos))}.bind(this))},n([a(cc.Node)],e.prototype,"bg",void 0),n([a(cc.Node)],e.prototype,"dropPlace",void 0),n([a],e.prototype,"isSecondDropPlace",void 0),n([a(cc.Node)],e.prototype,"dropPlace2",void 0),n([a(cc.Node)],e.prototype,"gameNode",void 0),n([a(cc.Node)],e.prototype,"placeHolderObject",void 0),e=n([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],EXPL06SCI16E01_Drag_Drop:[function(t,e,o){"use strict";cc._RF.push(e,"bc2d7ZmPqVAVIW5pVyIk/a0","EXPL06SCI16E01_Drag_Drop");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/AudioManager"),r=cc._decorator,a=r.ccclass,c=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.correctDropPlace=[],e.wrongDropPlace=[],e.startPos=null,e.eventReceiverNode=null,e.placeHolderObject=[],e.label=null,e.correctFeedbackEffect=null,e.correctAudio=null,e.wrongAudio=null,e.currentDraggingObject=null,e.filledDropPlaces=[],e.isAllowDragging=!0,e.canvas=null,e}return i(e,t),e.prototype.start=function(){this.canvas=cc.find("CommonCanvas"),this.scr_audioManager=this.canvas.getComponent(s.default),this.startPos=new cc.Vec2(this.node.position.x,this.node.position.y),this.eventReceiverNode.on("OnOptionDraggingStarted",function(t){this.currentDraggingObject=t.dragObject}.bind(this)),this.eventReceiverNode.on("OnOptionDraggingEnded",function(t){this.currentDraggingObject=t}.bind(this)),this.eventReceiverNode.on("OnOptionDropped",function(t){this.isAllowDragging=!1}.bind(this)),this.eventReceiverNode.on("OnDragDropReset",this.reset.bind(this)),this.canvas.on("OnFeedbackPlayComplete",function(t){this.isAllowDragging=!0}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_START,function(t){if(this.isAllowDragging&&(null==this.currentDraggingObject||""==this.currentDraggingObject)){var e={};e.dragObject=this.node.name,this.correctDropPlace.length>0?e.isCorrectDropZone="not_applicable":e.isCorrectDropZone=!1,0==this.wrongDropPlace.length&&(e.isCorrectDropZone=!0),this.eventReceiverNode.emit("OnOptionDraggingStarted",e)}}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){if(this.isAllowDragging&&this.currentDraggingObject==this.node.name){var e=t.touch.getDelta();this.node.x+=e.x,this.node.y+=e.y}}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_END,function(t){if(this.isAllowDragging&&this.currentDraggingObject==this.node.name){this.eventReceiverNode.emit("OnOptionDraggingEnded","");for(var e=!1,o=0;o<this.correctDropPlace.length;o++){var i=this.node.parent.convertToWorldSpaceAR(this.node.position),n=this.correctDropPlace[o].convertToNodeSpaceAR(i);if(cc.Intersection.pointInPolygon(new cc.Vec2(n.x,n.y),this.correctDropPlace[o].getComponent(cc.PolygonCollider).world.points))this.placeHolderObject[o].active=!0,this.node.active=!1,(s={}).dragObject=this.node.name,s.dropPlace=this.correctDropPlace[o].name,s.isCorrectDropZone=!0,this.eventReceiverNode.emit("OnOptionDropped",s),this.node.position=this.startPos,e=!0,this.onDroppedInCorrectPlace()}for(o=0;o<this.wrongDropPlace.length;o++){var s;i=this.node.parent.convertToWorldSpaceAR(this.node.position),n=this.wrongDropPlace[o].convertToNodeSpaceAR(i);if(cc.Intersection.pointInPolygon(new cc.Vec2(n.x,n.y),this.wrongDropPlace[o].getComponent(cc.PolygonCollider).world.points))(s={}).dragObject=this.node.name,s.dropPlace=this.wrongDropPlace[o].name,s.isCorrectDropZone=!1,this.eventReceiverNode.emit("OnOptionDropped",s),this.onDroppedInWrongPlace()}e||this.node.runAction(cc.moveTo(.3,this.startPos))}}.bind(this))},e.prototype.reset=function(){this.filledDropPlaces=[]},e.prototype.onEnable=function(){this.label&&(this.label.active=!0)},e.prototype.onDisable=function(){this.label&&(this.label.active=!1)},e.prototype.onDroppedInCorrectPlace=function(){this.correctFeedbackEffect&&this.correctFeedbackEffect.getComponent(cc.Animation).play(),this.correctAudio&&this.scr_audioManager.play("correct_audio_"+this.node.name,this.correctAudio,!1,"SFX")},e.prototype.onDroppedInWrongPlace=function(){this.wrongAudio&&this.scr_audioManager.play("wrong_audio_"+this.node.name,this.wrongAudio,!1,"SFX")},n([c({type:cc.Node})],e.prototype,"correctDropPlace",void 0),n([c({type:cc.Node})],e.prototype,"wrongDropPlace",void 0),n([c(cc.Node)],e.prototype,"eventReceiverNode",void 0),n([c(cc.Node)],e.prototype,"placeHolderObject",void 0),n([c(cc.Node)],e.prototype,"label",void 0),n([c(cc.Node)],e.prototype,"correctFeedbackEffect",void 0),n([c({type:cc.AudioClip})],e.prototype,"correctAudio",void 0),n([c({type:cc.AudioClip})],e.prototype,"wrongAudio",void 0),e=n([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../../framework/scripts/AudioManager":"AudioManager"}],EXPL06SCI16E01_Tap_Detect:[function(t,e,o){"use strict";cc._RF.push(e,"48ec8/b+WxK+54j8ocwEnHD","EXPL06SCI16E01_Tap_Detect");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=s.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.eventReceiverNode=null,e.isAllowTapping=!0,e.canvas=null,e}return i(e,t),e.prototype.start=function(){this.canvas=cc.find("CommonCanvas"),this.eventReceiverNode.on("OnOptionTap",function(t){this.isAllowTapping=!1}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_START,function(t){if(this.isAllowTapping){this.isAllowTapping=!1;var e={};e.dragObject=this.node.name,this.eventReceiverNode.emit("OnOptionTap",e)}}.bind(this)),this.canvas.on("OnCommonButtonClick",function(t){1==t&&(this.isAllowTapping=!0)}.bind(this))},n([a(cc.Node)],e.prototype,"eventReceiverNode",void 0),e=n([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],EXPL06SCI16E01_Vermicompost:[function(t,e,o){"use strict";cc._RF.push(e,"a4ba3JjZSBLl4ZtZM3utgBw","EXPL06SCI16E01_Vermicompost");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/AudioManager"),r=t("../../../../framework/scripts/StepsController"),a=t("../../../../framework/scripts/UIManager"),c=t("./EXPL06SCI16E01_Tap_Detect"),p=cc._decorator,l=p.ccclass,h=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.feedbackIndeices=[],e.clip_bgMusic1=null,e.step_0_1=null,e.step_2=null,e.step_3_4_question1=null,e.q1_isAllOptionsDropped=[],e.q1_organicDropZoneDropCount=0,e.q1_inorganicDropZoneDropCount=0,e.step_6_question2=null,e.q2_isAllOptionsDropped=[],e.q2_organicDropZoneDropCount=0,e.q2_inorganicDropZoneDropCount=0,e.step_8=null,e.step_9_question3=null,e.step9_options_question3=null,e.step9_q3_feedback_with_hole=null,e.step9_q3_feedback_without_hole=null,e.step9_q3_feedback_cardboard=null,e.isQ3CorrectAnswerGiven=!1,e.step_11_question4=null,e.q4_isAllOptionsDropped=[],e.q4_trayDropZoneCount=0,e.step11_options_question4=null,e.step_12_question5=null,e.step12_options_question5=null,e.isQ5CorrectAnswerGiven=!1,e.step_13_question6=null,e.step13_options_question6=null,e.step_15_question7=null,e.q7_isAllOptionsDropped=[],e.q7_trayDropZoneCount=0,e.step15_options_question7=null,e.step_17_question8=null,e.step17_options_question8=null,e.isQ8CorrectAnswerGiven=!1,e.step_18=null,e.step_19=null,e.optionsShowPos=120,e.optionsHidePos=-500,e.clipBinTranslucent=null,e}return i(e,t),e.prototype.onLoad=function(){this.canvas=cc.find("CommonCanvas"),this.scr_stepsController=this.canvas.getComponent(r.default),this.scr_uiManager=this.canvas.getComponent(a.default),this.scr_audioManager=this.canvas.getComponent(s.default),this.canvas.on("OnLoadStep",this.stepsHandler.bind(this)),this.canvas.on("OnCommonButtonClick",this.onCommonButtonClick.bind(this)),this.canvas.on("OnAnswerVerification",this.onAnswerVerification.bind(this)),this.node.on("OnOptionDropped",this.onOptionDropped.bind(this)),this.node.on("OnOptionDraggingStarted",this.onOptionDragStarted.bind(this)),this.node.on("OnOptionTap",this.onOptionTap.bind(this)),this.canvas.on("OnFeedbackPlayComplete",this.onFeedbackPlayComplete.bind(this))},e.prototype.start=function(){this.scr_stepsController.Initialise("EXPL06SCI16E01_Vermicompost"),this.setupSceneForStep_0_1(),this.scr_audioManager.play("clip_bgMusic1",this.clip_bgMusic1,!0)},e.prototype.stepsHandler=function(t){switch(t){case 2:this.setupSceneForStep_2();break;case 3:this.setupSceneForStep_3_4_question1();break;case 6:this.setupSceneForStep_6_question2();break;case 8:this.setupSceneForStep_8();break;case 9:this.setupSceneForStep_9_question3(5);break;case 11:this.setupSceneForStep_11_question4();break;case 12:this.setupSceneForStep_12_question5();break;case 13:this.setupSceneForStep_13_question6(!0);break;case 15:this.setupSceneForStep_15_question7();break;case 16:this.setupSceneForStep_17_question8();break;case 18:this.canvas.emit("OnEndScreenReach",{}),this.setupSceneForStep_18();break;case 19:this.setupSceneForStep_19()}},e.prototype.onOptionDragStarted=function(t){switch(this.scr_stepsController.getCurrentStep()){case 4:var e=this.step_3_4_question1.getChildByName("base_question").getChildByName("options").getChildByName(t.dragObject).getSiblingIndex();this.scr_stepsController.onOptionDragStarted({optionName:t.dragObject,optionIndex:e+1,isCorrect:t.isCorrectDropZone});break;case 6:var o=this.step_6_question2.getChildByName("base_question").getChildByName("options").getChildByName(t.dragObject).getSiblingIndex();this.scr_stepsController.onOptionDragStarted({optionName:t.dragObject,optionIndex:o+1,isCorrect:t.isCorrectDropZone});break;case 9:this.scr_stepsController.onOptionDragStarted({optionName:t.dragObject,isCorrect:t.isCorrectDropZone});break;case 11:var i=this.step_11_question4.getChildByName("base_question").getChildByName("options").getChildByName(t.dragObject).getSiblingIndex();this.scr_stepsController.onOptionDragStarted({optionName:t.dragObject,optionIndex:i+1,isCorrect:t.isCorrectDropZone});break;case 12:this.scr_stepsController.onOptionDragStarted({optionName:t.dragObject,isCorrect:t.isCorrectDropZone});break;case 15:var n=this.step_15_question7.getChildByName("base_question").getChildByName("options").getChildByName(t.dragObject).getSiblingIndex();this.scr_stepsController.onOptionDragStarted({optionName:t.dragObject,optionIndex:n+1,isCorrect:t.isCorrectDropZone});break;case 17:this.scr_stepsController.onOptionDragStarted({optionName:t.dragObject,isCorrect:t.isCorrectDropZone})}},e.prototype.onOptionDropped=function(t){switch(this.scr_uiManager.hideHeaderText(),this.scr_stepsController.getCurrentStep()){case 4:this.onOptionDroppedQuestion1(t);break;case 6:this.onOptionDroppedQuestion2(t);break;case 9:this.onOptionDroppedQuestion3(t);break;case 11:this.onOptionDroppedQuestion4(t);break;case 12:this.onOptionDroppedQuestion5(t);break;case 15:this.onOptionDroppedQuestion7(t);break;case 17:this.onOptionDroppedQuestion8(t)}},e.prototype.onOptionTap=function(t){switch(console.log("on option tap ",t),this.scr_stepsController.getCurrentStep()){case 13:this.scr_stepsController.onOptionTap({optionName:t.dragObject})}},e.prototype.onFeedbackPlayComplete=function(t){switch(console.log("On feedback play complete ",t),this.scr_stepsController.getCurrentStep()){case 4:this.q1_isAllOptionsDropped.includes(void 0)||this.scr_uiManager.setActiveNextButton(!0);break;case 6:this.q2_isAllOptionsDropped.includes(void 0)||this.scr_uiManager.setActiveNextButton(!0);break;case 9:this.isQ3CorrectAnswerGiven||this.setupSceneForStep_9_question3(0);break;case 11:this.q4_isAllOptionsDropped.includes(void 0)||this.scr_uiManager.setActiveNextButton(!0),this.q4_isAllOptionsDropped.includes(void 0)&&this.changeOpacityOfNode(this.step_11_question4.getChildByName("base_question").getChildByName("options"),255);break;case 12:this.isQ5CorrectAnswerGiven||this.setupSceneForStep_12_question5(0);break;case 15:this.q7_isAllOptionsDropped.includes(void 0)||this.scr_uiManager.setActiveNextButton(!0),this.q7_isAllOptionsDropped.includes(void 0)&&this.changeOpacityOfNode(this.step_15_question7.getChildByName("base_question").getChildByName("options"),255);break;case 17:this.isQ8CorrectAnswerGiven||this.setupSceneForStep_17_question8()}},e.prototype.onAnswerVerification=function(t){switch(console.log("Answer submitted "+t.isCorrect),this.scr_stepsController.getCurrentStep()){case 9:this.giveFeedbackForQestion3(t);break;case 12:this.giveFeedbackForQestion5(t);break;case 13:this.giveFeedbackForQestion6(t);break;case 17:this.giveFeedbackForQestion8(t)}},e.prototype.resetAfterTryAgain=function(){switch(this.scr_stepsController.getCurrentStep()){case 9:this.setupSceneForStep_9_question3(0);break;case 12:this.setupSceneForStep_12_question5(),this.scr_stepsController.loadNextStep(this.scr_stepsController.getCurrentStep());break;case 13:this.setupSceneForStep_13_question6();break;case 17:this.setupSceneForStep_17_question8(),this.scr_stepsController.loadNextStep(this.scr_stepsController.getCurrentStep())}},e.prototype.setupSceneForStep_0_1=function(){this.disableAllExceptThis(this.step_0_1)},e.prototype.setupSceneForStep_2=function(){this.disableAllExceptThis(this.step_2)},e.prototype.setupSceneForStep_3_4_question1=function(){this.q1_isAllOptionsDropped=new Array(6),this.disableAllExceptThis(this.step_3_4_question1);var t=this.step_3_4_question1.getChildByName("base_question").getChildByName("options");t.position=cc.v3(0,this.optionsHidePos,0);var e=2;e=3==this.scr_stepsController.getCurrentStep()?12:2,cc.tween(t).delay(e).to(1,{position:cc.v2(0,this.optionsShowPos)}).start()},e.prototype.setupSceneForStep_6_question2=function(){this.q2_isAllOptionsDropped=new Array(6),this.disableAllExceptThis(this.step_6_question2);var t=this.step_6_question2.getChildByName("base_question").getChildByName("options");t.position=cc.v3(0,this.optionsHidePos,0);cc.tween(t).delay(2).to(1,{position:cc.v2(0,this.optionsShowPos)}).start()},e.prototype.setupSceneForStep_8=function(){this.disableAllExceptThis(this.step_8)},e.prototype.setupSceneForStep_9_question3=function(t,e){void 0===t&&(t=3),void 0===e&&(e=!1),this.disableAllExceptThis(this.step_9_question3),this.showOptions(this.step9_options_question3,t,e),this.step_9_question3.getChildByName("base_question").getChildByName("options").getChildByName("option1").getChildByName("plastic_crate_with_holes").active=!0,this.step_9_question3.getChildByName("base_question").getChildByName("options").getChildByName("option2").getChildByName("cardboard_crate").active=!0,this.step_9_question3.getChildByName("base_question").getChildByName("options").getChildByName("option3").getChildByName("plastic_crate_without_holes").active=!0,this.step_9_question3.getChildByName("base_question").getChildByName("place_holder").getChildByName("plastic_crate_with_holes").active=!1,this.step_9_question3.getChildByName("base_question").getChildByName("place_holder").getChildByName("cardboard_crate").active=!1,this.step_9_question3.getChildByName("base_question").getChildByName("place_holder").getChildByName("plastic_crate_without_holes").active=!1,this.step9_q3_feedback_cardboard.active=!1,this.step9_q3_feedback_with_hole.active=!1,this.step9_q3_feedback_without_hole.active=!1},e.prototype.setupSceneForStep_11_question4=function(t,e){void 0===t&&(t=3),void 0===e&&(e=!1),this.q4_isAllOptionsDropped=new Array(3),this.disableAllExceptThis(this.step_11_question4),this.showOptions(this.step11_options_question4,t,e)},e.prototype.setupSceneForStep_12_question5=function(t,e){void 0===t&&(t=3),void 0===e&&(e=!1),this.disableAllExceptThis(this.step_12_question5),this.showOptions(this.step12_options_question5,t,e),this.step_12_question5.getChildByName("base_question").getChildByName("place_holder").getChildByName("redworms_in_tray").active=!1,this.step_12_question5.getChildByName("base_question").getChildByName("place_holder").getChildByName("roundworms_in_tray").active=!1,this.step_12_question5.getChildByName("base_question").getChildByName("place_holder").getChildByName("hookworms_in_tray").active=!1,this.step_12_question5.getChildByName("base_question").getChildByName("place_holder").getChildByName("tapeworms_in_tray").active=!1,this.step_12_question5.getChildByName("base_question").getChildByName("options").getChildByName("option1").getChildByName("redworms").active=!0,this.step_12_question5.getChildByName("base_question").getChildByName("options").getChildByName("option4").getChildByName("roundworms").active=!0,this.step_12_question5.getChildByName("base_question").getChildByName("options").getChildByName("option2").getChildByName("hookworms").active=!0,this.step_12_question5.getChildByName("base_question").getChildByName("options").getChildByName("option3").getChildByName("tapeworms").active=!0},e.prototype.setupSceneForStep_13_question6=function(t){void 0===t&&(t=!1),this.disableAllExceptThis(this.step_13_question6),this.scheduleOnce(function(){t&&(this.step13_options_question6.getChildByName("organic_bin").getComponent(c.default).enabled=!0,this.step13_options_question6.getChildByName("inorganic_bin").getComponent(c.default).enabled=!0)}.bind(this),6),this.step13_options_question6.getChildByName("organic_bin").opacity=255,this.step13_options_question6.getChildByName("inorganic_bin").opacity=255,this.step13_options_question6.getChildByName("organic_bin_content").opacity=0,this.step13_options_question6.getChildByName("inorganic_bin_content").opacity=0},e.prototype.setupSceneForStep_15_question7=function(t,e){void 0===t&&(t=5),void 0===e&&(e=!1),this.q7_isAllOptionsDropped=new Array(4),this.disableAllExceptThis(this.step_15_question7),this.showOptions(this.step15_options_question7,t,e)},e.prototype.setupSceneForStep_17_question8=function(t){void 0===t&&(t=!1),this.disableAllExceptThis(this.step_17_question8);var e=2;e=17==this.scr_stepsController.getCurrentStep()?2:12,this.showOptions(this.step17_options_question8,e,t)},e.prototype.setupSceneForStep_18=function(){this.scr_uiManager.setActiveCloseButton(!1),this.disableAllExceptThis(this.step_18)},e.prototype.setupSceneForStep_19=function(){this.disableAllExceptThis(this.step_19)},e.prototype.onOptionDroppedQuestion1=function(t){var e,o=this.step_3_4_question1.getChildByName("base_question").getChildByName("options").getChildByName(t.dragObject).getSiblingIndex(),i=t.dragObject,n=o+1,s=t.isCorrectDropZone,r="0",a="wrong",c=!1;if(t.isCorrectDropZone){var p=!0;5==this.checkNumberOfEmptyValues(this.q1_isAllOptionsDropped)&&(p=!1),"pencil_shave"==t.dragObject&&(this.scr_stepsController.playFeedback([1],!0,p),this.q1_isAllOptionsDropped[0]=!0,this.q1_organicDropZoneDropCount++),"bulb"==t.dragObject&&(this.scr_stepsController.playFeedback([6],!0,p),this.q1_isAllOptionsDropped[1]=!0,this.q1_inorganicDropZoneDropCount++),"paper_pieces"==t.dragObject&&(this.scr_stepsController.playFeedback([3],!0,p),this.q1_isAllOptionsDropped[2]=!0,this.q1_organicDropZoneDropCount++),"ceramics"==t.dragObject&&(this.scr_stepsController.playFeedback([8],!0,p),this.q1_isAllOptionsDropped[3]=!0,this.q1_inorganicDropZoneDropCount++),"coffee_powder"==t.dragObject&&(this.scr_stepsController.playFeedback([5],!0,p),this.q1_isAllOptionsDropped[4]=!0,this.q1_organicDropZoneDropCount++),"plastic_box"==t.dragObject&&(this.scr_stepsController.playFeedback([10],!0,p),this.q1_isAllOptionsDropped[5]=!0,this.q1_inorganicDropZoneDropCount++),this.q1_isAllOptionsDropped.includes(void 0)||(c=!0,a="correct")}else"pencil_shave"==t.dragObject&&this.scr_stepsController.playFeedback([0],!1),"bulb"==t.dragObject&&this.scr_stepsController.playFeedback([7],!1),"paper_pieces"==t.dragObject&&this.scr_stepsController.playFeedback([2],!1),"ceramics"==t.dragObject&&this.scr_stepsController.playFeedback([9],!1),"coffee_powder"==t.dragObject&&this.scr_stepsController.playFeedback([4],!1),"plastic_box"==t.dragObject&&this.scr_stepsController.playFeedback([11],!1);if("organic_place_holder"==t.dropPlace){e=1,3==this.q1_organicDropZoneDropCount&&(r="1");var l=this.q1_organicDropZoneDropCount;t.isCorrectDropZone||l++,this.scr_stepsController.onOptionDropped({optionName:i,optionIndex:n,isCorrect:s,dropZone:e,totalDropzones:2,dropCountInCurrentZone:l,isDropCompletedInCurrentZone:r,isAllDropComplete:c,finalValue:a})}else{e=2,3==this.q1_inorganicDropZoneDropCount&&(r="1");l=this.q1_inorganicDropZoneDropCount;t.isCorrectDropZone||l++,this.scr_stepsController.onOptionDropped({optionName:i,optionIndex:n,isCorrect:s,dropZone:e,totalDropzones:2,dropCountInCurrentZone:l,isDropCompletedInCurrentZone:r,isAllDropComplete:c,finalValue:a})}},e.prototype.onOptionDroppedQuestion2=function(t){var e,o=this.step_6_question2.getChildByName("base_question").getChildByName("options").getChildByName(t.dragObject).getSiblingIndex(),i=t.dragObject,n=o+1,s=t.isCorrectDropZone,r="0",a="wrong",c=!1;if(t.isCorrectDropZone){var p=!0;5==this.checkNumberOfEmptyValues(this.q2_isAllOptionsDropped)&&(p=!1),"fish_remains"==t.dragObject&&(this.scr_stepsController.playFeedback([1],!0,p),this.q2_isAllOptionsDropped[0]=!0,this.q2_organicDropZoneDropCount++),"meat"==t.dragObject&&(this.scr_stepsController.playFeedback([3],!0,p),this.q2_isAllOptionsDropped[1]=!0,this.q2_organicDropZoneDropCount++),"bones"==t.dragObject&&(this.scr_stepsController.playFeedback([5],!0,p),this.q2_isAllOptionsDropped[2]=!0,this.q2_organicDropZoneDropCount++),"vegitable_peels"==t.dragObject&&(this.scr_stepsController.playFeedback([7],!0,p),this.q2_isAllOptionsDropped[3]=!0,this.q2_organicDropZoneDropCount++),"styrofoam"==t.dragObject&&(this.scr_stepsController.playFeedback([8],!0,p),this.q2_isAllOptionsDropped[4]=!0,this.q2_inorganicDropZoneDropCount++),"plastic_straws"==t.dragObject&&(this.scr_stepsController.playFeedback([10],!0,p),this.q2_isAllOptionsDropped[5]=!0,this.q2_inorganicDropZoneDropCount++),this.q2_isAllOptionsDropped.includes(void 0)||(c=!0,a="correct")}else"fish_remains"==t.dragObject&&this.scr_stepsController.playFeedback([0],!1),"meat"==t.dragObject&&this.scr_stepsController.playFeedback([2],!1),"bones"==t.dragObject&&this.scr_stepsController.playFeedback([4],!1),"vegitable_peels"==t.dragObject&&this.scr_stepsController.playFeedback([6],!1),"styrofoam"==t.dragObject&&this.scr_stepsController.playFeedback([9],!1),"plastic_straws"==t.dragObject&&this.scr_stepsController.playFeedback([11],!1);if("organic_place_holder"==t.dropPlace){e=1,4==this.q2_organicDropZoneDropCount&&(r="1");var l=this.q2_organicDropZoneDropCount;t.isCorrectDropZone||l++,this.scr_stepsController.onOptionDropped({optionName:i,optionIndex:n,isCorrect:s,dropZone:e,totalDropzones:2,dropCountInCurrentZone:l,isDropCompletedInCurrentZone:r,isAllDropComplete:c,finalValue:a})}else{e=2,2==this.q2_inorganicDropZoneDropCount&&(r="1");l=this.q2_inorganicDropZoneDropCount;t.isCorrectDropZone||l++,this.scr_stepsController.onOptionDropped({optionName:i,optionIndex:n,isCorrect:s,dropZone:e,totalDropzones:2,dropCountInCurrentZone:l,isDropCompletedInCurrentZone:r,isAllDropComplete:c,finalValue:a})}},e.prototype.onOptionDroppedQuestion3=function(t){this.scr_stepsController.onOptionDropped({optionName:t.dragObject}),"plastic_crate_with_holes"==t.dragObject?(this.scr_stepsController.playFeedback([0],!0,!1),this.isQ3CorrectAnswerGiven=!0,this.scheduleOnce(function(){this.scr_uiManager.setActiveNextButton(!0)}.bind(this),11)):"cardboard_crate"==t.dragObject?this.scr_stepsController.playFeedback([1],!1):this.scr_stepsController.playFeedback([2],!1),this.hideOptions(this.step9_options_question3,t.dragObject)},e.prototype.giveFeedbackForQestion3=function(t){t.isCorrect?(this.step9_q3_feedback_with_hole.active=!0,this.step9_q3_feedback_with_hole.getChildByName("plastic_with_hole_anim").getComponent(cc.Animation).play()):"cardboard_crate"==t.answer?(this.step9_q3_feedback_cardboard.active=!0,this.step9_q3_feedback_cardboard.getChildByName("cardboard").getComponent(cc.Animation).play()):(this.step9_q3_feedback_without_hole.active=!0,this.step9_q3_feedback_without_hole.getChildByName("plastic_without_hole_anim").getComponent(cc.Animation).play())},e.prototype.onOptionDroppedQuestion4=function(t){var e=this.step_11_question4.getChildByName("base_question").getChildByName("options").getChildByName(t.dragObject).getSiblingIndex();this.changeOpacityOfNode(this.step_11_question4.getChildByName("base_question").getChildByName("options"),0);var o=t.dragObject,i=e+1,n=t.isCorrectDropZone,s="0",r="wrong",a=!1;if(t.isCorrectDropZone){var c=!0;2==this.checkNumberOfEmptyValues(this.q4_isAllOptionsDropped)&&(c=!1),"cardboard"==t.dragObject&&(this.scr_stepsController.playFeedback([0],!0,c),this.q4_isAllOptionsDropped[0]=!0,this.q4_trayDropZoneCount++),"news_paper"==t.dragObject&&(this.scr_stepsController.playFeedback([1],!0,c),this.q4_isAllOptionsDropped[1]=!0,this.q4_trayDropZoneCount++),"soil"==t.dragObject&&(this.scr_stepsController.playFeedback([2],!0,c),this.q4_isAllOptionsDropped[2]=!0,this.q4_trayDropZoneCount++),this.q4_isAllOptionsDropped.includes(void 0)||(a=!0,r="correct")}else"thermocol"==t.dragObject&&this.scr_stepsController.playFeedback([3],!1),"plastic_wrap"==t.dragObject&&this.scr_stepsController.playFeedback([4],!1),"leather"==t.dragObject&&this.scr_stepsController.playFeedback([5],!1);3==this.q4_trayDropZoneCount&&(s="1"),this.scr_stepsController.onOptionDropped({optionName:o,optionIndex:i,isCorrect:n,dropZone:1,totalDropzones:1,dropCountInCurrentZone:this.q4_trayDropZoneCount,isDropCompletedInCurrentZone:s,isAllDropComplete:a,finalValue:r})},e.prototype.onOptionDroppedQuestion5=function(t){this.scr_stepsController.onOptionDropped({optionName:t.dragObject}),"redworms"==t.dragObject?(this.scr_stepsController.playFeedback([0],!0,!1),this.isQ5CorrectAnswerGiven=!0,this.scheduleOnce(function(){this.scr_uiManager.setActiveNextButton(!0)}.bind(this),10)):"hookworms"==t.dragObject?this.scr_stepsController.playFeedback([1],!1):"tapeworms"==t.dragObject?this.scr_stepsController.playFeedback([2],!1):this.scr_stepsController.playFeedback([3],!1),this.hideOptions(this.step12_options_question5,t.dragObject)},e.prototype.giveFeedbackForQestion5=function(t){t.isCorrect||t.answer},e.prototype.giveFeedbackForQestion6=function(t){if(this.scr_audioManager.play("bin_translucent",this.clipBinTranslucent,!1,"SFX"),t.isCorrect){var e=this.step13_options_question6.getChildByName("organic_bin");cc.tween(e).to(1,{opacity:0}).start();var o=this.step13_options_question6.getChildByName("organic_bin_content");cc.tween(o).to(1,{opacity:255}).start()}else{var i=this.step13_options_question6.getChildByName("inorganic_bin");cc.tween(i).to(1,{opacity:0}).start();var n=this.step13_options_question6.getChildByName("inorganic_bin_content");cc.tween(n).to(1,{opacity:255}).start()}},e.prototype.onOptionDroppedQuestion7=function(t){var e=this.step_15_question7.getChildByName("base_question").getChildByName("options").getChildByName(t.dragObject).getSiblingIndex();this.changeOpacityOfNode(this.step_15_question7.getChildByName("base_question").getChildByName("options"),0);var o=t.dragObject,i=e+1,n=t.isCorrectDropZone,s="0",r="wrong",a=!1;if(t.isCorrectDropZone){var c=!0;3==this.checkNumberOfEmptyValues(this.q7_isAllOptionsDropped)&&(c=!1),"pencil_shave"==t.dragObject&&(this.scr_stepsController.playFeedback([0],!0,c),this.q7_isAllOptionsDropped[0]=!0,this.q7_trayDropZoneCount++),"paper_pieces"==t.dragObject&&(this.scr_stepsController.playFeedback([1],!0,c),this.q7_isAllOptionsDropped[1]=!0,this.q7_trayDropZoneCount++),"coffee_powder"==t.dragObject&&(this.scr_stepsController.playFeedback([2],!0,c),this.q7_isAllOptionsDropped[2]=!0,this.q7_trayDropZoneCount++),"vegitable_peels"==t.dragObject&&(this.scr_stepsController.playFeedback([3],!0,c),this.q7_isAllOptionsDropped[3]=!0,this.q7_trayDropZoneCount++),this.q7_isAllOptionsDropped.includes(void 0)||(a=!0,r="correct",this.giveFeedbackForQestion7(!0))}else"fish_remains"==t.dragObject&&this.scr_stepsController.playFeedback([4],!1),"meat"==t.dragObject&&this.scr_stepsController.playFeedback([5],!1),"bones"==t.dragObject&&this.scr_stepsController.playFeedback([6],!1);4==this.q7_trayDropZoneCount&&(s="1"),this.scr_stepsController.onOptionDropped({optionName:o,optionIndex:i,isCorrect:n,dropZone:1,totalDropzones:1,dropCountInCurrentZone:this.q7_trayDropZoneCount,isDropCompletedInCurrentZone:s,isAllDropComplete:a,finalValue:r})},e.prototype.giveFeedbackForQestion7=function(t){if(console.log("Inside give feedback for q7 ",t),t){var e=this.step_15_question7.getChildByName("base_question").getChildByName("compost");cc.tween(e).to(2,{opacity:255}).start();var o=this.step_15_question7.getChildByName("base_question").getChildByName("place_holder");cc.tween(o).to(2,{opacity:0}).start()}},e.prototype.onOptionDroppedQuestion8=function(t){this.scr_stepsController.onOptionDropped({optionName:t.dragObject}),"news_paper"==t.dragObject?(this.scr_stepsController.playFeedback([0,3],!0,!1),this.isQ8CorrectAnswerGiven=!0,this.scheduleOnce(function(){this.scr_uiManager.setActiveNextButton(!0)}.bind(this),16)):"asbestos_sheet"==t.dragObject?this.scr_stepsController.playFeedback([1],!1):this.scr_stepsController.playFeedback([2,4],!1),this.hideOptions(this.step17_options_question8,t.dragObject)},e.prototype.giveFeedbackForQestion8=function(t){t.isCorrect||t.answer},e.prototype.checkNumberOfEmptyValues=function(t){var e=0;return t.forEach(function(t){void 0==t&&null==t||(e+=1)}),e},e.prototype.changeOpacityOfNode=function(t,e,o){void 0===o&&(o=1),cc.tween(t).to(o,{opacity:e}).start()},e.prototype.showOptions=function(t,e,o){void 0===e&&(e=3),void 0===o&&(o=!0);t.getChildByName("option1");cc.tween(t).delay(e).to(.5,{position:cc.v2(t.position.x,this.optionsShowPos)}).start(),o||cc.tween(t).to(.5,{opacity:255}).start()},e.prototype.hideOptions=function(t,e){t.getChildByName("option1"),t.getChildByName("option1");cc.tween(t).to(.5,{opacity:0}).start()},e.prototype.onCommonButtonClick=function(t){this.scr_uiManager.CommonButtonType.NextQuestion==t?this.scr_stepsController.loadNextStep():this.scr_uiManager.CommonButtonType.TryAgain==t&&this.resetAfterTryAgain()},e.prototype.disableAllExceptThis=function(t){this.step_0_1.active=!1,this.step_2.active=!1,this.step_3_4_question1.active=!1,this.step_6_question2.active=!1,this.step_8.active=!1,this.step_9_question3.active=!1,this.step_11_question4.active=!1,this.step_12_question5.active=!1,this.step_13_question6.active=!1,this.step_15_question7.active=!1,this.step_17_question8.active=!1,this.step_18.active=!1,this.step_19.active=!1,t.active=!0},n([h({type:cc.AudioClip})],e.prototype,"clip_bgMusic1",void 0),n([h(cc.Node)],e.prototype,"step_0_1",void 0),n([h(cc.Node)],e.prototype,"step_2",void 0),n([h(cc.Node)],e.prototype,"step_3_4_question1",void 0),n([h(cc.Node)],e.prototype,"step_6_question2",void 0),n([h(cc.Node)],e.prototype,"step_8",void 0),n([h(cc.Node)],e.prototype,"step_9_question3",void 0),n([h(cc.Node)],e.prototype,"step9_options_question3",void 0),n([h(cc.Node)],e.prototype,"step9_q3_feedback_with_hole",void 0),n([h(cc.Node)],e.prototype,"step9_q3_feedback_without_hole",void 0),n([h(cc.Node)],e.prototype,"step9_q3_feedback_cardboard",void 0),n([h(cc.Node)],e.prototype,"step_11_question4",void 0),n([h(cc.Node)],e.prototype,"step11_options_question4",void 0),n([h(cc.Node)],e.prototype,"step_12_question5",void 0),n([h(cc.Node)],e.prototype,"step12_options_question5",void 0),n([h(cc.Node)],e.prototype,"step_13_question6",void 0),n([h(cc.Node)],e.prototype,"step13_options_question6",void 0),n([h(cc.Node)],e.prototype,"step_15_question7",void 0),n([h(cc.Node)],e.prototype,"step15_options_question7",void 0),n([h(cc.Node)],e.prototype,"step_17_question8",void 0),n([h(cc.Node)],e.prototype,"step17_options_question8",void 0),n([h(cc.Node)],e.prototype,"step_18",void 0),n([h(cc.Node)],e.prototype,"step_19",void 0),n([h({type:cc.AudioClip})],e.prototype,"clipBinTranslucent",void 0),e=n([l],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../../framework/scripts/AudioManager":"AudioManager","../../../../framework/scripts/StepsController":"StepsController","../../../../framework/scripts/UIManager":"UIManager","./EXPL06SCI16E01_Tap_Detect":"EXPL06SCI16E01_Tap_Detect"}],EXPL07SCI04E01_Heat1:[function(t,e,o){"use strict";cc._RF.push(e,"836c7jecUVPU69yjWz+KRCi","EXPL07SCI04E01_Heat1");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/AudioManager"),r=t("../../../../framework/scripts/StepsController"),a=t("../../../../framework/scripts/UIManager"),c=t("./SharedComponents"),p=cc._decorator,l=p.ccclass,h=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.spr_normalStateDropzone=null,e.spr_correctSignifierDropzone=null,e.spr_wrongSignifierDropzone=null,e.camera_red_fov=null,e.commonBG=null,e.sharedComponents=null,e.scr_sharedComponents=null,e.step01=null,e.step23=null,e.step23NoOfDropzones=2,e.step23HeatTranferNode=null,e.step45=null,e.step45NoOfDropzones=2,e.step45HeatTranferNode1=null,e.step45HeatTranferNode2=null,e.step67=null,e.step67NoOfDropzones=3,e.step67HeatTranferNode1=null,e.step67HeatTranferNode2=null,e.step89=null,e.step89NoOfDropzones=1,e.step89HeatTranferNode=null,e.step89MiniTranformerLabel=null,e.step89MiniTranformerConnectingLabel=null,e.droppedAnswerSequece="",e.dropedanswer1="",e.dropedanswer2="",e.dropedanswer3="",e.prev_droppedNode=null,e.dropCounts=0,e.correctDropCounts=0,e}return i(e,t),e.prototype.onLoad=function(){this.scr_stepsController=this.canvas.getComponent(r.default),this.uiManager=this.canvas.getComponent(a.default),this.audioManager=this.canvas.getComponent(s.default),this.canvas.getChildByName("Main Camera").getComponent(cc.Camera).backgroundColor=cc.Color.BLACK,this.canvas.on("OnLoadStep",this.stepsHandler.bind(this)),this.canvas.on("OnCommonButtonClick",this.onCommonButtonClick.bind(this)),this.canvas.on("OnAnswerVerification",this.onAnswerVerification.bind(this)),this.node.on("OnOptionDropped",this.onOptionDropped.bind(this)),this.node.on("OnOptionDraggingStarted",this.onOptionDragStartd.bind(this)),this.scr_sharedComponents=this.sharedComponents.getComponent(c.default)},e.prototype.start=function(){this.scr_stepsController.Initialise("EXPL07SCI04E01_Heat1"),this.commonBG.opacity=0,this.sharedComponents.opacity=0,this.disableAllExceptThis(this.step01),this.scheduleOnce(function(){}.bind(this),2)},e.prototype.stepsHandler=function(t){switch(console.log("Steps handler. Next step is "+t),t){case 2:this.commonBG.runAction(cc.fadeIn(.5));break;case 3:this.SetupSceneforQ1Intro();break;case 4:this.SetupSceneforQ2Intro();break;case 5:this.SetupSceneforQ2();break;case 6:this.SetupSceneforQ3Intro();break;case 7:this.SetupSceneforQ3();break;case 8:this.SetupSceneforQ4Intro();break;case 9:this.SetupSceneforQ4()}},e.prototype.onOptionDragStartd=function(t){this.scr_stepsController.onOptionDragStarted({optionName:t.name})},e.prototype.onOptionDropped=function(t){var e=t.dragObjectNode;switch(console.log("step = ",this.scr_stepsController.getCurrentStep(),", ondrop = ",e.name),this.prev_droppedNode=e,this.scr_stepsController.getCurrentStep()){case 3:this.OnOptionDroppedQuestion1(t);break;case 5:this.OnOptionDroppedQuestion2(t);break;case 7:this.OnOptionDroppedQuestion3(t);break;case 9:this.OnOptionDroppedQuestion4(t)}},e.prototype.OnOptionDroppedQuestion1=function(t){var e=0,o=!1,i=t.isCorrectDropZone;this.dropCounts++,this.droppedAnswerSequece+=t.dragObjectNode.name,this.dropCounts==this.step23NoOfDropzones&&(o=!0),t.isCorrectDropZone&&this.correctDropCounts++,this.correctDropCounts==this.step23NoOfDropzones?(this.droppedAnswerSequece="10020",e=0):(this.droppedAnswerSequece="20100",e=1),console.log("correctAnswerSequece ",this.droppedAnswerSequece),this.scr_stepsController.onOptionDropped({optionName:t.dragObjectNode.name,optionIndex:e,isCorrect:i,totalDropzones:this.step23NoOfDropzones,isAllDropComplete:o,finalValue:this.droppedAnswerSequece})},e.prototype.OnOptionDroppedQuestion2=function(t){var e=0,o=!1,i=t.isCorrectDropZone,n="wrong";this.dropCounts++,"1"==t.dropPlace?this.dropedanswer1=t.dragObjectNode.name:"2"==t.dropPlace&&(this.dropedanswer2=t.dragObjectNode.name),2==this.dropCounts&&(this.droppedAnswerSequece=this.dropedanswer1+this.dropedanswer2),this.dropCounts==this.step45NoOfDropzones&&(o=!0),t.isCorrectDropZone&&this.correctDropCounts++,this.correctDropCounts==this.step45NoOfDropzones?(n="7030",e=0,this.HideOptionsAndDropSprite(this.step45)):(n="3070",e=1),console.log("correctAnswerSequece ",this.droppedAnswerSequece),this.scr_stepsController.onOptionDropped({optionName:t.dragObjectNode.name,optionIndex:e,isCorrect:i,totalDropzones:this.step45NoOfDropzones,isAllDropComplete:o,finalValue:n})},e.prototype.OnOptionDroppedQuestion3=function(t){var e=0,o=!1,i=t.isCorrectDropZone,n="wrong";this.dropCounts++,"1"==t.dropPlace?this.dropedanswer1=t.dragObjectNode.name:"2"==t.dropPlace?this.dropedanswer2=t.dragObjectNode.name:"3"==t.dropPlace&&(this.dropedanswer3=t.dragObjectNode.name),3==this.dropCounts&&(this.droppedAnswerSequece=this.dropedanswer1+this.dropedanswer2+this.dropedanswer3),this.dropCounts==this.step67NoOfDropzones&&(o=!0),t.isCorrectDropZone&&this.correctDropCounts++,this.correctDropCounts==this.step67NoOfDropzones?(n="correct",e=0,this.HideOptionsAndDropSprite(this.step67)):(n="wrong",e=1),console.log("correctAnswerSequece ",this.droppedAnswerSequece),this.scr_stepsController.onOptionDropped({optionName:t.dragObjectNode.name,optionIndex:e,isCorrect:i,totalDropzones:this.step67NoOfDropzones,isAllDropComplete:o,finalValue:n})},e.prototype.OnOptionDroppedQuestion4=function(t){var e=!1,o=t.isCorrectDropZone;this.dropCounts++,this.droppedAnswerSequece=t.dragObjectNode.name,this.dropCounts==this.step89NoOfDropzones&&(e=!0),this.correctDropCounts++,"100"==this.droppedAnswerSequece?this.scr_stepsController.playFeedback([1],!1,!1):this.scr_stepsController.playFeedback([0],!0,!1),console.log("correctAnswerSequece ",this.droppedAnswerSequece),this.scr_stepsController.onOptionDropped({optionName:t.dragObjectNode.name,isCorrect:o,optionIndex:0,totalDropzones:this.step89NoOfDropzones,isAllDropComplete:e,finalValue:this.droppedAnswerSequece})},e.prototype.onCommonButtonClick=function(t){this.uiManager.CommonButtonType.NextQuestion==t?this.scr_stepsController.loadNextStep():this.uiManager.CommonButtonType.TryAgain==t&&this.resetAfterTryAgain()},e.prototype.resetAfterTryAgain=function(){switch(this.scr_stepsController.getCurrentStep()){case 3:case 5:case 7:case 9:case 11:this.scr_stepsController.loadNextStep(this.scr_stepsController.getCurrentStep())}},e.prototype.onAnswerVerification=function(t){switch(console.log("Answer submitted "+t.isCorrect),this.scr_stepsController.getCurrentStep()){case 3:this.giveFeedbackForQuestion1(t);break;case 5:this.giveFeedbackForQuestion2(t);break;case 7:this.giveFeedbackForQuestion3(t);break;case 9:this.giveFeedbackForQuestion4(t)}},e.prototype.giveFeedbackForQuestion1=function(t){t.isCorrect?(this.step23HeatTranferNode.getComponent("EXPL07SCI04E01_heatTransfer").TransferHeat(!1,100,20),this.scr_sharedComponents.CameraDestroy(.75),this.scr_sharedComponents.BulbDestroy(1.5),this.HighLightDropzones(this.step23,!0),this.scr_sharedComponents.LucasRun(2)):(this.step23HeatTranferNode.getComponent("EXPL07SCI04E01_heatTransfer").TransferHeat(!0,20,100),this.scr_sharedComponents.LucasCaught(),this.scr_sharedComponents.CameraDestroy(1.5,!0),this.scr_sharedComponents.BulbDestroy(.75),this.HighLightDropzones(this.step23,!1))},e.prototype.giveFeedbackForQuestion2=function(t){t.isCorrect?(this.step45HeatTranferNode1.getComponent("EXPL07SCI04E01_heatTransfer").TransferHeat(!1,70,50),this.step45HeatTranferNode2.getComponent("EXPL07SCI04E01_heatTransfer").TransferHeat(!0,30,50),this.scr_sharedComponents.GuardStun(.75),this.scr_sharedComponents.DogStun(.75),this.scr_sharedComponents.TransformerBreakdown(1.5),this.scr_sharedComponents.BulbDestroy(1.5),this.HighLightDropzones(this.step45,!0),this.scr_sharedComponents.LucasRun(2)):(console.log("Feedback correctAnswerSequece = ",this.droppedAnswerSequece),"3070"==this.droppedAnswerSequece?(this.step45HeatTranferNode1.getComponent("EXPL07SCI04E01_heatTransfer").TransferHeat(!0,30,50),this.step45HeatTranferNode2.getComponent("EXPL07SCI04E01_heatTransfer").TransferHeat(!1,70,50),this.scr_sharedComponents.LucasCaught(),this.scr_sharedComponents.GuardAlert(1.5),this.scr_sharedComponents.TransformerBreakdown(.75),this.scr_sharedComponents.BulbDestroy(.75),this.scr_sharedComponents.DogAlert(1.5),this.HighLightDropzones(this.step45,!1)):(this.step45HeatTranferNode1.getComponent("EXPL07SCI04E01_heatTransfer").TransferHeat(!1,70,50),this.step45HeatTranferNode2.getComponent("EXPL07SCI04E01_heatTransfer").TransferHeat(!1,70,50),this.scr_sharedComponents.LucasCaught(),this.scr_sharedComponents.GuardStun(.75),this.scr_sharedComponents.TransformerBreakdown(1.5),this.scr_sharedComponents.BulbDestroy(.75),this.scr_sharedComponents.DogAlert(1.5),this.HighLightDropzones(this.step45,!1)))},e.prototype.giveFeedbackForQuestion3=function(t){t.isCorrect?(this.step67HeatTranferNode1.getComponent("EXPL07SCI04E01_heatTransfer").TransferHeat(!0,20,60),this.step67HeatTranferNode2.getComponent("EXPL07SCI04E01_heatTransfer").TransferHeat(!1,60,40),this.scr_sharedComponents.GuardStun(.75),this.scr_sharedComponents.CameraDestroy(.75),this.scr_sharedComponents.BulbDestroy(1.5),this.scr_sharedComponents.Bulb2Destroy(1.5),this.HighLightDropzones(this.step67,!0),this.scr_sharedComponents.LucasRun(2)):(console.log("feedback droppedAnswerSequece = ",this.droppedAnswerSequece),"204060"==this.droppedAnswerSequece?(this.step67HeatTranferNode1.getComponent("EXPL07SCI04E01_heatTransfer").TransferHeat(!0,20,40),this.step67HeatTranferNode2.getComponent("EXPL07SCI04E01_heatTransfer").TransferHeat(!0,40,60),this.scr_sharedComponents.GuardAlert(1.5),this.scr_sharedComponents.CameraDestroy(.75),this.scr_sharedComponents.BulbDestroy(.75),this.scr_sharedComponents.Bulb2Destroy(1.5),this.HighLightDropzones(this.step67,!1),this.scr_sharedComponents.LucasCaught()):"602040"==this.droppedAnswerSequece?(this.step67HeatTranferNode1.getComponent("EXPL07SCI04E01_heatTransfer").TransferHeat(!1,60,20),this.step67HeatTranferNode2.getComponent("EXPL07SCI04E01_heatTransfer").TransferHeat(!0,20,40),this.scr_sharedComponents.GuardAlert(1.5),this.scr_sharedComponents.CameraDestroy(1.5),this.scr_sharedComponents.BulbDestroy(.75),this.scr_sharedComponents.Bulb2Destroy(.75),this.HighLightDropzones(this.step67,!1),this.scr_sharedComponents.LucasCaught()):"604020"==this.droppedAnswerSequece?(this.step67HeatTranferNode1.getComponent("EXPL07SCI04E01_heatTransfer").TransferHeat(!1,60,40),this.step67HeatTranferNode2.getComponent("EXPL07SCI04E01_heatTransfer").TransferHeat(!1,40,20),this.scr_sharedComponents.GuardStun(.75),this.scr_sharedComponents.CameraDestroy(1.5),this.scr_sharedComponents.BulbDestroy(1.5),this.scr_sharedComponents.Bulb2Destroy(.75),this.HighLightDropzones(this.step67,!1),this.scr_sharedComponents.LucasCaught()):"402060"==this.droppedAnswerSequece&&(this.step67HeatTranferNode1.getComponent("EXPL07SCI04E01_heatTransfer").TransferHeat(!0,40,20),this.step67HeatTranferNode2.getComponent("EXPL07SCI04E01_heatTransfer").TransferHeat(!1,20,60),this.scr_sharedComponents.GuardAlert(1.5),this.scr_sharedComponents.CameraDestroy(1.5),this.scr_sharedComponents.BulbDestroy(.75),this.scr_sharedComponents.Bulb2Destroy(.75),this.HighLightDropzones(this.step67,!1),this.scr_sharedComponents.LucasCaught()))},e.prototype.giveFeedbackForQuestion4=function(t){t.isCorrect?(this.scr_sharedComponents.MiniTransformer1Break(.1),this.UpdateLabelsTemperatures(!0,this.step89MiniTranformerLabel,this.step89MiniTranformerConnectingLabel,20,60),this.scheduleOnce(function(){this.step89HeatTranferNode.getComponent("EXPL07SCI04E01_heatTransfer").TransferHeat(!0,50,40),this.scr_sharedComponents.DogStun(.75),this.scr_sharedComponents.BulbDestroy(1.5),this.HighLightDropzones(this.step89,!0),this.scr_sharedComponents.LucasRun(2)}.bind(this),2)):(this.scr_sharedComponents.MiniTransformer1Break(.1),this.UpdateLabelsTemperatures(!1,this.step89MiniTranformerLabel,this.step89MiniTranformerConnectingLabel,100,60),this.scheduleOnce(function(){this.step89HeatTranferNode.getComponent("EXPL07SCI04E01_heatTransfer").TransferHeat(!0,50,80),this.scr_sharedComponents.LucasCaught(),this.scr_sharedComponents.BulbDestroy(.75),this.scr_sharedComponents.DogBarking(1.5),this.HighLightDropzones(this.step89,!1)}.bind(this),2))},e.prototype.UpdateLabelsTemperatures=function(t,e,o,i,n){var s=e.getComponent("TextLoader"),r=o.getComponent("TextLoader"),a=(i+n)/2,c=Math.abs(i-a)/125,p=i,l=n;t?this.schedule(function(){p+=c,l-=c,s.changeLabel(Math.round(p).toString()+"\xb0C"),r.changeLabel(Math.round(l).toString()+"\xb0C")}.bind(this),.016,125,.016):this.schedule(function(){p-=c,l+=c,s.changeLabel(Math.round(p).toString()+"\xb0C"),r.changeLabel(Math.round(l).toString()+"\xb0C")}.bind(this),.016,125,.016)},e.prototype.HighLightDropzones=function(t,e){var o=this;t.getChildByName("dropzones").children.forEach(function(t){var i=cc.SpriteFrame=null;i=e?o.spr_correctSignifierDropzone:o.spr_wrongSignifierDropzone,t.getChildByName("area").getComponent(cc.Sprite).spriteFrame=i,console.log("_dropZoneSpriteFrame "+t.getChildByName("area").getComponent(cc.Sprite).spriteFrame)})},e.prototype.ShowOptions=function(t){var e=t.getChildByName("options").children;console.log("step 3 step_options ",e);var o=0;this.schedule(function(){e[o].runAction(cc.moveTo(.5,cc.v2(e[o].getPosition().x,-305))),o++}.bind(this),.5,e.length-1,0)},e.prototype.HideOptionsAndDropSprite=function(t){var e=this;t.getChildByName("options").children.forEach(function(t){t.setPosition(cc.v2(t.getPosition().x,-605)),t.active=!0}),t.getChildByName("dropzones").children.forEach(function(t){t.getComponent(cc.PolygonCollider)&&(t.getComponent(cc.PolygonCollider).enabled=!0,t.getChildByName("label").getComponent("TextLoader").changeLabel("")),t.getChildByName("area").getComponent(cc.Sprite).spriteFrame=e.spr_normalStateDropzone})},e.prototype.SetupSceneforQ1Intro=function(){this.dropCounts=0,this.correctDropCounts=0,this.droppedAnswerSequece="",this.disableAllExceptThis(this.step23),this.scr_sharedComponents.InitiatializeComponents(this.step23),this.sharedComponents.runAction(cc.fadeIn(1)),this.step23HeatTranferNode.getComponent("EXPL07SCI04E01_heatTransfer").Reset(),this.HideOptionsAndDropSprite(this.step23),this.ShowOptions(this.step23)},e.prototype.SetupSceneforQ2Intro=function(){this.dropCounts=0,this.correctDropCounts=0,this.droppedAnswerSequece="",this.disableAllExceptThis(this.step45),this.scr_sharedComponents.InitiatializeComponents(this.step45),this.sharedComponents.runAction(cc.fadeIn(1)),this.step45HeatTranferNode1.getComponent("EXPL07SCI04E01_heatTransfer").Reset(),this.step45HeatTranferNode2.getComponent("EXPL07SCI04E01_heatTransfer").Reset(),this.HideOptionsAndDropSprite(this.step45)},e.prototype.SetupSceneforQ2=function(){this.dropCounts=0,this.correctDropCounts=0,this.droppedAnswerSequece="",this.disableAllExceptThis(this.step45),this.scr_sharedComponents.InitiatializeComponents(this.step45),this.sharedComponents.runAction(cc.fadeIn(1)),this.step45HeatTranferNode1.getComponent("EXPL07SCI04E01_heatTransfer").Reset(),this.step45HeatTranferNode2.getComponent("EXPL07SCI04E01_heatTransfer").Reset(),this.HideOptionsAndDropSprite(this.step45),this.ShowOptions(this.step45)},e.prototype.SetupSceneforQ3Intro=function(){this.dropCounts=0,this.correctDropCounts=0,this.droppedAnswerSequece="",this.disableAllExceptThis(this.step67),this.scr_sharedComponents.InitiatializeComponents(this.step67),this.sharedComponents.runAction(cc.fadeIn(1)),this.step67HeatTranferNode1.getComponent("EXPL07SCI04E01_heatTransfer").Reset(),this.step67HeatTranferNode2.getComponent("EXPL07SCI04E01_heatTransfer").Reset(),this.HideOptionsAndDropSprite(this.step67)},e.prototype.SetupSceneforQ3=function(){this.dropCounts=0,this.correctDropCounts=0,this.droppedAnswerSequece="",this.disableAllExceptThis(this.step67),this.scr_sharedComponents.InitiatializeComponents(this.step67),this.sharedComponents.runAction(cc.fadeIn(1)),this.step67HeatTranferNode1.getComponent("EXPL07SCI04E01_heatTransfer").Reset(),this.step67HeatTranferNode2.getComponent("EXPL07SCI04E01_heatTransfer").Reset(),this.HideOptionsAndDropSprite(this.step67),this.ShowOptions(this.step67)},e.prototype.SetupSceneforQ4Intro=function(){this.dropCounts=0,this.correctDropCounts=0,this.droppedAnswerSequece="",this.disableAllExceptThis(this.step89),this.scr_sharedComponents.InitiatializeComponents(this.step89),this.sharedComponents.runAction(cc.fadeIn(1)),this.step89HeatTranferNode.getComponent("EXPL07SCI04E01_heatTransfer").Reset(),this.HideOptionsAndDropSprite(this.step89)},e.prototype.SetupSceneforQ4=function(){this.dropCounts=0,this.correctDropCounts=0,this.droppedAnswerSequece="",this.disableAllExceptThis(this.step89),this.scr_sharedComponents.InitiatializeComponents(this.step89),this.sharedComponents.runAction(cc.fadeIn(1)),this.step89HeatTranferNode.getComponent("EXPL07SCI04E01_heatTransfer").Reset(),this.HideOptionsAndDropSprite(this.step89),this.ShowOptions(this.step89)},e.prototype.disableAllExceptThis=function(t){this.step01.active=!1,this.step23.active=!1,this.step45.active=!1,this.step67.active=!1,this.step89.active=!1,t.active=!0},n([h(cc.Node)],e.prototype,"canvas",void 0),n([h(cc.SpriteFrame)],e.prototype,"spr_normalStateDropzone",void 0),n([h(cc.SpriteFrame)],e.prototype,"spr_correctSignifierDropzone",void 0),n([h(cc.SpriteFrame)],e.prototype,"spr_wrongSignifierDropzone",void 0),n([h(cc.SpriteFrame)],e.prototype,"camera_red_fov",void 0),n([h(cc.Node)],e.prototype,"commonBG",void 0),n([h(cc.Node)],e.prototype,"sharedComponents",void 0),n([h(cc.Node)],e.prototype,"step01",void 0),n([h(cc.Node)],e.prototype,"step23",void 0),n([h],e.prototype,"step23NoOfDropzones",void 0),n([h(cc.Node)],e.prototype,"step23HeatTranferNode",void 0),n([h(cc.Node)],e.prototype,"step45",void 0),n([h],e.prototype,"step45NoOfDropzones",void 0),n([h(cc.Node)],e.prototype,"step45HeatTranferNode1",void 0),n([h(cc.Node)],e.prototype,"step45HeatTranferNode2",void 0),n([h(cc.Node)],e.prototype,"step67",void 0),n([h],e.prototype,"step67NoOfDropzones",void 0),n([h(cc.Node)],e.prototype,"step67HeatTranferNode1",void 0),n([h(cc.Node)],e.prototype,"step67HeatTranferNode2",void 0),n([h(cc.Node)],e.prototype,"step89",void 0),n([h],e.prototype,"step89NoOfDropzones",void 0),n([h(cc.Node)],e.prototype,"step89HeatTranferNode",void 0),n([h(cc.Node)],e.prototype,"step89MiniTranformerLabel",void 0),n([h(cc.Node)],e.prototype,"step89MiniTranformerConnectingLabel",void 0),e=n([l],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../../framework/scripts/AudioManager":"AudioManager","../../../../framework/scripts/StepsController":"StepsController","../../../../framework/scripts/UIManager":"UIManager","./SharedComponents":"SharedComponents"}],EXPL07SCI04E01_dragNdrop:[function(t,e,o){"use strict";cc._RF.push(e,"91bc9gbsHxOhpGKhYWuz8H9","EXPL07SCI04E01_dragNdrop");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=s.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dropzones=null,e.startPos=null,e.gameNode=null,e.correctDropzones=[],e.isOptionDropped=!1,e}return i(e,t),e.prototype.start=function(){this.gameNode.on("OnOptionDraggingStarted",function(t){this.currentDraggingObject=t}.bind(this)),this.gameNode.on("OnOptionDraggingEnded",function(t){this.currentDraggingObject=t}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_START,function(t){this.startPos=new cc.Vec2(this.node.position.x,this.node.position.y),this.isOptionDropped=!1,console.log("touch_start = ",this.node.name),null!=this.currentDraggingObject&&""!=this.currentDraggingObject||this.gameNode.emit("OnOptionDraggingStarted",this.node.name)}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){if(this.currentDraggingObject==this.node.name){var e=t.getLocation(),o=this.node.parent.convertToNodeSpaceAR(e);this.node.setPosition(o)}}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_END,function(t){var e=this;this.gameNode.emit("OnOptionDraggingEnded","");var o=this.node.parent.convertToWorldSpaceAR(this.node.position);this.dropzones.children.forEach(function(t){var i=t.convertToNodeSpaceAR(o);if(t.getComponent(cc.PolygonCollider)&&t.getComponent(cc.PolygonCollider).enabled&&cc.Intersection.pointInPolygon(new cc.Vec2(i.x,i.y),t.getComponent(cc.PolygonCollider).world.points)){console.log("Dropped inside dropzone"),e.node.active=!1,e.node.position=e.startPos;var n={};n.dragObject=e.node.name,n.dragObjectNode=e.node,n.dropPlace=t.name,e.correctDropzones.forEach(function(e){t.name==e.name&&(n.isCorrectDropZone=!0)}),e.gameNode.emit("OnOptionDropped",n),e.isOptionDropped=!0,t.getComponent(cc.PolygonCollider).enabled=!1,t.getChildByName("label").getComponent("TextLoader").changeLabel(e.node.name+"degree"),console.log("dropzone ",t.getChildByName("label").getComponent("TextLoader"))}}),this.isOptionDropped||this.node.runAction(cc.moveTo(.3,this.startPos))}.bind(this))},n([a(cc.Node)],e.prototype,"dropzones",void 0),n([a(cc.Node)],e.prototype,"gameNode",void 0),n([a(cc.Node)],e.prototype,"correctDropzones",void 0),e=n([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],EXPL07SCI04E01_heatTransfer:[function(t,e,o){"use strict";cc._RF.push(e,"59fbaTCebBGW4sgaYtSXKDj","EXPL07SCI04E01_heatTransfer");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=s.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.leftEndPosX=0,e.rightEndPosX=0,e.isRIghtToLeft=!0,e.canvas=null,e.label_left=null,e.label_right=null,e.progressBarComponent=null,e.initValueLeft=null,e.initValueRight=null,e}return i(e,t),e.prototype.onLoad=function(){this.progressBarComponent=this.node.getComponent(cc.ProgressBar),this.progressBarComponent.progress=0,this.progressBarComponent.reverse=!0},e.prototype.Reset=function(){this.progressBarComponent.progress=0,this.progressBarComponent.reverse=!0,null!=this.initValueLeft&&this.label_left.node.getComponent("TextLoader").changeLabel(this.initValueLeft.toString()+"\xb0C"),null!=this.initValueRight&&this.label_right.node.getComponent("TextLoader").changeLabel(this.initValueRight.toString()+"\xb0C")},e.prototype.TransferHeat=function(t,e,o){this.progressBarComponent.progress=0,this.progressBarComponent.reverse=!0;var i=this.label_left.node.getComponent("TextLoader"),n=this.label_right.node.getComponent("TextLoader"),s=(e+o)/2,r=Math.abs(e-s)/125,a=e,c=o;this.isRIghtToLeft=t,this.isRIghtToLeft?(this.node.setPosition(this.rightEndPosX,this.node.position.y),this.node.scaleX=1,cc.tween(this.progressBarComponent).by(2,{progress:1}).start(),this.schedule(function(){a+=r,c-=r,i.changeLabel(Math.round(a).toString()+"\xb0C"),n.changeLabel(Math.round(c).toString()+"\xb0C")}.bind(this),.016,125,.016)):(this.node.setPosition(this.leftEndPosX,this.node.position.y),this.node.scaleX=-1,cc.tween(this.progressBarComponent).by(2,{progress:1}).start(),this.schedule(function(){a-=r,c+=r,i.changeLabel(Math.round(a).toString()+"\xb0C"),n.changeLabel(Math.round(c).toString()+"\xb0C")}.bind(this),.016,125,.016))},n([a],e.prototype,"leftEndPosX",void 0),n([a],e.prototype,"rightEndPosX",void 0),n([a],e.prototype,"isRIghtToLeft",void 0),n([a(cc.Node)],e.prototype,"canvas",void 0),n([a(cc.Label)],e.prototype,"label_left",void 0),n([a(cc.Label)],e.prototype,"label_right",void 0),n([a],e.prototype,"initValueLeft",void 0),n([a],e.prototype,"initValueRight",void 0),e=n([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],EXPL07SCI04E02_Option_Drag:[function(t,e,o){"use strict";cc._RF.push(e,"eb289pmHslFZpgoS114sbOI","EXPL07SCI04E02_Option_Drag");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=s.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.middlePoint=0,e.object1=null,e.object2=null,e.isHorizontal=!0,e.gameNode=null,e}return i(e,t),e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,function(t){this.isHorizontal?this.node.x>this.middlePoint?(this.gameNode.emit("OnOptionDropped",this.object1.name),console.log("Object drag started ",this.object1.name)):(this.gameNode.emit("OnOptionDropped",this.object2.name),console.log("Object drag started ",this.object2.name)):this.node.y>this.middlePoint?(this.gameNode.emit("OnOptionDropped",this.object1.name),console.log("Object drag started ",this.object1.name)):(this.gameNode.emit("OnOptionDropped",this.object2.name),console.log("Object drag started ",this.object2.name))}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){var e=t.touch.getDelta();this.isHorizontal?(this.node.x<this.object1.position.x&&(this.node.x=this.object1.position.x),this.node.x>this.object2.position.x&&(this.node.x=this.object2.position.x),this.node.x+=e.x):(this.node.y<this.object1.position.y&&(this.node.y=this.object1.position.y),this.node.y>this.object2.position.y&&(this.node.y=this.object2.position.y),this.node.y+=e.y)}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(t){console.log("touch cancel"),this.adjustPinPosition()}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_END,function(t){console.log("touch end"),this.adjustPinPosition()}.bind(this))},e.prototype.adjustPinPosition=function(){console.log("Adjusting position"),this.isHorizontal?this.node.x>this.middlePoint?(this.node.x=this.object2.position.x,this.gameNode.emit("OnOptionDropped",this.object2.name),console.log("Object placed is ",this.object2.name)):(this.node.x=this.object1.position.x,this.gameNode.emit("OnOptionDropped",this.object1.name),console.log("Object placed is ",this.object1.name)):this.node.y>this.middlePoint?(this.node.y=this.object2.position.y,this.gameNode.emit("OnOptionDropped",this.object2.name),console.log("Object placed is ",this.object2.name)):(this.node.y=this.object1.position.y,this.gameNode.emit("OnOptionDropped",this.object1.name),console.log("Object placed is ",this.object1.name))},n([a({type:cc.Integer})],e.prototype,"middlePoint",void 0),n([a(cc.Node)],e.prototype,"object1",void 0),n([a(cc.Node)],e.prototype,"object2",void 0),n([a(cc.Boolean)],e.prototype,"isHorizontal",void 0),n([a(cc.Node)],e.prototype,"gameNode",void 0),e=n([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],EXPL07SCI04E02_Pin_Drag:[function(t,e,o){"use strict";cc._RF.push(e,"f3055j6K7VK7YMKcX0jdFi5","EXPL07SCI04E02_Pin_Drag");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=s.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.middlePoint=0,e.object1=null,e.object2=null,e.gameNode=null,e.gateInitPosY=null,e}return i(e,t),e.prototype.onLoad=function(){this.gateInitPosY=this.node.position.y,this.gameNode.on("ChangeGateState",function(t){console.log("change gate state is called ",t,this.node.y),t||(this.node.y=this.gateInitPosY),console.log("After changing pos ",this.node.y)}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){var e=t.touch.getDelta();this.node.y<this.object1.position.y&&(this.node.y=this.object1.position.y),this.node.y>this.object2.position.y&&(this.node.y=this.object2.position.y),this.node.y+=e.y}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(t){console.log("touch cancel"),this.adjustPinPosition()}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_END,function(t){console.log("touch end"),this.adjustPinPosition()}.bind(this))},e.prototype.adjustPinPosition=function(){console.log("Adjusting position"),this.node.y>this.middlePoint?(this.node.y=this.object2.position.y,this.gameNode.emit("OnGateMoved",this.object2.name),console.log("gate state is ",this.object2.name)):(this.node.y=this.object1.position.y,this.gameNode.emit("OnGateMoved",this.object1.name),console.log("gate state is ",this.object1.name))},n([a({type:cc.Integer})],e.prototype,"middlePoint",void 0),n([a(cc.Node)],e.prototype,"object1",void 0),n([a(cc.Node)],e.prototype,"object2",void 0),n([a(cc.Node)],e.prototype,"gameNode",void 0),e=n([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],EXPL07SCI04E02_heat_2:[function(t,e,o){"use strict";cc._RF.push(e,"32dcccFn+ZLl6jQdBUASHWV","EXPL07SCI04E02_heat_2");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/AudioManager"),r=t("../../../../framework/scripts/StepsController"),a=t("../../../../framework/scripts/UIManager"),c=cc._decorator,p=c.ccclass,l=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.step_0_1=null,e.step_2=null,e.step_3_question_1=null,e.character_q1=null,e.materialOnFurnace_q1="aluminium",e}return i(e,t),e.prototype.onLoad=function(){this.stepsController=this.canvas.getComponent(r.default),this.uiManager=this.canvas.getComponent(a.default),this.audioManager=this.canvas.getComponent(s.default),this.canvas.on("OnLoadStep",this.stepsHandler.bind(this)),this.canvas.on("OnCommonButtonClick",this.onCommonButtonClick.bind(this)),this.node.on("OnOptionDropped",this.onOptionDropped.bind(this)),this.node.on("OnOptionDraggingStarted",this.onOptionDragStartd.bind(this)),this.node.on("OnGateMoved",this.onGateMoved.bind(this))},e.prototype.start=function(){this.stepsController.Initialise("EXPL07SCI04E02_heat_2"),this.setupSceneForStep_0_1()},e.prototype.stepsHandler=function(t){switch(console.log("Steps handler. Next step is "+t),t){case 2:this.setupSceneForStep_2();break;case 3:this.setupSceneForStep_3_Question_1()}},e.prototype.onOptionDragStartd=function(t){this.stepsController.onOptionDragStarted({optionName:t})},e.prototype.onOptionDropped=function(t){switch(this.stepsController.onOptionDropped({optionName:t}),this.stepsController.getCurrentStep()){case 3:this.materialOnFurnace_q1=t}},e.prototype.resetAfterTryAgain=function(){switch(this.stepsController.getCurrentStep()){case 3:this.setupSceneForStep_3_Question_1(),this.stepsController.loadNextStep(this.stepsController.getCurrentStep())}},e.prototype.onCommonButtonClick=function(t){this.uiManager.CommonButtonType.NextQuestion==t?this.stepsController.loadNextStep():this.uiManager.CommonButtonType.TryAgain==t&&this.resetAfterTryAgain()},e.prototype.onGateMoved=function(t){switch(this.stepsController.getCurrentStep()){case 3:this.onGateMoved_q1(t)}},e.prototype.setupSceneForStep_0_1=function(){this.disableAllExceptThis(this.step_0_1)},e.prototype.setupSceneForStep_2=function(){this.disableAllExceptThis(this.step_2)},e.prototype.setupSceneForStep_3_Question_1=function(){this.disableAllExceptThis(this.step_3_question_1),this.node.emit("ChangeGateState",!1),this.character_q1.getComponent(cc.Animation).play("character_default_state")},e.prototype.onGateMoved_q1=function(t){console.log("gate is ",t),"open"==t&&("wood"==this.materialOnFurnace_q1?(this.character_q1.getComponent(cc.Animation).play("q1_correct_feedback"),this.stepsController.playFeedback([1],!0)):(this.character_q1.getComponent(cc.Animation).play("q1_wrong_feedback"),this.stepsController.playFeedback([0],!1)))},e.prototype.disableAllExceptThis=function(t){this.step_0_1.active=!1,this.step_2.active=!1,this.step_3_question_1.active=!1,t.active=!0},n([l(cc.Node)],e.prototype,"canvas",void 0),n([l(cc.Node)],e.prototype,"step_0_1",void 0),n([l(cc.Node)],e.prototype,"step_2",void 0),n([l(cc.Node)],e.prototype,"step_3_question_1",void 0),n([l(cc.Node)],e.prototype,"character_q1",void 0),e=n([p],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../../framework/scripts/AudioManager":"AudioManager","../../../../framework/scripts/StepsController":"StepsController","../../../../framework/scripts/UIManager":"UIManager"}],EXPL07_Sample:[function(t,e,o){"use strict";cc._RF.push(e,"76ddaFT6kJM/5AJ9Sb+NPHD","EXPL07_Sample");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/AudioManager"),r=t("../../../../framework/scripts/StepsController"),a=t("../../../../framework/scripts/UIManager"),c=t("../scripts/EXPL_selectionpanel"),p=cc._decorator,l=p.ccclass,h=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.selectionPanel=null,e.intro=null,e.q1=null,e.outro=null,e.aud_correctfeedback=null,e.aud_wrongfeedback=null,e.aud_bgm=null,e.hintPanel=null,e.hintFrames=[],e}return i(e,t),e.prototype.onLoad=function(){this.scr_stepsController=this.canvas.getComponent(r.default),this.uiManager=this.canvas.getComponent(a.default),this.audioManager=this.canvas.getComponent(s.default),this.canvas.on("OnLoadStep",this.stepsHandler.bind(this)),this.canvas.on("OnCommonButtonClick",this.onCommonButtonClick.bind(this)),this.scr_selectionPanel=this.selectionPanel.getComponent(c.default),this.node.on("OnOptionSelected",this.OnOptionSelected.bind(this))},e.prototype.start=function(){this.scr_stepsController.Initialise("EXPL07_Sample"),this.disableAllExceptThis(),this.audioManager.play("bgm",this.aud_bgm,!0,"BGM")},e.prototype.stepsHandler=function(t){switch(console.log("Steps handler. Current step is "+t),t){case 0:this.setupSceneForStep0();break;case 1:this.setupSceneForStep1();break;case 2:this.setupSceneForStep2Question1();break;case 3:this.setupSceneForStep3()}},e.prototype.OnOptionSelected=function(t){console.log("_selectedOption ",t);"2"==t?(this.audioManager.play("correctfeedback",this.aud_correctfeedback,!1,"SFX"),2==this.scr_stepsController.getCurrentStep()&&(this.q1.getChildByName("questionpart").active=!1,this.q1.getChildByName("feedbacks").active=!0,this.q1.getChildByName("feedbacks").getComponent(cc.Label).string="Show actions for Option 2"),this.scr_stepsController.playFeedback([1],!0,!1),this.scheduleOnce(function(){this.uiManager.setActiveNextButton(!0)}.bind(this),2)):(this.audioManager.play("wrongfeedback",this.aud_wrongfeedback,!1,"SFX"),2==this.scr_stepsController.getCurrentStep()&&(this.q1.getChildByName("questionpart").active=!1,this.q1.getChildByName("feedbacks").active=!0,this.q1.getChildByName("feedbacks").getComponent(cc.Label).string="Show actions for Option "+t),"1"==t?this.scr_stepsController.playFeedback([0],!1,!1):"3"==t?this.scr_stepsController.playFeedback([2],!1,!1):"4"==t&&this.scr_stepsController.playFeedback([3],!1,!1),this.scheduleOnce(function(){this.uiManager.setActiveTryAgainButton(!0)}.bind(this),2))},e.prototype.onCommonButtonClick=function(t){this.uiManager.CommonButtonType.NextQuestion==t?this.scr_stepsController.loadNextStep():this.uiManager.CommonButtonType.TryAgain==t?this.scr_stepsController.loadNextStep(this.scr_stepsController.getCurrentStep()):this.uiManager.CommonButtonType.Hint==t&&(this.hintPanel.active=!0,1==this.scr_stepsController.getCurrentQuestionIndex()&&(this.hintPanel.getComponent(cc.Sprite).spriteFrame=this.hintFrames[3]),2==this.scr_stepsController.getCurrentQuestionIndex()&&(this.hintPanel.getComponent(cc.Sprite).spriteFrame=this.hintFrames[1]))},e.prototype.onHintCloseButtonClick=function(){this.hintPanel.active=!1},e.prototype.setupSceneForStep0=function(){this.disableAllExceptThis(this.intro),this.intro.children[0].active=!0,this.intro.children[1].active=!1},e.prototype.setupSceneForStep1=function(){this.intro.children[0].active=!1,this.intro.children[1].active=!0},e.prototype.setupSceneForStep2Question1=function(){this.disableAllExceptThis(this.q1),this.q1.getChildByName("questionpart").active=!0,this.q1.getChildByName("feedbacks").active=!1,this.scheduleOnce(function(){this.scr_selectionPanel.ShowPanel()}.bind(this),4)},e.prototype.setupSceneForStep3=function(){this.disableAllExceptThis(this.outro)},e.prototype.disableAllExceptThis=function(t){void 0===t&&(t=null),this.intro.active=!1,this.q1.active=!1,this.outro.active=!1,null!=t&&(t.active=!0)},n([h(cc.Node)],e.prototype,"canvas",void 0),n([h(cc.Node)],e.prototype,"selectionPanel",void 0),n([h(cc.Node)],e.prototype,"intro",void 0),n([h(cc.Node)],e.prototype,"q1",void 0),n([h(cc.Node)],e.prototype,"outro",void 0),n([h({type:cc.AudioClip})],e.prototype,"aud_correctfeedback",void 0),n([h({type:cc.AudioClip})],e.prototype,"aud_wrongfeedback",void 0),n([h({type:cc.AudioClip})],e.prototype,"aud_bgm",void 0),n([h(cc.Node)],e.prototype,"hintPanel",void 0),n([h({type:cc.SpriteFrame})],e.prototype,"hintFrames",void 0),e=n([l],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../../framework/scripts/AudioManager":"AudioManager","../../../../framework/scripts/StepsController":"StepsController","../../../../framework/scripts/UIManager":"UIManager","../scripts/EXPL_selectionpanel":"EXPL_selectionpanel"}],EXPL09MAT14E01_Dreamteammode:[function(t,e,o){"use strict";cc._RF.push(e,"663b8a07jFNM4fxin0ls2og","EXPL09MAT14E01_Dreamteammode");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/AudioManager"),r=t("../../../../framework/scripts/AnalyticsManager"),a=t("../../../../framework/scripts/StepsController"),c=t("../../../../framework/scripts/UIManager"),p=t("../scripts/EXPL09MAT14E01_Questionnanager"),l=t("../../../../framework/prefab/template3/Template3_Tutorial"),h=t("../scripts/EXPL09MAT14E01_DynamicAssetList"),d=cc._decorator,u=d.ccclass,g=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.introsetup=null,e.outrosetup=null,e.translarentNode=null,e.questionNode=null,e.aud_bgm=null,e.headerCharacterSet=[],e.tutorial=null,e.isTutorialShown=!1,e}return i(e,t),e.prototype.onLoad=function(){this.isTutorialShown=!1,this.scr_stepsController=this.canvas.getComponent(a.default),this.uiManager=this.canvas.getComponent(c.default),this.audioManager=this.canvas.getComponent(s.default),this.scr_analyticsManager=this.canvas.getComponent(r.default),this.canvas.on("OnLoadStep",this.stepsHandler.bind(this)),this.canvas.on("OnCommonButtonClick",this.onCommonButtonClick.bind(this)),this.canvas.on("OnAllStepComplete",this.OnAllStepComplete,this),this.node.on("OnClickSelection",this.OnClickSelection.bind(this)),this.tutorial.node.on("onTutorialStop",this.onCloseTutorial,this),this.canvas.getChildByName("Main Camera").getComponent(cc.Camera).backgroundColor=cc.Color.BLACK},e.prototype.start=function(){this.scr_stepsController.Initialise("EXPL09MAT14E01_DreamteamMean"),this.IntroSequencing(),this.audioManager.play("bgm",this.aud_bgm,!0,"BGM")},e.prototype.stepsHandler=function(t){switch(console.log("Steps handler. Next step is "+t),t){case 0:this.uiManager.setActiveHeaderCharacter(!1);break;case 2:case 5:this.uiManager.setActiveHeaderCharacter(!0),this.disableQuestionNode(),this.enableQuestionNode();break;case 3:case 4:case 6:case 7:case 9:case 11:case 13:case 15:this.enableQuestionInteraction();break;case 8:case 10:case 12:case 14:this.disableQuestionNode(),this.enableQuestionNode(),this.enableQuestionInteraction();break;case 16:this.uiManager.setActiveHeaderCharacter(!1),this.uiManager.setActiveCloseButton(!1),this.canvas.emit("OnEndScreenReach",{}),this.disableQuestionNode(),this.enableOutroNode();break;case 17:this.enableOutroNode(1);break;case 18:this.enableOutroNode(2)}},e.prototype.onCommonButtonClick=function(t){this.uiManager.CommonButtonType.NextQuestion==t?(this.scr_analyticsManager.sendNextQuestionStart(this.scr_stepsController.getCurrentQuestionIndex(),!1,this.scr_analyticsManager.Phylum.Click),this.scr_stepsController.loadNextStep(),this.uiManager.changeHeaderCharacter(this.headerCharacterSet[0]),this.questionNode.getComponent(p.default).resetAfterNext()):this.uiManager.CommonButtonType.TryAgain==t&&(this.scr_analyticsManager.sendOnTryAgain(this.scr_stepsController.getCurrentQuestionIndex(),this.questionNode.getComponent(p.default).getCurrentSelectedOption()+1),this.uiManager.changeHeaderCharacter(this.headerCharacterSet[0]),this.resetAfterTryAgain())},e.prototype.resetAfterTryAgain=function(){if(null!=this.questionNode){var t=this.scr_stepsController.getCurrentStepJson();this.scheduleOnce(function(){this.questionNode.getComponent(p.default).resetAfterTryAgain(),this.questionNode.getComponent(p.default).enableQuestionInteraction(t.answer,t.userInput,0)}.bind(this),1)}},e.prototype.IntroSequencing=function(){this.introsetup.active=!0,this.introsetup.opacity=0,cc.tween(this.introsetup).to(2,{opacity:255}).start()},e.prototype.enableOutroNode=function(t){var e=this;if(void 0===t&&(t=0),this.outrosetup.active=!0,0==t)this.outrosetup.getChildByName("outro_1").active=!0,this.outrosetup.getChildByName("outro_2").active=!1;else if(this.outrosetup.getChildByName("outro_2").active=!0,this.outrosetup.getChildByName("outro_1").active=!1,1==t){this.outrosetup.getChildByName("outro_2").getChildByName("leftpanel").active=!0,this.outrosetup.getChildByName("outro_2").getChildByName("leftpanel").opacity=0,this.outrosetup.getChildByName("outro_2").getChildByName("leftpanel").runAction(cc.fadeTo(1,255));var o=this.outrosetup.getChildByName("outro_2").getChildByName("leftpanel").getChildByName("yellowRectangle");cc.tween(this.outrosetup).delay(3).call(function(){o.active=!0,o.runAction(cc.blink(1,3))}).delay(1).call(function(){var t=e.outrosetup.getChildByName("outro_2").getChildByName("leftpanel").getChildByName("totalscore").getChildByName("green_h");t.active=!0,t.runAction(cc.blink(1,3)),e.audioManager.play("positive",h.default.getInstance().sfx_3_positive,!1)}).start()}else this.outrosetup.getChildByName("outro_2").getChildByName("rightpanel").active=!0,this.outrosetup.getChildByName("outro_2").getChildByName("rightpanel").opacity=0,this.outrosetup.getChildByName("outro_2").getChildByName("rightpanel").runAction(cc.fadeTo(1,255)),cc.tween(this.outrosetup).delay(1.5).call(function(){var t=e.outrosetup.getChildByName("outro_2").getChildByName("rightpanel").getChildByName("yellowRectangle");t.active=!0,t.runAction(cc.blink(1,3))}).delay(2).call(function(){var t=e.outrosetup.getChildByName("outro_2").getChildByName("rightpanel").getChildByName("totalmatches").getChildByName("green_h");t.active=!0,t.runAction(cc.blink(1,3)),e.audioManager.play("positive",h.default.getInstance().sfx_3_positive,!1)}).start()},e.prototype.OnAllStepComplete=function(){this.outrosetup.getChildByName("outro_2").runAction(cc.moveTo(.5,cc.v2(0,100)))},e.prototype.enableQuestionNode=function(){this.introsetup.active=!1;var t=this.scr_stepsController.getCurrentStepJson();this.questionNode=this.node.getChildByName(t.questionId),null!=this.questionNode&&(this.questionNode.active=!0),t.hasOwnProperty("row1")&&this.questionNode.getComponent(p.default).updateQuestionUI(t.row1,t.row2)},e.prototype.enableQuestionInteraction=function(){if(null!=this.questionNode){var t=this.scr_stepsController.getCurrentStepJson();this.isTutorialShown?this.questionNode.getComponent(p.default).enableQuestionInteraction(t.answer,t.userInput,t.appearanceDelay):this.scheduleOnce(function(){this.showQuestionTutorial()}.bind(this),t.appearanceDelay)}},e.prototype.disableQuestionNode=function(){null!=this.questionNode&&(this.questionNode.getComponent(p.default).disableEventListner(),this.questionNode.active=!1)},e.prototype.OnClickSelection=function(t,e){this.uiManager.setActiveHintButton(!1);var o=this.scr_stepsController.getCurrentStepJson(),i=0;3==this.scr_stepsController.getCurrentQuestionIndex()&&t?(this.scr_stepsController.playFeedback([e,4],t,!1),i=o.feedBack[e].duration+o.feedBack[4].duration):(this.scr_stepsController.playFeedback([e],t,!1),i=o.feedBack[e].duration),t?this.scheduleOnce(function(){this.uiManager.setActiveNextButton(!0)}.bind(this),i):this.scheduleOnce(function(){this.uiManager.setActiveTryAgainButton(!0)}.bind(this),i)},e.prototype.getHeaderCharacterSet=function(){return this.headerCharacterSet},e.prototype.showQuestionTutorial=function(){this.isTutorialShown||(this.tutorial.show(),this.isTutorialShown=!0)},e.prototype.onCloseTutorial=function(){var t=this.scr_stepsController.getCurrentStepJson();this.questionNode.getComponent(p.default).enableQuestionInteraction(t.answer,t.userInput,0)},n([g(cc.Node)],e.prototype,"canvas",void 0),n([g(cc.Node)],e.prototype,"introsetup",void 0),n([g(cc.Node)],e.prototype,"outrosetup",void 0),n([g(cc.Node)],e.prototype,"translarentNode",void 0),n([g({type:cc.AudioClip})],e.prototype,"aud_bgm",void 0),n([g(cc.SpriteFrame)],e.prototype,"headerCharacterSet",void 0),n([g(l.default)],e.prototype,"tutorial",void 0),e=n([u],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../../../../framework/prefab/template3/Template3_Tutorial":"Template3_Tutorial","../../../../framework/scripts/AnalyticsManager":"AnalyticsManager","../../../../framework/scripts/AudioManager":"AudioManager","../../../../framework/scripts/StepsController":"StepsController","../../../../framework/scripts/UIManager":"UIManager","../scripts/EXPL09MAT14E01_DynamicAssetList":"EXPL09MAT14E01_DynamicAssetList","../scripts/EXPL09MAT14E01_Questionnanager":"EXPL09MAT14E01_Questionnanager"}],EXPL09MAT14E01_DynamicAssetList:[function(t,e,o){"use strict";cc._RF.push(e,"0f747NGnt1DV7IBjULT/519","EXPL09MAT14E01_DynamicAssetList");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=s.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.amb_2_crowdshort=null,e.foley_1_stumps=null,e.foley_2_bathit=null,e.sfx_1_popup=null,e.sfx_2_hint=null,e.sfx_3_positive=null,e.sfx_4_negative=null,e.sfx_5_tapselect=null,e}var o;return i(e,t),o=e,e.prototype.onLoad=function(){o._mInstance=this},e.getInstance=function(){return this._mInstance},e._mInstance=null,n([a({type:cc.AudioClip})],e.prototype,"amb_2_crowdshort",void 0),n([a({type:cc.AudioClip})],e.prototype,"foley_1_stumps",void 0),n([a({type:cc.AudioClip})],e.prototype,"foley_2_bathit",void 0),n([a({type:cc.AudioClip})],e.prototype,"sfx_1_popup",void 0),n([a({type:cc.AudioClip})],e.prototype,"sfx_2_hint",void 0),n([a({type:cc.AudioClip})],e.prototype,"sfx_3_positive",void 0),n([a({type:cc.AudioClip})],e.prototype,"sfx_4_negative",void 0),n([a({type:cc.AudioClip})],e.prototype,"sfx_5_tapselect",void 0),e=o=n([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],EXPL09MAT14E01_Questionnanager:[function(t,e,o){"use strict";cc._RF.push(e,"a5a7a4LQUdLOb6esyHbCJys","EXPL09MAT14E01_Questionnanager");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/StepsController"),r=t("../scripts/EXPL09MAT14E01_Dreamteammode"),a=t("../../../../framework/scripts/AudioManager"),c=t("../../../../framework/scripts/UIManager"),p=t("../scripts/EXPL09MAT14E01_ball_anim"),l=t("../scripts/EXPL09MAT14E01_Timer"),h=t("../scripts/EXPL09MAT14E01_DynamicAssetList"),d=t("../../../../framework/prefab/template3/Template3_OptionHandler"),u=t("../../../../framework/scripts/AnalyticsManager"),g=cc._decorator,y=g.ccclass,m=g.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.optionHandler=null,e.optionHandlerType2=null,e.submitKey="",e.timerNode=null,e.currentInteractionType="",e.currentUserSelectedOption=0,e.optionKeys=[],e.correctOption=0,e}return i(e,t),e.prototype.onLoad=function(){this.scr_stepsController=cc.find("CommonCanvas").getComponent(s.default),this.scr_analyticsManager=cc.find("CommonCanvas").getComponent(u.default),this.audioManager=cc.find("CommonCanvas").getComponent(a.default),this.uiManager=cc.find("CommonCanvas").getComponent(c.default),this.dreamteammodeMain=this.node.parent.getComponent(r.default),this.optionKeys=[],this.correctOption=0,this.optionHandler.node.on("onOptionChange",this.onOptionChange,this),this.optionHandler.node.on("onSubmit",this.onSubmit,this),this.optionHandlerType2.node.on("onOptionChange",this.onOptionChange,this),this.optionHandlerType2.node.on("onSubmit",this.onSubmit,this),this.timerNode.on("onTimerEnd",this.onTimerEnd,this),this.timerNode.on("TimerCloseClicked",this.onTimerCloseButtonClicked,this)},e.prototype.start=function(){},e.prototype.updateQuestionUI=function(t,e){var o=this.node.getChildByName("scoreCard").getChildByName("row_1"),i=this.node.getChildByName("scoreCard").getChildByName("row_2"),n=t.split("|"),s=e.split("|");o.getChildByName("totalScore").getChildByName("label").getComponent(cc.Label).string=n[1],i.getChildByName("totalScore").getChildByName("label").getComponent(cc.Label).string=s[1],o.getChildByName("leftsideScore").getChildByName("scoreLabel").getComponent(cc.Label).string=n[0],i.getChildByName("leftsideScore").getChildByName("scoreLabel").getComponent(cc.Label).string=s[0],o.getChildByName("rightsideScore").getChildByName("scoreLabel").getComponent(cc.Label).string=n[2],i.getChildByName("rightsideScore").getChildByName("scoreLabel").getComponent(cc.Label).string=s[2]},e.prototype.enableQuestionInteraction=function(t,e,o){if(void 0===e&&(e=[]),void 0===o&&(o=4),this.currentInteractionType="option_"+e.length,this.correctOption=t,this.optionKeys=e,2==this.scr_stepsController.getCurrentQuestionIndex()){var i=this.node.getChildByName("CorrectAnswer"),n=this.node.getChildByName("CorrectAnswer").getChildByName("type_2");i.active=!0,n.active=!0;var s=this.node.getChildByName("scoreCard").getChildByName("bg_correctAnswer"),r=this.node.getChildByName("scoreCard").getChildByName("bg");s.active=!0,r.active=!1}else if(this.scr_stepsController.getCurrentQuestionIndex()>2&&this.scr_stepsController.getCurrentQuestionIndex()%2==0){var a=this.node.getChildByName("answerNode");a.active=!0,a.getChildByName("correctHightlight").active=!1;var c=this.node.getChildByName("scoreCard").getChildByName("row_1"),p=this.node.getChildByName("scoreCard").getChildByName("row_2");c.setPosition(cc.v2(0,50)),p.setPosition(cc.v2(0,75))}this.scheduleOnce(function(){e.length>2?this.optionHandler.show(this.correctOption,this.optionKeys,this.submitKey):this.optionHandlerType2.show(this.correctOption,this.optionKeys,this.submitKey),this.timerNode.getComponent(l.default).scheduleTimer()}.bind(this),o)},e.prototype.onOptionChange=function(t,e){this.currentUserSelectedOption=e,console.log("this.currentUserSelectedOption-",this.currentUserSelectedOption),this.node.getChildByName("player1").getChildByName("highlight").active=!1,this.node.getChildByName("player2").getChildByName("highlight").active=!1,this.scr_stepsController.getCurrentQuestionIndex()%2==0&&(0==this.currentUserSelectedOption?this.node.getChildByName("player1").getChildByName("highlight").active=!0:this.node.getChildByName("player2").getChildByName("highlight").active=!0)},e.prototype.getCurrentSelectedOption=function(){return this.currentUserSelectedOption},e.prototype.onSubmit=function(t,e){this.currentUserSelectedOption=t,1==this.scr_stepsController.getCurrentQuestionIndex()?this.onSubmitQuestionType1(t,e):this.scr_stepsController.getCurrentQuestionIndex()%2==0?this.onSubmitQuestionType2(t,e):this.onSubmitQuestionType3(t,e),this.timerNode.getComponent(l.default).unscheduleTime(),e?(this.audioManager.play("positive",h.default.getInstance().sfx_3_positive,!1),this.uiManager.changeHeaderCharacter(this.dreamteammodeMain.getHeaderCharacterSet()[1])):(this.uiManager.changeHeaderCharacter(this.dreamteammodeMain.getHeaderCharacterSet()[2]),this.audioManager.play("negative",h.default.getInstance().sfx_4_negative,!1));var o=null,i=t+1;null!=(o="option_2"==this.currentInteractionType?this.optionHandlerType2.node.getChildByName("ToggleContainer").getChildByName("toggle"+i).getChildByName("checkmark_"+i):this.optionHandler.node.getChildByName("ToggleContainer").getChildByName("toggle"+i).getChildByName("checkmark_"+i))&&o.runAction(cc.blink(2,5))},e.prototype.onSubmitQuestionType1=function(t,e){var o=this;if(e){var i=this.node.getChildByName("scoreCard").getChildByName("bg_correctAnswer"),n=this.node.getChildByName("scoreCard").getChildByName("bg");i.active=!0,n.active=!1;var s=this.node.getChildByName("CorrectAnswer"),r=this.node.getChildByName("CorrectAnswer").getChildByName("type_1"),a=this.node.getChildByName("CorrectAnswer").getChildByName("type_2");s.active=!0,cc.tween(s).call(function(){o.actionOnCorrectAnswerNode(r)}).delay(2).call(function(){r.getChildByName("leftsideScore").active=!1,r.getChildByName("totalScore").active=!1,o.actionOnCorrectAnswerNode(a,1.5)}).delay(5).call(function(){o.optionHandler.hide(),o.node.parent.emit("OnClickSelection",e,o.currentUserSelectedOption)}).start()}else{var c=this.node.getChildByName("scoreCard").getChildByName("bg_wrongAnswer");c.active=!0,c.runAction(cc.blink(2,5)),cc.tween(this.node).delay(2).call(function(){o.node.parent.emit("OnClickSelection",e,o.currentUserSelectedOption),o.optionHandler.hide()}).start()}},e.prototype.onSubmitQuestionType2=function(t,e){var o=this;this.node.getChildByName("player1").getChildByName("highlight").active=!1,this.node.getChildByName("player2").getChildByName("highlight").active=!1;var i=null;if((i=0==this.currentUserSelectedOption?this.node.getChildByName("player1"):this.node.getChildByName("player2")).getChildByName("answer").active=!0,i.getChildByName("answer").runAction(cc.blink(2,5)),2!=this.scr_stepsController.getCurrentQuestionIndex()){var n=null,s=null;(n=e?this.node.getChildByName("answerNode").getChildByName("correctHightlight"):this.node.getChildByName("answerNode").getChildByName("wrongHightlight")).getChildByName("left_h").active=!1,n.getChildByName("right_h").active=!1,n.active=!0,(s=0==t?n.getChildByName("left_h"):n.getChildByName("right_h")).active=!0,s.runAction(cc.blink(2,5))}else{var r=this.node.getChildByName("CorrectAnswer").getChildByName("type_2"),a=(n=null,null);a=0==this.currentUserSelectedOption?r.getChildByName("leftsideScore"):r.getChildByName("rightsideScore"),(n=e?a.getChildByName("highlight"):a.getChildByName("redhighlight")).active=!0,n.runAction(cc.blink(2,5))}cc.tween(this.node).delay(2).call(function(){if(e){"option_2"==o.currentInteractionType&&o.optionHandlerType2.hide();var t=o.node.getChildByName("CorrectAnswer2"),i=1.75;o.scr_stepsController.getCurrentQuestionIndex()>=9&&(i=1),cc.tween(o.node).delay(1).call(function(){o.node.getChildByName("scoreCard").active=!1,o.node.getChildByName("player1").active=!1,o.node.getChildByName("player2").active=!1,2==o.scr_stepsController.getCurrentQuestionIndex()?o.node.getChildByName("CorrectAnswer").active=!1:o.node.getChildByName("answerNode").active=!1,t.active=!0,o.scr_stepsController.getCurrentQuestionIndex()<9&&o.audioManager.play("amb_2_crowdshort",h.default.getInstance().amb_2_crowdshort,!1)}).delay(.1).call(function(){o.scr_stepsController.getCurrentQuestionIndex()<9?t.getChildByName("batsman").getComponent(cc.Animation).play():t.getChildByName("wicket").getComponent(cc.Animation).play()}).delay(.2).call(function(){o.scr_stepsController.getCurrentQuestionIndex()<9?(t.getChildByName("bowling").active=!0,t.getChildByName("bowling").getComponent(p.default).strike(),o.audioManager.play("foley_2_bathit",h.default.getInstance().foley_2_bathit,!1)):o.audioManager.play("foley_2_bathit",h.default.getInstance().foley_2_bathit,!1)}).delay(i).call(function(){o.scr_stepsController.getCurrentQuestionIndex()<9&&(t.getChildByName("bowling").active=!1),t.getChildByName("statusDisplay").active=!0,t.getChildByName("statusDisplay").opacity=0,cc.tween(t.getChildByName("statusDisplay")).to(.5,{opacity:255}).start(),o.audioManager.play("sfx_1_popup",h.default.getInstance().sfx_1_popup,!1)}).delay(1.5).call(function(){o.node.parent.emit("OnClickSelection",!0,o.currentUserSelectedOption)}).start()}else o.node.parent.emit("OnClickSelection",e,o.currentUserSelectedOption),"option_2"==o.currentInteractionType&&o.optionHandlerType2.hide()}).start()},e.prototype.onSubmitQuestionType3=function(t,e){var o=this,i=this.node.getChildByName("scoreCard").getChildByName("row_1"),n=this.node.getChildByName("scoreCard").getChildByName("row_2");cc.tween(i).to(.25,{position:cc.v2(0,50)}).start(),cc.tween(n).to(.25,{position:cc.v2(0,75)}).start();var s=this.node.getChildByName("answerNode");s.active=!0,s.opacity=0,cc.tween(s).to(.5,{opacity:255}).start();var r=this.scr_stepsController.getCurrentStepJson();if(s.getChildByName("centerLabel").getComponent(cc.RichText).string=this.optionKeys[t],s.getChildByName("leftLabel").getComponent(cc.RichText).string=r.feedBack[t].answerDisplay.split("|")[0],s.getChildByName("rightLabel").getComponent(cc.RichText).string=r.feedBack[t].answerDisplay.split("|")[1],s.getChildByName("leftLabel").getComponent(cc.RichText).fontSize=r.feedBack[t].fontSize,s.getChildByName("rightLabel").getComponent(cc.RichText).fontSize=r.feedBack[t].fontSize,s.getChildByName("leftLabel").getComponent(cc.RichText).lineHeight=r.feedBack[t].fontSize+4,s.getChildByName("rightLabel").getComponent(cc.RichText).lineHeight=r.feedBack[t].fontSize+4,r.feedBack[t].answerDisplay.split("|").length>2&&(s.getChildByName("centerLabel").getComponent(cc.RichText).string=r.feedBack[t].answerDisplay.split("|")[2]),e){var a=s.getChildByName("correctHightlight");r.feedBack.length>4?cc.tween(this.node).delay(3).call(function(){o.optionHandler.hide(),s.getChildByName("leftLabel").getComponent(cc.RichText).string=r.feedBack[4].answerDisplay.split("|")[0],s.getChildByName("rightLabel").getComponent(cc.RichText).string=r.feedBack[4].answerDisplay.split("|")[1],s.getChildByName("leftLabel").getComponent(cc.RichText).fontSize=r.feedBack[4].fontSize,s.getChildByName("rightLabel").getComponent(cc.RichText).fontSize=r.feedBack[4].fontSize,s.getChildByName("leftLabel").getComponent(cc.RichText).lineHeight=r.feedBack[4].fontSize+4,s.getChildByName("rightLabel").getComponent(cc.RichText).lineHeight=r.feedBack[4].fontSize+4,s.getChildByName("leftLabel").opacity=0,s.getChildByName("leftLabel").runAction(cc.fadeTo(1,255)),s.getChildByName("rightLabel").opacity=0,s.getChildByName("rightLabel").runAction(cc.fadeTo(1,255))}).delay(.5).call(function(){a.active=!0,a.runAction(cc.blink(2,5))}).delay(2).call(function(){o.node.parent.emit("OnClickSelection",e,o.currentUserSelectedOption)}).start():(a.active=!0,a.runAction(cc.blink(2,5)),cc.tween(this.node).delay(3).call(function(){o.optionHandler.hide(),o.node.parent.emit("OnClickSelection",e,o.currentUserSelectedOption)}).start())}else{var c=s.getChildByName("wrongHightlight");c.active=!0,c.runAction(cc.blink(1,5)),cc.tween(this.node).delay(1).call(function(){o.node.parent.emit("OnClickSelection",e,o.currentUserSelectedOption),o.optionHandler.hide()}).start()}},e.prototype.actionOnCorrectAnswerNode=function(t,e){void 0===e&&(e=0);var o=this.node.getChildByName("CorrectAnswer").getChildByName("type_1");t.active=!0,t.opacity=0,t.getChildByName("leftsideScore").getChildByName("scoreLabel").opacity=0,t.getChildByName("leftsideScore").getChildByName("scoreLabel").runAction(cc.fadeTo(1,255)),0!=e&&(t.getChildByName("leftsideScore").getChildByName("highlight").active=!1,t.getChildByName("rightsideScore").getChildByName("highlight").active=!1,t.getChildByName("rightsideScore").active=!1),cc.tween(t).to(.5,{opacity:255}).call(function(){if(0==e){var o=t.getChildByName("leftsideScore").getChildByName("highlight");o.active=!0,o.runAction(cc.blink(1.5,5));var i=t.getChildByName("rightsideScore").getChildByName("highlight");i.active=!0,i.runAction(cc.blink(1.5,5))}}).delay(e).call(function(){0!=e&&(o.active=!1,t.getChildByName("rightsideScore").active=!0,t.getChildByName("rightsideScore").getChildByName("scoreLabel").opacity=0,t.getChildByName("rightsideScore").getChildByName("scoreLabel").runAction(cc.fadeTo(1,255)))}).delay(e).call(function(){0!=e&&(t.getChildByName("leftsideScore").getChildByName("highlight").active=!0,t.getChildByName("leftsideScore").getChildByName("highlight").runAction(cc.blink(1.5,5)),t.getChildByName("rightsideScore").getChildByName("highlight").active=!0,t.getChildByName("rightsideScore").getChildByName("highlight").runAction(cc.blink(1.5,5)))}).start()},e.prototype.resetAfterNext=function(){if(this.timerNode.getComponent(l.default).resetTimer(),"question_1"==this.node.name){var t=this.node.getChildByName("CorrectAnswer").getChildByName("type_2"),e=this.node.getChildByName("CorrectAnswer").getChildByName("type_1");t.getChildByName("leftsideScore").getChildByName("highlight").active=!1,t.getChildByName("rightsideScore").getChildByName("highlight").active=!1,e.getChildByName("leftsideScore").getChildByName("highlight").active=!1,e.getChildByName("rightsideScore").getChildByName("highlight").active=!1}else{this.node.getChildByName("answerNode").getChildByName("correctHightlight").active=!1}},e.prototype.disableEventListner=function(){this.optionHandler.node.off("onOptionChange",this.onOptionChange,this),this.optionHandler.node.off("onSubmit",this.onSubmit,this),this.optionHandlerType2.node.off("onOptionChange",this.onOptionChange,this),this.optionHandlerType2.node.off("onSubmit",this.onSubmit,this),this.timerNode.off("onTimerEnd",this.onTimerEnd,this),this.timerNode.off("TimerCloseClicked",this.onTimerCloseButtonClicked,this)},e.prototype.resetAfterTryAgain=function(){if(console.log("On retry"),this.timerNode.getComponent(l.default).resetTimer(),"question_1"==this.node.name)this.node.getChildByName("scoreCard").getChildByName("bg_wrongAnswer").active=!1,this.node.getChildByName("CorrectAnswer").getChildByName("type_2").getChildByName("rightsideScore").getChildByName("redhighlight").active=!1;else if(this.scr_stepsController.getCurrentQuestionIndex()%2!=0){var t=this.node.getChildByName("answerNode");t.active=!1,t.getChildByName("wrongHightlight").active=!1;var e=this.node.getChildByName("scoreCard").getChildByName("row_1"),o=this.node.getChildByName("scoreCard").getChildByName("row_2");e.setPosition(cc.v2(0,0)),o.setPosition(cc.v2(0,0))}else this.node.getChildByName("answerNode").getChildByName("wrongHightlight").active=!1,this.node.getChildByName("answerNode").getChildByName("correctHightlight").active=!1;this.node.getChildByName("player1").getChildByName("highlight").active=!1,this.node.getChildByName("player2").getChildByName("highlight").active=!1,this.node.getChildByName("player1").getChildByName("answer").active=!1,this.node.getChildByName("player2").getChildByName("answer").active=!1},e.prototype.onTimerEnd=function(){this.optionKeys.length>2?this.optionHandler.hide():this.optionHandlerType2.hide(),this.uiManager.hideHeaderText()},e.prototype.onTimerCloseButtonClicked=function(){this.resetAfterTryAgain(),this.scr_analyticsManager.sendOnTryAgain(this.scr_stepsController.getCurrentQuestionIndex(),5);var t=this.scr_stepsController.getCurrentStepJson();this.enableQuestionInteraction(t.answer,t.userInput,0),this.uiManager.showHeaderText(this.uiManager.labelHeader.string)},n([m(d.default)],e.prototype,"optionHandler",void 0),n([m(d.default)],e.prototype,"optionHandlerType2",void 0),n([m({type:cc.String})],e.prototype,"submitKey",void 0),n([m({type:cc.Node})],e.prototype,"timerNode",void 0),e=n([y],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../../framework/prefab/template3/Template3_OptionHandler":"Template3_OptionHandler","../../../../framework/scripts/AnalyticsManager":"AnalyticsManager","../../../../framework/scripts/AudioManager":"AudioManager","../../../../framework/scripts/StepsController":"StepsController","../../../../framework/scripts/UIManager":"UIManager","../scripts/EXPL09MAT14E01_Dreamteammode":"EXPL09MAT14E01_Dreamteammode","../scripts/EXPL09MAT14E01_DynamicAssetList":"EXPL09MAT14E01_DynamicAssetList","../scripts/EXPL09MAT14E01_Timer":"EXPL09MAT14E01_Timer","../scripts/EXPL09MAT14E01_ball_anim":"EXPL09MAT14E01_ball_anim"}],EXPL09MAT14E01_Timer:[function(t,e,o){"use strict";cc._RF.push(e,"38be8nC1B5KWZHgkU3shDbj","EXPL09MAT14E01_Timer");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/AudioManager"),r=t("../../../../framework/scripts/StepsController"),a=cc._decorator,c=a.ccclass,p=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.counterLabel=null,e.highlightNode=null,e.timerPopUp=null,e.closeButtonNode=null,e.counterLimit=60,e.outOfFeedback=null,e.timerEndAlert=null,e.currentCount=0,e.timerEndAudioPlaying=!1,e}return i(e,t),e.prototype.onLoad=function(){this.currentCount=this.counterLimit,this.audioManager=cc.find("CommonCanvas").getComponent(s.default),this.timerEndAudioPlaying=!1,this.scr_stepsController=cc.find("CommonCanvas").getComponent(r.default),this.highlightNode.active=!1,this.counterLabel.getComponent(cc.Label).string=this.currentCount.toString()},e.prototype.scheduleTimer=function(){this.resetTimer(),this.schedule(this.updateTimer,1,cc.macro.REPEAT_FOREVER,1)},e.prototype.unscheduleTime=function(){this.unschedule(this.updateTimer),this.timerEndAudioPlaying&&(this.timerEndAudioPlaying=!1,this.audioManager.stop("timerEndAlert"))},e.prototype.updateTimer=function(t){this.currentCount>0?(this.currentCount--,this.counterLabel.getComponent(cc.Label).string=this.currentCount.toString(),5==this.currentCount&&(this.highlightNode.active=!0,this.highlightNode.runAction(cc.sequence(cc.delayTime(1),cc.blink(5,5))),this.audioManager.play("timerEndAlert",this.timerEndAlert,!0),this.timerEndAudioPlaying=!0)):(this.unscheduleTime(),this.enableTimerPopup())},e.prototype.resetTimer=function(){this.currentCount=this.counterLimit,this.counterLabel.getComponent(cc.Label).string=this.currentCount.toString(),this.highlightNode.active=!1},e.prototype.enableTimerPopup=function(){var t=this;this.closeButtonNode.getComponent(cc.Button).interactable=!0,this.timerPopUp.active=!0,this.timerPopUp.opacity=0,this.timerPopUp.zIndex=cc.macro.MAX_ZINDEX,cc.tween(this.timerPopUp).to(.5,{opacity:255}).call(function(){t.audioManager.play("outOfFeedback",t.outOfFeedback,!1)}).start(),this.node.emit("onTimerEnd")},e.prototype.disableTimerPopup=function(){var t=this;this.closeButtonNode.getComponent(cc.Button).interactable=!1,cc.tween(this.timerPopUp).to(1,{opacity:0}).call(function(){t.timerPopUp.active=!1,t.timerPopUp.opacity=0}).start()},e.prototype.onClickOnCloseButton=function(){this.disableTimerPopup(),this.node.emit("TimerCloseClicked")},n([p({type:cc.Node})],e.prototype,"counterLabel",void 0),n([p({type:cc.Node})],e.prototype,"highlightNode",void 0),n([p({type:cc.Node})],e.prototype,"timerPopUp",void 0),n([p({type:cc.Node})],e.prototype,"closeButtonNode",void 0),n([p({})],e.prototype,"counterLimit",void 0),n([p({type:cc.AudioClip})],e.prototype,"outOfFeedback",void 0),n([p({type:cc.AudioClip})],e.prototype,"timerEndAlert",void 0),e=n([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../../../framework/scripts/AudioManager":"AudioManager","../../../../framework/scripts/StepsController":"StepsController"}],EXPL09MAT14E01_ball_anim:[function(t,e,o){"use strict";cc._RF.push(e,"ab6edHqnJRHMY6PGOEHfoUq","EXPL09MAT14E01_ball_anim");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=s.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ball=null,e.stopFlag=!0,e}return i(e,t),e.prototype.start=function(){},e.prototype.strike=function(){var t=this;this.stopFlag&&(this.ball.scale=.01,this.ball.setPosition(cc.v2(-3.747,-111.896)),this.stopFlag=!1,this.ball.angle=0,cc.tween(this.ball).call(this.changeY()).to(1.5,{x:270,angle:720,scale:{value:1,easing:"quadIn"}}).call(function(){t.stopFlag=!0}).start())},e.prototype.changeY=function(){this.ball.y=300*Math.sin(this.ball.x*Math.PI/360)-90,this.stopFlag||this.scheduleOnce(this.changeY.bind(this),.025)},n([a(cc.Node)],e.prototype,"ball",void 0),e=n([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],EXPL09MAT14E02_Dreamteammode:[function(t,e,o){"use strict";cc._RF.push(e,"60ceaDSumxF17t1ftU4vGKq","EXPL09MAT14E02_Dreamteammode");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/AudioManager"),r=t("../../../../framework/scripts/AnalyticsManager"),a=t("../../../../framework/scripts/StepsController"),c=t("../../../../framework/scripts/UIManager"),p=t("../scripts/EXPL09MAT14E02_Questionnanager"),l=t("../scripts/EXPL09MAT14E02_DynamicAssetList"),h=cc._decorator,d=h.ccclass,u=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.introsetup=null,e.outrosetup=null,e.translarentNode=null,e.questionNode=null,e.aud_bgm=null,e.headerCharacterSet=[],e.isInteraction1Tutorial=!1,e.isInteraction2Tutorial=!1,e}return i(e,t),e.prototype.onLoad=function(){this.scr_stepsController=this.canvas.getComponent(a.default),this.uiManager=this.canvas.getComponent(c.default),this.audioManager=this.canvas.getComponent(s.default),this.scr_analyticsManager=this.canvas.getComponent(r.default),this.canvas.on("OnLoadStep",this.stepsHandler.bind(this)),this.canvas.on("OnCommonButtonClick",this.onCommonButtonClick.bind(this)),this.node.on("OnClickSelection",this.OnClickSelection.bind(this)),this.canvas.getChildByName("Main Camera").getComponent(cc.Camera).backgroundColor=cc.Color.BLACK,this.isInteraction1Tutorial=!1,this.isInteraction2Tutorial=!1},e.prototype.start=function(){this.scr_stepsController.Initialise("EXPL09MAT14E02_Dreamteammode"),this.IntroSequencing(),this.audioManager.play("bgm",this.aud_bgm,!0,"BGM")},e.prototype.stepsHandler=function(t){switch(console.log("Steps handler. Next step is "+t),t){case 0:this.uiManager.setActiveHeaderCharacter(!1);break;case 2:this.uiManager.setActiveHeaderCharacter(!0),this.enableQuestionNode();break;case 3:case 4:case 7:case 8:case 11:case 12:case 15:case 16:this.enableQuestionInteraction(8);break;case 5:case 9:case 13:this.disableQuestionNode(),this.enableQuestionNode();break;case 17:this.uiManager.setActiveHeaderCharacter(!1),this.uiManager.setActiveCloseButton(!1),this.canvas.emit("OnEndScreenReach",{}),this.disableQuestionNode(),this.enableOutroNode()}},e.prototype.onCommonButtonClick=function(t){this.uiManager.CommonButtonType.NextQuestion==t?(this.scr_analyticsManager.sendNextQuestionStart(this.scr_stepsController.getCurrentQuestionIndex(),!1,this.scr_analyticsManager.Phylum.Click),this.scr_stepsController.loadNextStep(),this.uiManager.changeHeaderCharacter(this.headerCharacterSet[0]),this.translarentNode.active=!1):this.uiManager.CommonButtonType.TryAgain==t?(this.scr_analyticsManager.sendOnTryAgain(this.scr_stepsController.getCurrentQuestionIndex(),-1),this.resetAfterTryAgain(),this.translarentNode.active=!1,this.uiManager.setActiveHintButton(!0)):this.uiManager.CommonButtonType.Hint==t&&this.audioManager.play("hint",l.default.getInstance().sfx_2_hint,!1)},e.prototype.resetAfterTryAgain=function(){if(null!=this.questionNode){var t=this.scr_stepsController.getCurrentStepJson();this.scheduleOnce(function(){this.questionNode.getComponent(p.default).resetAfterTryAgain(),this.questionNode.getComponent(p.default).enableQuestionInteraction(t.answer,t.userInput)}.bind(this),1)}},e.prototype.IntroSequencing=function(){this.introsetup.active=!0,this.introsetup.opacity=0,cc.tween(this.introsetup).to(2,{opacity:255}).start()},e.prototype.enableOutroNode=function(){this.outrosetup.active=!0},e.prototype.enableQuestionNode=function(){this.introsetup.active=!1;var t=this.scr_stepsController.getCurrentStepJson();this.questionNode=this.node.getChildByName(t.questionId),null!=this.questionNode&&(this.questionNode.active=!0)},e.prototype.enableQuestionInteraction=function(t){if(void 0===t&&(t=0),null!=this.questionNode){var e=this.scr_stepsController.getCurrentStepJson();"interaction_2"==e.userInput&&this.questionNode.getComponent(p.default).hideAllArrowbuttons(),this.scheduleOnce(function(){this.isInteraction1Tutorial&&this.isInteraction2Tutorial?this.questionNode.getComponent(p.default).enableQuestionInteraction(e.answer,e.userInput):this.addTutorial()}.bind(this),t)}},e.prototype.disableQuestionNode=function(){null!=this.questionNode&&(this.questionNode.active=!1)},e.prototype.OnClickSelection=function(t){this.uiManager.setActiveHintButton(!1);var e=this.scr_stepsController.getCurrentStepJson(),o=0;t?(this.scr_stepsController.playFeedback([0],t,!1),o=e.feedBack[0].duration,this.scheduleOnce(function(){this.uiManager.setActiveNextButton(!0)}.bind(this),o),"interaction_1"==e.userInput&&(this.translarentNode.active=!0)):(this.scr_stepsController.playFeedback([1],t,!1),o=e.feedBack[1].duration,this.scheduleOnce(function(){this.uiManager.setActiveTryAgainButton(!0)}.bind(this),o),this.translarentNode.active=!0)},e.prototype.getHeaderCharacterSet=function(){return this.headerCharacterSet},e.prototype.addTutorial=function(){if(this.uiManager.setActiveHintButton(!1),this.audioManager.play("hint",l.default.getInstance().sfx_1_popup,!1),"interaction_2"==this.scr_stepsController.getCurrentStepJson().userInput){var t=this.node.getChildByName("Tutorial").getChildByName("interaction_1");this.isInteraction2Tutorial=!0;for(var e=1;e<=4;e++)t.getChildByName("player"+e).getChildByName("leftButton").active=!1,t.getChildByName("player"+e).getChildByName("rightButton").active=!1;this.moveTutorialHand(this.node.getChildByName("Tutorial"),cc.v2(461,-343),cc.v2(-81,131),cc.v2(-81,5),cc.v2(4,-351))}else this.isInteraction1Tutorial=!0,this.moveTutorialHand(this.node.getChildByName("Tutorial"),cc.v2(461,-343),cc.v2(131,125),cc.v2(131,0),cc.v2(4,-351))},e.prototype.onTutorialCompleted=function(){this.uiManager.setActiveHintButton(!0);var t=this.scr_stepsController.getCurrentStepJson();this.scheduleOnce(function(){this.questionNode.getComponent(p.default).enableQuestionInteraction(t.answer,t.userInput)}.bind(this),.1)},e.prototype.moveTutorialHand=function(t,e,o,i,n){var s=this,r=this.scr_stepsController.getCurrentStepJson();t.active=!0;var a=t.getChildByName("interaction_1").getChildByName("submitButton").getComponent(cc.Button),c=t.getChildByName("hand");cc.tween(c).repeat(2,cc.tween().call(function(){c.position=e,c.scale=1,a.interactable=!1,a.node.scale=1,t.getChildByName("interaction_1").getChildByName("playerHighlight").active=!1,t.getChildByName("interaction_1").getChildByName("player2").getChildByName("roundNode").getChildByName("highlight").active=!1,t.getChildByName("interaction_1").getChildByName("player1").getChildByName("roundNode").getChildByName("highlight").active=!1,t.getChildByName("interaction_1").getChildByName("player1").getChildByName("roundNode").getChildByName("label").getComponent(cc.Label).string="00",t.getChildByName("interaction_1").getChildByName("player2").getChildByName("roundNode").getChildByName("label").getComponent(cc.Label).string="00"}).to(1,{position:o}).to(.2,{scale:.7}).call(function(){if(a.interactable=!0,"interaction_2"==r.userInput){var e=t.getChildByName("interaction_1").getChildByName("playerHighlight");e.setPosition(t.getChildByName("interaction_1").getChildByName("player1").getChildByName("bg").getPosition()),e.active=!0,t.getChildByName("interaction_1").getChildByName("player1").getChildByName("roundNode").getChildByName("highlight").active=!0}else t.getChildByName("interaction_1").getChildByName("player1").getChildByName("rightButton").scale=.9,t.getChildByName("interaction_1").getChildByName("player1").getChildByName("roundNode").getChildByName("label").getComponent(cc.Label).string="01"}).to(.2,{scale:1}).call(function(){"interaction_1"==r.userInput&&(t.getChildByName("interaction_1").getChildByName("player1").getChildByName("rightButton").scale=1)}).delay(.3).to(1,{position:i}).to(.2,{scale:.7}).call(function(){if("interaction_2"==r.userInput){var e=t.getChildByName("interaction_1").getChildByName("playerHighlight");e.setPosition(t.getChildByName("interaction_1").getChildByName("player2").getChildByName("bg").getPosition()),e.active=!0,t.getChildByName("interaction_1").getChildByName("player1").getChildByName("roundNode").getChildByName("highlight").active=!1,t.getChildByName("interaction_1").getChildByName("player2").getChildByName("roundNode").getChildByName("highlight").active=!0}else t.getChildByName("interaction_1").getChildByName("player2").getChildByName("rightButton").scale=.9,t.getChildByName("interaction_1").getChildByName("player2").getChildByName("roundNode").getChildByName("label").getComponent(cc.Label).string="01"}).to(.2,{scale:1}).call(function(){"interaction_1"==r.userInput&&(t.getChildByName("interaction_1").getChildByName("player2").getChildByName("rightButton").scale=1)}).delay(.3).to(1,{position:n}).to(.2,{scale:.7}).call(function(){a.node.scale=.9}).delay(.3).to(.2,{scale:1}).call(function(){a.node.scale=1}).delay(.5)).call(function(){s.stopTutorial()}).start()},e.prototype.stopTutorial=function(){var t=this.node.getChildByName("Tutorial"),e=t.getChildByName("hand");cc.Tween.stopAllByTarget(t),cc.Tween.stopAllByTarget(e),this.unscheduleAllCallbacks(),t.active=!1,this.onTutorialCompleted()},e.prototype.onClickOnTutorialClose=function(){this.audioManager.play("click",l.default.getInstance().sfx_5_tapselect,!1),this.stopTutorial()},n([u(cc.Node)],e.prototype,"canvas",void 0),n([u(cc.Node)],e.prototype,"introsetup",void 0),n([u(cc.Node)],e.prototype,"outrosetup",void 0),n([u(cc.Node)],e.prototype,"translarentNode",void 0),n([u({type:cc.AudioClip})],e.prototype,"aud_bgm",void 0),n([u(cc.SpriteFrame)],e.prototype,"headerCharacterSet",void 0),e=n([d],e)}(cc.Component);o.default=g,cc._RF.pop()},{"../../../../framework/scripts/AnalyticsManager":"AnalyticsManager","../../../../framework/scripts/AudioManager":"AudioManager","../../../../framework/scripts/StepsController":"StepsController","../../../../framework/scripts/UIManager":"UIManager","../scripts/EXPL09MAT14E02_DynamicAssetList":"EXPL09MAT14E02_DynamicAssetList","../scripts/EXPL09MAT14E02_Questionnanager":"EXPL09MAT14E02_Questionnanager"}],EXPL09MAT14E02_DynamicAssetList:[function(t,e,o){"use strict";cc._RF.push(e,"7ee3dBG1RxMaY88n8i7j6qh","EXPL09MAT14E02_DynamicAssetList");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=s.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.amb_2_crowdshort=null,e.foley_1_stumps=null,e.foley_2_bathit=null,e.sfx_1_popup=null,e.sfx_2_hint=null,e.sfx_3_positive=null,e.sfx_4_negative=null,e.sfx_5_tapselect=null,e}var o;return i(e,t),o=e,e.prototype.onLoad=function(){o._mInstance=this},e.getInstance=function(){return this._mInstance},e._mInstance=null,n([a({type:cc.AudioClip})],e.prototype,"amb_2_crowdshort",void 0),n([a({type:cc.AudioClip})],e.prototype,"foley_1_stumps",void 0),n([a({type:cc.AudioClip})],e.prototype,"foley_2_bathit",void 0),n([a({type:cc.AudioClip})],e.prototype,"sfx_1_popup",void 0),n([a({type:cc.AudioClip})],e.prototype,"sfx_2_hint",void 0),n([a({type:cc.AudioClip})],e.prototype,"sfx_3_positive",void 0),n([a({type:cc.AudioClip})],e.prototype,"sfx_4_negative",void 0),n([a({type:cc.AudioClip})],e.prototype,"sfx_5_tapselect",void 0),e=o=n([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],EXPL09MAT14E02_Questionnanager:[function(t,e,o){"use strict";cc._RF.push(e,"2d17aaP3HxBuKzG53B++QBr","EXPL09MAT14E02_Questionnanager");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/StepsController"),r=t("../scripts/EXPL09MAT14E02_DynamicAssetList"),a=t("../scripts/EXPL09MAT14E02_Dreamteammode"),c=t("../../../../framework/scripts/AudioManager"),p=t("../../../../framework/scripts/UIManager"),l=t("../scripts/ball_anim"),h=cc._decorator,d=h.ccclass,u=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.submitButtonRef=null,e.interactionNodeRef=null,e.highlightNodeRef=null,e.playerNodeRef=null,e.highlightRoundSpriteFrame=[],e.highlightPlayerSpriteFrame=[],e.minInteractionVal=0,e.maxInteractionVal=9,e.answerArray=[],e.currentInteractionType="",e}return i(e,t),e.prototype.onLoad=function(){this.scr_stepsController=cc.find("CommonCanvas").getComponent(s.default),this.audioManager=cc.find("CommonCanvas").getComponent(c.default),this.uiManager=cc.find("CommonCanvas").getComponent(p.default),this.dreamteammodeMain=this.node.parent.getComponent(a.default),this.submitButtonRef.getComponent(cc.Button).interactable=!1,this.enabledisableArrowButtons(),this.enableDisablePlayerButton(),this.disableAllIndiPlayerHighlight(),this.answerArray=[]},e.prototype.start=function(){},e.prototype.enableQuestionInteraction=function(t,e){this.answerArray=t,this.currentInteractionType=e,"interaction_1"==e?(this.enabledisableArrowButtons(!0),this.checkArrowBoundaryCondition(!0)):(this.hideAllArrowbuttons(),this.enableDisablePlayerButton(!0),this.interactionNodeRef.getChildByName("playerHighlight").active=!1),console.log("this.answerArray----",this.answerArray)},e.prototype.onClickOnLeftArrow=function(t){var e=t.target.parent,o=parseInt(e.getChildByName("roundNode").getChildByName("label").getComponent(cc.Label).string)-1;o<this.minInteractionVal&&(o=this.maxInteractionVal),e.getChildByName("roundNode").getChildByName("label").getComponent(cc.Label).string="0"+o.toString(),this.checkArrowBoundaryCondition(),this.audioManager.play("click",r.default.getInstance().sfx_5_tapselect,!1)},e.prototype.onClickOnRightArrow=function(t){var e=t.target.parent,o=parseInt(e.getChildByName("roundNode").getChildByName("label").getComponent(cc.Label).string)+1;o>this.maxInteractionVal&&(o=this.minInteractionVal),e.getChildByName("roundNode").getChildByName("label").getComponent(cc.Label).string="0"+o.toString(),this.checkArrowBoundaryCondition(),this.audioManager.play("click",r.default.getInstance().sfx_5_tapselect,!1)},e.prototype.onClickOnPlayer=function(t){var e=t.target,o=this.interactionNodeRef.getChildByName("playerHighlight");o.setPosition(e.getPosition()),o.getComponent(cc.Sprite).spriteFrame=this.highlightPlayerSpriteFrame[2],o.active=!0;for(var i=1;i<=4;i++)this.interactionNodeRef.getChildByName("player"+i).getChildByName("roundNode").getChildByName("highlight").active=!1;t.target.parent.getChildByName("roundNode").getChildByName("highlight").active=!0,t.target.parent.getChildByName("roundNode").getChildByName("highlight").getComponent(cc.Sprite).spriteFrame=this.highlightRoundSpriteFrame[2],this.interactionNodeRef.getChildByName("submitButton").getComponent(cc.Button).interactable=!0,this.audioManager.play("click",r.default.getInstance().sfx_5_tapselect,!1)},e.prototype.onclickOnSubmitButton=function(t){var e=this,o=!0;if("interaction_1"==this.currentInteractionType){for(var i=1;i<=4;i++){parseInt(this.interactionNodeRef.getChildByName("player"+i).getChildByName("roundNode").getChildByName("label").getComponent(cc.Label).string)==(s=this.answerArray[i-1])?(this.interactionNodeRef.getChildByName("player"+i).getChildByName("roundNode").getChildByName("highlight").getComponent(cc.Sprite).spriteFrame=this.highlightRoundSpriteFrame[0],this.interactionNodeRef.getChildByName("player"+i).getChildByName("highlight").getComponent(cc.Sprite).spriteFrame=this.highlightPlayerSpriteFrame[0]):(o=!1,this.interactionNodeRef.getChildByName("player"+i).getChildByName("roundNode").getChildByName("highlight").getComponent(cc.Sprite).spriteFrame=this.highlightRoundSpriteFrame[1],this.interactionNodeRef.getChildByName("player"+i).getChildByName("highlight").getComponent(cc.Sprite).spriteFrame=this.highlightPlayerSpriteFrame[1]),this.interactionNodeRef.getChildByName("player"+i).getChildByName("roundNode").getChildByName("highlight").active=!0,this.interactionNodeRef.getChildByName("player"+i).getChildByName("highlight").active=!0}this.enabledisableArrowButtons(),this.audioManager.play("click",r.default.getInstance().sfx_5_tapselect,!1),cc.tween(this.node).delay(1).call(function(){e.node.parent.emit("OnClickSelection",o)}).start();var n=this.dreamteammodeMain.getHeaderCharacterSet();o?(this.audioManager.play("positive",r.default.getInstance().sfx_3_positive,!1),this.uiManager.changeHeaderCharacter(n[1])):(this.audioManager.play("negative",r.default.getInstance().sfx_4_negative,!1),this.uiManager.changeHeaderCharacter(n[2]))}else{var s=this.answerArray[0],a="";for(i=1;i<=4;i++){if(this.interactionNodeRef.getChildByName("player"+i).getChildByName("roundNode").getChildByName("highlight").active)parseInt(this.interactionNodeRef.getChildByName("player"+i).getChildByName("roundNode").getChildByName("label").getComponent(cc.Label).string)==s?(this.interactionNodeRef.getChildByName("player"+i).getChildByName("roundNode").getChildByName("highlight").getComponent(cc.Sprite).spriteFrame=this.highlightRoundSpriteFrame[0],this.interactionNodeRef.getChildByName("playerHighlight").getComponent(cc.Sprite).spriteFrame=this.highlightPlayerSpriteFrame[0],a=this.interactionNodeRef.getChildByName("player"+i).getChildByName("character").getComponent(cc.Sprite).spriteFrame.name,this.interactionNodeRef.getChildByName("playerHighlight").runAction(cc.blink(1.5,3)),this.interactionNodeRef.getChildByName("player"+i).getChildByName("roundNode").getChildByName("highlight").runAction(cc.blink(1.5,3))):(o=!1,this.interactionNodeRef.getChildByName("player"+i).getChildByName("roundNode").getChildByName("highlight").getComponent(cc.Sprite).spriteFrame=this.highlightRoundSpriteFrame[1],this.interactionNodeRef.getChildByName("playerHighlight").getComponent(cc.Sprite).spriteFrame=this.highlightPlayerSpriteFrame[1])}this.enableDisablePlayerButton(),this.audioManager.play("click",r.default.getInstance().sfx_5_tapselect,!1);n=this.dreamteammodeMain.getHeaderCharacterSet();o?(this.uiManager.setActiveHintButton(!1),this.disableAllIndiPlayerHighlight(a),cc.tween(this.node).delay(2).call(function(){e.scr_stepsController.getCurrentQuestionIndex()<5?e.actionOnCorrectAnswer():e.actionOnCorrectAnswerBowler()}).start(),this.audioManager.play("positive",r.default.getInstance().sfx_3_positive,!1),this.uiManager.changeHeaderCharacter(n[1])):(cc.tween(this.node).delay(1).call(function(){e.node.parent.emit("OnClickSelection",o)}).start(),this.audioManager.play("negative",r.default.getInstance().sfx_4_negative,!1),this.uiManager.changeHeaderCharacter(n[2]))}t.target.getComponent(cc.Button).interactable=!1},e.prototype.actionOnCorrectAnswer=function(){var t=this;this.interactionNodeRef.active=!1,this.playerNodeRef.active=!1,this.highlightNodeRef.active=!1,this.node.getChildByName("display_screen").active=!1,this.audioManager.play("amb_2_crowdshort",r.default.getInstance().amb_2_crowdshort,!1);var e=this.node.getChildByName("correctAnswer");e.active=!0,cc.tween(this.node).delay(.1).call(function(){e.getChildByName("batsman").getComponent(cc.Animation).play()}).delay(.2).call(function(){e.getChildByName("bowling").active=!0,e.getChildByName("bowling").getComponent(l.default).strike(),t.audioManager.play("foley_2_bathit",r.default.getInstance().foley_2_bathit,!1)}).delay(1.75).call(function(){e.getChildByName("bowling").active=!1,e.getChildByName("statusDisplay").active=!0,e.getChildByName("statusDisplay").opacity=0,cc.tween(e.getChildByName("statusDisplay")).to(.5,{opacity:255}).start(),t.audioManager.play("sfx_1_popup",r.default.getInstance().sfx_1_popup,!1)}).delay(1.5).call(function(){t.node.parent.emit("OnClickSelection",!0)}).start()},e.prototype.actionOnCorrectAnswerBowler=function(){var t=this;this.interactionNodeRef.active=!1,this.playerNodeRef.active=!1,this.highlightNodeRef.active=!1,this.node.getChildByName("display_screen").active=!1;var e=this.node.getChildByName("correctAnswer");e.active=!0,cc.tween(this.node).delay(.1).call(function(){e.getChildByName("wicket").getComponent(cc.Animation).play()}).delay(.3).call(function(){t.audioManager.play("foley_1_stumps",r.default.getInstance().foley_1_stumps,!1)}).delay(1.25).call(function(){e.getChildByName("statusDisplay").active=!0,e.getChildByName("statusDisplay").opacity=0,cc.tween(e.getChildByName("statusDisplay")).to(.5,{opacity:255}).start(),t.audioManager.play("sfx_1_popup",r.default.getInstance().sfx_1_popup,!1)}).delay(2).call(function(){t.node.parent.emit("OnClickSelection",!0)}).start()},e.prototype.checkArrowBoundaryCondition=function(t){void 0===t&&(t=!1),this.interactionNodeRef.getChildByName("submitButton").getComponent(cc.Button).interactable=!t},e.prototype.enabledisableArrowButtons=function(t){void 0===t&&(t=!1);for(var e=1;e<=4;e++)this.interactionNodeRef.getChildByName("player"+e).getChildByName("leftButton").getComponent(cc.Button).interactable=t,this.interactionNodeRef.getChildByName("player"+e).getChildByName("rightButton").getComponent(cc.Button).interactable=t,this.interactionNodeRef.getChildByName("player"+e).getChildByName("leftButton").getComponent(cc.Button).enableAutoGrayEffect=!t,this.interactionNodeRef.getChildByName("player"+e).getChildByName("rightButton").getComponent(cc.Button).enableAutoGrayEffect=!t},e.prototype.enableDisablePlayerButton=function(t){void 0===t&&(t=!1);for(var e=1;e<=4;e++)this.interactionNodeRef.getChildByName("player"+e).getChildByName("bg").getComponent(cc.Button).interactable=t},e.prototype.disableAllIndiPlayerHighlight=function(t){void 0===t&&(t="");for(var e=1;e<=12;e++)this.highlightNodeRef.getChildByName("player"+e).active=!1;if(""!=t){this.highlightNodeRef.active=!0;for(e=1;e<=12;e++)this.playerNodeRef.getChildByName("player"+e).getComponent(cc.Sprite).spriteFrame.name==t&&(this.highlightNodeRef.getChildByName("player"+e).active=!0,this.highlightNodeRef.getChildByName("player"+e).runAction(cc.blink(1.5,3)))}},e.prototype.hideAllArrowbuttons=function(){for(var t=1;t<=4;t++)this.interactionNodeRef.getChildByName("player"+t).getChildByName("leftButton").active=!1,this.interactionNodeRef.getChildByName("player"+t).getChildByName("rightButton").active=!1,this.interactionNodeRef.getChildByName("player"+t).getChildByName("roundNode").getChildByName("highlight").active=!1,this.interactionNodeRef.getChildByName("player"+t).getChildByName("highlight").active=!1},e.prototype.resetAfterTryAgain=function(){var t=this.dreamteammodeMain.getHeaderCharacterSet();if(this.uiManager.changeHeaderCharacter(t[0]),"interaction_1"==this.currentInteractionType)for(var e=1;e<=4;e++)this.interactionNodeRef.getChildByName("player"+e).getChildByName("roundNode").getChildByName("label").getComponent(cc.Label).string="00",this.interactionNodeRef.getChildByName("player"+e).getChildByName("roundNode").getChildByName("highlight").active=!1,this.interactionNodeRef.getChildByName("player"+e).getChildByName("highlight").active=!1;else for(e=1;e<=4;e++)this.interactionNodeRef.getChildByName("player"+e).getChildByName("roundNode").getChildByName("highlight").active=!1,this.interactionNodeRef.getChildByName("playerHighlight").active=!1},n([u(cc.Node)],e.prototype,"submitButtonRef",void 0),n([u(cc.Node)],e.prototype,"interactionNodeRef",void 0),n([u(cc.Node)],e.prototype,"highlightNodeRef",void 0),n([u(cc.Node)],e.prototype,"playerNodeRef",void 0),n([u(cc.SpriteFrame)],e.prototype,"highlightRoundSpriteFrame",void 0),n([u(cc.SpriteFrame)],e.prototype,"highlightPlayerSpriteFrame",void 0),e=n([d],e)}(cc.Component);o.default=g,cc._RF.pop()},{"../../../../framework/scripts/AudioManager":"AudioManager","../../../../framework/scripts/StepsController":"StepsController","../../../../framework/scripts/UIManager":"UIManager","../scripts/EXPL09MAT14E02_Dreamteammode":"EXPL09MAT14E02_Dreamteammode","../scripts/EXPL09MAT14E02_DynamicAssetList":"EXPL09MAT14E02_DynamicAssetList","../scripts/ball_anim":"ball_anim"}],EXPL10MAT06E04_BaseQuestion:[function(t,e,o){"use strict";cc._RF.push(e,"1cce63Wxf1BAoRs0Cosif5j","EXPL10MAT06E04_BaseQuestion");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s,r=t("./EXPL10MAT06E04_OptionHandler"),a=cc._decorator,c=a.ccclass,p=a.property;(function(t){t[t.CorrectFeedback=0]="CorrectFeedback",t[t.WrongFeedbackOne=1]="WrongFeedbackOne",t[t.WrongFeedbackTwo=2]="WrongFeedbackTwo",t[t.WrongFeedbackThree=3]="WrongFeedbackThree"})(s=o.Feedback||(o.Feedback={}));var l=function(){function t(){this.feedbackIndex="",this.feedbackTable=null,this.scaleFactor=1,this.feedbackType=s.CorrectFeedback}return t.prototype.reset=function(){this.feedbackTable.active=!1},n([p({type:cc.String,tooltip:"Comma separated feedback index values "})],t.prototype,"feedbackIndex",void 0),n([p(cc.Node)],t.prototype,"feedbackTable",void 0),n([p(cc.Float)],t.prototype,"scaleFactor",void 0),n([p({type:cc.Enum(s)})],t.prototype,"feedbackType",void 0),t=n([c("EXPL10MAT06E04_FeedbackData")],t)}();o.EXPL10MAT06E04_FeedbackData=l;var h=function(){function t(){this.animNode=null,this.animName=" ",this.animRepeatCount=1,this.audioClip=null,this.disableAfterAnim=!0}return t.prototype.stopAnimation=function(){var t=this.animNode.getComponent(cc.Animation);t&&(t.stop(this.animName),t.setCurrentTime(0,this.animName))},t.prototype.reset=function(){null!=this.animNode&&(this.stopAnimation(),this.animNode.active=!1)},n([p(cc.Node)],t.prototype,"animNode",void 0),n([p(cc.String)],t.prototype,"animName",void 0),n([p()],t.prototype,"animRepeatCount",void 0),n([p({type:cc.AudioClip})],t.prototype,"audioClip",void 0),n([p(cc.Boolean)],t.prototype,"disableAfterAnim",void 0),t=n([c("EXPL10MAT06E04_Animation")],t)}();o.EXPL10MAT06E04_Animation=h;var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.feedbackData=[],e.questionTablePanel=null,e.optionsHandler=null,e.lightNode=null,e.highlight=null,e.lightAnim=null,e.audioManager=null,e.failedFirstAttempt=!1,e.isFeedbackCompleted=!1,e.selectedOption=0,e.feedbackIndex=[],e.feedbackCallback=null,e}return i(e,t),e.prototype.start=function(){this.reset()},e.prototype.setAudioManager=function(t){this.audioManager=t},e.prototype.show=function(){this.setActive(this.questionTablePanel,!0),this.optionsHandler.show(),this.setActive(this.highlight,!0)},e.prototype.playFeedback=function(t,e){var o=this;switch(this.feedbackCallback=e,this.selectedOption=t,this.setActive(this.highlight,!1),this.feedbackIndex=[],this.feedbackData[t].feedbackIndex.split(",").forEach(function(t){return o.feedbackIndex.push(parseInt(t))}),this.feedbackData[t].feedbackType){case s.WrongFeedbackOne:this.playWrongFeedbackOne();break;case s.WrongFeedbackTwo:this.playWrongFeedbackTwo();break;case s.CorrectFeedback:this.playCorrectFeedback();break;case s.WrongFeedbackThree:this.playFeedbackThree()}},e.prototype.playWrongFeedbackOne=function(){},e.prototype.playWrongFeedbackTwo=function(){},e.prototype.playCorrectFeedback=function(){},e.prototype.playFeedbackThree=function(){},e.prototype.reset=function(){this.lightNode.rotation=0,this.lightAnim.reset(),this.feedbackData.forEach(function(t){return t.reset()}),this.isFeedbackCompleted=!1,this.questionTablePanel.active=!1,this.highlight&&(this.highlight.active=!1)},e.prototype.playCraneIntro=function(t){},e.prototype.playCraneOutro=function(t){t&&t()},e.prototype.playCranePunctureIntro=function(t){},e.prototype.blinkNode=function(t,e,o,i){void 0===e&&(e=1),void 0===o&&(o=1),t.active=!0;var n=cc.tween().to(e/2,{opacity:0}),s=cc.tween().to(e/2,{opacity:255});-1!=o?cc.tween(t).sequence(n,s).repeat(o).call(i).start():cc.tween(t).sequence(n,s).repeatForever().start()},e.prototype.playAnimation=function(t,e,o,i,n){if(void 0===i&&(i=1),void 0===n&&(n=!0),null==t)return 0;t.active=!0;var s=t.getComponent(cc.Animation).play(e);if(this.playAnimAudio(o),s.wrapMode==cc.WrapMode.Loop)return 0;s.repeatCount=i;var r=s.duration*i;return n&&this.scheduleOnce(function(){return t.active=!1},r),r},e.prototype.playFeedbackAnimation=function(t){return this.playAnimation(t.animNode,t.animName,t.audioClip,t.animRepeatCount,t.disableAfterAnim)},e.prototype.playAnimationsInSequence=function(t,e){var o=this;if(!(t.length<=0)){var i=function(n,s){var r=o.playAnimation(s.animNode,s.animName,s.audioClip,s.animRepeatCount,s.disableAfterAnim),a=n+1;a>=t.length?o.scheduleOnce(e,r):o.scheduleOnce(function(){s.audioClip&&o.audioManager.stop(s.audioClip.name),i(a,t[a])},r)};i(0,t[0])}},e.prototype.playAnimationsParallely=function(t){if(!(t.length<=0))for(var e=0,o=t;e<o.length;e++){var i=o[e];this.playAnimation(i.animNode,i.animName,i.audioClip,i.animRepeatCount,i.disableAfterAnim)}},e.prototype.playAnimAudio=function(t){t&&this.audioManager.play(t.name,t,!1,"SFX")},e.prototype.setActive=function(t,e,o){if(null!=t){if(e){t.opacity=0;var i=255}else{t.opacity=255;i=0}t.active=!0,cc.tween(t).to(1,{opacity:i},{easing:"cubicOut"}).call(function(){e||(t.active=!1),o&&o()}).start()}},e.prototype.moveNode=function(t,e,o,i,n){null!=t&&(t.setPosition(e),cc.tween(t).to(i,{position:o},{easing:"smooth"}).call(n).start())},e.prototype.scaleNode=function(t,e,o,i){null!=t&&cc.tween(t).to(o,{scale:e},{easing:"cubicOut"}).delay(1).call(i).start()},e.prototype.playLightBeamAnim=function(t){var e=this;cc.tween(this.lightNode).to(1,{rotation:25},{easing:"cubicOut"}).call(function(){var o=e.playFeedbackAnimation(e.lightAnim);e.scheduleOnce(t,o)}).start()},e.prototype.stopLightBeamAnim=function(){this.playAnimAudio(this.lightAnim.audioClip),this.lightAnim.reset(),this.lightNode.rotation=0},e.prototype.hideOptions=function(t){var e=this;this.scheduleOnce(function(){e.optionsHandler.hide(),e.scheduleOnce(t,1)},1)},n([p(l)],e.prototype,"feedbackData",void 0),n([p(cc.Node)],e.prototype,"questionTablePanel",void 0),n([p(r.default)],e.prototype,"optionsHandler",void 0),n([p(cc.Node)],e.prototype,"lightNode",void 0),n([p(cc.Node)],e.prototype,"highlight",void 0),n([p(h)],e.prototype,"lightAnim",void 0),e=n([c],e)}(cc.Component);o.default=d,cc._RF.pop()},{"./EXPL10MAT06E04_OptionHandler":"EXPL10MAT06E04_OptionHandler"}],EXPL10MAT06E04_IntroHandler:[function(t,e,o){"use strict";cc._RF.push(e,"70efbaKMSFO1JPEsdxrse0H","EXPL10MAT06E04_IntroHandler");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=s.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pulley=null,e.lightNode=null,e.lightAnimNode=null,e.shapeNode=null,e.strock=null,e.pulleyDropYPos=23,e.pulleyLiftYPos=523,e}return i(e,t),e.prototype.onLoad=function(){this.strock=this.node.getChildByName("Strock"),this.strock.active=!1,this.lightAnimNode.node.active=!1},e.prototype.playIntroAnim=function(t,e){var o=this,i=this.node.getChildByName("IntroPanel_"+t);this.strock.active=0!=t;cc.tween(i).to(1,{opacity:255},{easing:"smooth"}).call(function(){1==t?o.scheduleOnce(function(){return o.playPulleyAnim(e)},1):2==t?o.scheduleOnce(function(){return o.playLightBeamAnim(e)},1):o.scheduleOnce(function(){cc.tween(i).to(1,{opacity:0},{easing:"smooth"}).call(e).start()},9)}).start()},e.prototype.playPulleyAnim=function(t){var e=this;this.pulley.active=!0;var o=this.pulley.getPosition(),i=function(t,i){cc.tween(e.pulley).to(2,{position:cc.v2(o.x,t)},{easing:"smooth"}).delay(1).call(i).start()};i(this.pulleyLiftYPos,function(){i(e.pulleyDropYPos,function(){var o=e.pulley.getChildByName("Shape"),n=o.convertToWorldSpaceAR(cc.Vec2.ZERO),s=e.pulley.parent.convertToNodeSpaceAR(n);o.setParent(e.pulley.parent),o.setPosition(s),i(e.pulleyLiftYPos,t)})})},e.prototype.playLightBeamAnim=function(t){var e=this,o=function(t,o){cc.tween(e.shapeNode).to(1.5,{scale:t},{easing:"cubicOut"}).delay(1).call(o).start()};cc.tween(this.lightNode).to(1,{rotation:25},{easing:"cubicOut"}).call(function(){e.lightAnimNode.node.active=!0;var i=e.lightAnimNode.play("LightBeam").duration;e.scheduleOnce(function(){return o(1,function(){return o(.25,t)})},i+.5)}).start()},n([a(cc.Node)],e.prototype,"pulley",void 0),n([a(cc.Node)],e.prototype,"lightNode",void 0),n([a(cc.Animation)],e.prototype,"lightAnimNode",void 0),n([a(cc.Node)],e.prototype,"shapeNode",void 0),e=n([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],EXPL10MAT06E04_OptionHandler:[function(t,e,o){"use strict";cc._RF.push(e,"d5971DVU3BKo7O+/Wew1sti","EXPL10MAT06E04_OptionHandler");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/AudioManager"),r=cc._decorator,a=r.ccclass,c=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startPosition=0,e.endPosition=0,e.correctOption=-1,e.autoHideOnSubmit=!0,e.correctSpriteFrame=null,e.wrongSpriteFrame=null,e.showOptionsSfx=null,e.hideOptionsSfx=null,e.optionClickSfx=null,e.audioManager=null,e.selectedOption=-1,e.optionButtons=[],e.optionHighlightSprites=[],e}return i(e,t),e.prototype.onLoad=function(){this.getReferences(),this.initialize()},e.prototype.getReferences=function(){this.audioManager=cc.find("CommonCanvas").getComponent(s.default);for(var t=0,e=this.node.children;t<e.length;t++){var o=e[t];this.optionButtons.push(o.getComponent(cc.Button)),this.optionHighlightSprites.push(o.getChildByName("Highlight").getComponent(cc.Sprite))}},e.prototype.initialize=function(){this.node.y=this.startPosition},e.prototype.show=function(){var t=this;this.enableOrDisableOptions(!1),this.optionHighlightSprites.forEach(function(t){return t.node.active=!1}),cc.tween(this.node).to(1,{y:this.endPosition}).call(function(){t.enableOrDisableOptions(!0),t.node.emit("onOptionsShown")}).start(),this.showOptionsSfx&&this.audioManager.play("showOptionsSfx",this.showOptionsSfx,!1,"SFX")},e.prototype.enableOrDisableOptions=function(t){this.optionButtons.forEach(function(e){e.interactable=t})},e.prototype.hide=function(){var t=this;cc.tween(this.node).to(1,{y:this.startPosition}).call(function(){t.node.emit("onOptionsHide")}).start(),this.hideOptionsSfx&&this.audioManager.play("hideOptionsSfx",this.hideOptionsSfx,!1,"SFX")},e.prototype.onClickSubmit=function(t,e){this.enableOrDisableOptions(!1),this.selectedOption=parseInt(e),this.autoHideOnSubmit&&this.scheduleOnce(this.hide.bind(this),.5);var o=this.selectedOption==this.correctOption;this.optionHighlightSprites[this.selectedOption].spriteFrame=o?this.correctSpriteFrame:this.wrongSpriteFrame,this.optionHighlightSprites[this.selectedOption].node.active=!0,this.optionClickSfx&&this.audioManager.play("optionClickSfx",this.optionClickSfx,!1,"SFX"),this.node.emit("onSubmit",this.selectedOption,o)},n([c(cc.Float)],e.prototype,"startPosition",void 0),n([c(cc.Float)],e.prototype,"endPosition",void 0),n([c],e.prototype,"correctOption",void 0),n([c(cc.Boolean)],e.prototype,"autoHideOnSubmit",void 0),n([c(cc.SpriteFrame)],e.prototype,"correctSpriteFrame",void 0),n([c(cc.SpriteFrame)],e.prototype,"wrongSpriteFrame",void 0),n([c({type:cc.AudioClip})],e.prototype,"showOptionsSfx",void 0),n([c({type:cc.AudioClip})],e.prototype,"hideOptionsSfx",void 0),n([c({type:cc.AudioClip})],e.prototype,"optionClickSfx",void 0),e=n([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../../framework/scripts/AudioManager":"AudioManager"}],EXPL10MAT06E04_QuestionTypeOne:[function(t,e,o){"use strict";cc._RF.push(e,"95f87Dh+p9Bsb6BqBE9kdMn","EXPL10MAT06E04_QuestionTypeOne");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/StepsController"),r=t("./EXPL10MAT06E04_BaseQuestion"),a=cc._decorator,c=a.ccclass,p=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.crane=null,e.pulley=null,e.pulleyDropYPos=[],e.wheelRotAnim=null,e.shapePitPos=null,e.shapePitRot=0,e.shapePitScale=1,e.currentShapePitOption=-1,e}return i(e,t),Object.defineProperty(e.prototype,"shapePitNode",{get:function(){return this.pulley.parent.getChildByName("ShapePit"+this.selectedOption)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shapePulleyNode",{get:function(){return this.pulley.getChildByName("Shape"+this.selectedOption)},enumerable:!0,configurable:!0}),e.prototype.resetShapePitNode=function(){null!=this.shapePitPos&&(this.shapePitNode.setPosition(this.shapePitPos),this.shapePitNode.rotation=this.shapePitRot,this.shapePitNode.scale=this.shapePitScale)},e.prototype.cahceShapePitNode=function(){this.shapePitPos=this.shapePitNode.getPosition(),this.shapePitRot=this.shapePitNode.rotation,this.shapePitScale=this.shapePitNode.scale},e.prototype.start=function(){t.prototype.start.call(this)},e.prototype.playFeedback=function(e,o){t.prototype.playFeedback.call(this,e,o),this.setActive(this.questionTablePanel,!1),this.currentShapePitOption!=this.selectedOption&&(this.cahceShapePitNode(),this.currentShapePitOption=e)},e.prototype.playWrongFeedbackOne=function(){var e=this;t.prototype.playWrongFeedbackOne.call(this);this.hideOptions(function(){var t=e.shapePitNode.parent.getChildByName("ShapePit"+e.selectedOption+"_DropPos");e.playPulleyAnim(),e.scheduleOnce(function(){cc.tween(e.shapePitNode).to(2,{position:t.position,rotation:t.rotation,scale:t.scale},{easing:"smooth"}).call(function(){return e.feedbackSecondSequence()}).start()},2)})},e.prototype.playWrongFeedbackTwo=function(){var e=this;t.prototype.playWrongFeedbackTwo.call(this);this.hideOptions(function(){e.playPulleyAnim(function(){e.feedbackSecondSequence()})})},e.prototype.playCorrectFeedback=function(){var e=this;t.prototype.playCorrectFeedback.call(this);this.hideOptions(function(){e.playPulleyAnim(function(){var t=e.feedbackData[e.selectedOption].feedbackTable,o=t.getChildByName("Highlight"),i=t.getChildByName("BottomPanel");o.active=!1,i.active=!1,e.setActive(t,!0,function(){e.isFeedbackCompleted=!0,e.feedbackCallback([e.feedbackIndex[0]]),e.scheduleOnce(function(){return e.blinkNode(o,1,3)},"Q7"!=e.node.name?5:0),e.scheduleOnce(function(){return e.setActive(i,!0)},"Q7"!=e.node.name?7:3)})})})},e.prototype.playFeedbackThree=function(){var e=this;t.prototype.playFeedbackThree.call(this);this.hideOptions(function(){e.playPulleyAnim(function(){var t=e.feedbackData[e.selectedOption].feedbackTable,o=t.getChildByName("Highlight"),i=t.getChildByName("BottomPanel"),n="Q5"==e.node.name&&2==e.selectedOption||"Q1"==e.node.name&&3==e.selectedOption;o.active=!1,n&&(i.active=!1),e.setActive(t,!0,function(){n?e.scheduleOnce(function(){return e.setActive(i,!0)},2):e.scheduleOnce(function(){return e.blinkNode(o,1,3)},2)});var r=e.feedbackCallback([e.feedbackIndex[0]]);e.scheduleOnce(function(){var t=e.audioManager.getComponent(s.default);e.isFeedbackCompleted=!0,t.playFeedback([e.feedbackIndex[1]],!1,!1),e.playLightBeamAnim(function(){if("Q3"!=e.node.name||3!=e.selectedOption){var t=e.shapePitNode.parent.getChildByName("ShapePit"+e.selectedOption+"_FinalPos");cc.tween(e.shapePitNode).to(2,{position:t.position,rotation:t.rotation,scale:t.scale},{easing:"smooth"}).delay(1).call(e.stopLightBeamAnim.bind(e)).start()}else e.shapePitNode.getComponent(cc.Animation).play("RectangleScale").duration,e.scheduleOnce(e.stopLightBeamAnim.bind(e),2)})},r+2)})})},e.prototype.playCraneIntro=function(e){var o=this;t.prototype.playCraneIntro.call(this,e),this.playFeedbackAnimation(this.wheelRotAnim),this.moveNode(this.crane,this.crane.getPosition().sub(cc.v2(200,0)),this.crane.getPosition(),2.5,function(){o.wheelRotAnim.stopAnimation(),e&&e()})},e.prototype.playCranePunctureIntro=function(e){var o=this;t.prototype.playCranePunctureIntro.call(this,e),this.playCraneIntro(function(){var t=o.wheelRotAnim.animNode.getChildByName("Wheel3"),i=o.wheelRotAnim.animNode.getChildByName("Highlight");o.setActive(t,!1,function(){return o.setActive(i,!0,e)})})},e.prototype.playPulleyAnim=function(t){var e=this;this.pulley.active=!0,this.shapePulleyNode.active=!0;var o=this.pulley.getPosition();this.moveNode(this.pulley,o,cc.v2(o.x,this.pulleyDropYPos[this.selectedOption]),2,function(){e.shapePulleyNode.active=!1,e.shapePitNode.active=!0,e.scheduleOnce(function(){e.moveNode(e.pulley,e.pulley.getPosition(),o,2,t)},1)})},e.prototype.feedbackSecondSequence=function(t){var e=this,o=this.feedbackData[this.selectedOption].feedbackTable,i=o.getChildByName("Highlight"),n=o.getChildByName("BottomPanel"),r="Q5"==this.node.name&&2==this.selectedOption||"Q1"==this.node.name&&3==this.selectedOption;i.active=!1,r&&(n.active=!1),this.setActive(o,!0,function(){r?e.scheduleOnce(function(){return e.setActive(n,!0)},2):e.scheduleOnce(function(){return e.blinkNode(i,1,3)},2)});var a=this.feedbackCallback([this.feedbackIndex[0]]);this.scheduleOnce(function(){var t=e.audioManager.getComponent(s.default);e.isFeedbackCompleted=!0,t.playFeedback([e.feedbackIndex[1]],!1,!1),e.playLightBeamAnim(function(){e.scaleNode(e.shapePitNode,e.feedbackData[e.selectedOption].scaleFactor,2,e.stopLightBeamAnim.bind(e))})},a+2)},e.prototype.showTablePanel=function(t){var e=this,o=this.feedbackData[this.selectedOption].feedbackTable;this.setActive(o,!0,function(){var i=o.getChildByName("Highlight");e.blinkNode(i,1,3,t)})},e.prototype.reset=function(){t.prototype.reset.call(this),this.pulley.active=!1,this.resetShapePitNode(),this.shapePitNode.active=!1},n([p(cc.Node)],e.prototype,"crane",void 0),n([p(cc.Node)],e.prototype,"pulley",void 0),n([p([cc.Float])],e.prototype,"pulleyDropYPos",void 0),n([p(r.EXPL10MAT06E04_Animation)],e.prototype,"wheelRotAnim",void 0),e=n([c],e)}(r.default);o.default=l,cc._RF.pop()},{"../../../../framework/scripts/StepsController":"StepsController","./EXPL10MAT06E04_BaseQuestion":"EXPL10MAT06E04_BaseQuestion"}],EXPL10MAT06E04_QuestionTypeTwo:[function(t,e,o){"use strict";cc._RF.push(e,"c1045z24pdBsIyzhE+kxTh1","EXPL10MAT06E04_QuestionTypeTwo");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./EXPL10MAT06E04_BaseQuestion"),r=cc._decorator,a=r.ccclass,c=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.crane=null,e.shapePitNode=null,e.trackAnimWidth=180,e.wheelRotAnim=null,e.wrongFeedbackAnim=null,e.trackPins=[],e.track=null,e}return i(e,t),e.prototype.start=function(){var e=this;t.prototype.start.call(this);var o=this.node.getChildByName("TrackAnim");null!=o&&(this.track=o.getChildByName("Track"),o.children.forEach(function(t){"Pin"==t.name&&e.trackPins.push(t)}))},e.prototype.playWrongFeedbackOne=function(){var e=this;t.prototype.playWrongFeedbackOne.call(this);this.hideOptions(function(){e.showTablePanel(function(){e.fillPit(function(){e.highlightTablePanel(function(){e.isFeedbackCompleted=!0,e.feedbackCallback(e.feedbackIndex)})}),e.scheduleOnce(function(){e.playFeedbackAnimation(e.wrongFeedbackAnim)},2.5)})})},e.prototype.playWrongFeedbackTwo=function(){var e=this;t.prototype.playWrongFeedbackTwo.call(this);this.hideOptions(function(){e.showTablePanel(function(){e.fillPit(function(){e.highlightTablePanel(function(){e.isFeedbackCompleted=!0,e.feedbackCallback(e.feedbackIndex)})})})})},e.prototype.playCorrectFeedback=function(){var e=this;t.prototype.playCorrectFeedback.call(this);var o=function(){e.setActive(e.feedbackData[e.selectedOption].feedbackTable,!1,function(){e.lightAnim.reset(),e.lightNode.rotation=0,e.fillTrack(function(){e.moveCrane(function(){e.isFeedbackCompleted=!0,e.audioManager.node.emit("OnFeedbackPlayComplete")})})})};this.hideOptions(function(){e.showTablePanel(function(){e.highlightTablePanel(function(){e.fillPit(function(){var t=e.feedbackCallback(e.feedbackIndex);e.scheduleOnce(o,t)})})})})},e.prototype.playFeedbackThree=function(){var e=this;t.prototype.playFeedbackThree.call(this);var o=this.wheelRotAnim.animNode.getChildByName("Wheel3"),i=this.wheelRotAnim.animNode.getChildByName("Highlight"),n=this.wheelRotAnim.animNode.getChildByName("GreenHighlight"),s=function(){e.setActive(n,!1),e.setActive(e.feedbackData[e.selectedOption].feedbackTable,!1,function(){e.moveCrane(function(){e.isFeedbackCompleted=!0,e.audioManager.node.emit("OnFeedbackPlayComplete")})})};this.hideOptions(function(){e.showTablePanel(function(){e.highlightTablePanel(function(){e.fillPit(function(){e.shapePitNode.setAnchorPoint(.5,.5),e.shapePitNode.setPosition(e.shapePitNode.getPosition().x,e.shapePitNode.getPosition().y+e.shapePitNode.height/4);var t=cc.tween(e.shapePitNode).by(1,{rotation:-360}).repeatForever().start(),r=o.convertToWorldSpaceAR(cc.Vec2.ZERO),a=e.shapePitNode.parent.convertToNodeSpaceAR(r);e.moveNode(e.shapePitNode,e.shapePitNode.getPosition(),a,4,function(){t.stop(),e.shapePitNode.active=!1,o.active=!0,i.active=!1,e.blinkNode(n,1,3);var r=e.feedbackCallback(e.feedbackIndex);e.scheduleOnce(s,r)})})})})})},e.prototype.fillTrack=function(t){var e=this,o=function(t,i){void 0===i&&(i=0),e.setActive(e.trackPins[i],!0,function(){i+1<e.trackPins.length?o(t,i+1):t()})};o(function(){cc.tween(e.track).to(2,{width:e.trackAnimWidth},{easing:"cubicOut"}).call(t).start()})},e.prototype.fillPit=function(t){var e=this;this.playLightBeamAnim(function(){e.scaleNode(e.shapePitNode,e.feedbackData[e.selectedOption].scaleFactor,2,function(){e.stopLightBeamAnim(),t&&t()})})},e.prototype.showTablePanel=function(t){var e=this.feedbackData[this.selectedOption].feedbackTable,o=e.getChildByName("Highlight");this.questionTablePanel.active=!1,o.active=!1,e.active=!0,t&&t()},e.prototype.highlightTablePanel=function(t){var e=this.feedbackData[this.selectedOption].feedbackTable.getChildByName("Highlight");this.blinkNode(e,1,3,function(){t&&t()})},e.prototype.moveCrane=function(t,e){var o=this;void 0===e&&(e=800),this.playFeedbackAnimation(this.wheelRotAnim),this.moveNode(this.crane,this.crane.getPosition(),this.crane.getPosition().add(cc.v2(e,0)),4,function(){o.wheelRotAnim.stopAnimation(),t&&t()})},e.prototype.playCraneOutro=function(t){this.moveCrane(t)},e.prototype.reset=function(){t.prototype.reset.call(this),this.wrongFeedbackAnim.reset(),this.trackPins.forEach(function(t){return t.active=!1}),this.shapePitNode.scale=1,this.track&&(this.track.width=0)},n([c(cc.Node)],e.prototype,"crane",void 0),n([c(cc.Node)],e.prototype,"shapePitNode",void 0),n([c(cc.Integer)],e.prototype,"trackAnimWidth",void 0),n([c(s.EXPL10MAT06E04_Animation)],e.prototype,"wheelRotAnim",void 0),n([c(s.EXPL10MAT06E04_Animation)],e.prototype,"wrongFeedbackAnim",void 0),e=n([a],e)}(s.default);o.default=p,cc._RF.pop()},{"./EXPL10MAT06E04_BaseQuestion":"EXPL10MAT06E04_BaseQuestion"}],EXPL10MAT06E04_SimilarityOfPlaneFigures:[function(t,e,o){"use strict";cc._RF.push(e,"bb04f6TcyRAL7OPxlovhHlf","EXPL10MAT06E04_SimilarityOfPlaneFigures");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/AudioManager"),r=t("../../../../framework/scripts/AnalyticsManager"),a=t("../../../../framework/scripts/StepsController"),c=t("../../../../framework/scripts/UIManager"),p=t("./EXPL10MAT06E04_BaseQuestion"),l=t("./EXPL10MAT06E04_IntroHandler"),h=t("./EXPL10MAT06E04_TutorialHandler"),d=cc._decorator,u=d.ccclass,g=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.tutorialManager=null,e.gamePanels=[],e.backgroundMusic=null,e.ambientMusic=null,e.correctFeedback=null,e.wrongFeedback=null,e.transitionAudio=null,e.introHandler=null,e.questions=[],e.isTutorialShown=!1,e.currentGamePanelIndex=0,e.isCorrect=!1,e.selectedOptionIndex=0,e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.scr_stepsController=this.canvas.getComponent(a.default),this.uiManager=this.canvas.getComponent(c.default),this.audioManager=this.canvas.getComponent(s.default),this.scr_analyticsManager=this.canvas.getComponent(r.default),this.canvas.on("OnLoadStep",this.stepsHandler.bind(this)),this.canvas.on("OnCommonButtonClick",this.onCommonButtonClick.bind(this)),this.canvas.on("OnFeedbackPlayComplete",this.onFeedbackPlayComplete.bind(this)),this.tutorialManager.node.on("onTutorialStop",function(){return t.showQuestion(!0)},this);for(var e=1;e<this.gamePanels.length-1;e++)this.questions[e]=this.gamePanels[e].getComponent(p.default),this.questions[e].setAudioManager(this.audioManager),this.questions[e].optionsHandler.node.on("onSubmit",this.onSubmit,this);this.introHandler=this.gamePanels[0].getComponent(l.default),this.gamePanels.forEach(function(t){return t.active=!1}),this.uiManager.setHeaderYpos(395),this.uiManager.setFooterYpos(-310),this.uiManager.setFooterButtonYpos(-355)},e.prototype.start=function(){this.scr_stepsController.Initialise("EXPL10MAT06E04_SimilarityOfPlaneFigures"),this.audioManager.play("bgm",this.backgroundMusic,!0,"BGM",.5),this.audioManager.play("ambience",this.ambientMusic,!0,"BGM")},e.prototype.activateNextGamePanel=function(){if(!(this.currentGamePanelIndex+1>=this.gamePanels.length)){this.gamePanels[this.currentGamePanelIndex].active=!1,this.currentGamePanelIndex+=1;var t=this.gamePanels[this.currentGamePanelIndex];return t.active=!0,t}},e.prototype.stepsHandler=function(t){switch(console.log("Step handler: "+t),t){case 0:this.gamePanels[this.currentGamePanelIndex].active=!0;case 1:case 2:this.introHandler.playIntroAnim(t);break;case 3:this.questions[this.scr_stepsController.getCurrentQuestionIndex()].playCraneIntro(),this.activateNextGamePanel();break;case 7:case 11:this.questions[this.scr_stepsController.getCurrentQuestionIndex()+1].playCraneIntro(),this.activateNextGamePanel();break;case 15:case 5:case 9:case 13:case 17:this.activateNextGamePanel();break;case 19:this.showOutroPanel();break;default:this.showQuestion()}this.playTransitionAudio()},e.prototype.showOutroPanel=function(){this.canvas.emit("OnEndScreenReach",{}),this.uiManager.setActiveCloseButton(!1),this.uiManager.setHeaderYpos(),this.activateNextGamePanel()},e.prototype.onCommonButtonClick=function(t){var e=this;this.uiManager.CommonButtonType.NextQuestion==t?(this.scr_analyticsManager.sendNextQuestionStart(this.scr_stepsController.getCurrentQuestionIndex(),!1,this.scr_analyticsManager.Phylum.Click),this.getCurrentQuestion().playCraneOutro(function(){e.scr_stepsController.loadNextStep()})):this.uiManager.CommonButtonType.TryAgain==t&&(this.scr_analyticsManager.sendOnTryAgain(this.scr_stepsController.getCurrentQuestionIndex(),this.selectedOptionIndex+1),this.getCurrentQuestion().failedFirstAttempt=!0,this.showQuestion(!0))},e.prototype.onFeedbackPlayComplete=function(t){this.getCurrentQuestion().isFeedbackCompleted&&(this.isCorrect?this.uiManager.setActiveNextButton(!0):this.uiManager.setActiveTryAgainButton(!0))},e.prototype.playTransitionAudio=function(){var t=this;this.transitionAudio&&this.scheduleOnce(function(){t.audioManager.play("transitionAudio",t.transitionAudio,!1,"SFX")},2)},e.prototype.showQuestion=function(t){var e=this;void 0===t&&(t=!1);var o=this.scr_stepsController.getCurrentQuestionIndex(),i=this.questions[o],n=function(){e.checkAndShowTutorial()||i.show()};if(t)i.reset(),n();else{var s=this.scr_stepsController.getCurrentStepJson().duration;this.scheduleOnce(n,s)}},e.prototype.checkAndShowTutorial=function(){return!this.isTutorialShown&&(this.tutorialManager.node.active=!0,this.tutorialManager.show(),this.isTutorialShown=!0,!0)},e.prototype.onSubmit=function(t,e){var o=this;this.selectedOptionIndex=t,this.isCorrect=e;var i=this.scr_stepsController.getCurrentQuestionIndex();this.questions[i].playFeedback(t,function(t){return o.scheduleOnce(function(){return o.showFeedback(t)},1),o.scr_stepsController.getCurrentStepJson().feedBack[t[0]].duration}),e?this.audioManager.play("correcFeedback",this.correctFeedback,!1,"SFX"):this.audioManager.play("wrongFeedback",this.wrongFeedback,!1,"SFX")},e.prototype.showFeedback=function(t){this.scr_stepsController.playFeedback(t,this.isCorrect,!this.getCurrentQuestion().isFeedbackCompleted)},e.prototype.getCurrentQuestion=function(){var t=this.scr_stepsController.getCurrentQuestionIndex();return this.questions[t]},n([g(cc.Node)],e.prototype,"canvas",void 0),n([g(h.default)],e.prototype,"tutorialManager",void 0),n([g([cc.Node])],e.prototype,"gamePanels",void 0),n([g({type:cc.AudioClip})],e.prototype,"backgroundMusic",void 0),n([g({type:cc.AudioClip})],e.prototype,"ambientMusic",void 0),n([g({type:cc.AudioClip})],e.prototype,"correctFeedback",void 0),n([g({type:cc.AudioClip})],e.prototype,"wrongFeedback",void 0),n([g({type:cc.AudioClip})],e.prototype,"transitionAudio",void 0),e=n([u],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../../../../framework/scripts/AnalyticsManager":"AnalyticsManager","../../../../framework/scripts/AudioManager":"AudioManager","../../../../framework/scripts/StepsController":"StepsController","../../../../framework/scripts/UIManager":"UIManager","./EXPL10MAT06E04_BaseQuestion":"EXPL10MAT06E04_BaseQuestion","./EXPL10MAT06E04_IntroHandler":"EXPL10MAT06E04_IntroHandler","./EXPL10MAT06E04_TutorialHandler":"EXPL10MAT06E04_TutorialHandler"}],EXPL10MAT06E04_TutorialHandler:[function(t,e,o){"use strict";cc._RF.push(e,"77000FAADpPzZk0V3tfN4wh","EXPL10MAT06E04_TutorialHandler");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/AnalyticsManager"),r=t("../../../../framework/scripts/StepsController"),a=cc._decorator,c=a.ccclass,p=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.repeatCount=1,e.hand=null,e.option1Highlight=null,e.option2Highlight=null,e.handPositionAtOption1=cc.v3(-302.224,-46.52,0),e.handPositionAtOption2=cc.v3(55.912,-46.52,0),e.scaleDownHandTo=.7,e.timeToMoveToOption1=.8,e.timeToMoveToOption2=1,e.timeToScaleHand=.2,e.delay=1,e.overlayButton=null,e.closeButton=null,e.handDefaultPosition=cc.v3(0,0,0),e.handOriginalScale=0,e}return i(e,t),e.prototype.onLoad=function(){var t=cc.find("CommonCanvas");this.analyticsManager=t.getComponent(s.default),this.stepsController=t.getComponent(r.default),null==this.hand&&(this.hand=this.node.getChildByName("HandIcon")),this.handDefaultPosition=this.hand.position,this.handOriginalScale=this.hand.scale;var e=this.node.getChildByName("Options");null==this.option1Highlight&&(this.option1Highlight=e.getChildByName("Button_2").getChildByName("Highlight")),null==this.option2Highlight&&(this.option2Highlight=e.getChildByName("Button_4").getChildByName("Highlight")),this.node.active=!1},e.prototype.show=function(){var t=this;this.analyticsManager.sendOnViewTutorial(this.stepsController.getCurrentQuestionIndex()),this.overlayButton.interactable=!1,this.closeButton.interactable=!1,this.node.opacity=0,this.node.active=!0,cc.tween(this.node).to(1,{opacity:255}).call(function(){t.overlayButton.interactable=!0,t.closeButton.interactable=!0}).start(),this.scheduleOnce(this.moveHand.bind(this),1)},e.prototype.moveHand=function(){var t=this,e=function(){t.hand.position=t.handDefaultPosition,t.hand.scale=t.handOriginalScale,t.option1Highlight.active=!1,t.option2Highlight.active=!1},o=function(o,i,n){return cc.tween().call(e).to(o,{position:i}).to(t.timeToScaleHand,{scale:t.scaleDownHandTo}).call(function(){n.active=!0}).to(t.timeToScaleHand,{scale:t.handOriginalScale}).delay(t.delay)};cc.tween(this.hand).sequence(o(this.timeToMoveToOption1,this.handPositionAtOption1,this.option1Highlight),o(this.timeToMoveToOption2,this.handPositionAtOption2,this.option2Highlight)).repeat(this.repeatCount).call(function(){t.stopTutorial()}).start()},e.prototype.stopTutorial=function(){cc.Tween.stopAllByTarget(this.node),cc.Tween.stopAllByTarget(this.hand),this.unscheduleAllCallbacks(),this.node.opacity=0,this.node.active=!1,this.node.emit("onTutorialStop")},n([p({type:cc.Integer})],e.prototype,"repeatCount",void 0),n([p(cc.Node)],e.prototype,"hand",void 0),n([p(cc.Node)],e.prototype,"option1Highlight",void 0),n([p(cc.Node)],e.prototype,"option2Highlight",void 0),n([p(cc.Vec3)],e.prototype,"handPositionAtOption1",void 0),n([p(cc.Vec3)],e.prototype,"handPositionAtOption2",void 0),n([p({type:cc.Float})],e.prototype,"scaleDownHandTo",void 0),n([p({type:cc.Float})],e.prototype,"timeToMoveToOption1",void 0),n([p({type:cc.Float})],e.prototype,"timeToMoveToOption2",void 0),n([p({type:cc.Float})],e.prototype,"timeToScaleHand",void 0),n([p({type:cc.Float})],e.prototype,"delay",void 0),n([p(cc.Button)],e.prototype,"overlayButton",void 0),n([p(cc.Button)],e.prototype,"closeButton",void 0),e=n([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../../../framework/scripts/AnalyticsManager":"AnalyticsManager","../../../../framework/scripts/StepsController":"StepsController"}],EXPL10SCI12E01_BaseQuestion:[function(t,e,o){"use strict";cc._RF.push(e,"37e13KARpNJd5Kznp2Y5E5Y","EXPL10SCI12E01_BaseQuestion");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=s.property,c=function(){function t(){this.optionKeys=[],this.optionSpriteFrames=[],this.correctAnswerIndex=1}return Object.defineProperty(t.prototype,"wrongAnswerIndex",{get:function(){return 0==this.correctAnswerIndex?1:0},enumerable:!0,configurable:!0}),t.prototype.hasSprite=function(){return this.optionSpriteFrames.length>0},t.prototype.hasText=function(){return this.optionKeys.length>0},n([a({type:cc.String})],t.prototype,"optionKeys",void 0),n([a([cc.SpriteFrame])],t.prototype,"optionSpriteFrames",void 0),n([a(cc.Integer)],t.prototype,"correctAnswerIndex",void 0),t=n([r("QuestionData")],t)}();o.EXPL10SCI12E01_QuestionData=c;var p=function(){function t(){this.animNode=null,this.animName=" ",this.animRepeatCount=1,this.audioClip=null,this.disableAfterAnim=!0}return n([a(cc.Node)],t.prototype,"animNode",void 0),n([a(cc.String)],t.prototype,"animName",void 0),n([a()],t.prototype,"animRepeatCount",void 0),n([a({type:cc.AudioClip})],t.prototype,"audioClip",void 0),n([a(cc.Boolean)],t.prototype,"disableAfterAnim",void 0),t=n([r("FeedbackAnimation")],t)}();o.EXPL10SCI12E01_FeedbackAnimation=p;var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.questionData=null,e.lights=null,e.symbolHighlight=null,e.audioManager=null,e.failedFirstAttempt=!1,e}return i(e,t),e.prototype.start=function(){this.reset()},e.prototype.setAudioManager=function(t){this.audioManager=t},e.prototype.playPositiveFeedback=function(t){},e.prototype.playNegativeFeedback=function(t){},e.prototype.highlightCircuitSymbol=function(t){var e=this;null!=this.symbolHighlight&&this.scheduleOnce(function(){e.blinkNode(e.symbolHighlight,1,3,function(){cc.tween(e.symbolHighlight).to(.5,{opacity:0}).call(function(){e.symbolHighlight.active=!1,e.symbolHighlight.opacity=255}).start()})},t)},e.prototype.reset=function(){null!=this.lights&&(this.lights.active=!1),null!=this.symbolHighlight&&(this.symbolHighlight.active=!1)},e.prototype.blinkNode=function(t,e,o,i){void 0===e&&(e=1),void 0===o&&(o=1),t.active=!0;var n=cc.tween().to(e/2,{opacity:0}),s=cc.tween().to(e/2,{opacity:255});cc.tween(t).sequence(n,s).repeat(o).call(i).start()},e.prototype.playLightBlinkAnim=function(t){var e=this;null!=this.lights?this.scheduleOnce(function(){e.blinkNode(e.lights,.5,8,t)},.5):this.scheduleOnce(t,2)},e.prototype.playAnimation=function(t,e,o,i){void 0===o&&(o=1),void 0===i&&(i=!0),t.active=!0;var n=t.getComponent(cc.Animation).play(e);n.repeatCount=o;var s=n.duration*o;return i&&this.scheduleOnce(function(){return t.active=!1},s),s},e.prototype.animateOption=function(t,e,o){var i=t.getPosition(),n=e.convertToWorldSpaceAR(cc.Vec2.ZERO),s=t.parent.convertToNodeSpaceAR(n);cc.tween(t).to(.5,{position:s},{easing:"cubicOut"}).call(function(){t.active=!1,t.setPosition(i),e.active=!0,o&&o()}).start()},e.prototype.playAnimationsInSequence=function(t,e){var o=this;if(!(t.length<=0)){var i=function(n,s){var r=o.playAnimation(s.animNode,s.animName,s.animRepeatCount,s.disableAfterAnim);o.playAnimAudio(s);var a=n+1;a>=t.length?o.scheduleOnce(e,r):o.scheduleOnce(function(){s.audioClip&&o.audioManager.stop(s.audioClip.name),i(a,t[a])},r)};i(0,t[0])}},e.prototype.playAnimationsParallely=function(t){if(!(t.length<=0))for(var e=0,o=t;e<o.length;e++){var i=o[e];this.playAnimation(i.animNode,i.animName,i.animRepeatCount,i.disableAfterAnim),this.playAnimAudio(i)}},e.prototype.playAnimAudio=function(t){t.audioClip&&this.audioManager.play(t.audioClip.name,t.audioClip,!1,"SFX")},n([a(c)],e.prototype,"questionData",void 0),n([a(cc.Node)],e.prototype,"lights",void 0),n([a(cc.Node)],e.prototype,"symbolHighlight",void 0),e=n([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],EXPL10SCI12E01_ComponentsOfCircuit:[function(t,e,o){"use strict";cc._RF.push(e,"2179cJf7uVOAptbrEzX8j0V","EXPL10SCI12E01_ComponentsOfCircuit");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/AudioManager"),r=t("../../../../framework/scripts/AnalyticsManager"),a=t("../../../../framework/scripts/StepsController"),c=t("../../../../framework/scripts/UIManager"),p=t("../../../../framework/prefab/template3/Template3_OptionHandler"),l=t("./Questions/EXPL10SCI12E01_BaseQuestion"),h=t("../../../../framework/prefab/template3/Template3_Tutorial"),d=t("./EXPL10SCI12E01_QuestionProgressBar"),u=cc._decorator,g=u.ccclass,y=u.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.optionsHandler=null,e.questionProgressBar=null,e.tutorialManager=null,e.gamePanels=[],e.optionHighlights=[],e.backgroundMusic=null,e.ambientMusic=null,e.correctFeedback=null,e.wrongFeedback=null,e.transitionAudio=null,e.questions=[],e.isTutorialShown=!1,e.currentGamePanelIndex=0,e.isCorrect=!1,e.selectedOptionIndex=0,e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.scr_stepsController=this.canvas.getComponent(a.default),this.uiManager=this.canvas.getComponent(c.default),this.audioManager=this.canvas.getComponent(s.default),this.scr_analyticsManager=this.canvas.getComponent(r.default),this.canvas.on("OnLoadStep",this.stepsHandler.bind(this)),this.canvas.on("OnCommonButtonClick",this.onCommonButtonClick.bind(this)),this.canvas.on("OnFeedbackPlayComplete",this.onFeedbackPlayComplete.bind(this)),this.tutorialManager.node.on("onTutorialStop",function(){return t.showQuestion(!0)},this),this.optionsHandler.node.on("onSubmit",this.onSubmit,this);for(var e=1;e<this.gamePanels.length-1;e++)this.questions[e]=this.gamePanels[e].getComponent(l.default),this.questions[e].setAudioManager(this.audioManager);this.gamePanels.forEach(function(t){return t.active=!1})},e.prototype.start=function(){this.scr_stepsController.Initialise("EXPL10SCI12E01_ComponentsOfCircuit"),this.audioManager.play("bgm",this.backgroundMusic,!0,"BGM",.7),this.audioManager.play("ambience",this.ambientMusic,!0,"BGM")},e.prototype.activateNextGamePanel=function(){if(!(this.currentGamePanelIndex+1>=this.gamePanels.length)){this.gamePanels[this.currentGamePanelIndex].active=!1,this.currentGamePanelIndex+=1;var t=this.gamePanels[this.currentGamePanelIndex];return t.active=!0,t}},e.prototype.stepsHandler=function(t){switch(console.log("Steps handler. Next step is "+t),t){case 0:this.gamePanels[this.currentGamePanelIndex].active=!0;case 1:case 2:var e=this.gamePanels[0].getChildByName("IntroPanel_"+t);this.playIntroAnim(e);break;case 3:this.uiManager.setHeaderYpos(330),this.uiManager.setFooterYpos(-310),this.uiManager.setFooterButtonYpos(-355),this.questionProgressBar.node.active=!0;case 5:case 7:case 9:case 11:case 13:this.activateNextGamePanel();break;case 15:this.showOutroPanel();break;default:this.showQuestion()}this.playTransitionAudio()},e.prototype.showOutroPanel=function(){this.canvas.emit("OnEndScreenReach",{}),this.uiManager.setActiveCloseButton(!1),this.uiManager.setHeaderYpos(),this.questionProgressBar.node.active=!1,this.activateNextGamePanel()},e.prototype.onCommonButtonClick=function(t){this.uiManager.CommonButtonType.NextQuestion==t?(this.scr_analyticsManager.sendNextQuestionStart(this.scr_stepsController.getCurrentQuestionIndex(),!1,this.scr_analyticsManager.Phylum.Click),this.scr_stepsController.loadNextStep()):this.uiManager.CommonButtonType.TryAgain==t&&(this.scr_analyticsManager.sendOnTryAgain(this.scr_stepsController.getCurrentQuestionIndex(),this.selectedOptionIndex),this.getCurrentQuestion().failedFirstAttempt=!0,this.showQuestion(!0))},e.prototype.onFeedbackPlayComplete=function(t){this.isCorrect?this.uiManager.setActiveNextButton(!0):this.uiManager.setActiveTryAgainButton(!0)},e.prototype.playIntroAnim=function(t){null!=t&&cc.tween(t).to(1,{position:{value:cc.Vec2.ZERO,easing:"smooth"}}).start()},e.prototype.playTransitionAudio=function(){var t=this;this.scheduleOnce(function(){t.audioManager.play("transitionAudio",t.transitionAudio,!1,"SFX")},2)},e.prototype.showQuestion=function(t){var e=this;void 0===t&&(t=!1);var o=this.scr_stepsController.getCurrentQuestionIndex(),i=this.questions[o].questionData,n=function(){e.checkAndShowTutorial()||e.optionsHandler.show(i.correctAnswerIndex,i.optionKeys,"install",i.optionSpriteFrames)};if(t)this.questions[o].reset(),n();else{var s=this.scr_stepsController.getCurrentStepJson().duration;this.scheduleOnce(n,s)}},e.prototype.checkAndShowTutorial=function(){return!this.isTutorialShown&&(this.tutorialManager.node.active=!0,this.tutorialManager.show(),this.isTutorialShown=!0,!0)},e.prototype.onSubmit=function(t,e){var o=this;this.selectedOptionIndex=t,this.isCorrect=e;var i=this.scr_stepsController.getCurrentQuestionIndex(),n=this.questions[i],s=function(){o.optionsHandler.hide(),o.scheduleOnce(o.showFeedback,1)};e?(this.audioManager.play("correcFeedback",this.correctFeedback,!1,"SFX"),n.playPositiveFeedback(function(){o.questionProgressBar.UpdateProgressQuestionBar(i,!n.failedFirstAttempt),s()})):(this.audioManager.play("wrongFeedback",this.wrongFeedback,!1,"SFX"),n.playNegativeFeedback(s))},e.prototype.showFeedback=function(){var t=this.isCorrect?[0]:[1];this.scr_stepsController.playFeedback(t,this.isCorrect,!1),this.getCurrentQuestion().highlightCircuitSymbol(this.isCorrect?2:4)},e.prototype.getCurrentQuestion=function(){var t=this.scr_stepsController.getCurrentQuestionIndex();return this.questions[t]},e.prototype.blinkOptionHighlight=function(t){var e=cc.tween().to(.5,{opacity:0}),o=cc.tween().to(.5,{opacity:255});cc.tween(this.optionHighlights[t]).sequence(e,o).repeat(3).start()},n([y(cc.Node)],e.prototype,"canvas",void 0),n([y(p.default)],e.prototype,"optionsHandler",void 0),n([y(d.default)],e.prototype,"questionProgressBar",void 0),n([y(h.default)],e.prototype,"tutorialManager",void 0),n([y([cc.Node])],e.prototype,"gamePanels",void 0),n([y([cc.Node])],e.prototype,"optionHighlights",void 0),n([y({type:cc.AudioClip})],e.prototype,"backgroundMusic",void 0),n([y({type:cc.AudioClip})],e.prototype,"ambientMusic",void 0),n([y({type:cc.AudioClip})],e.prototype,"correctFeedback",void 0),n([y({type:cc.AudioClip})],e.prototype,"wrongFeedback",void 0),n([y({type:cc.AudioClip})],e.prototype,"transitionAudio",void 0),e=n([g],e)}(cc.Component);o.default=m,cc._RF.pop()},{"../../../../framework/prefab/template3/Template3_OptionHandler":"Template3_OptionHandler","../../../../framework/prefab/template3/Template3_Tutorial":"Template3_Tutorial","../../../../framework/scripts/AnalyticsManager":"AnalyticsManager","../../../../framework/scripts/AudioManager":"AudioManager","../../../../framework/scripts/StepsController":"StepsController","../../../../framework/scripts/UIManager":"UIManager","./EXPL10SCI12E01_QuestionProgressBar":"EXPL10SCI12E01_QuestionProgressBar","./Questions/EXPL10SCI12E01_BaseQuestion":"EXPL10SCI12E01_BaseQuestion"}],EXPL10SCI12E01_QuestionProgressBar:[function(t,e,o){"use strict";cc._RF.push(e,"5f389DnCuxCToy2S+Vtj1w4","EXPL10SCI12E01_QuestionProgressBar");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/AudioManager"),r=cc._decorator,a=r.ccclass,c=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.spr_iconempty=null,e.spr_iconfilled=null,e.spr_iconfilledAfterFirstAttempt=null,e.useDifferentMilestoneIcons=!1,e.spr_emptyMilestones=[],e.spr_filledMilestones=[],e.aud_progressbarfill=null,e.aud_highlighticon=null,e.noOfQs=5,e.offsePosx=0,e.offseProgression=-10,e.bgEffectiveLength=500,e.progressBarOffsetX=250,e.bgNode=null,e.progressionNode=null,e.highlightNode=null,e.questionsNode=[],e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.canvas&&(this.audioManager=this.canvas.getComponent(s.default)),this.bgNode=this.node.getChildByName("bg"),this.progressionNode=this.bgNode.getChildByName("progression"),this.highlightNode=this.bgNode.getChildByName("highlight"),this.highlightNode.opacity=0,this.progressionNode.children.forEach(function(e){"Q1"==e.name&&t.questionsNode.push(e)}),this.questionsNode[0].x=(this.bgEffectiveLength-(this.progressionNode.x+this.progressBarOffsetX))/this.noOfQs+this.offsePosx,this.questionsNode[0].width=30,this.questionsNode[0].height=46,this.progressionNode.getComponent(cc.Sprite).type==cc.Sprite.Type.SIMPLE?this.progressionNode.width=0:this.progressionNode.getComponent(cc.Sprite).type==cc.Sprite.Type.FILLED&&(this.progressionNode.getComponent(cc.Sprite).fillRange=0);for(var e=0;e<this.noOfQs;e++)if(e>0){var o=cc.instantiate(this.questionsNode[0]);o.parent=this.questionsNode[0].parent,o.name=this.questionsNode[0].name.substr(0,1)+(e+1).toString(),o.x=(this.bgEffectiveLength-(this.progressionNode.x+this.progressBarOffsetX))/this.noOfQs*(e+1)+this.offsePosx,e==this.noOfQs-1?(o.width=33,o.height=51):(o.width=30,o.height=46),this.questionsNode.push(o)}var i=0;this.questionsNode.forEach(function(e){t.useDifferentMilestoneIcons?e.getComponent(cc.Sprite).spriteFrame=t.spr_emptyMilestones[i]:e.getComponent(cc.Sprite).spriteFrame=t.spr_iconempty,i++})},e.prototype.UpdateProgressQuestionBar=function(t,e){var o=this,i=this.questionsNode[t-1].x+this.offseProgression;if(this.canvas&&this.audioManager.play("progressbarfill",this.aud_progressbarfill,!1,"SFX"),this.progressionNode.getComponent(cc.Sprite).type==cc.Sprite.Type.SIMPLE)cc.tween(this.progressionNode).to(1,{width:i},{easing:"sineOut"}).call(function(){o.canvas&&o.audioManager.play("highlighticon",o.aud_highlighticon,!1,"SFX"),e?(o.useDifferentMilestoneIcons?o.questionsNode[t-1].getComponent(cc.Sprite).spriteFrame=o.spr_filledMilestones[t-1]:o.questionsNode[t-1].getComponent(cc.Sprite).spriteFrame=o.spr_iconfilled,o.questionsNode[t-1].width=33,o.questionsNode[t-1].height=51):(o.questionsNode[t-1].width=30,o.questionsNode[t-1].height=46,o.questionsNode[t-1].getComponent(cc.Sprite).spriteFrame=o.spr_iconfilledAfterFirstAttempt)}).start();else if(this.progressionNode.getComponent(cc.Sprite).type==cc.Sprite.Type.FILLED){var n=i/this.progressionNode.width;cc.tween(this.progressionNode.getComponent(cc.Sprite)).to(1,{fillRange:n},{easing:"sineOut"}).call(function(){o.canvas&&o.audioManager.play("highlighticon",o.aud_highlighticon,!1,"SFX"),e?(o.useDifferentMilestoneIcons?o.questionsNode[t-1].getComponent(cc.Sprite).spriteFrame=o.spr_filledMilestones[t-1]:o.questionsNode[t-1].getComponent(cc.Sprite).spriteFrame=o.spr_iconfilled,o.questionsNode[t-1].width=33,o.questionsNode[t-1].height=51):(o.questionsNode[t-1].width=30,o.questionsNode[t-1].height=46,o.questionsNode[t-1].getComponent(cc.Sprite).spriteFrame=o.spr_iconfilledAfterFirstAttempt)}).start()}this.highlightNode.getComponent(cc.Sprite)&&this.highlightNode.runAction(cc.sequence(cc.fadeIn(.3),cc.fadeOut(.2)).repeat(4))},n([c(cc.Node)],e.prototype,"canvas",void 0),n([c(cc.SpriteFrame)],e.prototype,"spr_iconempty",void 0),n([c(cc.SpriteFrame)],e.prototype,"spr_iconfilled",void 0),n([c(cc.SpriteFrame)],e.prototype,"spr_iconfilledAfterFirstAttempt",void 0),n([c],e.prototype,"useDifferentMilestoneIcons",void 0),n([c(cc.SpriteFrame)],e.prototype,"spr_emptyMilestones",void 0),n([c(cc.SpriteFrame)],e.prototype,"spr_filledMilestones",void 0),n([c({type:cc.AudioClip})],e.prototype,"aud_progressbarfill",void 0),n([c({type:cc.AudioClip})],e.prototype,"aud_highlighticon",void 0),n([c],e.prototype,"noOfQs",void 0),n([c],e.prototype,"offsePosx",void 0),n([c],e.prototype,"offseProgression",void 0),n([c],e.prototype,"bgEffectiveLength",void 0),n([c],e.prototype,"progressBarOffsetX",void 0),e=n([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../../framework/scripts/AudioManager":"AudioManager"}],EXPL10SCI12E01_QuestionTypeOne:[function(t,e,o){"use strict";cc._RF.push(e,"cd3ee6WTapLQaX5KZzhThdA","EXPL10SCI12E01_QuestionTypeOne");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./EXPL10SCI12E01_BaseQuestion"),r=cc._decorator,a=r.ccclass,c=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.correctObject=null,e.wrongObject=null,e.optionSprites=[],e.positiveAnimations=[],e.negativeAnimations=[],e}return i(e,t),e.prototype.playPositiveFeedback=function(e){var o=this;t.prototype.playPositiveFeedback.call(this,e);var i=this.optionSprites.length>1?this.optionSprites[this.questionData.correctAnswerIndex]:this.optionSprites[0];this.animateOption(i,this.correctObject,function(){o.playAnimationsParallely(o.positiveAnimations),o.playLightBlinkAnim(e)})},e.prototype.playNegativeFeedback=function(e){var o=this;t.prototype.playNegativeFeedback.call(this,e);var i=this.optionSprites.length>1?this.optionSprites[this.questionData.wrongAnswerIndex]:this.optionSprites[0];this.animateOption(i,this.wrongObject,function(){var t=o.wrongObject.getChildByName("Highlight");t&&o.blinkNode(t,1,3,e),o.playAnimationsParallely(o.negativeAnimations)})},e.prototype.reset=function(){t.prototype.reset.call(this),this.correctObject.active=this.wrongObject.active=!1,this.positiveAnimations.forEach(function(t){return t.animNode.active=!1}),this.negativeAnimations.forEach(function(t){return t.animNode.active=!1}),this.optionSprites.forEach(function(t){return t.active=!0})},n([c(cc.Node)],e.prototype,"correctObject",void 0),n([c(cc.Node)],e.prototype,"wrongObject",void 0),n([c([cc.Node])],e.prototype,"optionSprites",void 0),n([c([s.EXPL10SCI12E01_FeedbackAnimation])],e.prototype,"positiveAnimations",void 0),n([c([s.EXPL10SCI12E01_FeedbackAnimation])],e.prototype,"negativeAnimations",void 0),e=n([a],e)}(s.default);o.default=p,cc._RF.pop()},{"./EXPL10SCI12E01_BaseQuestion":"EXPL10SCI12E01_BaseQuestion"}],EXPL10SCI12E01_QuestionTypeTwo:[function(t,e,o){"use strict";cc._RF.push(e,"ec671BB1FxEBqzEjQ1yMgCH","EXPL10SCI12E01_QuestionTypeTwo");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./EXPL10SCI12E01_BaseQuestion"),r=cc._decorator,a=r.ccclass,c=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.normalWire=null,e.fixedWire=null,e.brokenWire=null,e.negativeAnimations=[],e}return i(e,t),e.prototype.playPositiveFeedback=function(e){t.prototype.playPositiveFeedback.call(this,e),this.normalWire.active=!1,this.fixedWire.active=!0,this.playLightBlinkAnim(e)},e.prototype.playNegativeFeedback=function(e){t.prototype.playNegativeFeedback.call(this,e),this.normalWire.active=!1,this.brokenWire.active=!0,this.playAnimationsInSequence(this.negativeAnimations,e)},e.prototype.reset=function(){t.prototype.reset.call(this),this.normalWire.active=!0,this.fixedWire.active=this.brokenWire.active=!1,this.negativeAnimations.forEach(function(t){return t.animNode.active=!1})},n([c(cc.Node)],e.prototype,"normalWire",void 0),n([c(cc.Node)],e.prototype,"fixedWire",void 0),n([c(cc.Node)],e.prototype,"brokenWire",void 0),n([c([s.EXPL10SCI12E01_FeedbackAnimation])],e.prototype,"negativeAnimations",void 0),e=n([a],e)}(s.default);o.default=p,cc._RF.pop()},{"./EXPL10SCI12E01_BaseQuestion":"EXPL10SCI12E01_BaseQuestion"}],EXPL10SCI12E14_BaseQuestion:[function(t,e,o){"use strict";cc._RF.push(e,"6db03CMuOBJZ7rOS/xs13DS","EXPL10SCI12E14_BaseQuestion");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../Options/EXPL10SCI12E14_OptionsHandler"),r=cc._decorator,a=r.ccclass,c=r.property,p=function(){function t(){this.feedbackCSV=[]}return t.prototype.getFeedbackArray=function(t){var e=[];return this.feedbackCSV[t].split(",").forEach(function(t){return e.push(parseInt(t))}),e},n([c({type:[cc.String],tooltip:"Comma separated feedback index values "})],t.prototype,"feedbackCSV",void 0),t=n([a("EXPL10SCI12E14_QuestionData")],t)}();o.EXPL10SCI12E14_QuestionData=p;var l=function(){function t(){this.animNode=null,this.animName=" ",this.animRepeatCount=1,this.audioClip=null,this.disableAfterAnim=!0}return t.prototype.stopAnimation=function(){var t=this.animNode.getComponent(cc.Animation);t&&(t.stop(this.animName),t.setCurrentTime(0,this.animName))},t.prototype.reset=function(){null!=this.animNode&&(this.stopAnimation(),this.animNode.active=!1)},n([c(cc.Node)],t.prototype,"animNode",void 0),n([c(cc.String)],t.prototype,"animName",void 0),n([c()],t.prototype,"animRepeatCount",void 0),n([c({type:cc.AudioClip})],t.prototype,"audioClip",void 0),n([c(cc.Boolean)],t.prototype,"disableAfterAnim",void 0),t=n([a("EXPL10SCI12E14_Animation")],t)}();o.EXPL10SCI12E14_Animation=l;var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.questionData=null,e.optionsHandler=null,e.gameManager=null,e.audioManager=null,e.antenna=null,e.antennaPos=null,e.selectedOption=0,e.isCorrect=!1,e.isFeedbackCompleted=!1,e.failedFirstAttempt=!1,e}return i(e,t),e.prototype.onLoad=function(){var t=this.node.getChildByName("InteractionPanel");this.optionsHandler=t.getComponent(s.default),this.antenna=t.getChildByName("Antenna"),this.antennaPos=this.antenna.getPosition(),this.optionsHandler.node.on("OnSubmit",this.onSubmit,this)},e.prototype.setGameManager=function(t,e){this.gameManager=t,this.audioManager=e},e.prototype.show=function(t,e,o){this.optionsHandler.setOptions(t,e,o),this.optionsHandler.show()},e.prototype.onSubmit=function(t,e){this.selectedOption=t,this.isCorrect=e,e?this.playCorrectFeedback():this.playWrongFeedback()},e.prototype.playCorrectFeedback=function(){},e.prototype.playWrongFeedback=function(){},e.prototype.reset=function(){this.isFeedbackCompleted=!1,this.selectedOption=0,this.isCorrect=!1,this.optionsHandler.reset(),this.resetAnim(this.antenna,"AntennaCF"),this.resetAnim(this.antenna,"AntennaWF"),this.antenna.setPosition(this.antennaPos)},e.prototype.blinkNode=function(t,e,o,i){void 0===e&&(e=1),void 0===o&&(o=1),t.active=!0;var n=cc.tween().to(e/2,{opacity:0}),s=cc.tween().to(e/2,{opacity:255});-1!=o?cc.tween(t).sequence(n,s).repeat(o).call(i).start():cc.tween(t).sequence(n,s).repeatForever().start()},e.prototype.playAnimation=function(t,e,o,i,n){if(void 0===i&&(i=1),void 0===n&&(n=!1),null==t)return 0;t.active=!0;var s=t.getComponent(cc.Animation).play(e);if(this.playAudio(o),s.wrapMode==cc.WrapMode.Loop)return 0;s.repeatCount=i;var r=s.duration/s.speed*i;return n&&this.scheduleOnce(function(){return t.active=!1},r),r},e.prototype.playFeedbackAnimation=function(t){return this.playAnimation(t.animNode,t.animName,t.audioClip,t.animRepeatCount,t.disableAfterAnim)},e.prototype.playAnimationsInSequence=function(t,e){var o=this;if(!(t.length<=0)){var i=function(n,s){var r=o.playAnimation(s.animNode,s.animName,s.audioClip,s.animRepeatCount,s.disableAfterAnim),a=n+1;a>=t.length?o.scheduleOnce(e,r):o.scheduleOnce(function(){s.audioClip&&o.audioManager.stop(s.audioClip.name),i(a,t[a])},r)};i(0,t[0])}},e.prototype.playAnimationsParallely=function(t){if(!(t.length<=0))for(var e=0,o=t;e<o.length;e++){var i=o[e];this.playAnimation(i.animNode,i.animName,i.audioClip,i.animRepeatCount,i.disableAfterAnim)}},e.prototype.playAudio=function(t){t&&this.audioManager.play(t.name,t,!1,"SFX")},e.prototype.setActive=function(t,e,o){if(null!=t){if(e){t.opacity=0;var i=255}else{t.opacity=255;i=0}t.active=!0,cc.tween(t).to(1,{opacity:i},{easing:"cubicOut"}).call(function(){e||(t.active=!1),o&&o()}).start()}},e.prototype.moveNode=function(t,e,o,i,n){null!=t&&(t.setPosition(e),cc.tween(t).to(i,{position:o},{easing:"smooth"}).call(n).start())},e.prototype.scaleNode=function(t,e,o,i){null!=t&&cc.tween(t).to(o,{scale:e},{easing:"cubicOut"}).delay(1).call(i).start()},e.prototype.resetAnim=function(t,e){var o=t.getComponent(cc.Animation);null!=o&&(o.stop(e),o.setCurrentTime(0,e))},e.prototype.playCFAntenna=function(t){var e=this.playAnimation(this.antenna,"AntennaCF");t&&this.scheduleOnce(t,e)},e.prototype.playWFAntenna=function(t){var e=this,o=this.playAnimation(this.antenna,"AntennaWF");this.scheduleOnce(function(){cc.tween(e.antenna).to(.5,{position:e.antenna.getPosition().sub(cc.v2(0,100))},{easing:"smooth"}).call(t).start()},o+.1)},e.prototype.onDestroy=function(){this.optionsHandler.node.off("OnSubmit",this.onSubmit,this)},n([c(p)],e.prototype,"questionData",void 0),e=n([a],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../Options/EXPL10SCI12E14_OptionsHandler":"EXPL10SCI12E14_OptionsHandler"}],EXPL10SCI12E14_ElectricCurrentAndHeating:[function(t,e,o){"use strict";cc._RF.push(e,"04e7bxThzJNfpCrFpSUzYvH","EXPL10SCI12E14_ElectricCurrentAndHeating");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/AudioManager"),r=t("../../../../framework/scripts/AnalyticsManager"),a=t("../../../../framework/scripts/StepsController"),c=t("../../../../framework/scripts/UIManager"),p=t("./Questions/EXPL10SCI12E14_BaseQuestion"),l=t("../../../../framework/prefab/template5/Template5_Tutorial"),h=cc._decorator,d=h.ccclass,u=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.tutorialManager=null,e.gamePanels=[],e.backgroundMusic=null,e.ambientMusic=null,e.transitionAudio=null,e.questions=[],e.isTutorialShown=!1,e.currentGamePanelIndex=0,e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.scr_stepsController=this.canvas.getComponent(a.default),this.uiManager=this.canvas.getComponent(c.default),this.audioManager=this.canvas.getComponent(s.default),this.scr_analyticsManager=this.canvas.getComponent(r.default),this.canvas.on("OnLoadStep",this.stepsHandler.bind(this)),this.canvas.on("OnCommonButtonClick",this.onCommonButtonClick.bind(this)),this.canvas.on("OnFeedbackPlayComplete",this.onFeedbackPlayComplete.bind(this)),this.tutorialManager.node.on("onTutorialStop",function(){return t.showQuestion(!1)},this);for(var e=1;e<this.gamePanels.length-1;e++)this.questions[e]=this.gamePanels[e].getComponent(p.default),this.questions[e].setGameManager(this,this.audioManager);this.gamePanels.forEach(function(t){return t.active=!1})},e.prototype.start=function(){this.scr_stepsController.Initialise("EXPL10SCI12E14_ElectricCurrentAndHeating"),this.audioManager.play("bgm",this.backgroundMusic,!0,"BGM"),this.audioManager.play("ambience",this.ambientMusic,!0,"BGM")},e.prototype.showNextGamePanel=function(){if(!(this.currentGamePanelIndex+1>=this.gamePanels.length)){this.gamePanels[this.currentGamePanelIndex].active=!1,this.currentGamePanelIndex+=1;var t=this.gamePanels[this.currentGamePanelIndex];return t.active=!0,t}},e.prototype.stepsHandler=function(t){switch(console.log("Steps handler. Next step is "+t),t){case 0:this.gamePanels[this.currentGamePanelIndex].active=!0;case 1:case 2:var e=this.gamePanels[0].getChildByName("IntroPanel_"+t);this.playIntroAnim(e);break;case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:this.showNextGamePanel(),this.showQuestion();break;case 11:this.showOutroPanel()}this.playTransitionAudio()},e.prototype.showOutroPanel=function(){this.canvas.emit("OnEndScreenReach",{}),this.uiManager.setActiveCloseButton(!1),this.uiManager.setHeaderYpos(),this.showNextGamePanel()},e.prototype.onCommonButtonClick=function(t){this.uiManager.CommonButtonType.NextQuestion==t?(this.scr_analyticsManager.sendNextQuestionStart(this.scr_stepsController.getCurrentQuestionIndex(),!1,this.scr_analyticsManager.Phylum.Click),this.scr_stepsController.loadNextStep()):this.uiManager.CommonButtonType.TryAgain==t&&(this.scr_analyticsManager.sendOnTryAgain(this.scr_stepsController.getCurrentQuestionIndex(),this.currentQuestion.selectedOption+1),this.currentQuestion.failedFirstAttempt=!0,this.currentQuestion.reset(),this.uiManager.showHeaderText(this.scr_stepsController.getCurrentStepJson().question.text))},e.prototype.onFeedbackPlayComplete=function(t){this.currentQuestion.isFeedbackCompleted&&(this.currentQuestion.isCorrect?this.uiManager.setActiveNextButton(!0):this.uiManager.setActiveTryAgainButton(!0))},e.prototype.playIntroAnim=function(t){null!=t&&cc.tween(t).to(1,{position:{value:cc.Vec2.ZERO,easing:"cubicOut"}}).start()},e.prototype.playTransitionAudio=function(){var t=this;this.transitionAudio&&this.scheduleOnce(function(){t.audioManager.play("transitionAudio",t.transitionAudio,!1,"SFX")},2)},e.prototype.showQuestion=function(t){var e=this;void 0===t&&(t=!0);var o=function(){if(!e.checkAndShowTutorial()){var t=e.scr_stepsController.getCurrentStepJson().userInput,o=e.scr_stepsController.getCurrentStepJson().result,i=e.scr_stepsController.getCurrentStepJson().answer;e.currentQuestion.show(t,o,i)}};if(t){var i=this.scr_stepsController.getCurrentStepJson().duration;this.scheduleOnce(o,i)}else o()},e.prototype.checkAndShowTutorial=function(){return!this.isTutorialShown&&(this.tutorialManager.node.active=!0,this.tutorialManager.show(),this.isTutorialShown=!0,!0)},e.prototype.showFeedback=function(t,e){void 0===e&&(e=!1),this.scr_stepsController.playFeedback(t,this.currentQuestion.isCorrect,e);for(var o=0,i=0,n=t;i<n.length;i++){var s=n[i];o+=this.scr_stepsController.getCurrentStepJson().feedBack[s].duration}return o},e.prototype.getFeedbackIntervals=function(t){var e=this.scr_stepsController.getCurrentStepJson().feedBack[t];if(e.hasOwnProperty("intervals"))return e.intervals},Object.defineProperty(e.prototype,"currentQuestion",{get:function(){var t=this.scr_stepsController.getCurrentQuestionIndex();return this.questions[t]},enumerable:!0,configurable:!0}),n([u(cc.Node)],e.prototype,"canvas",void 0),n([u(l.default)],e.prototype,"tutorialManager",void 0),n([u([cc.Node])],e.prototype,"gamePanels",void 0),n([u({type:cc.AudioClip})],e.prototype,"backgroundMusic",void 0),n([u({type:cc.AudioClip})],e.prototype,"ambientMusic",void 0),n([u({type:cc.AudioClip})],e.prototype,"transitionAudio",void 0),e=n([d],e)}(cc.Component);o.default=g,cc._RF.pop()},{"../../../../framework/prefab/template5/Template5_Tutorial":"Template5_Tutorial","../../../../framework/scripts/AnalyticsManager":"AnalyticsManager","../../../../framework/scripts/AudioManager":"AudioManager","../../../../framework/scripts/StepsController":"StepsController","../../../../framework/scripts/UIManager":"UIManager","./Questions/EXPL10SCI12E14_BaseQuestion":"EXPL10SCI12E14_BaseQuestion"}],EXPL10SCI12E14_OptionDrag:[function(t,e,o){"use strict";cc._RF.push(e,"b703bgql9FGzbbvv8Rhk7kf","EXPL10SCI12E14_OptionDrag");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.optionLabel=null,e.initialPos=null,e.initialParent=null,e}var o;return i(e,t),o=e,Object.defineProperty(e.prototype,"optionString",{get:function(){return this.optionLabel.string},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){this.optionLabel=this.node.getChildByName("Label").getComponent(cc.Label),this.initialParent=this.node.parent,this.initialPos=this.node.getPosition()},e.prototype.setData=function(t){this.optionLabel.string=t,this.subscribeTouchEvents()},e.prototype.onTouchStarted=function(t){this.isMultiTouch(t)||(o.currentTouchId=t.getID(),this.node.emit("posttouchstart",t,this),this.touchOffset=this.getLocalPos(t.getLocation()).sub(this.node.getPosition()))},e.prototype.onTouchMoved=function(t){if(!this.isMultiTouch(t)){var e=this.getLocalPos(t.getLocation()).sub(this.touchOffset);this.node.setPosition(e)}},e.prototype.onTouchEnd=function(t){this.isMultiTouch(t)||(o.currentTouchId=0,this.node.emit("posttouchend",t,this))},e.prototype.drop=function(t){this.node.setParent(t),this.node.setPosition(cc.Vec2.ZERO),this.unsubscribeTouchEvents()},e.prototype.getLocalPos=function(t){return this.node.parent.convertToNodeSpaceAR(t)},e.prototype.getWorldPos=function(t){return this.node.parent.convertToWorldSpaceAR(t)},e.prototype.isMultiTouch=function(t){return 0!=o.currentTouchId&&t.getID()!=o.currentTouchId},e.prototype.resetPosition=function(){var t=this,e=this.initialParent.convertToWorldSpaceAR(this.initialPos),o=this.getLocalPos(e);this.unsubscribeTouchEvents(),cc.tween(this.node).to(.5,{position:o},{easing:"cubicOut"}).call(function(){t.node.setParent(t.initialParent),t.node.setPosition(t.initialPos),t.subscribeTouchEvents()}).start()},e.prototype.reset=function(){this.unsubscribeTouchEvents(),this.subscribeTouchEvents(),this.node.setParent(this.initialParent),this.node.setPosition(this.initialPos)},e.prototype.subscribeTouchEvents=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStarted,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoved,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e.prototype.unsubscribeTouchEvents=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStarted,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoved,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e.prototype.onDestroy=function(){this.unsubscribeTouchEvents()},e.currentTouchId=0,e=o=n([r],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],EXPL10SCI12E14_OptionsHandler:[function(t,e,o){"use strict";cc._RF.push(e,"3d4feB8V2lPlILBF6VY5Q36","EXPL10SCI12E14_OptionsHandler");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../../framework/scripts/AudioManager"),r=t("./EXPL10SCI12E14_OptionDrag"),a=t("./EXPL10SCI12E14_Placeholder"),c=cc._decorator,p=c.ccclass,l=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.optionHolders=[],e.placeHolders=[],e.snapRange=100,e.topRenderedNode=null,e.showOptionsSfx=null,e.hideOptionsSfx=null,e.dragStartSfx=null,e.optionPlacedSfx=null,e.correctFeedbackSfx=null,e.wrongFeedbackSfx=null,e.audioManager=null,e.correctOption=0,e.matchedHoldersCount=0,e}return i(e,t),e.prototype.onLoad=function(){this.audioManager=cc.find("CommonCanvas").getComponent(s.default)},e.prototype.show=function(){255!=this.node.opacity&&(cc.tween(this.node).to(1,{opacity:255},{easing:"cubicOut"}).start(),this.showOptionsSfx&&this.audioManager.play("showOptionsSfx",this.showOptionsSfx,!1,"SFX"))},e.prototype.hide=function(){0!=this.node.opacity&&(cc.tween(this.node).to(1,{opacity:0},{easing:"cubicOut"}).start(),this.hideOptionsSfx&&this.audioManager.play("hideOptionsSfx",this.hideOptionsSfx,!1,"SFX"))},e.prototype.setOptions=function(t,e,o){this.resultOptions=e,this.correctAnswers=o,this.correctOption=this.resultOptions.indexOf(o[0]);for(var i=0;i<this.optionHolders.length;i++){var n=this.optionHolders[i];n.setData(t[i]),n.node.on("posttouchstart",this.onTouchStart,this),n.node.on("posttouchend",this.onTouchEnd,this)}},e.prototype.onTouchStart=function(t,e){var o=this.getLocalPosition(e.node.getPosition(),e.node.parent,this.topRenderedNode);e.node.setParent(this.topRenderedNode),e.node.setPosition(o),this.dragStartSfx&&this.audioManager.play("dragStartSfx",this.dragStartSfx,!1,"SFX")},e.prototype.onTouchEnd=function(t,e){for(var o=Number.POSITIVE_INFINITY,i=null,n=0,s=this.placeHolders;n<s.length;n++){var r=s[n],a=this.getLocalPosition(r.node.getPosition(),r.node.parent),c=this.getLocalPosition(e.node.getPosition(),e.node.parent),p=cc.Vec2.distance(c,a);p<o&&(o=p,i=r)}o<this.snapRange&&!i.isOccupied?(e.drop(i.node),i.snapItem(e.optionString),this.optionPlacedSfx&&this.audioManager.play("optionPlacedSfx",this.optionPlacedSfx,!1,"SFX"),this.matchedHoldersCount+=1,this.matchedHoldersCount>=this.placeHolders.length&&this.submit()):e.resetPosition()},e.prototype.reset=function(){this.optionHolders.forEach(function(t){return t.reset()}),this.placeHolders.forEach(function(t){return t.reset()}),this.matchedHoldersCount=0},e.prototype.submit=function(){for(var t=this,e="",o=0,i=this.placeHolders;o<i.length;o++){e+=i[o].optionString}var n=this.resultOptions.indexOf(e);-1==n&&(n=this.correctAnswers.includes(e)?this.correctOption:1);var s=n==this.correctOption;this.optionHolders.forEach(function(t){return t.unsubscribeTouchEvents()}),this.scheduleOnce(function(){s?t.correctFeedbackSfx&&t.audioManager.play("correctFeedbackSfx",t.correctFeedbackSfx,!1,"SFX"):t.wrongFeedbackSfx&&t.audioManager.play("wrongFeedbackSfx",t.wrongFeedbackSfx,!1,"SFX"),t.node.emit("OnSubmit",n,s)},1)},e.prototype.getLocalPosition=function(t,e,o){void 0===o&&(o=null),null==o&&(o=this.node);var i=e.convertToWorldSpaceAR(t);return o.convertToNodeSpaceAR(i)},e.prototype.onDestroy=function(){for(var t=0,e=this.optionHolders;t<e.length;t++){var o=e[t];o.node.off("posttouchstart",this.onTouchStart,this),o.node.off("posttouchend",this.onTouchEnd,this)}},n([l(r.default)],e.prototype,"optionHolders",void 0),n([l([a.default])],e.prototype,"placeHolders",void 0),n([l({slide:!0,range:[0,150]})],e.prototype,"snapRange",void 0),n([l(cc.Node)],e.prototype,"topRenderedNode",void 0),n([l({type:cc.AudioClip})],e.prototype,"showOptionsSfx",void 0),n([l({type:cc.AudioClip})],e.prototype,"hideOptionsSfx",void 0),n([l({type:cc.AudioClip})],e.prototype,"dragStartSfx",void 0),n([l({type:cc.AudioClip})],e.prototype,"optionPlacedSfx",void 0),n([l({type:cc.AudioClip})],e.prototype,"correctFeedbackSfx",void 0),n([l({type:cc.AudioClip})],e.prototype,"wrongFeedbackSfx",void 0),e=n([p],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../../../framework/scripts/AudioManager":"AudioManager","./EXPL10SCI12E14_OptionDrag":"EXPL10SCI12E14_OptionDrag","./EXPL10SCI12E14_Placeholder":"EXPL10SCI12E14_Placeholder"}],EXPL10SCI12E14_Placeholder:[function(t,e,o){"use strict";cc._RF.push(e,"9d561g1a5pEL5n0aaXBQwS8","EXPL10SCI12E14_Placeholder");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._optionString="",e._isOccupied=!1,e}return i(e,t),Object.defineProperty(e.prototype,"isOccupied",{get:function(){return this._isOccupied},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"optionString",{get:function(){return this._optionString},enumerable:!0,configurable:!0}),e.prototype.snapItem=function(t){this._isOccupied=!0,this._optionString=t},e.prototype.reset=function(){this._isOccupied=!1,this._optionString=""},e=n([r],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],EXPL10SCI12E14_QuestionTypeOne:[function(t,e,o){"use strict";cc._RF.push(e,"a357djVhoBPbJ4HHTaLfIIE","EXPL10SCI12E14_QuestionTypeOne");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./EXPL10SCI12E14_BaseQuestion"),r=cc._decorator,a=r.ccclass,c=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.greenHighlights=null,e.redHighlights=null,e.formulaLabel=null,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.optionsHandler.node.opacity=0;var e=this.optionsHandler.node.getChildByName("InteractionPanelBG");this.greenHighlights=e.getChildByName("GreenHighlights"),this.redHighlights=e.getChildByName("RedHighlights"),this.formulaLabel=e.getChildByName("NoteBox").getChildByName("FormulaLabel")},e.prototype.playCorrectFeedback=function(){var e=this;t.prototype.playCorrectFeedback.call(this),this.blinkNode(this.greenHighlights,1,3),this.playCFAntenna(),this.isFeedbackCompleted=!0;var o=this.questionData.getFeedbackArray(this.selectedOption);this.gameManager.showFeedback(o);var i=this.gameManager.getFeedbackIntervals(o[0]);void 0!=i&&(this.scheduleOnce(function(){return e.firstIntervalCF(e.node.name)},i[0]),this.scheduleOnce(function(){e.setActive(e.formulaLabel,!0,function(){e.blinkNode(e.formulaLabel,1,3)})},i[1]))},e.prototype.playWrongFeedback=function(){var e=this;t.prototype.playWrongFeedback.call(this),this.blinkNode(this.redHighlights,1,3),this.playWFAntenna(),this.isFeedbackCompleted=!0;var o=this.questionData.getFeedbackArray(this.selectedOption);this.gameManager.showFeedback(o);var i=this.gameManager.getFeedbackIntervals(o[0]);void 0!=i&&this.scheduleOnce(function(){return e.firstIntervalWF(e.node.name)},i[0])},e.prototype.firstIntervalCF=function(t){switch(t){case"Q1":var e=this.node.getChildByName("LabelUIHead");this.blinkNode(e,1,3)}},e.prototype.firstIntervalWF=function(t){switch(t){case"Q1":var e=this.node.getChildByName("LabelUIHead");break;case"Q3":e=this.node.getChildByName("Voltage&CurrentLabel");break;case"Q5":e=this.node.getChildByName("Current&ResistanceLabel");break;case"Q7":e=this.node.getChildByName("Voltage&ResistanceLabel")}this.blinkNode(e,1,3)},e.prototype.reset=function(){t.prototype.reset.call(this),this.greenHighlights.active=!1,this.redHighlights.active=!1},e=n([a],e)}(s.default));o.default=c,cc._RF.pop()},{"./EXPL10SCI12E14_BaseQuestion":"EXPL10SCI12E14_BaseQuestion"}],EXPL10SCI12E14_QuestionTypeTwo:[function(t,e,o){"use strict";cc._RF.push(e,"99ebd6rzKxCJ7A2wzdC21Vk","EXPL10SCI12E14_QuestionTypeTwo");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./EXPL10SCI12E14_BaseQuestion"),r=cc._decorator,a=r.ccclass,c=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.greenHighlights=null,e.greenBoxHighlight=null,e.redHighlights=null,e.formulaLabel=null,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this);var e=this.optionsHandler.node.getChildByName("InteractionPanelBG");this.greenHighlights=e.getChildByName("GreenHighlights"),this.greenBoxHighlight=e.getChildByName("GreenBoxHighlight"),this.redHighlights=e.getChildByName("RedHighlights"),this.formulaLabel=e.getChildByName("NoteBox").getChildByName("FormulaLabel")},e.prototype.playCorrectFeedback=function(){var e=this;t.prototype.playCorrectFeedback.call(this),this.blinkNode(this.greenHighlights,1,3),this.playCFAntenna(),this.isFeedbackCompleted=!0;var o=this.questionData.getFeedbackArray(this.selectedOption);this.gameManager.showFeedback(o);var i=this.gameManager.getFeedbackIntervals(o[0]);void 0!=i&&this.scheduleOnce(function(){e.blinkNode(e.greenBoxHighlight,1,3)},i[0])},e.prototype.playWrongFeedback=function(){var e=this;t.prototype.playWrongFeedback.call(this),this.blinkNode(this.redHighlights,1,3),this.playWFAntenna(),this.isFeedbackCompleted=!0;var o=this.questionData.getFeedbackArray(this.selectedOption);this.gameManager.showFeedback(o);var i=this.gameManager.getFeedbackIntervals(o[0]);void 0!=i&&this.scheduleOnce(function(){e.setActive(e.formulaLabel,!0,function(){e.blinkNode(e.formulaLabel,1,3)})},i[0])},e.prototype.reset=function(){t.prototype.reset.call(this),this.greenBoxHighlight.active=!1,this.greenHighlights.active=!1,this.redHighlights.active=!1},e=n([a],e)}(s.default));o.default=c,cc._RF.pop()},{"./EXPL10SCI12E14_BaseQuestion":"EXPL10SCI12E14_BaseQuestion"}],EXPL10SCI14E06_BaseQuestion:[function(t,e,o){"use strict";cc._RF.push(e,"78047mYPx5CV7TSZiBwjKRL","EXPL10SCI14E06_BaseQuestion");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=s.property,c=function(){function t(){this.optionKeys=[],this.correctAnswerIndex=1}return Object.defineProperty(t.prototype,"wrongAnswerIndex",{get:function(){return 0==this.correctAnswerIndex?1:0},enumerable:!0,configurable:!0}),t.prototype.hasText=function(){return this.optionKeys.length>0},n([a({type:cc.String})],t.prototype,"optionKeys",void 0),n([a(cc.Integer)],t.prototype,"correctAnswerIndex",void 0),t=n([r("EXPL10SCI14E06_QuestionData")],t)}();o.EXPL10SCI14E06_QuestionData=c;var p=function(){function t(){this.animNode=null,this.animName=" ",this.animRepeatCount=1,this.audioClip=null,this.disableAfterAnim=!0}return t.prototype.reset=function(){var t=this.animNode.getComponent(cc.Animation);t&&(t.stop(this.animName),t.setCurrentTime(0,this.animName)),this.animNode.active=!1},n([a(cc.Node)],t.prototype,"animNode",void 0),n([a(cc.String)],t.prototype,"animName",void 0),n([a()],t.prototype,"animRepeatCount",void 0),n([a({type:cc.AudioClip})],t.prototype,"audioClip",void 0),n([a(cc.Boolean)],t.prototype,"disableAfterAnim",void 0),t=n([r("EXPL10SCI14E06_FeedbackAnimation")],t)}();o.EXPL10SCI14E06_FeedbackAnimation=p;var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.questionData=null,e.audioManager=null,e.failedFirstAttempt=!1,e}return i(e,t),e.prototype.start=function(){this.reset()},e.prototype.setAudioManager=function(t){this.audioManager=t},e.prototype.playPositiveFeedback=function(t){},e.prototype.playNegativeFeedback=function(t){},e.prototype.reset=function(){},e.prototype.blinkNode=function(t,e,o,i){void 0===e&&(e=1),void 0===o&&(o=1),t.active=!0;var n=cc.tween().to(e/2,{opacity:0}),s=cc.tween().to(e/2,{opacity:255});-1!=o?cc.tween(t).sequence(n,s).repeat(o).call(i).start():cc.tween(t).sequence(n,s).repeatForever().start()},e.prototype.playAnimation=function(t,e,o,i,n){void 0===i&&(i=1),void 0===n&&(n=!0),t.active=!0;var s=t.getComponent(cc.Animation).play(e);if(this.playAnimAudio(o),s.wrapMode==cc.WrapMode.Loop)return 0;s.repeatCount=i;var r=s.duration*i;return n&&this.scheduleOnce(function(){return t.active=!1},r),r},e.prototype.playFeedbackAnimation=function(t){return this.playAnimation(t.animNode,t.animName,t.audioClip,t.animRepeatCount,t.disableAfterAnim)},e.prototype.playAnimationsInSequence=function(t,e){var o=this;if(!(t.length<=0)){var i=function(n,s){var r=o.playAnimation(s.animNode,s.animName,s.audioClip,s.animRepeatCount,s.disableAfterAnim),a=n+1;a>=t.length?o.scheduleOnce(e,r):o.scheduleOnce(function(){s.audioClip&&o.audioManager.stop(s.audioClip.name),i(a,t[a])},r)};i(0,t[0])}},e.prototype.playAnimationsParallely=function(t){if(!(t.length<=0))for(var e=0,o=t;e<o.length;e++){var i=o[e];this.playAnimation(i.animNode,i.animName,i.audioClip,i.animRepeatCount,i.disableAfterAnim)}},e.prototype.playAnimAudio=function(t){t&&this.audioManager.play(t.name,t,!1,"SFX")},e.prototype.setActive=function(t,e,o){if(e){t.opacity=0;var i=255}else{t.opacity=255;i=0}t.active=!0,cc.tween(t).to(1,{opacity:i},{easing:"cubicOut"}).call(function(){e||(t.active=!1),o&&o()}).start()},n([a(c)],e.prototype,"questionData",void 0),e=n([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],EXPL10SCI14E06_NuclearPowerPlant:[function(t,e,o){"use strict";cc._RF.push(e,"09219kYRYBHBKK6/6JX0JbQ","EXPL10SCI14E06_NuclearPowerPlant");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/AudioManager"),r=t("../../../../framework/scripts/AnalyticsManager"),a=t("../../../../framework/scripts/StepsController"),c=t("../../../../framework/scripts/UIManager"),p=t("../../../../framework/prefab/template3/Template3_OptionHandler"),l=t("../../../../framework/prefab/template3/Template3_Tutorial"),h=t("./EXPL10SCI14E06_BaseQuestion"),d=cc._decorator,u=d.ccclass,g=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.optionsHandler=null,e.tutorialManager=null,e.gamePanels=[],e.optionHighlights=[],e.backgroundMusic=null,e.ambientMusic=null,e.correctFeedback=null,e.wrongFeedback=null,e.transitionAudio=null,e.questions=[],e.isTutorialShown=!1,e.currentGamePanelIndex=0,e.isCorrect=!1,e.selectedOptionIndex=0,e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.scr_stepsController=this.canvas.getComponent(a.default),this.uiManager=this.canvas.getComponent(c.default),this.audioManager=this.canvas.getComponent(s.default),this.scr_analyticsManager=this.canvas.getComponent(r.default),this.canvas.on("OnLoadStep",this.stepsHandler.bind(this)),this.canvas.on("OnCommonButtonClick",this.onCommonButtonClick.bind(this)),this.canvas.on("OnFeedbackPlayComplete",this.onFeedbackPlayComplete.bind(this)),this.tutorialManager.node.on("onTutorialStop",function(){return t.showQuestion(!0)},this),this.optionsHandler.node.on("onSubmit",this.onSubmit,this);for(var e=1;e<this.gamePanels.length-1;e++)this.questions[e]=this.gamePanels[e].getComponent(h.default),this.questions[e].setAudioManager(this.audioManager);this.gamePanels.forEach(function(t){return t.active=!1})},e.prototype.start=function(){this.scr_stepsController.Initialise("EXPL10SCI14E06_NuclearPowerPlant"),this.audioManager.play("bgm",this.backgroundMusic,!0,"BGM"),this.audioManager.play("ambience",this.ambientMusic,!0,"BGM")},e.prototype.activateNextGamePanel=function(){if(!(this.currentGamePanelIndex+1>=this.gamePanels.length)){this.gamePanels[this.currentGamePanelIndex].active=!1,this.currentGamePanelIndex+=1;var t=this.gamePanels[this.currentGamePanelIndex];return t.active=!0,t}},e.prototype.stepsHandler=function(t){switch(console.log("Steps handler. Next step is "+t),t){case 0:this.gamePanels[this.currentGamePanelIndex].active=!0;case 1:case 2:var e=this.gamePanels[0].getChildByName("IntroPanel_"+t);this.playIntroAnim(e);break;case 3:case 5:case 7:case 9:case 11:this.activateNextGamePanel();break;case 13:this.showOutroPanel();break;case 14:break;default:this.showQuestion()}this.playTransitionAudio()},e.prototype.showOutroPanel=function(){this.canvas.emit("OnEndScreenReach",{}),this.uiManager.setActiveCloseButton(!1),this.uiManager.setHeaderYpos(),this.activateNextGamePanel()},e.prototype.onCommonButtonClick=function(t){this.uiManager.CommonButtonType.NextQuestion==t?(this.scr_analyticsManager.sendNextQuestionStart(this.scr_stepsController.getCurrentQuestionIndex(),!1,this.scr_analyticsManager.Phylum.Click),this.scr_stepsController.loadNextStep()):this.uiManager.CommonButtonType.TryAgain==t&&(this.scr_analyticsManager.sendOnTryAgain(this.scr_stepsController.getCurrentQuestionIndex(),this.selectedOptionIndex+1),this.getCurrentQuestion().failedFirstAttempt=!0,this.showQuestion(!0))},e.prototype.onFeedbackPlayComplete=function(t){this.isCorrect?this.uiManager.setActiveNextButton(!0):this.uiManager.setActiveTryAgainButton(!0)},e.prototype.playIntroAnim=function(t){null!=t&&cc.tween(t).to(1,{position:{value:cc.Vec2.ZERO,easing:"smooth"}}).start()},e.prototype.playTransitionAudio=function(){var t=this;this.transitionAudio&&this.scheduleOnce(function(){t.audioManager.play("transitionAudio",t.transitionAudio,!1,"SFX")},2)},e.prototype.showQuestion=function(t){var e=this;void 0===t&&(t=!1);var o=this.scr_stepsController.getCurrentQuestionIndex(),i=this.questions[o].questionData,n=function(){e.checkAndShowTutorial()||e.optionsHandler.show(i.correctAnswerIndex,i.optionKeys,"submit")};if(t)this.questions[o].reset(),n();else{var s=this.scr_stepsController.getCurrentStepJson().duration;this.scheduleOnce(n,s)}},e.prototype.checkAndShowTutorial=function(){return!this.isTutorialShown&&(this.tutorialManager.node.active=!0,this.tutorialManager.show(),this.isTutorialShown=!0,!0)},e.prototype.onSubmit=function(t,e){var o=this;this.selectedOptionIndex=t,this.isCorrect=e;var i=this.scr_stepsController.getCurrentQuestionIndex(),n=this.questions[i],s=function(){o.optionsHandler.hide(),o.scheduleOnce(o.showFeedback,1)};e?(this.audioManager.play("correcFeedback",this.correctFeedback,!1,"SFX"),n.playPositiveFeedback(s)):(this.audioManager.play("wrongFeedback",this.wrongFeedback,!1,"SFX"),n.playNegativeFeedback(s))},e.prototype.showFeedback=function(){var t=this.scr_stepsController.getCurrentQuestionIndex(),e=this.isCorrect?[0]:4==t?[1,2]:[1];this.scr_stepsController.playFeedback(e,this.isCorrect,!1)},e.prototype.getCurrentQuestion=function(){var t=this.scr_stepsController.getCurrentQuestionIndex();return this.questions[t]},e.prototype.blinkOptionHighlight=function(t){var e=cc.tween().to(.5,{opacity:0}),o=cc.tween().to(.5,{opacity:255});cc.tween(this.optionHighlights[t]).sequence(e,o).repeat(3).start()},n([g(cc.Node)],e.prototype,"canvas",void 0),n([g(p.default)],e.prototype,"optionsHandler",void 0),n([g(l.default)],e.prototype,"tutorialManager",void 0),n([g([cc.Node])],e.prototype,"gamePanels",void 0),n([g([cc.Node])],e.prototype,"optionHighlights",void 0),n([g({type:cc.AudioClip})],e.prototype,"backgroundMusic",void 0),n([g({type:cc.AudioClip})],e.prototype,"ambientMusic",void 0),n([g({type:cc.AudioClip})],e.prototype,"correctFeedback",void 0),n([g({type:cc.AudioClip})],e.prototype,"wrongFeedback",void 0),n([g({type:cc.AudioClip})],e.prototype,"transitionAudio",void 0),e=n([u],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../../../../framework/prefab/template3/Template3_OptionHandler":"Template3_OptionHandler","../../../../framework/prefab/template3/Template3_Tutorial":"Template3_Tutorial","../../../../framework/scripts/AnalyticsManager":"AnalyticsManager","../../../../framework/scripts/AudioManager":"AudioManager","../../../../framework/scripts/StepsController":"StepsController","../../../../framework/scripts/UIManager":"UIManager","./EXPL10SCI14E06_BaseQuestion":"EXPL10SCI14E06_BaseQuestion"}],EXPL10SCI14E06_QuestionTypeFour:[function(t,e,o){"use strict";cc._RF.push(e,"5cf690rRfFAQ6iWa9t4IPKB","EXPL10SCI14E06_QuestionTypeFour");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./EXPL10SCI14E06_BaseQuestion"),r=cc._decorator,a=r.ccclass,c=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.correctObject=null,e.activeBulb=null,e.wrongObject=null,e.greenHighlight=null,e.redHighlight=null,e.light=null,e.arrowAnimation=null,e}return i(e,t),e.prototype.playPositiveFeedback=function(e){var o=this;t.prototype.playPositiveFeedback.call(this,e);var i=function(){o.blinkNode(o.greenHighlight,1,3,function(){o.playFeedbackAnimation(o.arrowAnimation),o.scheduleOnce(function(){return o.setActive(o.activeBulb,!0,e)},.5)})};this.setActive(this.correctObject,!0,function(){o.blinkNode(o.light,1,-1),o.scheduleOnce(i,1)})},e.prototype.playNegativeFeedback=function(e){var o=this;t.prototype.playNegativeFeedback.call(this,e),this.setActive(this.wrongObject,!0,function(){o.blinkNode(o.redHighlight,1,3,e)})},e.prototype.reset=function(){t.prototype.reset.call(this),this.arrowAnimation.reset(),cc.Tween.stopAllByTarget(this.light),this.correctObject.active=this.wrongObject.active=this.light.active=!1,this.greenHighlight.active=this.redHighlight.active=this.activeBulb.active=!1},n([c(cc.Node)],e.prototype,"correctObject",void 0),n([c(cc.Node)],e.prototype,"activeBulb",void 0),n([c(cc.Node)],e.prototype,"wrongObject",void 0),n([c(cc.Node)],e.prototype,"greenHighlight",void 0),n([c(cc.Node)],e.prototype,"redHighlight",void 0),n([c(cc.Node)],e.prototype,"light",void 0),n([c(s.EXPL10SCI14E06_FeedbackAnimation)],e.prototype,"arrowAnimation",void 0),e=n([a],e)}(s.default);o.default=p,cc._RF.pop()},{"./EXPL10SCI14E06_BaseQuestion":"EXPL10SCI14E06_BaseQuestion"}],EXPL10SCI14E06_QuestionTypeOne:[function(t,e,o){"use strict";cc._RF.push(e,"db1161ihJ5KcrEISJq6+08H","EXPL10SCI14E06_QuestionTypeOne");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./EXPL10SCI14E06_BaseQuestion"),r=cc._decorator,a=r.ccclass,c=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.correctObject=null,e.greenHighlight=null,e.greenTextBubble=null,e.wrongObject=null,e.redHighlight=null,e.redTextBubble=null,e.cityWithLights=null,e.tower=null,e.thermalTowerMask=null,e.wireAnim=null,e.negativeAnimations=[],e}return i(e,t),e.prototype.playPositiveFeedback=function(e){var o=this;t.prototype.playPositiveFeedback.call(this,e),this.setActive(this.correctObject,!0,function(){o.blinkNode(o.greenHighlight,1,3,function(){o.playFeedbackAnimation(o.wireAnim),o.setActive(o.cityWithLights,!0,function(){o.scheduleOnce(function(){return o.setActive(o.greenTextBubble,!0,e)},1)})})}),this.setActive(this.tower,!0)},e.prototype.playNegativeFeedback=function(e){var o=this;t.prototype.playNegativeFeedback.call(this,e),this.setActive(this.wrongObject,!0,function(){o.blinkNode(o.redHighlight,1,3,function(){o.playAnimationsParallely(o.negativeAnimations),o.playFeedbackAnimation(o.wireAnim),o.setActive(o.cityWithLights,!0,function(){o.scheduleOnce(function(){return o.setActive(o.redTextBubble,!0,e)},1)})})}),this.setActive(this.tower,!0),this.setActive(this.thermalTowerMask,!0)},e.prototype.reset=function(){t.prototype.reset.call(this),this.correctObject.active=this.wrongObject.active=this.tower.active=this.thermalTowerMask.active=!1,this.greenHighlight.active=this.redHighlight.active=this.greenTextBubble.active=this.redTextBubble.active=!1,this.cityWithLights.active=!1,this.wireAnim.reset(),this.negativeAnimations.forEach(function(t){return t.reset()})},n([c(cc.Node)],e.prototype,"correctObject",void 0),n([c(cc.Node)],e.prototype,"greenHighlight",void 0),n([c(cc.Node)],e.prototype,"greenTextBubble",void 0),n([c(cc.Node)],e.prototype,"wrongObject",void 0),n([c(cc.Node)],e.prototype,"redHighlight",void 0),n([c(cc.Node)],e.prototype,"redTextBubble",void 0),n([c(cc.Node)],e.prototype,"cityWithLights",void 0),n([c(cc.Node)],e.prototype,"tower",void 0),n([c(cc.Node)],e.prototype,"thermalTowerMask",void 0),n([c(s.EXPL10SCI14E06_FeedbackAnimation)],e.prototype,"wireAnim",void 0),n([c([s.EXPL10SCI14E06_FeedbackAnimation])],e.prototype,"negativeAnimations",void 0),e=n([a],e)}(s.default);o.default=p,cc._RF.pop()},{"./EXPL10SCI14E06_BaseQuestion":"EXPL10SCI14E06_BaseQuestion"}],EXPL10SCI14E06_QuestionTypeThree:[function(t,e,o){"use strict";cc._RF.push(e,"3254fvofsdDjpil6Hh0xaDf","EXPL10SCI14E06_QuestionTypeThree");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./EXPL10SCI14E06_BaseQuestion"),r=cc._decorator,a=r.ccclass,c=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.centreNucleus=null,e.greenHighlight=null,e.redHighlight=null,e.positiveAnimation=null,e.negativeAnimation=null,e}return i(e,t),e.prototype.playPositiveFeedback=function(e){var o=this;t.prototype.playPositiveFeedback.call(this,e),this.scheduleOnce(function(){o.centreNucleus.active=!1;var t=o.playFeedbackAnimation(o.positiveAnimation);o.scheduleOnce(function(){o.setActive(o.greenHighlight,!0,e)},t)},.5)},e.prototype.playNegativeFeedback=function(e){var o=this;t.prototype.playNegativeFeedback.call(this,e),this.scheduleOnce(function(){o.centreNucleus.active=!1;var t=o.playFeedbackAnimation(o.negativeAnimation);o.scheduleOnce(function(){o.setActive(o.redHighlight,!0,e)},t)},.5)},e.prototype.reset=function(){t.prototype.reset.call(this),this.centreNucleus.active=!0,this.positiveAnimation.reset(),this.negativeAnimation.reset(),this.greenHighlight.active=this.redHighlight.active=!1},n([c(cc.Node)],e.prototype,"centreNucleus",void 0),n([c(cc.Node)],e.prototype,"greenHighlight",void 0),n([c(cc.Node)],e.prototype,"redHighlight",void 0),n([c(s.EXPL10SCI14E06_FeedbackAnimation)],e.prototype,"positiveAnimation",void 0),n([c(s.EXPL10SCI14E06_FeedbackAnimation)],e.prototype,"negativeAnimation",void 0),e=n([a],e)}(s.default);o.default=p,cc._RF.pop()},{"./EXPL10SCI14E06_BaseQuestion":"EXPL10SCI14E06_BaseQuestion"}],EXPL10SCI14E06_QuestionTypeTwo:[function(t,e,o){"use strict";cc._RF.push(e,"84cb3dB86NBY5fz0q4YFA5M","EXPL10SCI14E06_QuestionTypeTwo");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./EXPL10SCI14E06_BaseQuestion"),r=cc._decorator,a=r.ccclass,c=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.uraniumRod=null,e.greenHighlight=null,e.greenTextBubble=null,e.coal=null,e.caseLid=null,e.redHighlight=null,e.redTextBubble=null,e}return i(e,t),e.prototype.playPositiveFeedback=function(e){var o=this;t.prototype.playPositiveFeedback.call(this,e),this.uraniumRod.active=!0;var i=this.uraniumRod.getPosition();this.uraniumRod.y+=400,cc.tween(this.uraniumRod).to(2,{position:i},{easing:"cubicOut"}).call(function(){o.setActive(o.greenTextBubble,!0,function(){o.blinkNode(o.greenHighlight,1,3,e)})}).start()},e.prototype.playNegativeFeedback=function(e){var o=this;t.prototype.playNegativeFeedback.call(this,e),this.coal.active=!0;var i=this.coal.getPosition();this.coal.y-=150,cc.tween(this.coal).to(1.5,{position:i},{easing:"cubicOut"}).call(function(){o.caseLid.active=!0,i=o.caseLid.getPosition(),o.caseLid.y+=200,cc.tween(o.caseLid).to(1.5,{position:i},{easing:"cubicOut"}).call(function(){o.setActive(o.redTextBubble,!0,function(){o.blinkNode(o.redHighlight,1,3,e)})}).start()}).start()},e.prototype.reset=function(){t.prototype.reset.call(this),this.uraniumRod.active=this.coal.active=this.caseLid.active=!1,this.greenHighlight.active=this.redHighlight.active=this.greenTextBubble.active=this.redTextBubble.active=!1},n([c(cc.Node)],e.prototype,"uraniumRod",void 0),n([c(cc.Node)],e.prototype,"greenHighlight",void 0),n([c(cc.Node)],e.prototype,"greenTextBubble",void 0),n([c(cc.Node)],e.prototype,"coal",void 0),n([c(cc.Node)],e.prototype,"caseLid",void 0),n([c(cc.Node)],e.prototype,"redHighlight",void 0),n([c(cc.Node)],e.prototype,"redTextBubble",void 0),e=n([a],e)}(s.default);o.default=p,cc._RF.pop()},{"./EXPL10SCI14E06_BaseQuestion":"EXPL10SCI14E06_BaseQuestion"}],EXPL_selectionpanel:[function(t,e,o){"use strict";cc._RF.push(e,"06d9dymiadJ66Qn/VG0UBvU","EXPL_selectionpanel");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=s.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameNode=null,e}return i(e,t),e.prototype.onLoad=function(){this.HidePanel()},e.prototype.start=function(){},e.prototype.OnSelectButton=function(t){this.node.children.forEach(function(t){t.getComponent(cc.Button).interactable=!1}),this.gameNode.emit("OnOptionSelected",t.target.name),this.scheduleOnce(function(){this.HidePanel()}.bind(this),.5)},e.prototype.ShowPanel=function(){this.node.runAction(cc.moveTo(.5,cc.v2(0,-300))),this.node.children.forEach(function(t){t.getComponent(cc.Button).interactable=!0})},e.prototype.HidePanel=function(){this.node.runAction(cc.moveTo(.5,cc.v2(0,-600)))},n([a(cc.Node)],e.prototype,"gameNode",void 0),e=n([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],ExitPayloadManager:[function(t,e,o){"use strict";cc._RF.push(e,"05b19pwIwtBYJWSGPld+/Jq","ExitPayloadManager");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../framework/scripts/UIManager"),r=t("../../framework/scripts/StepsController"),a=cc._decorator,c=a.ccclass,p=(a.property,function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.exitPayloadObject={},t.gameStatus="abandoned",t.currentQuestionIndex=0,t.gameID="",t.attemptsToCompleteQuestion=1,t.questionCompletionStatus="incomplete",t.questionStartTime=0,t}return i(o,e),o.prototype.onLoad=function(){this.bridge=t("dsbridge"),this.node.on("OnJsonLoadComplete",this.onJsonLoadComplete.bind(this)),this.node.on("OnQuestionStart",this.onQuestionStarted.bind(this)),this.node.on("OnQuestionComplete",this.onQuestionCompleted.bind(this)),this.node.on("OnCommonButtonClick",this.onCommonButtonClick.bind(this)),this.node.on("OnEndScreenReach",this.onEndScreenReach.bind(this))},o.prototype.start=function(){this.scr_uiManager=this.node.getComponent(s.default),this.scr_stepsController=this.node.getComponent(r.default)},o.prototype.onJsonLoadComplete=function(t){console.log("game id is ",t.gameID),this.gameID="com.explore."+t.gameID,this.exitPayloadObject.gameid=this.gameID,this.exitPayloadObject.gamestatus=this.gameStatus,this.exitPayloadObject.interactions={}},o.prototype.onQuestionStarted=function(t){this.currentQuestionIndex!==t.questionIndex&&(this.attemptsToCompleteQuestion=1,this.questionCompletionStatus="incomplete",this.questionStartTime=Math.floor(cc.director.getTotalTime()/1e3),this.currentQuestionIndex=t.questionIndex,this.exitPayloadObject.interactions["interaction_"+this.currentQuestionIndex]={},this.exitPayloadObject.interactions["interaction_"+this.currentQuestionIndex].difficulty="null",this.exitPayloadObject.interactions["interaction_"+this.currentQuestionIndex].status=this.questionCompletionStatus,this.exitPayloadObject.interactions["interaction_"+this.currentQuestionIndex].attempts=this.attemptsToCompleteQuestion,this.exitPayloadObject.interactions["interaction_"+this.currentQuestionIndex].id=this.gameID+"_"+this.currentQuestionIndex)},o.prototype.onQuestionCompleted=function(t){void 0===t&&(t=null),"incomplete"===this.questionCompletionStatus&&(this.questionCompletionStatus="complete",this.exitPayloadObject.interactions["interaction_"+this.currentQuestionIndex].status=this.questionCompletionStatus,this.exitPayloadObject.interactions["interaction_"+this.currentQuestionIndex].attempts=this.attemptsToCompleteQuestion,this.exitPayloadObject.interactions["interaction_"+this.currentQuestionIndex].totaltime_secs=Math.floor(cc.director.getTotalTime()/1e3)-this.questionStartTime)},o.prototype.onEndScreenReach=function(t){void 0===t&&(t=null),console.log("####### end screen is called"),this.gameStatus="completed"},o.prototype.onCommonButtonClick=function(t){this.scr_uiManager.CommonButtonType.NextQuestion==t?this.onQuestionCompleted():this.scr_uiManager.CommonButtonType.TryAgain==t&&this.attemptsToCompleteQuestion++},o.prototype.onCloseButtonClick=function(){this.scheduleOnce(function(){console.log("BridgeIntegration On Close clicked!"),this.bridge.call("byjus.sendExploreUIEvent",{tag:"close",data:this.getExitPayload()})}.bind(this),.2)},o.prototype.sendExitPayload=function(){this.bridge.call("byjus.sendExploreUIEvent",{tag:"finish",data:this.getExitPayload()})},o.prototype.getExitPayload=function(){return this.exitPayloadObject.totalgametime_secs=Math.floor(cc.director.getTotalTime()/1e3),this.exitPayloadObject.gamestatus=this.gameStatus,console.log("#### exit payload game status is ",this.gameStatus),"completed"!=this.gameStatus?this.exitPayloadObject.currentLevel=this.currentQuestionIndex:this.exitPayloadObject.hasOwnProperty("currentLevel")&&delete this.exitPayloadObject.currentLevel,void 0!=this.exitPayloadObject.interactions["interaction_"+this.currentQuestionIndex]&&(this.exitPayloadObject.interactions["interaction_"+this.currentQuestionIndex].status=this.questionCompletionStatus,this.exitPayloadObject.interactions["interaction_"+this.currentQuestionIndex].attempts=this.attemptsToCompleteQuestion,this.exitPayloadObject.interactions["interaction_"+this.currentQuestionIndex].totaltime_secs=Math.floor(cc.director.getTotalTime()/1e3)-this.questionStartTime),console.log("Exit payload is ",JSON.stringify(this.exitPayloadObject)),JSON.stringify(this.exitPayloadObject)},o=n([c],o)}(cc.Component));o.default=p,cc._RF.pop()},{"../../framework/scripts/StepsController":"StepsController","../../framework/scripts/UIManager":"UIManager",dsbridge:"dsbridge"}],ExpressionGenerateManager:[function(t,e,o){"use strict";cc._RF.push(e,"2e4561cuSNMr6cLD+LoIrw9","ExpressionGenerateManager");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=s.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.imageAtlasRef=null,e.mathQuillObj=null,e.totoalExpressionCount=0,e.currentExpressionCount=0,e.spriteFrameDictionary={},e}var o;return i(e,t),o=e,e.prototype.onLoad=function(){o._mInstance=this,this.mathQuillObj=MathQuill.getInterface(MathQuill.getInterface.MAX)},e.getInstance=function(){return this._mInstance},e.prototype.createAtlasForMathExpression=function(t,e,o){console.log("pExpressionObject------------",t.length),this.totoalExpressionCount=t.length,this.currentExpressionCount=0;for(var i=0;i<t.length;i++){var n=t[i],s=e;for(var r in n.hasOwnProperty("color")&&(s=new cc.Color(n.color[0],n.color[1],n.color[2],n.color[3])),n){var a=n[r];"color"!=r&&this.convertLatextToDom(a,r,"expression",s,o)}}},e.prototype.convertLatextToDom=function(t,e,o,i,n,s,r){var a=this;if(void 0===s&&(s=null),void 0===r&&(r=!1),this.spriteFrameDictionary.hasOwnProperty(e)){var c=this.spriteFrameDictionary[e];if(null!=s&&0==r)return console.log("Already Contains Frame----------------------"),void s.emit("onSpriteFrameLoaded",c)}t=(t=(t=decodeURIComponent(t)).replace(/\$/g,"")).replace(/\\+/g,"\\"),console.log("latextStr",t),0!=$("#"+e).length&&(e=e+"_dup_"+$("#"+e).length);var p=e+"_class",l='<div id="'+e+'" style="color:rgba('+i.r+","+i.g+","+i.b+","+i.a+"); font-size:"+n+'px" font-weight:bold; class="'+p+'">'+t+"</div>";$("#"+o).append(l),this.mathQuillObj.StaticMath($("."+p)[0]),cc.tween(this.node).delay(.1).call(function(){a.createCanvasFromDom(e,s)}).start()},e.prototype.createCanvasFromDom=function(t,e){void 0===e&&(e=null);var o=this;html2canvas($("#"+t)[0],{backgroundColor:null,scale:1}).then(function(i){var n=i.toDataURL();o.appendTextureToAtlas(n,t,e)})},e.prototype.appendTextureToAtlas=function(t,e,o){void 0===o&&(o=null);var i=new Image;i.src=t;var n=this;i.onload=function(){var t=new cc.Texture2D;t.initWithElement(i),t.handleLoadedTexture();var s=new cc.SpriteFrame(t);s.name=e,n.spriteFrameDictionary[e]=s,null!=o?o.emit("onSpriteFrameLoaded",s):(n.imageAtlasRef._spriteFrames[e]=s,n.currentExpressionCount++,n.currentExpressionCount==n.totoalExpressionCount&&(console.log("Expression Image creation Completion"),n.node.emit("OnExpressionLoadComplete")))}},e.prototype.createAtlasFromImage=function(t){for(var e in t){var o=t[e];this.loadImageFromResourceFolder(e,o)}},e.prototype.loadImageFromResourceFolder=function(t,e){var o=this;cc.loader.loadRes(e,cc.SpriteFrame,function(e,i){e?cc.error(e.message||e):o.imageAtlasRef._spriteFrames[t]=i}.bind(this))},e._mInstance=null,n([a(cc.SpriteAtlas)],e.prototype,"imageAtlasRef",void 0),e=o=n([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],ExpressionLoader:[function(t,e,o){"use strict";cc._RF.push(e,"2944fcI8f9KG55rXKaw00DT","ExpressionLoader");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../StepsController"),r=t("../ExpressionGenerateManager"),a=cc._decorator,c=a.ccclass,p=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spriteNode=null,e.key="hello",e.fontSize=26,e.commmonCanvas=null,e.jsonData=null,e}return i(e,t),e.prototype.start=function(){if(this.spriteNode=this.node.getComponent(cc.Sprite),this.commmonCanvas=cc.find("CommonCanvas"),this.node.on("onSpriteFrameLoaded",this.onSpriteFrameLoaded,this),this.scr_stepsController=this.commmonCanvas.getComponent(s.default),this.scr_stepsController.getTextByKey(this.key,"expressionsSprite")){var t=this.scr_stepsController.getTextByKey(this.key,"expressionsSprite");this.convertLatextToImage(t)}},e.prototype.convertLatextToImage=function(t){var e=this.node.color;r.default.getInstance().convertLatextToDom(t,this.key,"expression",e,this.fontSize,this.node)},e.prototype.onSpriteFrameLoaded=function(t){console.log("Sprite Frame Called"),this.spriteNode.spriteFrame=t},n([p],e.prototype,"key",void 0),n([p],e.prototype,"fontSize",void 0),e=n([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../ExpressionGenerateManager":"ExpressionGenerateManager","../StepsController":"StepsController"}],Geometry_Highlight:[function(t,e,o){"use strict";cc._RF.push(e,"73762aeRahG36rXt8PsWy2M","Geometry_Highlight");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=s.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spritesToHighlight=[],e.fadeInOutSequence=null,e}return i(e,t),e.prototype.onLoad=function(){this.setOpacity(0)},e.prototype.setOpacity=function(t){this.node.opacity=0},e.prototype.highlight=function(t){"YELLOW"==t?this.changeSpritesColor(cc.Color.YELLOW):"RED"==t?this.changeSpritesColor(cc.Color.RED):this.changeSpritesColor(cc.Color.GREEN),this.setOpacity(0),this.fadeInOutSequence=cc.repeat(cc.sequence(cc.fadeIn(.5),cc.fadeOut(.5)),2).repeatForever(),this.node.runAction(this.fadeInOutSequence)},e.prototype.changeSpritesColor=function(t){this.spritesToHighlight.forEach(function(e){e.node.color=t})},e.prototype.changeHighlight=function(t){"YELLOW"==t?this.changeSpritesColor(cc.Color.YELLOW):"RED"==t?this.changeSpritesColor(cc.Color.RED):this.changeSpritesColor(cc.Color.GREEN)},e.prototype.stop=function(){this.node.stopAction(this.fadeInOutSequence),this.setOpacity(0)},e.prototype.onDisable=function(){stop()},n([a(cc.Sprite)],e.prototype,"spritesToHighlight",void 0),e=n([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],Geometry_Hint:[function(t,e,o){"use strict";cc._RF.push(e,"0b2f0oxlFBH8q4gLq/DTcV8","Geometry_Hint");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../scripts/AnalyticsManager"),r=t("../../scripts/AudioManager"),a=t("../../scripts/StepsController"),c=t("../../scripts/utilities/TextLoader"),p=cc._decorator,l=p.ccclass,h=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.diagramNode=null,e.diagramSprite=null,e.shouldOverridePositionAndScale=!1,e.diagramPosition=cc.v3(0,0,0),e.diagramScale=cc.v2(0,0),e.hintBox=null,e.hintTextLoader=null,e.hintFontSize=22,e.hintButtonSprite=null,e.enabledHintButtonSpriteFrame=null,e.disabledHintButtonSpriteFrame=null,e.hintButton=null,e.hintOverlay=null,e.buttonClickSfx=null,e.isShown=!1,e.diagramInitialPosition=cc.v3(0,0,0),e.diagramInitialScale=cc.v2(0,0),e.richText=null,e}return i(e,t),e.prototype.start=function(){this.scr_analyticsManager=cc.find("CommonCanvas").getComponent(s.default),this.scr_stepsController=cc.find("CommonCanvas").getComponent(a.default),this.scr_audioManager=cc.find("CommonCanvas").getComponent(r.default),this.richText=this.hintTextLoader.getComponent(cc.RichText),this.diagramInitialPosition=this.diagramNode.position,this.diagramInitialScale.x=this.diagramNode.scaleX,this.diagramInitialScale.y=this.diagramNode.scaleY,this.deactivate()},e.prototype.set=function(t,e){this.richText.fontSize=this.hintFontSize,this.richText.lineHeight=this.hintFontSize,this.hintTextLoader.changeLabel(t),this.scheduleOnce(this.adjustFontOfHint.bind(this),.01),e&&(this.diagramSprite.spriteFrame=e),this.hide(),this.isShown=!1},e.prototype.adjustFontOfHint=function(){var t=Math.floor(this.richText.node.height/this.richText.lineHeight);t<5?this.richText.fontSize=this.hintFontSize:5==t?this.richText.fontSize=20:6==t?this.richText.fontSize=16:7==t?this.richText.fontSize=14:8==t?this.richText.fontSize=12:9==t?this.richText.fontSize=11:10==t&&(this.richText.fontSize=10),this.richText.lineHeight=this.richText.fontSize},e.prototype.onClickHintButton=function(){this.isShown=!this.isShown,this.isShown?this.show():this.hide()},e.prototype.show=function(){this.scr_analyticsManager.sendOnHintButtonClick(this.scr_stepsController.getCurrentQuestionIndex()),this.scr_analyticsManager.sendOnHintView(this.scr_stepsController.getCurrentQuestionIndex()),this.buttonClickSfx&&this.scr_audioManager.play("buttonClick",this.buttonClickSfx,!1,"SFX"),this.shouldOverridePositionAndScale?(this.diagramNode.position=this.diagramPosition,this.diagramNode.scaleX=this.diagramScale.x,this.diagramNode.scaleY=this.diagramScale.y):this.diagramNode.scale=.5,this.hintBox.active=!0,this.hintButtonSprite.spriteFrame=this.disabledHintButtonSpriteFrame,this.hintOverlay.active=!0},e.prototype.hide=function(){this.diagramNode.position=this.diagramInitialPosition,this.diagramNode.scaleX=this.diagramInitialScale.x,this.diagramNode.scaleY=this.diagramInitialScale.y,this.hintBox.active=!1,this.hintButtonSprite.spriteFrame=this.enabledHintButtonSpriteFrame,this.hintOverlay.active=!1},e.prototype.activate=function(){this.hintButtonSprite.spriteFrame=this.enabledHintButtonSpriteFrame,this.hintButton.interactable=!0},e.prototype.deactivate=function(){this.hintButtonSprite.spriteFrame=this.enabledHintButtonSpriteFrame,this.hintButton.interactable=!1},n([h(cc.Node)],e.prototype,"diagramNode",void 0),n([h(cc.Sprite)],e.prototype,"diagramSprite",void 0),n([h(cc.Boolean)],e.prototype,"shouldOverridePositionAndScale",void 0),n([h(cc.Vec3)],e.prototype,"diagramPosition",void 0),n([h(cc.Vec2)],e.prototype,"diagramScale",void 0),n([h(cc.Node)],e.prototype,"hintBox",void 0),n([h(c.default)],e.prototype,"hintTextLoader",void 0),n([h(cc.Float)],e.prototype,"hintFontSize",void 0),n([h(cc.Sprite)],e.prototype,"hintButtonSprite",void 0),n([h(cc.SpriteFrame)],e.prototype,"enabledHintButtonSpriteFrame",void 0),n([h(cc.SpriteFrame)],e.prototype,"disabledHintButtonSpriteFrame",void 0),n([h(cc.Button)],e.prototype,"hintButton",void 0),n([h(cc.Node)],e.prototype,"hintOverlay",void 0),n([h({type:cc.AudioClip})],e.prototype,"buttonClickSfx",void 0),e=n([l],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../../scripts/AnalyticsManager":"AnalyticsManager","../../scripts/AudioManager":"AudioManager","../../scripts/StepsController":"StepsController","../../scripts/utilities/TextLoader":"TextLoader"}],Geometry_OptionHandler:[function(t,e,o){"use strict";cc._RF.push(e,"23b038CDN9PBaWE8bDAWRDP","Geometry_OptionHandler");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../scripts/AnalyticsManager"),r=t("../../scripts/AudioManager"),a=t("../../scripts/StepsController"),c=t("../../scripts/utilities/TextLoader"),p=cc._decorator,l=p.ccclass,h=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startPosition=0,e.endPosition=0,e.optionBG=null,e.enabledOptionBGSpriteFrame=null,e.disabledOptionBGSpriteFrame=null,e.optionSprites=[],e.enabledOptionSpriteFrame=null,e.disabledOptionSpriteFrame=null,e.hightlightedOptionSpriteFrame=null,e.optionTextLoaders=[],e.sliderSprite=null,e.enabledSliderSpriteFrame=null,e.disabledSliderSpriteFrame=null,e.submitSprite=null,e.enabledSubmitSpriteFrame=null,e.disabledSubmitSpriteFrame=null,e.submitTextLoader=null,e.slider=null,e.pointerSprite=null,e.enabledPointerSpriteFrame=null,e.disabledPointerSpriteFrame=null,e.pointerButton=null,e.submitButton=null,e.canvas=null,e.optionSfx=null,e.optionChooseSfx=null,e.submitClickSfx=null,e.optionHideSfx=null,e.audioManager=null,e.isActivated=!1,e.selectedOption=-1,e.previousSelectedOption=-1,e}return i(e,t),e.prototype.onLoad=function(){this.audioManager=this.canvas.getComponent(r.default),this.analyticsManager=this.canvas.getComponent(s.default),this.stepsController=this.canvas.getComponent(a.default),this.slider.node.on("slide",this.onSlide.bind(this),this),this.slider.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd.bind(this),this),this.slider.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd.bind(this),this),this.pointerButton.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd.bind(this),this),this.pointerButton.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd.bind(this),this),this.submitSprite.spriteFrame=this.disabledSubmitSpriteFrame,this.submitButton.interactable=!1,this.sliderSprite.spriteFrame=this.disabledSliderSpriteFrame,this.slider.enabled=!1},e.prototype.onSlide=function(t){this.onSliderValueChange(!1)},e.prototype.onTouchEnd=function(){this.onSliderValueChange(!0)},e.prototype.onSliderValueChange=function(t){if(this.isActivated){var e=this.slider.progress,o=this.selectedOption;e>=.69?(e=.85,this.selectedOption=2):e>=.355?(e=.52,this.selectedOption=1):(e=.18,this.selectedOption=0),t&&cc.tween(this.slider).to(.1,{progress:e}).start(),o!=this.selectedOption&&this.onOptionChange(o,this.selectedOption)}},e.prototype.onOptionChange=function(t,e){this.optionChooseSfx&&this.audioManager.play("optionChoose",this.optionChooseSfx,!1,"SFX"),this.submitSprite.spriteFrame=this.enabledSubmitSpriteFrame,this.submitButton.interactable=!0,-1!=t&&(this.optionSprites[t].spriteFrame=this.enabledOptionSpriteFrame),this.optionSprites[e].spriteFrame=this.hightlightedOptionSpriteFrame,this.selectedOption=e,this.node.emit("onOptionChange",t,e)},e.prototype.showOptions=function(t,e){this.selectedOption=-1,this.previousSelectedOption=-1;for(var o=0;o<this.optionTextLoaders.length;o++)this.optionTextLoaders[o].changeLabel(t[o]);this.submitTextLoader.changeLabel(e),this.optionBG.spriteFrame=this.enabledOptionBGSpriteFrame,this.setOptionSprites(this.enabledOptionSpriteFrame),this.sliderSprite.spriteFrame=this.enabledSliderSpriteFrame,this.slider.progress=.025,this.pointerSprite.spriteFrame=this.enabledPointerSpriteFrame,this.pointerButton.interactable=!0,this.isActivated=!0,this.submitSprite.spriteFrame=this.disabledSubmitSpriteFrame,this.submitButton.interactable=!1,this.slider.enabled=!0,this.optionSfx&&this.audioManager.play("optionSfx",this.optionSfx,!1,"SFX"),this.move(this.endPosition)},e.prototype.move=function(t){cc.tween(this.node).to(.5,{y:t}).start()},e.prototype.setOptionSprites=function(t){this.optionSprites.forEach(function(e){e.spriteFrame=t})},e.prototype.onClickSubmit=function(){this.submitClickSfx&&this.audioManager.play("optionChoose",this.submitClickSfx,!1,"SFX"),this.slider.enabled=!1,this.optionBG.spriteFrame=this.disabledOptionBGSpriteFrame,this.setOptionSprites(this.disabledOptionSpriteFrame),this.sliderSprite.spriteFrame=this.disabledSliderSpriteFrame,this.pointerSprite.spriteFrame=this.disabledPointerSpriteFrame,this.pointerButton.interactable=!1,this.isActivated=!1,this.submitSprite.spriteFrame=this.disabledSubmitSpriteFrame,this.submitButton.interactable=!1,this.node.emit("onSubmit",this.selectedOption),this.scheduleOnce(this.hide.bind(this),.5)},e.prototype.hide=function(){this.move(this.startPosition),this.optionHideSfx&&this.audioManager.play("optionHide",this.optionHideSfx,!1,"SFX")},n([h({type:cc.Float})],e.prototype,"startPosition",void 0),n([h({type:cc.Float})],e.prototype,"endPosition",void 0),n([h(cc.Sprite)],e.prototype,"optionBG",void 0),n([h(cc.SpriteFrame)],e.prototype,"enabledOptionBGSpriteFrame",void 0),n([h(cc.SpriteFrame)],e.prototype,"disabledOptionBGSpriteFrame",void 0),n([h(cc.Sprite)],e.prototype,"optionSprites",void 0),n([h(cc.SpriteFrame)],e.prototype,"enabledOptionSpriteFrame",void 0),n([h(cc.SpriteFrame)],e.prototype,"disabledOptionSpriteFrame",void 0),n([h(cc.SpriteFrame)],e.prototype,"hightlightedOptionSpriteFrame",void 0),n([h(c.default)],e.prototype,"optionTextLoaders",void 0),n([h(cc.Sprite)],e.prototype,"sliderSprite",void 0),n([h(cc.SpriteFrame)],e.prototype,"enabledSliderSpriteFrame",void 0),n([h(cc.SpriteFrame)],e.prototype,"disabledSliderSpriteFrame",void 0),n([h(cc.Sprite)],e.prototype,"submitSprite",void 0),n([h(cc.SpriteFrame)],e.prototype,"enabledSubmitSpriteFrame",void 0),n([h(cc.SpriteFrame)],e.prototype,"disabledSubmitSpriteFrame",void 0),n([h(c.default)],e.prototype,"submitTextLoader",void 0),n([h(cc.Slider)],e.prototype,"slider",void 0),n([h(cc.Sprite)],e.prototype,"pointerSprite",void 0),n([h(cc.SpriteFrame)],e.prototype,"enabledPointerSpriteFrame",void 0),n([h(cc.SpriteFrame)],e.prototype,"disabledPointerSpriteFrame",void 0),n([h(cc.Button)],e.prototype,"pointerButton",void 0),n([h(cc.Button)],e.prototype,"submitButton",void 0),n([h(cc.Node)],e.prototype,"canvas",void 0),n([h({type:cc.AudioClip})],e.prototype,"optionSfx",void 0),n([h({type:cc.AudioClip})],e.prototype,"optionChooseSfx",void 0),n([h({type:cc.AudioClip})],e.prototype,"submitClickSfx",void 0),n([h({type:cc.AudioClip})],e.prototype,"optionHideSfx",void 0),e=n([l],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../../scripts/AnalyticsManager":"AnalyticsManager","../../scripts/AudioManager":"AudioManager","../../scripts/StepsController":"StepsController","../../scripts/utilities/TextLoader":"TextLoader"}],Geometry_StepsHandler:[function(t,e,o){"use strict";cc._RF.push(e,"f969f4pMp5JVqwxgwJgEnx9","Geometry_StepsHandler");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../scripts/AudioManager"),r=t("../../scripts/utilities/TextLoader"),a=cc._decorator,c=a.ccclass,p=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.viewNode=null,e.contentLayout=null,e.stepTemplate=null,e.scrollview=null,e.stepAddSfx=null,e.numberOfSteps=0,e.steps=[],e}return i(e,t),e.prototype.onLoad=function(){this.audioManager=cc.find("CommonCanvas").getComponent(s.default)},e.prototype.addStep=function(){var t=cc.instantiate(this.stepTemplate);this.contentLayout.node.addChild(t),t.children[1].children[0].getComponent(cc.Label).string=(this.numberOfSteps+1).toString()+".";var e=t.children[1].children[1],o="step_"+(this.numberOfSteps+1);e.getComponent(r.default).changeLabel(o),t.active=!0,t.children[1].height=e.height,t.height=e.height+5,this.steps.push(t),this.numberOfSteps++,this.adjustHeightOfContent(),this.handleScrollbar(),this.stepAddSfx&&this.audioManager.play("stepAdd",this.stepAddSfx,!1,"SFX")},e.prototype.adjustHeightOfContent=function(){for(var t=0,e=0;e<this.numberOfSteps;e++)t+=this.steps[e].height;t+=(this.numberOfSteps-1)*this.contentLayout.spacingY,this.contentLayout.node.height=t},e.prototype.handleScrollbar=function(){this.scrollview.verticalScrollBar.node.active=this.contentLayout.node.height>this.viewNode.height,this.contentLayout.node.height<=this.viewNode.height?this.scrollview.scrollToTop():this.scrollview.scrollToBottom()},e.prototype.fadeOutHighlight=function(){null!=this.steps&&0!=this.steps.length&&cc.tween(this.steps[this.steps.length-1].children[0]).to(1,{opacity:0}).start()},n([p(cc.Node)],e.prototype,"viewNode",void 0),n([p(cc.Layout)],e.prototype,"contentLayout",void 0),n([p(cc.Node)],e.prototype,"stepTemplate",void 0),n([p(cc.ScrollView)],e.prototype,"scrollview",void 0),n([p({type:cc.AudioClip})],e.prototype,"stepAddSfx",void 0),e=n([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../scripts/AudioManager":"AudioManager","../../scripts/utilities/TextLoader":"TextLoader"}],QuestionProgressBar:[function(t,e,o){"use strict";cc._RF.push(e,"7e4dccjsaRHcoGkkr+W3136","QuestionProgressBar");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../scripts/AudioManager"),r=cc._decorator,a=r.ccclass,c=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.spr_iconempty=null,e.spr_iconfilled=null,e.spr_iconfilledAfterFirstAttempt=null,e.useDifferentMilestoneIcons=!1,e.spr_emptyMilestones=[],e.spr_filledMilestones=[],e.aud_progressbarfill=null,e.aud_highlighticon=null,e.noOfQs=5,e.offsePosx=0,e.offseProgression=-10,e.bgEffectiveLength=500,e.progressBarOffsetX=250,e.bgNode=null,e.progressionNode=null,e.highlightNode=null,e.questionsNode=[],e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.canvas&&(this.audioManager=this.canvas.getComponent(s.default)),this.bgNode=this.node.getChildByName("bg"),this.progressionNode=this.bgNode.getChildByName("progression"),this.highlightNode=this.bgNode.getChildByName("highlight"),this.highlightNode.opacity=0,this.progressionNode.children.forEach(function(e){"Q1"==e.name&&t.questionsNode.push(e)}),this.questionsNode[0].x=(this.bgEffectiveLength-(this.progressionNode.x+this.progressBarOffsetX))/this.noOfQs+this.offsePosx,this.questionsNode[0].width=46,this.questionsNode[0].height=46,this.progressionNode.getComponent(cc.Sprite).type==cc.Sprite.Type.SIMPLE?this.progressionNode.width=0:this.progressionNode.getComponent(cc.Sprite).type==cc.Sprite.Type.FILLED&&(this.progressionNode.getComponent(cc.Sprite).fillRange=0);for(var e=0;e<this.noOfQs;e++)if(e>0){var o=cc.instantiate(this.questionsNode[0]);o.parent=this.questionsNode[0].parent,o.name=this.questionsNode[0].name.substr(0,1)+(e+1).toString(),o.x=(this.bgEffectiveLength-(this.progressionNode.x+this.progressBarOffsetX))/this.noOfQs*(e+1)+this.offsePosx,e==this.noOfQs-1?(o.width=50,o.height=50):(o.width=46,o.height=46),this.questionsNode.push(o)}var i=0;this.questionsNode.forEach(function(e){t.useDifferentMilestoneIcons?e.getComponent(cc.Sprite).spriteFrame=t.spr_emptyMilestones[i]:e.getComponent(cc.Sprite).spriteFrame=t.spr_iconempty,i++})},e.prototype.UpdateProgressQuestionBar=function(t,e){var o=this,i=this.questionsNode[t-1].x+this.offseProgression;if(this.canvas&&this.audioManager.play("progressbarfill",this.aud_progressbarfill,!1,"SFX"),this.progressionNode.getComponent(cc.Sprite).type==cc.Sprite.Type.SIMPLE)cc.tween(this.progressionNode).to(1,{width:i},{easing:"sineOut"}).call(function(){o.canvas&&o.audioManager.play("highlighticon",o.aud_highlighticon,!1,"SFX"),e?o.useDifferentMilestoneIcons?o.questionsNode[t-1].getComponent(cc.Sprite).spriteFrame=o.spr_filledMilestones[t-1]:o.questionsNode[t-1].getComponent(cc.Sprite).spriteFrame=o.spr_iconfilled:o.questionsNode[t-1].getComponent(cc.Sprite).spriteFrame=o.spr_iconfilledAfterFirstAttempt}).start();else if(this.progressionNode.getComponent(cc.Sprite).type==cc.Sprite.Type.FILLED){var n=i/this.progressionNode.width;cc.tween(this.progressionNode.getComponent(cc.Sprite)).to(1,{fillRange:n},{easing:"sineOut"}).call(function(){o.canvas&&o.audioManager.play("highlighticon",o.aud_highlighticon,!1,"SFX"),e?o.useDifferentMilestoneIcons?o.questionsNode[t-1].getComponent(cc.Sprite).spriteFrame=o.spr_filledMilestones[t-1]:o.questionsNode[t-1].getComponent(cc.Sprite).spriteFrame=o.spr_iconfilled:o.questionsNode[t-1].getComponent(cc.Sprite).spriteFrame=o.spr_iconfilledAfterFirstAttempt}).start()}this.highlightNode.getComponent(cc.Sprite)&&this.highlightNode.runAction(cc.sequence(cc.fadeIn(.3),cc.fadeOut(.2)).repeat(4))},n([c(cc.Node)],e.prototype,"canvas",void 0),n([c(cc.SpriteFrame)],e.prototype,"spr_iconempty",void 0),n([c(cc.SpriteFrame)],e.prototype,"spr_iconfilled",void 0),n([c(cc.SpriteFrame)],e.prototype,"spr_iconfilledAfterFirstAttempt",void 0),n([c],e.prototype,"useDifferentMilestoneIcons",void 0),n([c(cc.SpriteFrame)],e.prototype,"spr_emptyMilestones",void 0),n([c(cc.SpriteFrame)],e.prototype,"spr_filledMilestones",void 0),n([c({type:cc.AudioClip})],e.prototype,"aud_progressbarfill",void 0),n([c({type:cc.AudioClip})],e.prototype,"aud_highlighticon",void 0),n([c],e.prototype,"noOfQs",void 0),n([c],e.prototype,"offsePosx",void 0),n([c],e.prototype,"offseProgression",void 0),n([c],e.prototype,"bgEffectiveLength",void 0),n([c],e.prototype,"progressBarOffsetX",void 0),e=n([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../scripts/AudioManager":"AudioManager"}],QuestionProgressV2:[function(t,e,o){"use strict";cc._RF.push(e,"16eaaGeNi5DLpuH3no5nar3","QuestionProgressV2");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../scripts/AudioManager"),r=cc._decorator,a=r.ccclass,c=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.numberOfQuestions=0,e.lastIconPosition=0,e.iconEmpty=null,e.iconCorrectInFirstAttempt=null,e.iconWrongInFirstAttempt=null,e.shouldHighlight=!1,e.progressSfx=null,e.iconFillSfx=null,e.audioManager=null,e.highlightNode=null,e.fill=null,e.templateQuestion=null,e.questions=[],e.width=0,e.fillTime=1,e.highlightFadeInTime=.3,e.highlightFadeOutTime=.2,e.highlightRepeat=0,e}return i(e,t),e.prototype.onLoad=function(){this.getReferences(),this.initialize(),this.generateIcons()},e.prototype.getReferences=function(){this.audioManager=cc.find("CommonCanvas").getComponent(s.default),this.highlightNode=this.node.getChildByName("BG").getChildByName("Highlight"),this.fill=this.node.getChildByName("Fill").getComponent(cc.Sprite),this.templateQuestion=this.fill.node.getChildByName("Template")},e.prototype.initialize=function(){this.fill.fillRange=0,this.templateQuestion.active=!1,this.width=this.fill.node.width,this.highlightNode.opacity=0,this.highlightNode.active=this.shouldHighlight,this.highlightRepeat=Math.ceil(this.fillTime/(this.highlightFadeInTime+this.highlightFadeOutTime))},e.prototype.generateIcons=function(){if(!(this.numberOfQuestions<=0)){for(var t=0;t<this.numberOfQuestions;t++){var e=cc.instantiate(this.templateQuestion);e.parent=this.templateQuestion.parent,e.name="Q"+(t+1),e.width=t==this.numberOfQuestions-1?50:46,e.height=t==this.numberOfQuestions-1?50:46,e.getComponent(cc.Sprite).spriteFrame=this.iconEmpty,e.active=!0,this.questions.push(e)}var o=this.width/this.numberOfQuestions,i=0;for(t=this.numberOfQuestions-1;t>-1;t--)this.questions[t].x=this.lastIconPosition-o*i,i++}},e.prototype.updateProgressQuestionBar=function(t,e,o){var i=this;cc.Tween.stopAllByTarget(this.fill),this.highlightNode.stopAllActions(),this.highlightNode.opacity=0;var n=t-1,s=this.questions[n].x/this.width;cc.tween(this.fill).to(this.fillTime,{fillRange:s},{easing:"sineOut"}).call(function(){i.questions[n].getComponent(cc.Sprite).spriteFrame=void 0==o?e?i.iconCorrectInFirstAttempt:i.iconWrongInFirstAttempt:o,i.iconFillSfx&&i.audioManager.play("iconFillSfx",i.iconFillSfx,!1,"SFX")}).start(),this.progressSfx&&this.audioManager.play("progressSfx",this.progressSfx,!1,"SFX"),this.shouldHighlight&&this.highlightNode.runAction(cc.sequence(cc.fadeIn(this.highlightFadeInTime),cc.fadeOut(this.highlightFadeOutTime)).repeat(this.highlightRepeat))},e.prototype.setEmptyIcon=function(t,e){null!=this.questions&&0!=this.questions.length?t>this.questions.length?cc.error("The question number "+t+" is out of bounds of the number of questions present in the progress bar."):t<=0?cc.error("The question number cannot be zero or negative."):this.questions[t-1].getComponent(cc.Sprite).spriteFrame=e:cc.error("Question icons haven't been generated yet. Do not call this method in onLoad.")},n([c({type:cc.Integer})],e.prototype,"numberOfQuestions",void 0),n([c({type:cc.Float})],e.prototype,"lastIconPosition",void 0),n([c(cc.SpriteFrame)],e.prototype,"iconEmpty",void 0),n([c(cc.SpriteFrame)],e.prototype,"iconCorrectInFirstAttempt",void 0),n([c(cc.SpriteFrame)],e.prototype,"iconWrongInFirstAttempt",void 0),n([c({type:cc.Boolean})],e.prototype,"shouldHighlight",void 0),n([c({type:cc.AudioClip})],e.prototype,"progressSfx",void 0),n([c({type:cc.AudioClip})],e.prototype,"iconFillSfx",void 0),e=n([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../scripts/AudioManager":"AudioManager"}],SharedComponents:[function(t,e,o){"use strict";cc._RF.push(e,"47ac6gVnhRFr6Ga2a53MGOO","SharedComponents");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=s.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spr_camfovNormal=null,e.spr_camfovRed=null,e.spr_frozenice=null,e.spr_guardStatic=null,e.spr_dogStatic=null,e.spr_miniTranformerStatic=null,e}return i(e,t),e.prototype.onLoad=function(){this.tower_alarm=this.node.getChildByName("alarm"),this.tower_vertical_spot_light=this.node.getChildByName("tower_spot_light_vertical"),this.tower_horizontal_spot_light=this.node.getChildByName("tower_spot_light_horizontal"),this.scene_camera=this.node.getChildByName("scene_camera"),this.scene_bulb=this.node.getChildByName("scene_bulb"),this.scene_bulb2=this.node.getChildByName("scene_bulb2"),this.scene_lucas=this.node.getChildByName("lucas"),this.scene_dog=this.node.getChildByName("dog"),this.scene_dog_ice=this.scene_dog.getChildByName("ice"),this.scene_guard=this.node.getChildByName("guard"),this.scene_guard_ice=this.scene_guard.getChildByName("ice"),this.scene_transformer=this.node.getChildByName("tranformer"),this.scene_minitransformer1=this.node.getChildByName("minitranformer1"),this.scene_minitransformer2=this.node.getChildByName("minitranformer2")},e.prototype.start=function(){},e.prototype.InitiatializeComponents=function(t){this.node.children.forEach(function(t){t.name.includes("tower")||(t.active=!1)}),this.tower_alarm.active=!0,this.TowerAlarm(!0),this.tower_horizontal_spot_light.runAction(cc.fadeIn(.5)),this.tower_vertical_spot_light.runAction(cc.fadeOut(.5));var e=t.getChildByName("setup");e.getChildByName("campos_right")?(this.campos=e.getChildByName("campos_right").getPosition(),this.scene_camera.active=!0,this.scene_camera.getChildByName("camerastill").active=!0,this.scene_camera.getChildByName("camerastill").getChildByName("camerafov").getComponent(cc.Sprite).spriteFrame=this.spr_camfovNormal,this.CameraDestroy(0,!1,!0),this.scene_camera.scaleX=1,this.scene_camera.setPosition(this.campos)):e.getChildByName("campos_left")&&(this.campos=e.getChildByName("campos_left").getPosition(),this.scene_camera.active=!0,this.scene_camera.getChildByName("camerastill").active=!0,this.scene_camera.getChildByName("camerastill").getChildByName("camerafov").getComponent(cc.Sprite).spriteFrame=this.spr_camfovNormal,this.CameraDestroy(0,!1,!0),this.scene_camera.scaleX=-1,this.scene_camera.setPosition(this.campos)),e.getChildByName("bulbpos")&&(this.bulbpos=e.getChildByName("bulbpos").getPosition(),this.scene_bulb.active=!0,this.scene_bulb.getChildByName("bulbstill").active=!0,this.BulbDestroy(0,!0),this.scene_bulb.setPosition(this.bulbpos)),e.getChildByName("bulbpos2")&&(this.bulbpos2=e.getChildByName("bulbpos2").getPosition(),this.scene_bulb2.active=!0,this.scene_bulb2.getChildByName("bulbstill").active=!0,this.Bulb2Destroy(0,!0),this.scene_bulb2.setPosition(this.bulbpos2)),e.getChildByName("lucaspos")&&(this.lucaspos=e.getChildByName("lucaspos").getPosition(),this.scene_lucas.active=!0,this.scene_lucas.setPosition(this.lucaspos)),e.getChildByName("dogpos_right")?(this.dogpos=e.getChildByName("dogpos_right").getPosition(),this.scene_dog.active=!0,this.scene_dog.scaleX=1,this.scene_dog.setPosition(this.dogpos),this.DogAlert(0,!0)):e.getChildByName("dogpos_left")&&(this.dogpos=e.getChildByName("dogpos_left").getPosition(),this.scene_dog.active=!0,this.scene_dog.scaleX=-1,this.scene_dog.setPosition(this.dogpos),this.DogAlert(0,!0)),e.getChildByName("guardpos_right")?(this.guardpos=e.getChildByName("guardpos_right").getPosition(),this.scene_guard.active=!0,this.scene_guard.scaleX=1,this.scene_guard.setPosition(this.guardpos),this.GuardAlert(0,!0)):e.getChildByName("guardpos_left")&&(this.guardpos=e.getChildByName("guardpos_left").getPosition(),this.scene_guard.active=!0,this.scene_guard.scaleX=-1,this.scene_guard.setPosition(this.guardpos),this.GuardAlert(0,!0)),e.getChildByName("tranformer_1")&&(this.transformerpos=e.getChildByName("tranformer_1").getPosition(),this.scene_transformer.active=!0,this.scene_transformer.setPosition(this.transformerpos),this.TransformerBreakdown(0,!0)),e.getChildByName("minitranformer1pos")&&(this.minitranformer1Pos=e.getChildByName("minitranformer1pos").getPosition(),this.scene_minitransformer1.getComponent(cc.Animation).stop(),this.scene_minitransformer1.getComponent(cc.Sprite).spriteFrame=this.spr_miniTranformerStatic,this.scene_minitransformer1.active=!0,this.scene_minitransformer1.opacity=255,this.scene_minitransformer1.setPosition(this.minitranformer1Pos)),e.getChildByName("minitranformer2pos")&&(this.minitranformer2Pos=e.getChildByName("minitranformer2pos").getPosition(),this.scene_minitransformer2.active=!0,this.scene_minitransformer2.setPosition(this.minitranformer2Pos),this.scene_minitransformer2.getComponent(cc.Animation).stop(),this.scene_minitransformer2.opacity=255,this.scene_minitransformer2.getComponent(cc.Sprite).spriteFrame=this.spr_miniTranformerStatic)},e.prototype.TowerAlarm=function(t){void 0===t&&(t=!1),t?(this.tower_alarm.getComponent(cc.Animation).setCurrentTime(0),this.tower_alarm.getComponent(cc.Animation).stop()):this.tower_alarm.getComponent(cc.Animation).play()},e.prototype.LucasCaught=function(){this.TowerAlarm(),this.tower_horizontal_spot_light.runAction(cc.fadeOut(.5)),this.tower_vertical_spot_light.runAction(cc.fadeIn(.5))},e.prototype.LucasRun=function(t){this.scheduleOnce(function(){this.scene_lucas.getComponent(cc.Animation).play()}.bind(this),t)},e.prototype.CameraDestroy=function(t,e,o){void 0===e&&(e=!1),void 0===o&&(o=!1),o?(this.scene_camera.getComponent(cc.Animation).stop("camera_break_start"),this.scene_camera.getComponent(cc.Animation).stop("camera_break_loop"),this.scene_camera.getComponent(cc.Sprite).enabled=!1):(e&&(this.scene_camera.getChildByName("camerastill").getChildByName("camerafov").getComponent(cc.Sprite).spriteFrame=this.spr_camfovRed),this.scheduleOnce(function(){this.scene_camera.getChildByName("camerastill").active=!1,this.scene_camera.getComponent(cc.Sprite).enabled=!0,this.scene_camera.getComponent(cc.Animation).play("camera_break_start"),this.scheduleOnce(function(){this.scene_camera.getComponent(cc.Animation).play("camera_break_loop")}.bind(this),.9)}.bind(this),t))},e.prototype.BulbDestroy=function(t,e){void 0===e&&(e=!1),e?(console.log("Bulb_destroy_Reset"),this.scene_bulb.getComponent(cc.Animation).stop("bulb_break_start"),this.scene_bulb.getComponent(cc.Animation).stop("bulb_break_loop"),this.scene_bulb.getComponent(cc.Sprite).enabled=!1):this.scheduleOnce(function(){console.log("Bulb_destroying"),this.scene_bulb.getComponent(cc.Sprite).enabled=!0,this.scene_bulb.getChildByName("bulbstill").active=!1,this.scene_bulb.getComponent(cc.Animation).play("bulb_break_start"),this.scheduleOnce(function(){this.scene_bulb.getComponent(cc.Animation).play("bulb_break_loop")}.bind(this),.9)}.bind(this),t)},e.prototype.Bulb2Destroy=function(t,e){void 0===e&&(e=!1),e?(console.log("Bulb_destroy_Reset"),this.scene_bulb2.getComponent(cc.Animation).stop("bulb_break_start"),this.scene_bulb2.getComponent(cc.Animation).stop("bulb_break_loop"),this.scene_bulb2.getComponent(cc.Sprite).enabled=!1):this.scheduleOnce(function(){console.log("Bulb_destroying"),this.scene_bulb2.getComponent(cc.Sprite).enabled=!0,this.scene_bulb2.getChildByName("bulbstill").active=!1,this.scene_bulb2.getComponent(cc.Animation).play("bulb_break_start"),this.scheduleOnce(function(){this.scene_bulb2.getComponent(cc.Animation).play("bulb_break_loop")}.bind(this),.9)}.bind(this),t)},e.prototype.TransformerBreakdown=function(t,e){void 0===e&&(e=!1),e?(console.log("Transformer_Reset"),this.scene_transformer.getChildByName("transformerice").active=!0,this.scene_transformer.getComponent(cc.Animation).stop("transformer_break_start"),this.scene_transformer.getComponent(cc.Animation).stop("transformer_break_loop")):this.scheduleOnce(function(){console.log("Transformer_BreakingDown"),this.scene_transformer.getComponent(cc.Animation).play("transformer_break_start"),this.scene_transformer.getChildByName("transformerice").active=!1,this.scheduleOnce(function(){this.scene_transformer.getComponent(cc.Animation).play("transformer_break_loop")}.bind(this),.9)}.bind(this),t)},e.prototype.MiniTransformer1Break=function(t){this.scheduleOnce(function(){console.log("Transformer_BreakingDown"),this.scene_minitransformer1.getComponent(cc.Animation).play()}.bind(this),t)},e.prototype.MiniTransformer2Break=function(t){this.scheduleOnce(function(){console.log("Transformer_BreakingDown"),this.scene_minitransformer2.getComponent(cc.Animation).play()}.bind(this),t)},e.prototype.GuardStun=function(t,e){void 0===e&&(e=!1),e?(this.scene_guard.getComponent(cc.Animation).stop("gurad_stun"),this.scene_guard.getComponent(cc.Animation).setCurrentTime(0),this.scene_guard_ice.active=!0,this.scene_guard_ice.opacity=255,this.scene_guard_ice.setPosition(0,275),this.scene_guard_ice.getComponent(cc.Sprite).spriteFrame=this.spr_frozenice):this.scheduleOnce(function(){console.log("gurad_stun"),this.scene_guard_ice.active=!1,this.scene_guard.getComponent(cc.Animation).play("gurad_stun")}.bind(this),t)},e.prototype.GuardAlert=function(t,e){void 0===e&&(e=!1),e?(this.scene_guard.getComponent(cc.Animation).stop(),this.scene_guard.getComponent(cc.Animation).setCurrentTime(0),this.scene_guard_ice.active=!0,this.scene_guard_ice.opacity=255,this.scene_guard_ice.setPosition(0,275),this.scene_guard_ice.getComponent(cc.Sprite).spriteFrame=this.spr_frozenice,console.log("guard_alert ,",this.scene_guard_ice),this.scene_guard.getComponent(cc.Sprite).spriteFrame=this.spr_guardStatic):this.scheduleOnce(function(){console.log("guard_alert"),this.scene_guard_ice.getComponent(cc.Animation).play(),this.scene_guard.getComponent(cc.Animation).play("guard_alert"),this.scene_guard.runAction(cc.moveBy(.5,cc.v2(-75,0))),this.scene_guard_ice.runAction(cc.moveBy(.5,cc.v2(-75,0)))}.bind(this),t)},e.prototype.GuardShouting=function(t,e){void 0===e&&(e=!1),e?(this.scene_guard.getComponent(cc.Animation).stop("guard_shouting"),this.scene_guard.getComponent(cc.Animation).setCurrentTime(0),this.scene_guard_ice.active=!0,this.scene_guard_ice.opacity=255,this.scene_guard_ice.setPosition(0,275),this.scene_guard_ice.getComponent(cc.Sprite).spriteFrame=this.spr_frozenice,this.scene_guard.getComponent(cc.Sprite).spriteFrame=this.spr_guardStatic):this.scheduleOnce(function(){console.log("guard_shouting"),this.scene_guard_ice.getComponent(cc.Animation).play(),this.scene_guard.getComponent(cc.Animation).play("guard_shouting")}.bind(this),t)},e.prototype.DogStun=function(t,e){void 0===e&&(e=!1),e?(this.scene_dog.getComponent(cc.Animation).stop("dog_stun"),this.scene_dog.getComponent(cc.Animation).setCurrentTime(0),this.scene_dog_ice.active=!0,this.scene_dog_ice.opacity=255,this.scene_dog_ice.setPosition(0,275),this.scene_dog_ice.getComponent(cc.Sprite).spriteFrame=this.spr_frozenice,this.scene_dog.getComponent(cc.Sprite).spriteFrame=this.spr_dogStatic):this.scheduleOnce(function(){console.log("dog_stun"),this.scene_dog_ice.active=!1,this.scene_dog.getComponent(cc.Animation).play("dog_stun")}.bind(this),t)},e.prototype.DogAlert=function(t,e){void 0===e&&(e=!1),e?(this.scene_dog.getComponent(cc.Animation).stop("dog_alert"),this.scene_dog.getComponent(cc.Animation).setCurrentTime(0),this.scene_dog_ice.active=!0,this.scene_dog_ice.opacity=255,this.scene_dog_ice.setPosition(0,275),this.scene_dog_ice.getComponent(cc.Sprite).spriteFrame=this.spr_frozenice,this.scene_dog.getComponent(cc.Sprite).spriteFrame=this.spr_dogStatic):this.scheduleOnce(function(){console.log("dog_alert"),this.scene_dog_ice.getComponent(cc.Animation).play(),this.scene_dog.getComponent(cc.Animation).play("dog_alert"),this.scene_dog.runAction(cc.moveBy(.5,cc.v2(-75,0))),this.scene_dog_ice.runAction(cc.moveBy(.5,cc.v2(-75,0)))}.bind(this),t)},e.prototype.DogBarking=function(t,e){void 0===e&&(e=!1),e?(this.scene_dog.getComponent(cc.Animation).stop("dog_bark"),this.scene_dog.getComponent(cc.Animation).setCurrentTime(0),this.scene_dog_ice.active=!0,this.scene_dog_ice.opacity=255,this.scene_dog_ice.setPosition(0,275),this.scene_dog_ice.getComponent(cc.Sprite).spriteFrame=this.spr_frozenice,this.scene_dog.getComponent(cc.Sprite).spriteFrame=this.spr_dogStatic):this.scheduleOnce(function(){console.log("dog_bark"),this.scene_dog_ice.getComponent(cc.Animation).play(),this.scene_dog.getComponent(cc.Animation).play("dog_bark")}.bind(this),t)},n([a(cc.SpriteFrame)],e.prototype,"spr_camfovNormal",void 0),n([a(cc.SpriteFrame)],e.prototype,"spr_camfovRed",void 0),n([a(cc.SpriteFrame)],e.prototype,"spr_frozenice",void 0),n([a(cc.SpriteFrame)],e.prototype,"spr_guardStatic",void 0),n([a(cc.SpriteFrame)],e.prototype,"spr_dogStatic",void 0),n([a(cc.SpriteFrame)],e.prototype,"spr_miniTranformerStatic",void 0),e=n([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],StepType_Empty:[function(t,e,o){"use strict";cc._RF.push(e,"1d46b/t/4BJtL4dDCVCbis2","StepType_Empty");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../StepsController"),r=t("../UIManager"),a=cc._decorator,c=a.ccclass,p=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isShowHints=!1,e}return i(e,t),e.prototype.onLoad=function(){this.scr_UIManager=this.node.getComponent(r.default),this.scr_stepController=this.node.getComponent(s.default)},e.prototype.initialise=function(t){this.scr_UIManager.hideFooterText(),this.scr_UIManager.hideHeaderText(),t.autoNext&&this.scheduleOnce(function(){this.scr_stepController.loadNextStep()}.bind(this),t.duration),t.hasOwnProperty("isShowHints")?this.isShowHints=t.isShowHints:this.isShowHints=!1,this.scr_UIManager.setActiveHintButton(this.isShowHints)},e=n([c],e)}(cc.Component));o.default=p,cc._RF.pop()},{"../StepsController":"StepsController","../UIManager":"UIManager"}],StepType_Info:[function(t,e,o){"use strict";cc._RF.push(e,"8cc95XDAmlCzaJPO8T8GhoY","StepType_Info");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../AudioManager"),r=t("../StepsController"),a=t("../UIManager"),c=cc._decorator,p=c.ccclass,l=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isShowHints=!1,e}return i(e,t),e.prototype.onLoad=function(){this.scr_UIManager=this.node.getComponent(a.default),this.scr_stepController=this.node.getComponent(r.default),this.audioManager=this.node.getComponent(s.default)},e.prototype.initialise=function(t){var e=1;t.hasOwnProperty("delay")&&(e=t.delay),this.scheduleOnce(function(){t.hasOwnProperty("text")&&this.scr_UIManager.showHeaderText(t.text),t.hasOwnProperty("lineHeight")?this.scr_UIManager.setHeaderLineHeight(t.lineHeight):this.scr_UIManager.setHeaderLineHeight(),this.scheduleOnce(function(){this.playAudio(t.audioFile)}.bind(this),1),t.autoNext&&this.scheduleOnce(function(){this.scr_stepController.loadNextStep()}.bind(this),t.duration)}.bind(this),e),t.hasOwnProperty("isShowHints")?this.isShowHints=t.isShowHints:this.isShowHints=!1,this.scr_UIManager.setActiveHintButton(this.isShowHints)},e.prototype.playAudio=function(t){cc.loader.loadRes(t,cc.AudioClip,function(t,e){t?cc.warn(t.message||t):this.audioManager.play(e.name,e,!1,"VO")}.bind(this))},e=n([p],e)}(cc.Component));o.default=l,cc._RF.pop()},{"../AudioManager":"AudioManager","../StepsController":"StepsController","../UIManager":"UIManager"}],StepType_Question_1:[function(t,e,o){"use strict";cc._RF.push(e,"25c4f8Oc4tNYJXfcEPSVBja","StepType_Question_1");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../AnalyticsManager"),r=t("../AudioManager"),a=t("../UIManager"),c=t("../StepsController"),p=cc._decorator,l=p.ccclass,h=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lastOptionDropped=0,e.isAutoShowNextButton=!0,e.isAutoPlayFeedback=!0,e.isShowHints=!1,e}return i(e,t),e.prototype.onLoad=function(){this.scr_uiManager=this.node.getComponent(a.default),this.audioManager=this.node.getComponent(r.default),this.scr_analyticsManager=this.node.getComponent(s.default),this.scr_stepsController=this.node.getComponent(c.default),this.node.on("OnCommonButtonClick",this.onCommonButtonClick.bind(this))},e.prototype.initialise=function(t){this.node.emit("OnQuestionStart",{questionIndex:t.questionNumber}),this.currentStepJsonData=t;var e=1;t.hasOwnProperty("delay")&&(e=t.delay),t.hasOwnProperty("isAutoShowNextButton")?this.isAutoShowNextButton=t.isAutoShowNextButton:this.isAutoShowNextButton=!0,this.scheduleOnce(function(){this.scr_uiManager.showHeaderText(t.question.text),this.scheduleOnce(function(){this.playAudio(t.question.audioFile)}.bind(this),1)}.bind(this),e),this.currentStepJsonData.hasOwnProperty("isAutoPlayFeedback")&&(this.isAutoPlayFeedback=this.currentStepJsonData.isAutoPlayFeedback),t.hasOwnProperty("isShowHints")?this.isShowHints=t.isShowHints:this.isShowHints=!1,this.scr_uiManager.setActiveHintButton(this.isShowHints),t.hasOwnProperty("hints")&&this.scr_uiManager.populateHints(t.hints)},e.prototype.onOptionDragStarted=function(t){var e=t.optionName;this.currentStepJsonData.questionNumber,this.currentStepJsonData.userInput.indexOf(e)},e.prototype.onOptionDropped=function(t){var e=t.optionName,o=(this.currentStepJsonData.questionNumber,this.currentStepJsonData.userInput.indexOf(e));if(this.lastOptionDropped=o,1==this.currentStepJsonData.answer.length)if(e==this.currentStepJsonData.answer){if(this.node.emit("OnAnswerVerification",{isCorrect:!0,answer:e}),this.isAutoPlayFeedback)if(Array.isArray(this.currentStepJsonData.feedBack[o].text))for(var i=this.currentStepJsonData.feedBack[o],n=0,s=function(t){r.scheduleOnce(function(e,n){void 0===n&&(n=t),n<i.text.length&&(i.text[n].length>1?void 0!==i.headerText?this.scr_uiManager.showFooterText(i.text[n],i.headerText[n]):this.scr_uiManager.showFooterText(i.text[n]):this.scr_uiManager.hideFooterText(),this.playAudio(this.currentStepJsonData.feedBack[o].audioFile[n])),n==i.text.length-1&&this.scheduleOnce(function(){this.isAutoShowNextButton&&this.scr_uiManager.setActiveNextButton(!0),this.node.emit("OnFeedbackPlayComplete",{})}.bind(this),this.currentStepJsonData.feedBack[o].duration[n])}.bind(r),n),n+=r.currentStepJsonData.feedBack[o].duration[t]},r=this,a=0;a<i.text.length;a++)s(a);else this.scr_uiManager.showFooterText(this.currentStepJsonData.feedBack[o].text,this.currentStepJsonData.feedBack[o].headerText),this.playAudio(this.currentStepJsonData.feedBack[o].audioFile),this.scheduleOnce(function(){this.isAutoShowNextButton&&this.scr_uiManager.setActiveNextButton(!0),this.node.emit("OnFeedbackPlayComplete",{})}.bind(this),this.currentStepJsonData.feedBack[o].duration)}else if(this.node.emit("OnAnswerVerification",{isCorrect:!1,answer:e}),this.isAutoPlayFeedback)if(Array.isArray(this.currentStepJsonData.feedBack[o].text)){var c=this.currentStepJsonData.feedBack[o],p=(n=0,function(t){l.scheduleOnce(function(e,i){void 0===i&&(i=t),i<c.text.length&&(c.text[i].length>1?void 0!==c.headerText?this.scr_uiManager.showFooterText(c.text[i],c.headerText[i]):this.scr_uiManager.showFooterText(c.text[i]):this.scr_uiManager.hideFooterText(),this.playAudio(this.currentStepJsonData.feedBack[o].audioFile[i])),i==c.text.length-1&&this.scheduleOnce(function(){this.isAutoShowNextButton&&this.scr_uiManager.setActiveTryAgainButton(!0),this.node.emit("OnFeedbackPlayComplete",{})}.bind(this),this.currentStepJsonData.feedBack[o].duration[i])}.bind(l),n),n+=l.currentStepJsonData.feedBack[o].duration[t]}),l=this;for(a=0;a<c.text.length;a++)p(a)}else this.scr_uiManager.showFooterText(this.currentStepJsonData.feedBack[o].text,this.currentStepJsonData.feedBack[o].headerText),this.playAudio(this.currentStepJsonData.feedBack[o].audioFile),this.scheduleOnce(function(){this.isAutoShowNextButton&&this.scr_uiManager.setActiveTryAgainButton(!0),this.node.emit("OnFeedbackPlayComplete",{})}.bind(this),this.currentStepJsonData.feedBack[o].duration)},e.prototype.onOptionTap=function(t){var e=t.optionName,o=(this.currentStepJsonData.questionNumber,this.currentStepJsonData.userInput.indexOf(e));if(this.lastOptionDropped=o,1==this.currentStepJsonData.answer.length)if(e==this.currentStepJsonData.answer)if(this.node.emit("OnAnswerVerification",{isCorrect:!0,answer:e}),Array.isArray(this.currentStepJsonData.feedBack[o].text))for(var i=this.currentStepJsonData.feedBack[o],n=0,s=function(t){r.scheduleOnce(function(e,n){void 0===n&&(n=t),n<i.text.length&&(i.text[n].length>1?void 0!==i.headerText?this.scr_uiManager.showFooterText(i.text[n],i.headerText[n]):this.scr_uiManager.showFooterText(i.text[n]):this.scr_uiManager.hideFooterText(),this.playAudio(this.currentStepJsonData.feedBack[o].audioFile[n])),n==i.text.length-1&&this.scheduleOnce(function(){this.isAutoShowNextButton&&this.scr_uiManager.setActiveNextButton(!0),this.node.emit("OnFeedbackPlayComplete",{})}.bind(this),this.currentStepJsonData.feedBack[o].duration[n])}.bind(r),n),n+=r.currentStepJsonData.feedBack[o].duration[t]},r=this,a=0;a<i.text.length;a++)s(a);else this.scr_uiManager.showFooterText(this.currentStepJsonData.feedBack[o].text,this.currentStepJsonData.feedBack[o].headerText),this.playAudio(this.currentStepJsonData.feedBack[o].audioFile),this.scheduleOnce(function(){this.isAutoShowNextButton&&this.scr_uiManager.setActiveNextButton(!0),this.node.emit("OnFeedbackPlayComplete",{})}.bind(this),this.currentStepJsonData.feedBack[o].duration);else if(this.node.emit("OnAnswerVerification",{isCorrect:!1,answer:e}),Array.isArray(this.currentStepJsonData.feedBack[o].text)){var c=this.currentStepJsonData.feedBack[o],p=(n=0,function(t){l.scheduleOnce(function(e,i){void 0===i&&(i=t),i<c.text.length&&(c.text[i].length>1?void 0!==c.headerText?this.scr_uiManager.showFooterText(c.text[i],c.headerText[i]):this.scr_uiManager.showFooterText(c.text[i]):this.scr_uiManager.hideFooterText(),this.playAudio(this.currentStepJsonData.feedBack[o].audioFile[i])),i==c.text.length-1&&this.scheduleOnce(function(){this.isAutoShowNextButton&&this.scr_uiManager.setActiveTryAgainButton(!0),this.node.emit("OnFeedbackPlayComplete",{})}.bind(this),this.currentStepJsonData.feedBack[o].duration[i])}.bind(l),n),n+=l.currentStepJsonData.feedBack[o].duration[t]}),l=this;for(a=0;a<c.text.length;a++)p(a)}else this.scr_uiManager.showFooterText(this.currentStepJsonData.feedBack[o].text,this.currentStepJsonData.feedBack[o].headerText),this.playAudio(this.currentStepJsonData.feedBack[o].audioFile),this.scheduleOnce(function(){this.isAutoShowNextButton&&this.scr_uiManager.setActiveTryAgainButton(!0),this.node.emit("OnFeedbackPlayComplete",{})}.bind(this),this.currentStepJsonData.feedBack[o].duration)},e.prototype.onCommonButtonClick=function(t){void 0!=this.currentStepJsonData&&this.currentStepJsonData.questionNumber===this.scr_stepsController.getCurrentQuestionIndex()&&(this.scr_uiManager.CommonButtonType.NextQuestion==t?(this.scr_uiManager.hideHeaderText(),this.scr_analyticsManager.sendNextQuestionStart(this.scr_stepsController.getCurrentQuestionIndex(),!1,this.scr_analyticsManager.Phylum.Click),this.audioManager.stopVOAudios()):this.scr_uiManager.CommonButtonType.TryAgain==t&&(this.scr_analyticsManager.sendOnTryAgain(this.scr_stepsController.getCurrentQuestionIndex(),this.lastOptionDropped+1),this.audioManager.stopVOAudios()))},e.prototype.playAudio=function(t){cc.loader.loadRes(t,cc.AudioClip,function(t,e){t?cc.warn(t.message||t):this.audioManager.play(e.name,e,!1,"VO")}.bind(this))},e.prototype.playFeedback=function(t,e,o,i){var n=this.currentStepJsonData.feedBack[t[0]];void 0!==n.headerText?this.scr_uiManager.showFooterText(n.text,n.headerText):this.scr_uiManager.showFooterText(n.text),this.scheduleOnce(function(){i&&this.playAudio(this.currentStepJsonData.feedBack[t[0]].audioFile)}.bind(this),1),t.length>1?this.scheduleOnce(function(){t.shift();this.playFeedback(t,e,o,i)}.bind(this),n.duration):this.scheduleOnce(function(){this.isAutoShowNextButton&&(e?this.scr_uiManager.setActiveNextButton(!0):this.scr_uiManager.setActiveTryAgainButton(!0)),this.node.emit("OnFeedbackPlayComplete",{}),o&&this.scr_uiManager.hideFooterText()}.bind(this),n.duration)},e=n([l],e)}(cc.Component));o.default=h,cc._RF.pop()},{"../AnalyticsManager":"AnalyticsManager","../AudioManager":"AudioManager","../StepsController":"StepsController","../UIManager":"UIManager"}],StepType_Question_2:[function(t,e,o){"use strict";cc._RF.push(e,"2cb95SbHjND1qlskjjuOG7+","StepType_Question_2");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../AnalyticsManager"),r=t("../AudioManager"),a=t("../UIManager"),c=t("../StepsController"),p=cc._decorator,l=p.ccclass,h=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lastOptionDropped=0,e.isAutoPlayFeedback=!0,e.isAutoShowNextButton=!0,e.isShowHints=!1,e}return i(e,t),e.prototype.onLoad=function(){this.scr_uiManager=this.node.getComponent(a.default),this.audioManager=this.node.getComponent(r.default),this.scr_analyticsManager=this.node.getComponent(s.default),this.scr_stepsController=this.node.getComponent(c.default),this.node.on("OnCommonButtonClick",this.onCommonButtonClick.bind(this))},e.prototype.initialise=function(t){this.node.emit("OnQuestionStart",{questionIndex:t.questionNumber}),this.currentStepJsonData=t;var e=1;t.hasOwnProperty("delay")&&(e=t.delay),t.hasOwnProperty("isAutoShowNextButton")&&(this.isAutoShowNextButton=t.isAutoShowNextButton),this.scheduleOnce(function(){this.scr_uiManager.showHeaderText(t.question.text),this.scheduleOnce(function(){this.playAudio(t.question.audioFile)}.bind(this),1)}.bind(this),e),this.currentStepJsonData.hasOwnProperty("isAutoPlayFeedback")&&(this.isAutoPlayFeedback=this.currentStepJsonData.isAutoPlayFeedback),t.hasOwnProperty("isShowHints")?this.isShowHints=t.isShowHints:this.isShowHints=!1,this.scr_uiManager.setActiveHintButton(this.isShowHints),t.hasOwnProperty("hints")&&this.scr_uiManager.populateHints(t.hints)},e.prototype.onCommonButtonClick=function(t){void 0!=this.currentStepJsonData&&this.currentStepJsonData.questionNumber===this.scr_stepsController.getCurrentQuestionIndex()&&(this.scr_uiManager.CommonButtonType.NextQuestion==t?(this.scr_uiManager.hideHeaderText(),this.scr_analyticsManager.sendNextQuestionStart(this.scr_stepsController.getCurrentQuestionIndex(),!1,this.scr_analyticsManager.Phylum.Click)):this.scr_uiManager.CommonButtonType.TryAgain==t&&this.scr_analyticsManager.sendOnTryAgain(this.scr_stepsController.getCurrentQuestionIndex(),this.lastOptionDropped+1))},e.prototype.playAudio=function(t){cc.loader.loadRes(t,cc.AudioClip,function(t,e){t?cc.warn(t.message||t):this.audioManager.play(e.name,e,!1,"VO")}.bind(this))},e.prototype.onOptionDragStarted=function(t){t.optionName;var e=this.currentStepJsonData.questionNumber,o=t.optionIndex,i="not_applicable";void 0!=t.isCorrect&&(i=t.isCorrect),this.scr_analyticsManager.sendOnOptionDrag(e,o,i)},e.prototype.onOptionDropped=function(t){t.optionName;var e=this.currentStepJsonData.questionNumber,o=t.optionIndex;this.lastOptionDropped=o;var i="";if(i=t.isCorrect?"correct":"incorrect",void 0!=t.totalDropzones&&t.totalDropzones>1&&(i+=","+t.totalDropzones+","+t.dropZone+","+t.dropCountInCurrentZone+","+t.isDropCompletedInCurrentZone),this.scr_analyticsManager.sendOnOptionDrop(e,o,i),t.isAllDropComplete&&1==this.currentStepJsonData.answer.length)if(t.finalValue==this.currentStepJsonData.answer){if(this.node.emit("OnAnswerVerification",{isCorrect:!0,answer:t.finalValue}),this.isAutoPlayFeedback)if(Array.isArray(this.currentStepJsonData.feedBack[o].text)){var n=0,s=this.currentStepJsonData.feedBack[o];void 0!==s.headerText?this.scr_uiManager.showFooterText(s.text[n],s.headerText[n]):this.scr_uiManager.showFooterText(s.text[n]),this.playAudio(this.currentStepJsonData.feedBack[o].audioFile[n]),n++,this.schedule(function(){void 0!==s.headerText?this.scr_uiManager.showFooterText(s.text[n],s.headerText[n]):this.scr_uiManager.showFooterText(s.text[n]),this.playAudio(this.currentStepJsonData.feedBack[o].audioFile[n]),n==s.text.length-1&&this.scheduleOnce(function(){this.isAutoShowNextButton&&this.scr_uiManager.setActiveNextButton(!0)}.bind(this),this.currentStepJsonData.feedBack[o].duration),n++}.bind(this),s.duration[n],s.text.length-1,0)}else this.scr_uiManager.showFooterText(this.currentStepJsonData.feedBack[o].text,this.currentStepJsonData.feedBack[o].headerText),this.playAudio(this.currentStepJsonData.feedBack[o].audioFile),this.scheduleOnce(function(){this.isAutoShowNextButton&&this.scr_uiManager.setActiveNextButton(!0)}.bind(this),this.currentStepJsonData.feedBack[o].duration)}else if(this.node.emit("OnAnswerVerification",{isCorrect:!1,answer:t.finalValue}),this.isAutoPlayFeedback)if(Array.isArray(this.currentStepJsonData.feedBack[o].text)){var r=0,a=this.currentStepJsonData.feedBack[o];void 0!==a.headerText?this.scr_uiManager.showFooterText(a.text[r],a.headerText[r]):this.scr_uiManager.showFooterText(a.text[r]),this.playAudio(this.currentStepJsonData.feedBack[o].audioFile[r]),r++,this.schedule(function(){r<a.text.length&&(void 0!==a.headerText?this.scr_uiManager.showFooterText(a.text[r],a.headerText[r]):this.scr_uiManager.showFooterText(a.text[r]),this.playAudio(this.currentStepJsonData.feedBack[o].audioFile[r])),r==a.text.length-1&&this.scheduleOnce(function(){this.isAutoShowNextButton&&this.scr_uiManager.setActiveTryAgainButton(!0)}.bind(this),a.duration[r]),r++}.bind(this),a.duration[r],a.text.length-1)}else this.scr_uiManager.showFooterText(this.currentStepJsonData.feedBack[o].text,this.currentStepJsonData.feedBack[o].headerText),this.playAudio(this.currentStepJsonData.feedBack[o].audioFile),this.scheduleOnce(function(){this.isAutoShowNextButton&&this.scr_uiManager.setActiveTryAgainButton(!0)}.bind(this),this.currentStepJsonData.feedBack[o].duration)},e.prototype.playFeedback=function(t,e,o,i){var n=this.currentStepJsonData.feedBack[t[0]];void 0!==n.headerText?this.scr_uiManager.showFooterText(n.text,n.headerText):this.scr_uiManager.showFooterText(n.text),this.scheduleOnce(function(){i&&this.playAudio(this.currentStepJsonData.feedBack[t[0]].audioFile)}.bind(this),1),t.length>1?this.scheduleOnce(function(){t.shift();this.playFeedback(t,e,o,i)}.bind(this),n.duration):this.scheduleOnce(function(){this.isAutoShowNextButton&&(e?this.scr_uiManager.setActiveNextButton(!0):this.scr_uiManager.setActiveTryAgainButton(!0)),this.node.emit("OnFeedbackPlayComplete",{}),o&&this.scr_uiManager.hideFooterText()}.bind(this),n.duration)},e=n([l],e)}(cc.Component));o.default=h,cc._RF.pop()},{"../AnalyticsManager":"AnalyticsManager","../AudioManager":"AudioManager","../StepsController":"StepsController","../UIManager":"UIManager"}],StepType_Question_3:[function(t,e,o){"use strict";cc._RF.push(e,"f2356pn5cNBJqnobvp3YK/D","StepType_Question_3");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../AnalyticsManager"),r=t("../AudioManager"),a=t("../UIManager"),c=t("../StepsController"),p=cc._decorator,l=p.ccclass,h=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isShowHints=!1,e}return i(e,t),e.prototype.onLoad=function(){this.scr_uiManager=this.node.getComponent(a.default),this.scr_audioManager=this.node.getComponent(r.default),this.scr_analyticsManager=this.node.getComponent(s.default),this.scr_stepsController=this.node.getComponent(c.default),this.node.on("OnCommonButtonClick",this.onCommonButtonClick.bind(this))},e.prototype.initialise=function(t){this.node.emit("OnQuestionStart",{questionIndex:t.questionNumber}),this.currentStepJsonData=t;var e=1;t.hasOwnProperty("delay")&&(e=t.delay),this.scheduleOnce(function(){t.hasOwnProperty("question")&&(this.scr_uiManager.showHeaderText(t.question.text),t.question.hasOwnProperty("lineHeight")?this.scr_uiManager.setHeaderLineHeight(t.question.lineHeight):this.scr_uiManager.setHeaderLineHeight(),this.scheduleOnce(function(){this.playAudio(t.question.audioFile)}.bind(this),1))}.bind(this),e),t.hasOwnProperty("isShowHints")?this.isShowHints=t.isShowHints:this.isShowHints=!1,this.scr_uiManager.setActiveHintButton(this.isShowHints),t.hasOwnProperty("hints")&&(this.scr_uiManager.populateHints(t.hints),t.hints.hasOwnProperty("autoHighlight")&&t.hints.autoHighlight&&this.scheduleOnce(function(){this.scr_uiManager.animateHintHighlight()}.bind(this),t.hints.highlightDelay))},e.prototype.playAudio=function(t){cc.loader.loadRes(t,cc.AudioClip,function(t,e){t?cc.warn(t.message||t):this.scr_audioManager.play(e.name,e,!1,"VO")}.bind(this))},e.prototype.playFeedback=function(t,e,o,i){var n=this.currentStepJsonData.feedBack[t[0]];void 0!==n.headerText?this.scr_uiManager.showFooterText(n.text,n.headerText):this.scr_uiManager.showFooterText(n.text),n.hasOwnProperty("lineHeight")?this.scr_uiManager.setFooterLineHeight(n.lineHeight):this.scr_uiManager.setFooterLineHeight(),this.scheduleOnce(function(){i&&this.playAudio(this.currentStepJsonData.feedBack[t[0]].audioFile)}.bind(this),1),t.length>1?this.scheduleOnce(function(){t.shift();this.scr_uiManager.hideFooterText(),this.scheduleOnce(function(){this.playFeedback(t,e,o,i)}.bind(this),1)}.bind(this),n.duration):this.scheduleOnce(function(){this.node.emit("OnFeedbackPlayComplete",{}),o&&this.scr_uiManager.hideFooterText()}.bind(this),n.duration)},e.prototype.onCommonButtonClick=function(t){void 0!=this.currentStepJsonData&&void 0!==this.scr_stepsController.getCurrentStepJson()&&this.currentStepJsonData.type===this.scr_stepsController.getCurrentStepJson().type&&(this.scr_uiManager.CommonButtonType.NextQuestion==t?this.scr_audioManager.stopVOAudios():this.scr_uiManager.CommonButtonType.TryAgain==t&&this.scr_audioManager.stopVOAudios())},e=n([l],e)}(cc.Component));o.default=h,cc._RF.pop()},{"../AnalyticsManager":"AnalyticsManager","../AudioManager":"AudioManager","../StepsController":"StepsController","../UIManager":"UIManager"}],StepType_Question_4:[function(t,e,o){"use strict";cc._RF.push(e,"9833eUtI9tIx71aRMW0kjlj","StepType_Question_4");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../AnalyticsManager"),r=t("../AudioManager"),a=t("../UIManager"),c=t("../StepsController"),p=cc._decorator,l=p.ccclass,h=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isShowHints=!1,e}return i(e,t),e.prototype.onLoad=function(){this.scr_uiManager=this.node.getComponent(a.default),this.scr_audioManager=this.node.getComponent(r.default),this.scr_analyticsManager=this.node.getComponent(s.default),this.scr_stepsController=this.node.getComponent(c.default),this.node.on("OnCommonButtonClick",this.onCommonButtonClick.bind(this))},e.prototype.initialise=function(t){this.node.emit("OnQuestionStart",{questionIndex:t.questionNumber}),this.currentStepJsonData=t;var e=1;t.hasOwnProperty("delay")&&(e=t.delay),this.scheduleOnce(function(){this.scr_uiManager.showHeaderText(t.question.text),this.scheduleOnce(function(){this.playAudio(t.question.audioFile)}.bind(this),1)}.bind(this),e),t.hasOwnProperty("isShowHints")?this.isShowHints=t.isShowHints:this.isShowHints=!1,this.scr_uiManager.setActiveHintButton(this.isShowHints),t.hasOwnProperty("hints")&&this.scr_uiManager.populateHints(t.hints)},e.prototype.playAudio=function(t){cc.loader.loadRes(t,cc.AudioClip,function(t,e){t?cc.warn(t.message||t):this.scr_audioManager.play(e.name,e,!1,"VO")}.bind(this))},e.prototype.playFeedback=function(t,e,o,i){var n=this.currentStepJsonData.feedBack[t[0]];this.scr_uiManager.showHeaderText(n.text),this.scheduleOnce(function(){i&&this.playAudio(this.currentStepJsonData.feedBack[t[0]].audioFile)}.bind(this),1),t.length>1?this.scheduleOnce(function(){t.shift();this.scr_uiManager.hideHeaderText(),this.scheduleOnce(function(){this.playFeedback(t,e,o,i)}.bind(this),1)}.bind(this),n.duration):this.scheduleOnce(function(){this.node.emit("OnFeedbackPlayComplete",{}),o&&this.scr_uiManager.hideHeaderText()}.bind(this),n.duration)},e.prototype.onCommonButtonClick=function(t){void 0!=this.currentStepJsonData&&void 0!==this.scr_stepsController.getCurrentStepJson()&&this.currentStepJsonData.type===this.scr_stepsController.getCurrentStepJson().type&&(this.scr_uiManager.CommonButtonType.NextQuestion==t?this.scr_audioManager.stopVOAudios():this.scr_uiManager.CommonButtonType.TryAgain==t&&this.scr_audioManager.stopVOAudios())},e.prototype.playQuestion=function(t){void 0===t&&(t=!0),this.scr_uiManager.showHeaderText(this.currentStepJsonData.question.text),t&&this.scheduleOnce(function(){this.playAudio(this.currentStepJsonData.question.audioFile)}.bind(this),1)},e=n([l],e)}(cc.Component));o.default=h,cc._RF.pop()},{"../AnalyticsManager":"AnalyticsManager","../AudioManager":"AudioManager","../StepsController":"StepsController","../UIManager":"UIManager"}],StepsController:[function(t,e,o){"use strict";cc._RF.push(e,"8883ePC5M5Dn4rmlEzgNlVu","StepsController");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./AnalyticsManager"),r=t("./stepsTypes/StepType_Empty"),a=t("./stepsTypes/StepType_Info"),c=t("./stepsTypes/StepType_Question_1"),p=t("./stepsTypes/StepType_Question_2"),l=t("./stepsTypes/StepType_Question_3"),h=t("./stepsTypes/StepType_Question_4"),d=t("./UIManager"),u=cc._decorator,g=u.ccclass,y=(u.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentStep=0,e.currentQuestionIndex=1,e}return i(e,t),e.prototype.onLoad=function(){this.scr_StepType_Empty=this.node.getComponent(r.default),this.scr_StepType_Info=this.node.getComponent(a.default),this.scr_StepType_Question_1=this.node.getComponent(c.default),this.scr_StepType_Question_2=this.node.getComponent(p.default),this.scr_StepType_Question_3=this.node.getComponent(l.default),this.scr_StepType_Question_4=this.node.getComponent(h.default),this.scr_analyticsManager=this.node.getComponent(s.default),this.scr_uiManager=this.node.getComponent(d.default)},e.prototype.Initialise=function(t){this.loadJsonFile(t),this.scr_analyticsManager.sendInteractionStart()},e.prototype.loadJsonFile=function(t){cc.loader.loadRes(t+"/storyBoard",Object,function(e,o){if(e){var i=this.getLanguageVersionOfName(t);""!=i?this.loadJsonFile(i):cc.error(e.message||e)}else this.jsonData=o.json,this.jsonData.uiElements.hasOwnProperty("gameStartScreen")||this.onJsonLoadComplete(),this.node.emit("OnJsonLoadComplete",this.jsonData)}.bind(this))},e.prototype.getLanguageVersionOfName=function(t){var e="",o=t.substring(2,4);switch(console.log("languageCode---",o),o){case"PL":case"SE":e=t.replace(o,"IN")}return console.log("converetedGameName---",e),e},e.prototype.onJsonLoadComplete=function(){this.loadNextStep(0)},e.prototype.loadNextStep=function(t){void 0===t&&(t=-1),this.scr_uiManager.hidePreviousStepUIElements(),this.scheduleOnce(function(){-1==t?this.currentStep++:this.currentStep=t,this.currentStep<this.jsonData.steps.length?(this.showCurrentStepDetails(this.currentStep),this.node.emit("OnLoadStep",this.currentStep)):this.onAllStepsComplete()}.bind(this),1.3)},e.prototype.showCurrentStepDetails=function(t){switch(this.jsonData.steps[t].type){case"empty":this.scr_currentStep=this.scr_StepType_Empty,this.scr_StepType_Empty.initialise(this.jsonData.steps[t]);break;case"info":this.scr_currentStep=this.scr_StepType_Info,this.scr_StepType_Info.initialise(this.jsonData.steps[t]);break;case"question_type_1":this.scr_currentStep=this.scr_StepType_Question_1,this.currentQuestionIndex=this.jsonData.steps[t].questionNumber,this.scr_StepType_Question_1.initialise(this.jsonData.steps[t]);break;case"question_type_2":this.scr_currentStep=this.scr_StepType_Question_2,this.currentQuestionIndex=this.jsonData.steps[t].questionNumber,this.scr_StepType_Question_2.initialise(this.jsonData.steps[t]);break;case"question_type_3":this.scr_currentStep=this.scr_StepType_Question_3,this.currentQuestionIndex=this.jsonData.steps[t].questionNumber,this.scr_StepType_Question_3.initialise(this.jsonData.steps[t]);break;case"question_type_4":this.scr_currentStep=this.scr_StepType_Question_4,this.currentQuestionIndex=this.jsonData.steps[t].questionNumber,this.scr_StepType_Question_4.initialise(this.jsonData.steps[t])}},e.prototype.onOptionTap=function(t){this.scr_currentStep.onOptionTap(t)},e.prototype.onOptionDragStarted=function(t){this.scr_currentStep.onOptionDragStarted(t)},e.prototype.onOptionDropped=function(t){this.scr_currentStep.onOptionDropped(t)},e.prototype.playFeedback=function(t,e,o,i){void 0===o&&(o=!0),void 0===i&&(i=!0),this.scr_currentStep.playFeedback(t,e,o,i)},e.prototype.playQuestion=function(t){void 0===t&&(t=!0),this.scr_currentStep.playQuestion(t)},e.prototype.playAudio=function(t){this.scr_currentStep.playAudio(t)},e.prototype.getCurrentStep=function(){return this.currentStep},e.prototype.getCurrentStepJson=function(){return this.jsonData.steps[this.currentStep]},e.prototype.getCurrentQuestionIndex=function(){return this.currentQuestionIndex},e.prototype.setCurrentQuestionIndex=function(t){this.currentQuestionIndex=t},e.prototype.getCurrentStepType=function(){return this.jsonData.steps[this.currentStep].type},e.prototype.getTextByKey=function(t,e){return void 0===e&&(e="gameTexts"),this.jsonData&&this.jsonData[e].hasOwnProperty(t)?this.jsonData[e][t]:t},e.prototype.onAllStepsComplete=function(){this.node.emit("OnAllStepComplete",{}),this.scr_analyticsManager.sendInteractionEnd()},e.prototype.getTotalQuestions=function(){return this.jsonData.totalQuestions},e.prototype.getGameID=function(){return this.jsonData.gameID},e=n([g],e)}(cc.Component));o.default=y,cc._RF.pop()},{"./AnalyticsManager":"AnalyticsManager","./UIManager":"UIManager","./stepsTypes/StepType_Empty":"StepType_Empty","./stepsTypes/StepType_Info":"StepType_Info","./stepsTypes/StepType_Question_1":"StepType_Question_1","./stepsTypes/StepType_Question_2":"StepType_Question_2","./stepsTypes/StepType_Question_3":"StepType_Question_3","./stepsTypes/StepType_Question_4":"StepType_Question_4"}],TXPL06MAT03E01_Divisibility_1:[function(t,e,o){"use strict";cc._RF.push(e,"dcfc0wlZFVNnIiKFYOXNyAc","TXPL06MAT03E01_Divisibility_1");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/AnalyticsManager"),r=t("../../../../framework/scripts/AudioManager"),a=t("../../../../framework/scripts/StepsController"),c=t("../../../../framework/scripts/UIManager"),p=t("../../../../framework/scripts/utilities/TextLoader"),l=t("./TXPL06MAT03E01_Drag_Drop"),h=t("./TXPL06MAT03E01_GameModels"),d=cc._decorator,u=d.ccclass,g=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.aud_bgm=null,e.introNode=null,e.panelAnimations=[],e.gamePlayNode=null,e.optionNode=null,e.optionObject=[],e.optionBox=[],e.outputPart=[],e.leftOverPart=[],e.inputDoor=null,e.spark=null,e.output=null,e.outputDoor=null,e.leftover=null,e.leftOverDoor=null,e.intermediateNode=null,e.intermediateLabel=null,e.completeNode=null,e.progressBar=null,e.indicators=[],e.activeSprite=null,e.outputName=null,e.leftOverName=null,e.leftOverCount=null,e.audioClips=[],e.hintButton=null,e.hintPopup=null,e.blanket=null,e.txtMessage=null,e.greenIndicator=null,e.redIndicator=null,e.reportNode=null,e.firstAttemptCount=null,e.reportText=null,e.mActivePart=null,e.mInProgress=!1,e.mProgressPercent=0,e.mObjectName=null,e.mFirstAttempts=[],e}return i(e,t),e.prototype.onLoad=function(){this.scr_stepsController=this.canvas.getComponent(a.default),this.uiManager=this.canvas.getComponent(c.default),this.audioManager=this.canvas.getComponent(r.default),this.scr_analyticsManager=this.canvas.getComponent(s.default),this.canvas.on("OnLoadStep",this.stepsHandler.bind(this)),this.canvas.on("OnCommonButtonClick",this.onCommonButtonClick.bind(this)),this.canvas.on("OnAnswerVerification",this.onAnswerVerification.bind(this)),this.node.on("OnOptionDropped",this.onOptionDropped.bind(this)),this.node.on("OnOptionDraggingStarted",this.onOptionDragStarted.bind(this)),this.hintPopup.removeFromParent(),this.canvas.addChild(this.hintPopup),this.blanket.on(cc.Node.EventType.TOUCH_START,this.hideHintPopup.bind(this))},e.prototype.start=function(){this.scr_stepsController.Initialise("TXPL06MAT03E01_Divisibility_1"),this.audioManager.play("bgm",this.aud_bgm,!0,"BGM");for(var t=0;t<9;t++)this.mFirstAttempts.push(!0)},e.prototype.stepsHandler=function(t){switch(console.log("Steps handler. Next step is "+t),t){case 0:this.uiManager.setHeaderYpos(450);case 1:case 2:case 3:this.panelAnimations[t].play(this.panelAnimations[t].getClips()[0].name);break;case 4:this.uiManager.hideHeaderText(),this.uiManager.setHeaderYpos(400),this.scheduleOnce(function(){this.introNode.active=!1,this.gamePlayNode.active=!0,this.updateOptions(h.Parts.ARM)}.bind(this),1.5);break;case 5:case 6:this.updateOptions(h.Parts.ARM);break;case 7:this.uiManager.setHeaderYpos(450),this.scheduleOnce(function(){this.gamePlayNode.active=!1,this.intermediateNode.active=!0,this.panelAnimations[4].play(this.panelAnimations[4].getClips()[0].name),this.intermediateLabel.string="Antenna Production \n Department"}.bind(this),1.5);break;case 8:this.uiManager.hideHeaderText(),this.panelAnimations[5].play(this.panelAnimations[5].getClips()[0].name);break;case 9:this.uiManager.showFooterText(this.scr_stepsController.getTextByKey("intermediateStep1")),this.scheduleOnce(function(){this.uiManager.setActiveNextButton(!0)}.bind(this),3);break;case 10:this.uiManager.hideHeaderText(),this.uiManager.setHeaderYpos(400),this.scheduleOnce(function(){this.panelAnimations[4].setCurrentTime(0,this.panelAnimations[4].getClips()[0].name),this.panelAnimations[5].setCurrentTime(0,this.panelAnimations[5].getClips()[0].name),this.intermediateNode.active=!1,this.gamePlayNode.active=!0}.bind(this),1.5);case 11:case 12:this.updateOptions(h.Parts.ANTENNA);break;case 13:this.uiManager.setHeaderYpos(450),this.scheduleOnce(function(){this.gamePlayNode.active=!1,this.intermediateNode.active=!0,this.panelAnimations[4].play(this.panelAnimations[4].getClips()[0].name),this.intermediateLabel.string="Leg Production \n Department"}.bind(this),1.5);break;case 14:this.uiManager.hideHeaderText(),this.panelAnimations[5].play(this.panelAnimations[5].getClips()[0].name);break;case 15:this.uiManager.showFooterText(this.scr_stepsController.getTextByKey("intermediateStep2")),this.scheduleOnce(function(){this.uiManager.setActiveNextButton(!0)}.bind(this),3);break;case 16:this.uiManager.hideHeaderText(),this.uiManager.setHeaderYpos(400),this.scheduleOnce(function(){this.intermediateNode.active=!1,this.gamePlayNode.active=!0}.bind(this),1.5);case 17:case 18:this.updateOptions(h.Parts.LEG);break;case 19:this.uiManager.setActiveCloseButton(!1),this.canvas.emit("OnEndScreenReach",{}),this.uiManager.setHeaderYpos(450),this.scheduleOnce(function(){this.gamePlayNode.active=!1,this.completeNode.active=!0,this.panelAnimations[6].play(this.panelAnimations[6].getClips()[0].name),this.intermediateLabel.string=""}.bind(this),1.5);break;case 20:this.uiManager.hideHeaderText(),this.panelAnimations[7].play(this.panelAnimations[7].getClips()[0].name);break;case 21:this.uiManager.showFooterText(this.scr_stepsController.getTextByKey("completionState"));break;case 22:this.uiManager.hideHeaderText(),this.scheduleOnce(function(){var t=this.getFirstAttemptCount();this.firstAttemptCount.string=""+t,this.reportText.getComponent(p.default).changeLabel("endScreenComplete"),t!=this.scr_stepsController.getTotalQuestions()&&this.reportText.getComponent(p.default).changeLabel("endScreenIncomplete"),this.reportNode.active=!0}.bind(this),1.5)}},e.prototype.onCommonButtonClick=function(t){this.uiManager.CommonButtonType.NextQuestion==t?this.scr_stepsController.loadNextStep():this.uiManager.CommonButtonType.TryAgain==t&&this.resetAfterTryAgain()},e.prototype.resetUI=function(){this.inputDoor.play(this.inputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Reverse,this.inputDoor.off("stop",this.onInputDoorAnimationComplete,this),this.outputDoor.play(this.outputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Normal,this.leftOverDoor.play(this.outputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Normal,this.greenIndicator.active=!1,this.redIndicator.active=!1,this.hideHintPopup()},e.prototype.resetAfterTryAgain=function(){this.mFirstAttempts[this.scr_stepsController.getCurrentQuestionIndex()-1]=!1,this.scr_stepsController.loadNextStep(this.scr_stepsController.getCurrentStep())},e.prototype.onOptionDragStarted=function(t){this.scr_stepsController.onOptionDragStarted({optionName:t}),this.audioManager.play(h.getAudioName(h.AudioClips.BOX_PICKUP),this.audioClips[h.AudioClips.BOX_PICKUP],!1,"SFX")},e.prototype.onOptionDropped=function(t){this.uiManager.hideHeaderText(),this.mObjectName=t,this.inputDoor.play(this.inputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Normal,this.audioManager.play(h.getAudioName(h.AudioClips.DOOR_CLOSE),this.audioClips[h.AudioClips.DOOR_CLOSE],!1,"SFX"),this.inputDoor.on("stop",this.onInputDoorAnimationComplete,this),this.enableOptions(!1),this.optionNode.play(this.optionNode.getClips()[1].name),this.optionNode.on("stop",this.onSparkAnimationComplete,this),this.audioManager.play(h.getAudioName(h.AudioClips.CONVEYOR_BELT),this.audioClips[h.AudioClips.CONVEYOR_BELT],!0,"SFX")},e.prototype.onInputDoorAnimationComplete=function(){this.spark.play(this.spark.getClips()[0].name).wrapMode=cc.WrapMode.Normal,this.audioManager.play(h.getAudioName(h.AudioClips.MACHINE_PROCESS),this.audioClips[h.AudioClips.MACHINE_PROCESS],!1,"SFX")},e.prototype.onSparkAnimationComplete=function(){this.scr_stepsController.onOptionDropped({optionName:this.mObjectName}),this.stopConveyorBeltAudio()},e.prototype.onAnswerVerification=function(t){if(this.leftover.active=!1,console.log("Answer submitted "+t.isCorrect),t.isCorrect)this.mInProgress=!0,this.audioManager.play(h.getAudioName(h.AudioClips.CORRECT_ANSWER),this.audioClips[h.AudioClips.CORRECT_ANSWER],!1,"SFX"),this.audioManager.play(h.getAudioName(h.AudioClips.PROGRESS_BAR),this.audioClips[h.AudioClips.PROGRESS_BAR],!1,"SFX"),this.greenIndicator.active=!0;else{this.audioManager.play(h.getAudioName(h.AudioClips.WRONG_ANSWER),this.audioClips[h.AudioClips.WRONG_ANSWER],!1,"SFX"),this.leftover.active=!0,this.leftover.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this.leftOverPart[this.mActivePart]);var e=parseInt(t.answer)%this.getDivisor(this.mActivePart);this.leftOverCount.string="\xd7"+e,this.leftOverName.string=h.getPartsName(this.mActivePart),this.redIndicator.active=!0}this.output.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this.outputPart[this.mActivePart]),this.outputName.string=h.getPartsName(this.mActivePart),this.outputDoor.play(this.outputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Reverse,this.leftOverDoor.play(this.outputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Reverse,this.audioManager.play(h.getAudioName(h.AudioClips.DOOR_OPEN),this.audioClips[h.AudioClips.DOOR_OPEN],!1,"SFX")},e.prototype.updateOptions=function(t){var e=this;1==this.scr_stepsController.getCurrentQuestionIndex()&&this.mFirstAttempts[0]||this.resetUI(),this.progressBar.progress=this.getProgressPercent(this.scr_stepsController.getCurrentQuestionIndex()-1),this.mActivePart=t;var o=0;this.scr_stepsController.getCurrentStepJson().userInput.forEach(function(i){e.optionObject[o].getComponent(l.default).setName(h.getPartsName(t)),e.optionObject[o++].getComponent(l.default).updatePlaceHolderObject(e.optionBox[t],i,t)}),this.enableOptions(!1),this.optionNode.play(this.optionNode.getClips()[0].name),this.audioManager.play(h.getAudioName(h.AudioClips.CONVEYOR_BELT),this.audioClips[h.AudioClips.CONVEYOR_BELT],!0,"SFX"),this.optionNode.off("stop",this.onSparkAnimationComplete,this),this.optionNode.on("stop",this.stopConveyorBeltAudio,this)},e.prototype.stopConveyorBeltAudio=function(){this.audioManager.stop(h.getAudioName(h.AudioClips.CONVEYOR_BELT)),this.optionNode.off("stop",this.stopConveyorBeltAudio,this),this.enableOptions(!0)},e.prototype.enableOptions=function(t){this.optionObject.forEach(function(e){e.getComponent(l.default).enableTouch(t)})},e.prototype.update=function(t){if(this.mInProgress){var e=100*this.getProgressPercent(this.scr_stepsController.getCurrentQuestionIndex());this.mProgressPercent<e?(this.mProgressPercent++,this.progressBar.progress=this.mProgressPercent/100,this.mProgressPercent>=e&&this.mFirstAttempts[this.scr_stepsController.getCurrentQuestionIndex()-1]&&(this.indicators[this.scr_stepsController.getCurrentQuestionIndex()-1].spriteFrame=new cc.SpriteFrame(this.activeSprite))):this.mInProgress=!1}},e.prototype.showHintPopup=function(){this.scr_analyticsManager.sendOnHintButtonClick(this.scr_stepsController.getCurrentQuestionIndex()),this.scr_analyticsManager.sendOnHintView(this.scr_stepsController.getCurrentQuestionIndex()),this.hintPopup.active=!0,this.txtMessage.getComponent(p.default).changeLabel(this.getHintKey())},e.prototype.hideHintPopup=function(){this.hintPopup.active=!1},e.prototype.getFirstAttemptCount=function(){var t=0;return this.mFirstAttempts.forEach(function(e){e&&t++}),t},e.prototype.getProgressPercent=function(t){switch(t){case 1:return.1;case 2:return.2;case 3:return.3;case 4:return.4;case 5:return.5;case 6:return.625;case 7:return.75;case 8:return.875;case 9:return 1}return 0},e.prototype.getDivisor=function(t){switch(t){case h.Parts.ARM:return 2;case h.Parts.ANTENNA:return 3;case h.Parts.LEG:return 6}},e.prototype.getHintKey=function(){switch(this.scr_stepsController.getCurrentQuestionIndex()){case 1:case 2:case 3:return"hint1";case 4:case 5:case 6:return"hint2";case 7:case 8:case 9:return"hint3"}return"hint1"},n([g(cc.Node)],e.prototype,"canvas",void 0),n([g({type:cc.AudioClip})],e.prototype,"aud_bgm",void 0),n([g(cc.Node)],e.prototype,"introNode",void 0),n([g(cc.Animation)],e.prototype,"panelAnimations",void 0),n([g(cc.Node)],e.prototype,"gamePlayNode",void 0),n([g(cc.Animation)],e.prototype,"optionNode",void 0),n([g(cc.Node)],e.prototype,"optionObject",void 0),n([g({type:cc.Texture2D})],e.prototype,"optionBox",void 0),n([g({type:cc.Texture2D})],e.prototype,"outputPart",void 0),n([g({type:cc.Texture2D})],e.prototype,"leftOverPart",void 0),n([g(cc.Animation)],e.prototype,"inputDoor",void 0),n([g(cc.Animation)],e.prototype,"spark",void 0),n([g(cc.Node)],e.prototype,"output",void 0),n([g(cc.Animation)],e.prototype,"outputDoor",void 0),n([g(cc.Node)],e.prototype,"leftover",void 0),n([g(cc.Animation)],e.prototype,"leftOverDoor",void 0),n([g(cc.Node)],e.prototype,"intermediateNode",void 0),n([g(cc.Label)],e.prototype,"intermediateLabel",void 0),n([g(cc.Node)],e.prototype,"completeNode",void 0),n([g(cc.ProgressBar)],e.prototype,"progressBar",void 0),n([g(cc.Sprite)],e.prototype,"indicators",void 0),n([g({type:cc.Texture2D})],e.prototype,"activeSprite",void 0),n([g(cc.Label)],e.prototype,"outputName",void 0),n([g(cc.Label)],e.prototype,"leftOverName",void 0),n([g(cc.Label)],e.prototype,"leftOverCount",void 0),n([g({type:cc.AudioClip})],e.prototype,"audioClips",void 0),n([g(cc.Node)],e.prototype,"hintButton",void 0),n([g(cc.Node)],e.prototype,"hintPopup",void 0),n([g(cc.Node)],e.prototype,"blanket",void 0),n([g(cc.Label)],e.prototype,"txtMessage",void 0),n([g(cc.Node)],e.prototype,"greenIndicator",void 0),n([g(cc.Node)],e.prototype,"redIndicator",void 0),n([g(cc.Node)],e.prototype,"reportNode",void 0),n([g(cc.Label)],e.prototype,"firstAttemptCount",void 0),n([g(cc.Label)],e.prototype,"reportText",void 0),e=n([u],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../../../../framework/scripts/AnalyticsManager":"AnalyticsManager","../../../../framework/scripts/AudioManager":"AudioManager","../../../../framework/scripts/StepsController":"StepsController","../../../../framework/scripts/UIManager":"UIManager","../../../../framework/scripts/utilities/TextLoader":"TextLoader","./TXPL06MAT03E01_Drag_Drop":"TXPL06MAT03E01_Drag_Drop","./TXPL06MAT03E01_GameModels":"TXPL06MAT03E01_GameModels"}],TXPL06MAT03E01_Drag_Drop:[function(t,e,o){"use strict";cc._RF.push(e,"4c09dbtb1hHa6OCCcbmZ2EB","TXPL06MAT03E01_Drag_Drop");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./TXPL06MAT03E01_GameModels"),r=cc._decorator,a=r.ccclass,c=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dropPlace=null,e.startPos=null,e.gameNode=null,e.placeHolderObject=null,e.optionName=null,e.optionCount=null,e.inputName=null,e.inputCount=null,e.currentDraggingObject=null,e.mName="",e.mCount="",e.mIsTouchEnabled=!1,e}return i(e,t),e.prototype.setName=function(t){this.mName=t,this.node.active=!0},e.prototype.updatePlaceHolderObject=function(t,e,o){this.mCount=e,this.placeHolderObject.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t),this.node.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t),this.placeHolderObject.active=!1,this.optionName.string=this.inputName.string=this.mName,this.optionCount.string=e,5==this.optionCount.string.length?this.optionCount.node.setPosition(16,this.optionCount.node.getPosition().y):4==this.optionCount.string.length?this.optionCount.node.setPosition(10,this.optionCount.node.getPosition().y):this.optionCount.node.setPosition(13,this.optionCount.node.getPosition().y),this.optionName.node.setPosition(9,this.optionName.node.getPosition().y),this.inputName.node.setPosition(13,this.optionName.node.getPosition().y),o==s.Parts.ANTENNA&&(this.optionName.node.setPosition(28,this.optionName.node.getPosition().y),this.inputName.node.setPosition(25,this.optionName.node.getPosition().y))},e.prototype.enableTouch=function(t){this.mIsTouchEnabled=t},e.prototype.start=function(){this.startPos=new cc.Vec2(this.node.position.x,this.node.position.y),this.gameNode.on("OnOptionDraggingStarted",function(t){this.currentDraggingObject=t}.bind(this)),this.gameNode.on("OnOptionDraggingEnded",function(t){this.currentDraggingObject=t}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_START,function(t){this.mIsTouchEnabled&&(null!=this.currentDraggingObject&&""!=this.currentDraggingObject||this.gameNode.emit("OnOptionDraggingStarted",this.mCount))}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){if(this.currentDraggingObject==this.mCount){var e=t.touch.getDelta();this.node.x+=e.x,this.node.y+=e.y}}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_END,function(t){if(this.currentDraggingObject==this.mCount){this.gameNode.emit("OnOptionDraggingEnded","");var e=this.node.parent.convertToWorldSpaceAR(this.node.position),o=this.dropPlace.convertToNodeSpaceAR(e);cc.Intersection.pointInPolygon(new cc.Vec2(o.x,o.y),this.dropPlace.getComponent(cc.PolygonCollider).world.points)?(this.placeHolderObject.active=!0,this.inputCount.string=this.mCount,this.node.active=!1,this.gameNode.emit("OnOptionDropped",this.mCount),this.node.position=this.startPos,this.node.scale=1):this.node.runAction(cc.moveTo(.3,this.startPos))}}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(t){if(this.currentDraggingObject==this.mCount){this.gameNode.emit("OnOptionDraggingEnded","");var e=this.node.parent.convertToWorldSpaceAR(this.node.position),o=this.dropPlace.convertToNodeSpaceAR(e);cc.Intersection.pointInPolygon(new cc.Vec2(o.x,o.y),this.dropPlace.getComponent(cc.PolygonCollider).world.points)?(this.placeHolderObject.active=!0,this.inputCount.string=this.mCount,this.node.active=!1,this.gameNode.emit("OnOptionDropped",this.mCount),this.node.position=this.startPos,this.node.scale=1):this.node.runAction(cc.moveTo(.3,this.startPos))}}.bind(this))},e.prototype.update=function(t){var e=this.node.parent.convertToWorldSpaceAR(this.node.position),o=this.dropPlace.convertToNodeSpaceAR(e);cc.Intersection.pointInPolygon(new cc.Vec2(o.x,o.y),this.dropPlace.getComponent(cc.PolygonCollider).world.points)?this.node.scale>.8?this.node.scale-=2*t:this.node.scale<.8&&(this.node.scale=.8):this.node.scale<1?this.node.scale+=2*t:this.node.scale>1&&(this.node.scale=1)},n([c(cc.Node)],e.prototype,"dropPlace",void 0),n([c(cc.Node)],e.prototype,"gameNode",void 0),n([c(cc.Node)],e.prototype,"placeHolderObject",void 0),n([c(cc.Label)],e.prototype,"optionName",void 0),n([c(cc.Label)],e.prototype,"optionCount",void 0),n([c(cc.Label)],e.prototype,"inputName",void 0),n([c(cc.Label)],e.prototype,"inputCount",void 0),e=n([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./TXPL06MAT03E01_GameModels":"TXPL06MAT03E01_GameModels"}],TXPL06MAT03E01_GameModels:[function(t,e,o){"use strict";var i,n;cc._RF.push(e,"5ef58OkOJJAn6Ld3jU9A5N9","TXPL06MAT03E01_GameModels"),Object.defineProperty(o,"__esModule",{value:!0}),function(t){t[t.ARM=0]="ARM",t[t.ANTENNA=1]="ANTENNA",t[t.LEG=2]="LEG"}(i=o.Parts||(o.Parts={})),function(t){t[t.CONVEYOR_BELT=0]="CONVEYOR_BELT",t[t.CORRECT_ANSWER=1]="CORRECT_ANSWER",t[t.DOOR_CLOSE=2]="DOOR_CLOSE",t[t.DOOR_OPEN=3]="DOOR_OPEN",t[t.PROGRESS_BAR=4]="PROGRESS_BAR",t[t.WRONG_ANSWER=5]="WRONG_ANSWER",t[t.MACHINE_PROCESS=6]="MACHINE_PROCESS",t[t.BOX_PICKUP=7]="BOX_PICKUP"}(n=o.AudioClips||(o.AudioClips={})),o.getAudioName=function(t){switch(t){case n.CONVEYOR_BELT:return"CONVEYOR_BELT";case n.CORRECT_ANSWER:return"CORRECT_ANSWER";case n.DOOR_CLOSE:return"DOOR_CLOSE";case n.DOOR_OPEN:return"DOOR_OPEN";case n.PROGRESS_BAR:return"PROGRESS_BAR";case n.WRONG_ANSWER:return"WRONG_ANSWER";case n.MACHINE_PROCESS:return"MACHINE_PROCESS";case n.BOX_PICKUP:return"BOX_PICKUP";default:return""}},o.getPartsName=function(t){switch(t){case i.ARM:return"Arms";case i.ANTENNA:return"Antennas";case i.LEG:return"Legs";default:return""}},cc._RF.pop()},{}],TXPL06MAT03E02_Divisibility_2:[function(t,e,o){"use strict";cc._RF.push(e,"bb943KbuPlEAr3Tkq9l0kDQ","TXPL06MAT03E02_Divisibility_2");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/AnalyticsManager"),r=t("../../../../framework/scripts/AudioManager"),a=t("../../../../framework/scripts/StepsController"),c=t("../../../../framework/scripts/UIManager"),p=t("../../../../framework/scripts/utilities/TextLoader"),l=t("./TXPL06MAT03E02_Drag_Drop"),h=t("./TXPL06MAT03E02_GameModels"),d=cc._decorator,u=d.ccclass,g=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.aud_bgm=null,e.introNode=null,e.panelAnimations=[],e.gamePlayNode=null,e.optionNode=null,e.optionObject=[],e.optionBox=[],e.outputPart=[],e.leftOverPart=[],e.inputDoor=null,e.questionInput=null,e.questionCountLabel=null,e.spark=null,e.processingDoor=null,e.output=null,e.outputDoor=null,e.leftover=null,e.leftOverDoor=null,e.intermediateNode=null,e.intermediateLabel=null,e.completeNode=null,e.progressBar=null,e.indicators=[],e.activeSprite=null,e.leftOverCount=null,e.audioClips=[],e.hintButton=null,e.hintPopup=null,e.blanket=null,e.txtMessage=null,e.greenIndicator=null,e.redIndicator=null,e.reportNode=null,e.firstAttemptCount=null,e.reportText=null,e.mActivePart=null,e.mInProgress=!1,e.mProgressPercent=0,e.mObjectName=null,e.mFirstAttempts=[],e}return i(e,t),e.prototype.onLoad=function(){this.scr_stepsController=this.canvas.getComponent(a.default),this.uiManager=this.canvas.getComponent(c.default),this.audioManager=this.canvas.getComponent(r.default),this.scr_analyticsManager=this.canvas.getComponent(s.default),this.canvas.on("OnLoadStep",this.stepsHandler.bind(this)),this.canvas.on("OnCommonButtonClick",this.onCommonButtonClick.bind(this)),this.canvas.on("OnAnswerVerification",this.onAnswerVerification.bind(this)),this.node.on("OnOptionDropped",this.onOptionDropped.bind(this)),this.node.on("OnOptionDraggingStarted",this.onOptionDragStarted.bind(this)),this.hintPopup.removeFromParent(),this.canvas.addChild(this.hintPopup),this.blanket.on(cc.Node.EventType.TOUCH_START,this.hideHintPopup.bind(this))},e.prototype.start=function(){this.scr_stepsController.Initialise("TXPL06MAT03E02_Divisibility_2"),this.audioManager.play("bgm",this.aud_bgm,!0,"BGM");for(var t=0;t<9;t++)this.mFirstAttempts.push(!0)},e.prototype.stepsHandler=function(t){switch(console.log("Steps handler. Next step is "+t),t){case 0:this.uiManager.setHeaderYpos(450);case 1:case 2:case 3:this.panelAnimations[t].play(this.panelAnimations[t].getClips()[0].name);break;case 4:this.uiManager.hideHeaderText(),this.uiManager.setHeaderYpos(400),this.scheduleOnce(function(){this.introNode.active=!1,this.gamePlayNode.active=!0,this.updateOptions(h.Parts.ANTENNA)}.bind(this),1.5);break;case 5:case 6:this.updateOptions(h.Parts.ANTENNA);break;case 7:this.uiManager.setHeaderYpos(450),this.scheduleOnce(function(){this.gamePlayNode.active=!1,this.intermediateNode.active=!0,this.panelAnimations[4].play(this.panelAnimations[4].getClips()[0].name),this.intermediateLabel.string="Arms Assembly"}.bind(this),1.5);break;case 8:this.uiManager.hideHeaderText(),this.panelAnimations[5].play(this.panelAnimations[5].getClips()[0].name);break;case 9:this.uiManager.showFooterText(this.scr_stepsController.getTextByKey("intermediateStep1")),this.scheduleOnce(function(){this.uiManager.setActiveNextButton(!0)}.bind(this),3);break;case 10:this.uiManager.hideHeaderText(),this.uiManager.setHeaderYpos(400),this.scheduleOnce(function(){this.panelAnimations[4].setCurrentTime(0,this.panelAnimations[4].getClips()[0].name),this.panelAnimations[5].setCurrentTime(0,this.panelAnimations[5].getClips()[0].name),this.intermediateNode.active=!1,this.gamePlayNode.active=!0}.bind(this),1.5);case 11:case 12:this.updateOptions(h.Parts.ARM);break;case 13:this.uiManager.setHeaderYpos(450),this.scheduleOnce(function(){this.gamePlayNode.active=!1,this.intermediateNode.active=!0,this.panelAnimations[4].play(this.panelAnimations[4].getClips()[0].name),this.intermediateLabel.string="Leg Assembly"}.bind(this),1.5);break;case 14:this.uiManager.hideHeaderText(),this.panelAnimations[5].play(this.panelAnimations[5].getClips()[0].name);break;case 15:this.uiManager.showFooterText(this.scr_stepsController.getTextByKey("intermediateStep2")),this.scheduleOnce(function(){this.uiManager.setActiveNextButton(!0)}.bind(this),3);break;case 16:this.uiManager.hideHeaderText(),this.uiManager.setHeaderYpos(400),this.scheduleOnce(function(){this.intermediateNode.active=!1,this.gamePlayNode.active=!0}.bind(this),1.5);case 17:case 18:this.updateOptions(h.Parts.LEG);break;case 19:this.uiManager.setActiveCloseButton(!1),this.canvas.emit("OnEndScreenReach",{}),this.uiManager.setHeaderYpos(450),this.scheduleOnce(function(){this.gamePlayNode.active=!1,this.completeNode.active=!0,this.panelAnimations[6].play(this.panelAnimations[6].getClips()[0].name),this.intermediateLabel.string=""}.bind(this),1.5);break;case 20:this.uiManager.hideHeaderText(),this.panelAnimations[7].play(this.panelAnimations[7].getClips()[0].name);break;case 21:this.uiManager.showFooterText(this.scr_stepsController.getTextByKey("completionState"));break;case 22:this.uiManager.hideHeaderText(),this.scheduleOnce(function(){var t=this.getFirstAttemptCount();this.firstAttemptCount.string=""+t,this.reportText.getComponent(p.default).changeLabel("endScreenComplete"),t!=this.scr_stepsController.getTotalQuestions()&&this.reportText.getComponent(p.default).changeLabel("endScreenIncomplete"),this.reportNode.active=!0}.bind(this),1.5)}},e.prototype.onCommonButtonClick=function(t){this.uiManager.CommonButtonType.NextQuestion==t?this.scr_stepsController.loadNextStep():this.uiManager.CommonButtonType.TryAgain==t&&this.resetAfterTryAgain()},e.prototype.resetUI=function(){this.inputDoor.play(this.inputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Reverse,this.inputDoor.off("stop",this.onInputDoorAnimationComplete,this),this.outputDoor.play(this.outputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Normal,this.leftOverDoor.play(this.outputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Normal,this.processingDoor.play(this.processingDoor.getClips()[0].name).wrapMode=cc.WrapMode.Reverse,this.greenIndicator.active=!1,this.redIndicator.active=!1,this.hideHintPopup()},e.prototype.resetAfterTryAgain=function(){this.mFirstAttempts[this.scr_stepsController.getCurrentQuestionIndex()-1]=!1,this.scr_stepsController.loadNextStep(this.scr_stepsController.getCurrentStep())},e.prototype.onOptionDragStarted=function(t){this.scr_stepsController.onOptionDragStarted({optionName:t}),this.audioManager.play(h.getAudioName(h.AudioClips.BOX_PICKUP),this.audioClips[h.AudioClips.BOX_PICKUP],!1,"SFX")},e.prototype.onOptionDropped=function(t){this.uiManager.hideHeaderText(),this.mObjectName=t,this.inputDoor.play(this.inputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Normal,this.processingDoor.play(this.processingDoor.getClips()[0].name).wrapMode=cc.WrapMode.Normal,this.audioManager.play(h.getAudioName(h.AudioClips.DOOR_CLOSE),this.audioClips[h.AudioClips.DOOR_CLOSE],!1,"SFX"),this.inputDoor.on("stop",this.onInputDoorAnimationComplete,this),this.enableOptions(!1),this.optionNode.play(this.optionNode.getClips()[1].name),this.optionNode.on("stop",this.onSparkAnimationComplete,this),this.audioManager.play(h.getAudioName(h.AudioClips.CONVEYOR_BELT),this.audioClips[h.AudioClips.CONVEYOR_BELT],!0,"SFX")},e.prototype.onInputDoorAnimationComplete=function(){this.spark.play(this.spark.getClips()[0].name).wrapMode=cc.WrapMode.Normal,this.audioManager.play(h.getAudioName(h.AudioClips.MACHINE_PROCESS),this.audioClips[h.AudioClips.MACHINE_PROCESS],!1,"SFX")},e.prototype.onSparkAnimationComplete=function(){this.scr_stepsController.onOptionDropped({optionName:this.mObjectName}),this.stopConveyorBeltAudio()},e.prototype.onAnswerVerification=function(t){if(this.leftover.active=!1,console.log("Answer submitted "+t.isCorrect),t.isCorrect)this.mInProgress=!0,this.audioManager.play(h.getAudioName(h.AudioClips.CORRECT_ANSWER),this.audioClips[h.AudioClips.CORRECT_ANSWER],!1,"SFX"),this.audioManager.play(h.getAudioName(h.AudioClips.PROGRESS_BAR),this.audioClips[h.AudioClips.PROGRESS_BAR],!1,"SFX"),this.greenIndicator.active=!0;else{this.audioManager.play(h.getAudioName(h.AudioClips.WRONG_ANSWER),this.audioClips[h.AudioClips.WRONG_ANSWER],!1,"SFX"),this.leftover.active=!0,this.leftover.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this.leftOverPart[this.mActivePart]);var e=parseInt(t.answer)%this.getDivisor(this.mActivePart);this.leftOverCount.string="\xd7"+e,this.redIndicator.active=!0}this.output.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this.outputPart[this.mActivePart]),this.outputDoor.play(this.outputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Reverse,this.leftOverDoor.play(this.outputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Reverse,this.audioManager.play(h.getAudioName(h.AudioClips.DOOR_OPEN),this.audioClips[h.AudioClips.DOOR_OPEN],!1,"SFX")},e.prototype.updateOptions=function(t){var e=this;1==this.scr_stepsController.getCurrentQuestionIndex()&&this.mFirstAttempts[0]||this.resetUI(),this.progressBar.progress=this.getProgressPercent(this.scr_stepsController.getCurrentQuestionIndex()-1),this.mActivePart=t;var o=this.scr_stepsController.getCurrentStepJson(),i=0;this.questionInput.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this.leftOverPart[t]),this.questionCountLabel.string="\xd7"+this.getDivisor(t),o.userInput.forEach(function(o){e.optionObject[i].getComponent(l.default).setName(h.getPartsName(t)),e.optionObject[i++].getComponent(l.default).updatePlaceHolderObject(e.optionBox[t],o,t)}),this.enableOptions(!1),this.optionNode.play(this.optionNode.getClips()[0].name),this.audioManager.play(h.getAudioName(h.AudioClips.CONVEYOR_BELT),this.audioClips[h.AudioClips.CONVEYOR_BELT],!0,"SFX"),this.optionNode.off("stop",this.onSparkAnimationComplete,this),this.optionNode.on("stop",this.stopConveyorBeltAudio,this)},e.prototype.stopConveyorBeltAudio=function(){this.audioManager.stop(h.getAudioName(h.AudioClips.CONVEYOR_BELT)),this.optionNode.off("stop",this.stopConveyorBeltAudio,this),this.enableOptions(!0)},e.prototype.enableOptions=function(t){this.optionObject.forEach(function(e){e.getComponent(l.default).enableTouch(t)})},e.prototype.update=function(t){if(this.mInProgress){var e=100*this.getProgressPercent(this.scr_stepsController.getCurrentQuestionIndex());this.mProgressPercent<e?(this.mProgressPercent++,this.progressBar.progress=this.mProgressPercent/100,this.mProgressPercent>=e&&this.mFirstAttempts[this.scr_stepsController.getCurrentQuestionIndex()-1]&&(this.indicators[this.scr_stepsController.getCurrentQuestionIndex()-1].spriteFrame=new cc.SpriteFrame(this.activeSprite))):this.mInProgress=!1}},e.prototype.showHintPopup=function(){this.scr_analyticsManager.sendOnHintButtonClick(this.scr_stepsController.getCurrentQuestionIndex()),this.scr_analyticsManager.sendOnHintView(this.scr_stepsController.getCurrentQuestionIndex()),this.hintPopup.active=!0,this.txtMessage.getComponent(p.default).changeLabel(this.getHintKey())},e.prototype.hideHintPopup=function(){this.hintPopup.active=!1},e.prototype.getFirstAttemptCount=function(){var t=0;return this.mFirstAttempts.forEach(function(e){e&&t++}),t},e.prototype.getProgressPercent=function(t){switch(t){case 1:return.1;case 2:return.2;case 3:return.3;case 4:return.4;case 5:return.5;case 6:return.625;case 7:return.75;case 8:return.875;case 9:return 1}return 0},e.prototype.getDivisor=function(t){switch(t){case h.Parts.ARM:return 4;case h.Parts.ANTENNA:return 9;case h.Parts.LEG:return 8}},e.prototype.getHintKey=function(){switch(this.scr_stepsController.getCurrentQuestionIndex()){case 1:case 2:case 3:return"hint1";case 4:case 5:case 6:return"hint2";case 7:case 8:case 9:return"hint3"}return"hint1"},n([g(cc.Node)],e.prototype,"canvas",void 0),n([g({type:cc.AudioClip})],e.prototype,"aud_bgm",void 0),n([g(cc.Node)],e.prototype,"introNode",void 0),n([g(cc.Animation)],e.prototype,"panelAnimations",void 0),n([g(cc.Node)],e.prototype,"gamePlayNode",void 0),n([g(cc.Animation)],e.prototype,"optionNode",void 0),n([g(cc.Node)],e.prototype,"optionObject",void 0),n([g({type:cc.Texture2D})],e.prototype,"optionBox",void 0),n([g({type:cc.Texture2D})],e.prototype,"outputPart",void 0),n([g({type:cc.Texture2D})],e.prototype,"leftOverPart",void 0),n([g(cc.Animation)],e.prototype,"inputDoor",void 0),n([g(cc.Node)],e.prototype,"questionInput",void 0),n([g(cc.Label)],e.prototype,"questionCountLabel",void 0),n([g(cc.Animation)],e.prototype,"spark",void 0),n([g(cc.Animation)],e.prototype,"processingDoor",void 0),n([g(cc.Node)],e.prototype,"output",void 0),n([g(cc.Animation)],e.prototype,"outputDoor",void 0),n([g(cc.Node)],e.prototype,"leftover",void 0),n([g(cc.Animation)],e.prototype,"leftOverDoor",void 0),n([g(cc.Node)],e.prototype,"intermediateNode",void 0),n([g(cc.Label)],e.prototype,"intermediateLabel",void 0),n([g(cc.Node)],e.prototype,"completeNode",void 0),n([g(cc.ProgressBar)],e.prototype,"progressBar",void 0),n([g(cc.Sprite)],e.prototype,"indicators",void 0),n([g({type:cc.Texture2D})],e.prototype,"activeSprite",void 0),n([g(cc.Label)],e.prototype,"leftOverCount",void 0),n([g({type:cc.AudioClip})],e.prototype,"audioClips",void 0),n([g(cc.Node)],e.prototype,"hintButton",void 0),n([g(cc.Node)],e.prototype,"hintPopup",void 0),n([g(cc.Node)],e.prototype,"blanket",void 0),n([g(cc.Label)],e.prototype,"txtMessage",void 0),n([g(cc.Node)],e.prototype,"greenIndicator",void 0),n([g(cc.Node)],e.prototype,"redIndicator",void 0),n([g(cc.Node)],e.prototype,"reportNode",void 0),n([g(cc.Label)],e.prototype,"firstAttemptCount",void 0),n([g(cc.Label)],e.prototype,"reportText",void 0),e=n([u],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../../../../framework/scripts/AnalyticsManager":"AnalyticsManager","../../../../framework/scripts/AudioManager":"AudioManager","../../../../framework/scripts/StepsController":"StepsController","../../../../framework/scripts/UIManager":"UIManager","../../../../framework/scripts/utilities/TextLoader":"TextLoader","./TXPL06MAT03E02_Drag_Drop":"TXPL06MAT03E02_Drag_Drop","./TXPL06MAT03E02_GameModels":"TXPL06MAT03E02_GameModels"}],TXPL06MAT03E02_Drag_Drop:[function(t,e,o){"use strict";cc._RF.push(e,"d963exsf6FGzYZmLwP4qvxW","TXPL06MAT03E02_Drag_Drop");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./TXPL06MAT03E02_GameModels"),r=cc._decorator,a=r.ccclass,c=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dropPlace=null,e.startPos=null,e.gameNode=null,e.placeHolderObject=null,e.optionName=null,e.optionCount=null,e.inputName=null,e.inputCount=null,e.currentDraggingObject=null,e.mName="",e.mCount="",e.mIsTouchEnabled=!1,e}return i(e,t),e.prototype.setName=function(t){this.mName=t,this.node.active=!0},e.prototype.updatePlaceHolderObject=function(t,e,o){this.mCount=e,this.placeHolderObject.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t),this.node.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t),this.placeHolderObject.active=!1,this.optionName.string=this.inputName.string=this.mName,this.optionCount.string=e,6==this.optionCount.string.length?this.optionCount.node.setPosition(25,this.optionCount.node.getPosition().y):5==this.optionCount.string.length?this.optionCount.node.setPosition(16,this.optionCount.node.getPosition().y):4==this.optionCount.string.length?this.optionCount.node.setPosition(10,this.optionCount.node.getPosition().y):this.optionCount.node.setPosition(9,this.optionCount.node.getPosition().y),this.optionName.node.setPosition(6,this.optionName.node.getPosition().y),this.inputName.node.setPosition(8,this.optionName.node.getPosition().y),o==s.Parts.ANTENNA&&(this.optionName.node.setPosition(18,this.optionName.node.getPosition().y),this.inputName.node.setPosition(18,this.optionName.node.getPosition().y))},e.prototype.enableTouch=function(t){this.mIsTouchEnabled=t},e.prototype.start=function(){this.startPos=new cc.Vec2(this.node.position.x,this.node.position.y),this.gameNode.on("OnOptionDraggingStarted",function(t){this.currentDraggingObject=t}.bind(this)),this.gameNode.on("OnOptionDraggingEnded",function(t){this.currentDraggingObject=t}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_START,function(t){this.mIsTouchEnabled&&(null!=this.currentDraggingObject&&""!=this.currentDraggingObject||this.gameNode.emit("OnOptionDraggingStarted",this.mCount))}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){if(this.currentDraggingObject==this.mCount){var e=t.touch.getDelta();this.node.x+=e.x,this.node.y+=e.y}}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_END,function(t){if(this.currentDraggingObject==this.mCount){this.gameNode.emit("OnOptionDraggingEnded","");var e=this.node.parent.convertToWorldSpaceAR(this.node.position),o=this.dropPlace.convertToNodeSpaceAR(e);cc.Intersection.pointInPolygon(new cc.Vec2(o.x,o.y),this.dropPlace.getComponent(cc.PolygonCollider).world.points)?(this.placeHolderObject.active=!0,this.inputCount.string=this.mCount,this.node.active=!1,this.gameNode.emit("OnOptionDropped",this.mCount),this.node.position=this.startPos,this.node.scale=1):this.node.runAction(cc.moveTo(.3,this.startPos))}}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(t){if(this.currentDraggingObject==this.mCount){this.gameNode.emit("OnOptionDraggingEnded","");var e=this.node.parent.convertToWorldSpaceAR(this.node.position),o=this.dropPlace.convertToNodeSpaceAR(e);cc.Intersection.pointInPolygon(new cc.Vec2(o.x,o.y),this.dropPlace.getComponent(cc.PolygonCollider).world.points)?(this.placeHolderObject.active=!0,this.inputCount.string=this.mCount,this.node.active=!1,this.gameNode.emit("OnOptionDropped",this.mCount),this.node.position=this.startPos,this.node.scale=1):this.node.runAction(cc.moveTo(.3,this.startPos))}}.bind(this))},e.prototype.update=function(t){var e=this.node.parent.convertToWorldSpaceAR(this.node.position),o=this.dropPlace.convertToNodeSpaceAR(e);cc.Intersection.pointInPolygon(new cc.Vec2(o.x,o.y),this.dropPlace.getComponent(cc.PolygonCollider).world.points)?this.node.scale>.8?this.node.scale-=2*t:this.node.scale<.8&&(this.node.scale=.8):this.node.scale<1?this.node.scale+=2*t:this.node.scale>1&&(this.node.scale=1)},n([c(cc.Node)],e.prototype,"dropPlace",void 0),n([c(cc.Node)],e.prototype,"gameNode",void 0),n([c(cc.Node)],e.prototype,"placeHolderObject",void 0),n([c(cc.Label)],e.prototype,"optionName",void 0),n([c(cc.Label)],e.prototype,"optionCount",void 0),n([c(cc.Label)],e.prototype,"inputName",void 0),n([c(cc.Label)],e.prototype,"inputCount",void 0),e=n([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./TXPL06MAT03E02_GameModels":"TXPL06MAT03E02_GameModels"}],TXPL06MAT03E02_GameModels:[function(t,e,o){"use strict";var i,n;cc._RF.push(e,"8f4a2bCAVhKcpiGmuXQKNgl","TXPL06MAT03E02_GameModels"),Object.defineProperty(o,"__esModule",{value:!0}),function(t){t[t.ANTENNA=0]="ANTENNA",t[t.ARM=1]="ARM",t[t.LEG=2]="LEG"}(i=o.Parts||(o.Parts={})),function(t){t[t.CONVEYOR_BELT=0]="CONVEYOR_BELT",t[t.CORRECT_ANSWER=1]="CORRECT_ANSWER",t[t.DOOR_CLOSE=2]="DOOR_CLOSE",t[t.DOOR_OPEN=3]="DOOR_OPEN",t[t.PROGRESS_BAR=4]="PROGRESS_BAR",t[t.WRONG_ANSWER=5]="WRONG_ANSWER",t[t.MACHINE_PROCESS=6]="MACHINE_PROCESS",t[t.BOX_PICKUP=7]="BOX_PICKUP"}(n=o.AudioClips||(o.AudioClips={})),o.getAudioName=function(t){switch(t){case n.CONVEYOR_BELT:return"CONVEYOR_BELT";case n.CORRECT_ANSWER:return"CORRECT_ANSWER";case n.DOOR_CLOSE:return"DOOR_CLOSE";case n.DOOR_OPEN:return"DOOR_OPEN";case n.PROGRESS_BAR:return"PROGRESS_BAR";case n.WRONG_ANSWER:return"WRONG_ANSWER";case n.MACHINE_PROCESS:return"MACHINE_PROCESS";case n.BOX_PICKUP:return"BOX_PICKUP";default:return""}},o.getPartsName=function(t){switch(t){case i.ARM:return"Arms";case i.ANTENNA:return"Antennas";case i.LEG:return"Legs";default:return""}},cc._RF.pop()},{}],TXPL06MAT03E03_Divisibility_3:[function(t,e,o){"use strict";cc._RF.push(e,"623b6tkmIFP1IwMPrseUXvh","TXPL06MAT03E03_Divisibility_3");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/AnalyticsManager"),r=t("../../../../framework/scripts/AudioManager"),a=t("../../../../framework/scripts/StepsController"),c=t("../../../../framework/scripts/UIManager"),p=t("../../../../framework/scripts/utilities/TextLoader"),l=t("./TXPL06MAT03E03_Drag_Drop"),h=t("./TXPL06MAT03E03_GameModels"),d=cc._decorator,u=d.ccclass,g=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.aud_bgm=null,e.introNode=null,e.panelAnimations=[],e.gamePlayNode=null,e.optionNode=null,e.optionObject=[],e.optionBox=[],e.outputBox=[],e.leftOverBox=[],e.packagingBox=[],e.inputDoor=null,e.packageInput=null,e.spark=null,e.processingDoor=null,e.output=null,e.outputDoor=null,e.leftover=null,e.leftOverDoor=null,e.completeNode=null,e.progressBar=null,e.indicators=[],e.activeSprite=null,e.leftOverCount=null,e.audioClips=[],e.hintButton=null,e.hintPopup=null,e.blanket=null,e.txtMessage=null,e.greenIndicator=null,e.redIndicator=null,e.finalTextNode=null,e.reportNode=null,e.firstAttemptCount=null,e.reportText=null,e.mActiveBox=null,e.mInProgress=!1,e.mProgressPercent=0,e.mObjectName=null,e.mFirstAttempts=[],e}return i(e,t),e.prototype.onLoad=function(){this.scr_stepsController=this.canvas.getComponent(a.default),this.uiManager=this.canvas.getComponent(c.default),this.audioManager=this.canvas.getComponent(r.default),this.scr_analyticsManager=this.canvas.getComponent(s.default),this.canvas.on("OnLoadStep",this.stepsHandler.bind(this)),this.canvas.on("OnCommonButtonClick",this.onCommonButtonClick.bind(this)),this.canvas.on("OnAnswerVerification",this.onAnswerVerification.bind(this)),this.node.on("OnOptionDropped",this.onOptionDropped.bind(this)),this.node.on("OnOptionDraggingStarted",this.onOptionDragStarted.bind(this)),this.hintPopup.removeFromParent(),this.canvas.addChild(this.hintPopup),this.blanket.on(cc.Node.EventType.TOUCH_START,this.hideHintPopup.bind(this))},e.prototype.start=function(){this.scr_stepsController.Initialise("TXPL06MAT03E03_Divisibility_3"),this.audioManager.play("bgm",this.aud_bgm,!0,"BGM");for(var t=0;t<9;t++)this.mFirstAttempts.push(!0)},e.prototype.stepsHandler=function(t){switch(console.log("Steps handler. Next step is "+t),t){case 0:this.uiManager.setHeaderYpos(450);case 1:case 2:case 3:this.panelAnimations[t].play(this.panelAnimations[t].getClips()[0].name);break;case 4:this.uiManager.hideHeaderText(),this.uiManager.setHeaderYpos(400),this.scheduleOnce(function(){this.introNode.active=!1,this.gamePlayNode.active=!0,this.updateOptions(h.Box.FIVE)}.bind(this),2);break;case 5:case 6:this.scheduleOnce(function(){this.updateOptions(h.Box.FIVE)}.bind(this),2);break;case 7:case 8:case 9:this.scheduleOnce(function(){this.updateOptions(h.Box.TEN)}.bind(this),2);break;case 10:case 11:case 12:this.scheduleOnce(function(){this.updateOptions(h.Box.ELEVEN)}.bind(this),2);break;case 13:this.uiManager.setActiveCloseButton(!1),this.canvas.emit("OnEndScreenReach",{}),this.uiManager.setHeaderYpos(450),this.scheduleOnce(function(){this.gamePlayNode.active=!1,this.completeNode.active=!0,this.panelAnimations[4].play(this.panelAnimations[4].getClips()[0].name)}.bind(this),1.5);break;case 14:this.uiManager.hideHeaderText(),this.panelAnimations[5].play(this.panelAnimations[5].getClips()[0].name);break;case 15:this.finalTextNode.getParent().active=!0,this.uiManager.showFooterText(this.scr_stepsController.getTextByKey("completionState1"));break;case 16:this.uiManager.hideFooterText(),this.scheduleOnce(function(){this.uiManager.showFooterText(this.scr_stepsController.getTextByKey("completionState2"))}.bind(this),1.5);break;case 17:this.uiManager.hideFooterText(),this.scheduleOnce(function(){this.finalTextNode.runAction(cc.moveTo(1,0,-225))}.bind(this),1.5);break;case 18:this.finalTextNode.runAction(cc.moveTo(1,0,-700)),this.scheduleOnce(function(){this.finalTextNode.getParent().active=!1;var t=this.getFirstAttemptCount();this.firstAttemptCount.string=""+t,this.reportText.getComponent(p.default).changeLabel("endScreenComplete"),t!=this.scr_stepsController.getTotalQuestions()&&this.reportText.getComponent(p.default).changeLabel("endScreenIncomplete"),this.reportNode.active=!0}.bind(this),1.5)}},e.prototype.onCommonButtonClick=function(t){this.uiManager.CommonButtonType.NextQuestion==t?this.scr_stepsController.loadNextStep():this.uiManager.CommonButtonType.TryAgain==t&&this.resetAfterTryAgain()},e.prototype.resetUI=function(){this.inputDoor.play(this.inputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Reverse,this.inputDoor.off("stop",this.onInputDoorAnimationComplete,this),this.outputDoor.play(this.outputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Normal,this.leftOverDoor.play(this.outputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Normal,this.processingDoor.play(this.processingDoor.getClips()[0].name).wrapMode=cc.WrapMode.Reverse,this.greenIndicator.active=!1,this.redIndicator.active=!1,this.hideHintPopup()},e.prototype.resetAfterTryAgain=function(){this.mFirstAttempts[this.scr_stepsController.getCurrentQuestionIndex()-1]=!1,this.scr_stepsController.loadNextStep(this.scr_stepsController.getCurrentStep())},e.prototype.onOptionDragStarted=function(t){this.scr_stepsController.onOptionDragStarted({optionName:t}),this.audioManager.play(h.getAudioName(h.AudioClips.BOX_PICKUP),this.audioClips[h.AudioClips.BOX_PICKUP],!1,"SFX")},e.prototype.onOptionDropped=function(t){this.uiManager.hideHeaderText(),this.mObjectName=t,this.inputDoor.play(this.inputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Normal,this.processingDoor.play(this.processingDoor.getClips()[0].name).wrapMode=cc.WrapMode.Normal,this.audioManager.play(h.getAudioName(h.AudioClips.DOOR_CLOSE),this.audioClips[h.AudioClips.DOOR_CLOSE],!1,"SFX"),this.inputDoor.on("stop",this.onInputDoorAnimationComplete,this),this.enableOptions(!1),this.optionNode.play(this.optionNode.getClips()[1].name),this.optionNode.on("stop",this.onSparkAnimationComplete,this),this.audioManager.play(h.getAudioName(h.AudioClips.CONVEYOR_BELT),this.audioClips[h.AudioClips.CONVEYOR_BELT],!0,"SFX")},e.prototype.onInputDoorAnimationComplete=function(){this.spark.play(this.spark.getClips()[0].name).wrapMode=cc.WrapMode.Normal,this.audioManager.play(h.getAudioName(h.AudioClips.MACHINE_PROCESS),this.audioClips[h.AudioClips.MACHINE_PROCESS],!1,"SFX")},e.prototype.onSparkAnimationComplete=function(){this.scr_stepsController.onOptionDropped({optionName:this.mObjectName}),this.stopConveyorBeltAudio()},e.prototype.onAnswerVerification=function(t){if(this.leftover.active=!1,console.log("Answer submitted "+t.isCorrect),t.isCorrect)this.mInProgress=!0,this.audioManager.play(h.getAudioName(h.AudioClips.CORRECT_ANSWER),this.audioClips[h.AudioClips.CORRECT_ANSWER],!1,"SFX"),this.audioManager.play(h.getAudioName(h.AudioClips.PROGRESS_BAR),this.audioClips[h.AudioClips.PROGRESS_BAR],!1,"SFX"),this.greenIndicator.active=!0;else{this.audioManager.play(h.getAudioName(h.AudioClips.WRONG_ANSWER),this.audioClips[h.AudioClips.WRONG_ANSWER],!1,"SFX"),this.leftover.active=!0,this.leftover.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this.leftOverBox[this.mActiveBox]);var e=parseInt(t.answer)%this.getDivisor(this.mActiveBox);this.leftOverCount.string="\xd7"+e,this.redIndicator.active=!0}this.output.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this.outputBox[this.mActiveBox]),this.outputDoor.play(this.outputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Reverse,this.leftOverDoor.play(this.outputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Reverse,this.audioManager.play(h.getAudioName(h.AudioClips.DOOR_OPEN),this.audioClips[h.AudioClips.DOOR_OPEN],!1,"SFX")},e.prototype.updateOptions=function(t){var e=this;1==this.scr_stepsController.getCurrentQuestionIndex()&&this.mFirstAttempts[0]||this.resetUI(),this.progressBar.progress=this.getProgressPercent(this.scr_stepsController.getCurrentQuestionIndex()-1),this.mActiveBox=t;var o=this.scr_stepsController.getCurrentStepJson(),i=0;this.packageInput.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this.packagingBox[t]),o.userInput.forEach(function(o){e.optionObject[i++].getComponent(l.default).updatePlaceHolderObject(e.optionBox[t],o)}),this.enableOptions(!1),this.optionNode.play(this.optionNode.getClips()[0].name),this.audioManager.play(h.getAudioName(h.AudioClips.CONVEYOR_BELT),this.audioClips[h.AudioClips.CONVEYOR_BELT],!0,"SFX"),this.optionNode.off("stop",this.onSparkAnimationComplete,this),this.optionNode.on("stop",this.stopConveyorBeltAudio,this)},e.prototype.stopConveyorBeltAudio=function(){this.audioManager.stop(h.getAudioName(h.AudioClips.CONVEYOR_BELT)),this.optionNode.off("stop",this.stopConveyorBeltAudio,this),this.enableOptions(!0)},e.prototype.enableOptions=function(t){this.optionObject.forEach(function(e){e.getComponent(l.default).enableTouch(t)})},e.prototype.update=function(t){if(this.mInProgress){var e=100*this.getProgressPercent(this.scr_stepsController.getCurrentQuestionIndex());this.mProgressPercent<e?(this.mProgressPercent++,this.progressBar.progress=this.mProgressPercent/100,this.mProgressPercent>=e&&this.mFirstAttempts[this.scr_stepsController.getCurrentQuestionIndex()-1]&&(this.indicators[this.scr_stepsController.getCurrentQuestionIndex()-1].spriteFrame=new cc.SpriteFrame(this.activeSprite))):this.mInProgress=!1}},e.prototype.showHintPopup=function(){this.scr_analyticsManager.sendOnHintButtonClick(this.scr_stepsController.getCurrentQuestionIndex()),this.scr_analyticsManager.sendOnHintView(this.scr_stepsController.getCurrentQuestionIndex()),this.hintPopup.active=!0,this.txtMessage.getComponent(p.default).changeLabel(this.getHintKey())},e.prototype.hideHintPopup=function(){this.hintPopup.active=!1},e.prototype.getFirstAttemptCount=function(){var t=0;return this.mFirstAttempts.forEach(function(e){e&&t++}),t},e.prototype.getProgressPercent=function(t){switch(t){case 1:return.1;case 2:return.2;case 3:return.3;case 4:return.4;case 5:return.5;case 6:return.625;case 7:return.75;case 8:return.875;case 9:return 1}return 0},e.prototype.getDivisor=function(t){switch(t){case h.Box.FIVE:return 5;case h.Box.TEN:return 10;case h.Box.ELEVEN:return 11}},e.prototype.getHintKey=function(){switch(this.scr_stepsController.getCurrentQuestionIndex()){case 1:case 2:case 3:return"hint1";case 4:case 5:case 6:return"hint2";case 7:case 8:case 9:return"hint3"}return"hint1"},n([g(cc.Node)],e.prototype,"canvas",void 0),n([g({type:cc.AudioClip})],e.prototype,"aud_bgm",void 0),n([g(cc.Node)],e.prototype,"introNode",void 0),n([g(cc.Animation)],e.prototype,"panelAnimations",void 0),n([g(cc.Node)],e.prototype,"gamePlayNode",void 0),n([g(cc.Animation)],e.prototype,"optionNode",void 0),n([g(cc.Node)],e.prototype,"optionObject",void 0),n([g({type:cc.Texture2D})],e.prototype,"optionBox",void 0),n([g({type:cc.Texture2D})],e.prototype,"outputBox",void 0),n([g({type:cc.Texture2D})],e.prototype,"leftOverBox",void 0),n([g({type:cc.Texture2D})],e.prototype,"packagingBox",void 0),n([g(cc.Animation)],e.prototype,"inputDoor",void 0),n([g(cc.Node)],e.prototype,"packageInput",void 0),n([g(cc.Animation)],e.prototype,"spark",void 0),n([g(cc.Animation)],e.prototype,"processingDoor",void 0),n([g(cc.Node)],e.prototype,"output",void 0),n([g(cc.Animation)],e.prototype,"outputDoor",void 0),n([g(cc.Node)],e.prototype,"leftover",void 0),n([g(cc.Animation)],e.prototype,"leftOverDoor",void 0),n([g(cc.Node)],e.prototype,"completeNode",void 0),n([g(cc.ProgressBar)],e.prototype,"progressBar",void 0),n([g(cc.Sprite)],e.prototype,"indicators",void 0),n([g({type:cc.Texture2D})],e.prototype,"activeSprite",void 0),n([g(cc.Label)],e.prototype,"leftOverCount",void 0),n([g({type:cc.AudioClip})],e.prototype,"audioClips",void 0),n([g(cc.Node)],e.prototype,"hintButton",void 0),n([g(cc.Node)],e.prototype,"hintPopup",void 0),n([g(cc.Node)],e.prototype,"blanket",void 0),n([g(cc.Label)],e.prototype,"txtMessage",void 0),n([g(cc.Node)],e.prototype,"greenIndicator",void 0),n([g(cc.Node)],e.prototype,"redIndicator",void 0),n([g(cc.Node)],e.prototype,"finalTextNode",void 0),n([g(cc.Node)],e.prototype,"reportNode",void 0),n([g(cc.Label)],e.prototype,"firstAttemptCount",void 0),n([g(cc.Label)],e.prototype,"reportText",void 0),e=n([u],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../../../../framework/scripts/AnalyticsManager":"AnalyticsManager","../../../../framework/scripts/AudioManager":"AudioManager","../../../../framework/scripts/StepsController":"StepsController","../../../../framework/scripts/UIManager":"UIManager","../../../../framework/scripts/utilities/TextLoader":"TextLoader","./TXPL06MAT03E03_Drag_Drop":"TXPL06MAT03E03_Drag_Drop","./TXPL06MAT03E03_GameModels":"TXPL06MAT03E03_GameModels"}],TXPL06MAT03E03_Drag_Drop:[function(t,e,o){"use strict";cc._RF.push(e,"2e686VlwiNOE6AR7JYJg2no","TXPL06MAT03E03_Drag_Drop");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=s.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dropPlace=null,e.startPos=null,e.gameNode=null,e.placeHolderObject=null,e.optionCount=null,e.inputCount=null,e.currentDraggingObject=null,e.mCount="",e.mIsTouchEnabled=!1,e}return i(e,t),e.prototype.updatePlaceHolderObject=function(t,e){this.node.active=!0,this.mCount=e,this.placeHolderObject.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t),this.node.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t),this.placeHolderObject.active=!1,this.optionCount.string=e},e.prototype.enableTouch=function(t){this.mIsTouchEnabled=t},e.prototype.start=function(){this.startPos=new cc.Vec2(this.node.position.x,this.node.position.y),this.gameNode.on("OnOptionDraggingStarted",function(t){this.currentDraggingObject=t}.bind(this)),this.gameNode.on("OnOptionDraggingEnded",function(t){this.currentDraggingObject=t}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_START,function(t){this.mIsTouchEnabled&&(null!=this.currentDraggingObject&&""!=this.currentDraggingObject||this.gameNode.emit("OnOptionDraggingStarted",this.mCount))}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){if(this.currentDraggingObject==this.mCount){var e=t.touch.getDelta();this.node.x+=e.x,this.node.y+=e.y}}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_END,function(t){if(this.currentDraggingObject==this.mCount){this.gameNode.emit("OnOptionDraggingEnded","");var e=this.node.parent.convertToWorldSpaceAR(this.node.position),o=this.dropPlace.convertToNodeSpaceAR(e);cc.Intersection.pointInPolygon(new cc.Vec2(o.x,o.y),this.dropPlace.getComponent(cc.PolygonCollider).world.points)?(this.placeHolderObject.active=!0,this.inputCount.string=this.mCount,this.node.active=!1,this.gameNode.emit("OnOptionDropped",this.mCount),this.node.position=this.startPos,this.node.scale=1):this.node.runAction(cc.moveTo(.3,this.startPos))}}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(t){if(this.currentDraggingObject==this.mCount){this.gameNode.emit("OnOptionDraggingEnded","");var e=this.node.parent.convertToWorldSpaceAR(this.node.position),o=this.dropPlace.convertToNodeSpaceAR(e);cc.Intersection.pointInPolygon(new cc.Vec2(o.x,o.y),this.dropPlace.getComponent(cc.PolygonCollider).world.points)?(this.placeHolderObject.active=!0,this.inputCount.string=this.mCount,this.node.active=!1,this.gameNode.emit("OnOptionDropped",this.mCount),this.node.position=this.startPos,this.node.scale=1):this.node.runAction(cc.moveTo(.3,this.startPos))}}.bind(this))},e.prototype.update=function(t){var e=this.node.parent.convertToWorldSpaceAR(this.node.position),o=this.dropPlace.convertToNodeSpaceAR(e);cc.Intersection.pointInPolygon(new cc.Vec2(o.x,o.y),this.dropPlace.getComponent(cc.PolygonCollider).world.points)?this.node.scale>.8?this.node.scale-=2*t:this.node.scale<.8&&(this.node.scale=.8):this.node.scale<1?this.node.scale+=2*t:this.node.scale>1&&(this.node.scale=1)},n([a(cc.Node)],e.prototype,"dropPlace",void 0),n([a(cc.Node)],e.prototype,"gameNode",void 0),n([a(cc.Node)],e.prototype,"placeHolderObject",void 0),n([a(cc.Label)],e.prototype,"optionCount",void 0),n([a(cc.Label)],e.prototype,"inputCount",void 0),e=n([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],TXPL06MAT03E03_GameModels:[function(t,e,o){"use strict";var i;cc._RF.push(e,"5a063xELc1NGoG9e4185D9t","TXPL06MAT03E03_GameModels"),Object.defineProperty(o,"__esModule",{value:!0}),function(t){t[t.FIVE=0]="FIVE",t[t.TEN=1]="TEN",t[t.ELEVEN=2]="ELEVEN"}(o.Box||(o.Box={})),function(t){t[t.CONVEYOR_BELT=0]="CONVEYOR_BELT",t[t.CORRECT_ANSWER=1]="CORRECT_ANSWER",t[t.DOOR_CLOSE=2]="DOOR_CLOSE",t[t.DOOR_OPEN=3]="DOOR_OPEN",t[t.PROGRESS_BAR=4]="PROGRESS_BAR",t[t.WRONG_ANSWER=5]="WRONG_ANSWER",t[t.MACHINE_PROCESS=6]="MACHINE_PROCESS",t[t.BOX_PICKUP=7]="BOX_PICKUP"}(i=o.AudioClips||(o.AudioClips={})),o.getAudioName=function(t){switch(t){case i.CONVEYOR_BELT:return"CONVEYOR_BELT";case i.CORRECT_ANSWER:return"CORRECT_ANSWER";case i.DOOR_CLOSE:return"DOOR_CLOSE";case i.DOOR_OPEN:return"DOOR_OPEN";case i.PROGRESS_BAR:return"PROGRESS_BAR";case i.WRONG_ANSWER:return"WRONG_ANSWER";case i.MACHINE_PROCESS:return"MACHINE_PROCESS";case i.BOX_PICKUP:return"BOX_PICKUP";default:return""}},cc._RF.pop()},{}],TXPL06SCI04E01_BaseQuestion:[function(t,e,o){"use strict";cc._RF.push(e,"44869kOfbhKyISkz4fGrhVZ","TXPL06SCI04E01_BaseQuestion");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=s.property,c=function(){function t(){this.optionKeys=[],this.correctAnswerIndex=1,this.hintSprite=null,this.feedbackCSV=[]}return t.prototype.getFeedbackArray=function(t){var e=[];return this.feedbackCSV[t].split(",").forEach(function(t){return e.push(parseInt(t))}),e},n([a({type:cc.String})],t.prototype,"optionKeys",void 0),n([a(cc.Integer)],t.prototype,"correctAnswerIndex",void 0),n([a(cc.SpriteFrame)],t.prototype,"hintSprite",void 0),n([a({type:[cc.String],tooltip:"Comma separated feedback index values "})],t.prototype,"feedbackCSV",void 0),t=n([r("TXPL06SCI04E01_QuestionData")],t)}();o.TXPL06SCI04E01_QuestionData=c;var p=function(){function t(){this.animNode=null,this.animName=" ",this.animRepeatCount=1,this.audioClip=null,this.disableAfterAnim=!0}return t.prototype.stopAnimation=function(){var t=this.animNode.getComponent(cc.Animation);t&&(t.stop(this.animName),t.setCurrentTime(0,this.animName))},t.prototype.reset=function(){null!=this.animNode&&(this.stopAnimation(),this.animNode.active=!1)},n([a(cc.Node)],t.prototype,"animNode",void 0),n([a(cc.String)],t.prototype,"animName",void 0),n([a()],t.prototype,"animRepeatCount",void 0),n([a({type:cc.AudioClip})],t.prototype,"audioClip",void 0),n([a(cc.Boolean)],t.prototype,"disableAfterAnim",void 0),t=n([r("TXPL06SCI04E01_Animation")],t)}();o.TXPL06SCI04E01_Animation=p;var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.questionData=null,e.gameManager=null,e.audioManager=null,e.selectedOption=0,e.isFeedbackCompleted=!1,e.failedFirstAttempt=!1,e}return i(e,t),e.prototype.start=function(){this.reset()},e.prototype.setGameManager=function(t,e){this.gameManager=t,this.audioManager=e},e.prototype.playFeedback=function(t){switch(this.selectedOption=t,t){case 0:this.playFeedbackOne();break;case 1:this.playFeedbackTwo();break;case 2:this.playFeedbackThree()}},e.prototype.playFeedbackOne=function(){},e.prototype.playFeedbackTwo=function(){},e.prototype.playFeedbackThree=function(){},e.prototype.reset=function(){this.isFeedbackCompleted=!1},e.prototype.blinkNode=function(t,e,o,i){void 0===e&&(e=1),void 0===o&&(o=1),t.active=!0;var n=cc.tween().to(e/2,{opacity:0}),s=cc.tween().to(e/2,{opacity:255});-1!=o?cc.tween(t).sequence(n,s).repeat(o).call(i).start():cc.tween(t).sequence(n,s).repeatForever().start()},e.prototype.playAnimation=function(t,e,o,i,n){if(void 0===i&&(i=1),void 0===n&&(n=!0),null==t)return 0;t.active=!0;var s=t.getComponent(cc.Animation).play(e);if(this.playAnimAudio(o),s.wrapMode==cc.WrapMode.Loop)return 0;s.repeatCount=i;var r=s.duration*i;return n&&this.scheduleOnce(function(){return t.active=!1},r),r},e.prototype.playFeedbackAnimation=function(t){return this.playAnimation(t.animNode,t.animName,t.audioClip,t.animRepeatCount,t.disableAfterAnim)},e.prototype.playAnimationsInSequence=function(t,e){var o=this;if(!(t.length<=0)){var i=function(n,s){var r=o.playAnimation(s.animNode,s.animName,s.audioClip,s.animRepeatCount,s.disableAfterAnim),a=n+1;a>=t.length?o.scheduleOnce(e,r):o.scheduleOnce(function(){s.audioClip&&o.audioManager.stop(s.audioClip.name),i(a,t[a])},r)};i(0,t[0])}},e.prototype.playAnimationsParallely=function(t){if(!(t.length<=0))for(var e=0,o=t;e<o.length;e++){var i=o[e];this.playAnimation(i.animNode,i.animName,i.audioClip,i.animRepeatCount,i.disableAfterAnim)}},e.prototype.playAnimAudio=function(t){t&&this.audioManager.play(t.name,t,!1,"SFX")},e.prototype.setActive=function(t,e,o){if(null!=t){if(e){t.opacity=0;var i=255}else{t.opacity=255;i=0}t.active=!0,cc.tween(t).to(1,{opacity:i},{easing:"cubicOut"}).call(function(){e||(t.active=!1),o&&o()}).start()}},e.prototype.moveNode=function(t,e,o,i,n){null!=t&&(t.setPosition(e),cc.tween(t).to(i,{position:o},{easing:"smooth"}).call(n).start())},e.prototype.scaleNode=function(t,e,o,i){null!=t&&cc.tween(t).to(o,{scale:e},{easing:"cubicOut"}).delay(1).call(i).start()},e.prototype.resetAnim=function(t,e){var o=t.getComponent(cc.Animation);null!=o&&(o.stop(e),o.setCurrentTime(0,e))},n([a(c)],e.prototype,"questionData",void 0),e=n([r],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],TXPL06SCI04E01_PropertiesOfMaterials:[function(t,e,o){"use strict";cc._RF.push(e,"078effVhl1I+qKuj7ZaY/d1","TXPL06SCI04E01_PropertiesOfMaterials");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/AudioManager"),r=t("../../../../framework/scripts/AnalyticsManager"),a=t("../../../../framework/scripts/StepsController"),c=t("../../../../framework/scripts/UIManager"),p=t("./TXPL06SCI04E01_BaseQuestion"),l=t("../../../../framework/prefab/template7/Template7_OptionHandler"),h=t("../../../../framework/prefab/template7/Template7_Turorial"),d=cc._decorator,u=d.ccclass,g=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.tutorialManager=null,e.optionsHandler=null,e.hintPanel=null,e.gamePanels=[],e.backgroundMusic=null,e.ambientMusic=null,e.hintAudio=null,e.transitionAudio=null,e.hintScreen=null,e.hintLabel=null,e.hintSprite=null,e.hintButton=null,e.questions=[],e.isTutorialShown=!1,e.currentGamePanelIndex=0,e.isCorrect=!1,e.selectedOptionIndex=0,e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.scr_stepsController=this.canvas.getComponent(a.default),this.uiManager=this.canvas.getComponent(c.default),this.audioManager=this.canvas.getComponent(s.default),this.scr_analyticsManager=this.canvas.getComponent(r.default),this.canvas.on("OnLoadStep",this.stepsHandler.bind(this)),this.canvas.on("OnCommonButtonClick",this.onCommonButtonClick.bind(this)),this.canvas.on("OnFeedbackPlayComplete",this.onFeedbackPlayComplete.bind(this)),this.tutorialManager.node.on("onTutorialStop",function(){return t.showQuestion(!0)},this),this.optionsHandler.node.on("onOptionSelected",this.onSubmit,this),this.hintScreen=this.hintPanel.getChildByName("HintScreen"),this.hintButton=this.hintPanel.getChildByName("HintButton").getComponent(cc.Button),this.hintSprite=this.hintScreen.getChildByName("Sprite").getComponent(cc.Sprite),this.hintLabel=this.hintScreen.getChildByName("Label").getComponent(cc.Label);for(var e=1;e<this.gamePanels.length-1;e++)this.questions[e]=this.gamePanels[e].getComponent(p.default),this.questions[e].setGameManager(this,this.audioManager);this.gamePanels.forEach(function(t){return t.active=!1}),this.hintPanel.active=!1,this.hintButton.interactable=!1},e.prototype.start=function(){this.scr_stepsController.Initialise("TXPL06SCI04E01_PropertiesOfMaterials"),this.audioManager.play("bgm",this.backgroundMusic,!0,"BGM"),this.audioManager.play("ambience",this.ambientMusic,!0,"BGM")},e.prototype.showNextGamePanel=function(){if(!(this.currentGamePanelIndex+1>=this.gamePanels.length)){this.gamePanels[this.currentGamePanelIndex].active=!1,this.currentGamePanelIndex+=1;var t=this.gamePanels[this.currentGamePanelIndex];return t.active=!0,t}},e.prototype.stepsHandler=function(t){switch(console.log("Steps handler. Next step is "+t),t){case 0:this.gamePanels[this.currentGamePanelIndex].active=!0;case 1:this.playIntroAnim(t);case 2:break;case 3:this.hintPanel.active=!0;case 5:case 7:case 9:case 11:case 13:this.showNextGamePanel();break;case 15:this.showOutroPanel();break;default:this.showQuestion()}this.playTransitionAudio()},e.prototype.showOutroPanel=function(){this.canvas.emit("OnEndScreenReach",{}),this.uiManager.setActiveCloseButton(!1),this.uiManager.setHeaderYpos(),this.showNextGamePanel(),this.hintPanel.active=!1},e.prototype.onCommonButtonClick=function(t){this.uiManager.CommonButtonType.NextQuestion==t?(this.scr_analyticsManager.sendNextQuestionStart(this.scr_stepsController.getCurrentQuestionIndex(),!1,this.scr_analyticsManager.Phylum.Click),this.scr_stepsController.loadNextStep()):this.uiManager.CommonButtonType.TryAgain==t&&(this.scr_analyticsManager.sendOnTryAgain(this.scr_stepsController.getCurrentQuestionIndex(),this.selectedOptionIndex+1),this.currentQuestion.failedFirstAttempt=!0,this.showQuestion(!0))},e.prototype.onFeedbackPlayComplete=function(t){this.currentQuestion.isFeedbackCompleted&&(this.isCorrect?this.uiManager.setActiveNextButton(!0):this.uiManager.setActiveTryAgainButton(!0))},e.prototype.playIntroAnim=function(t){var e=this,o=this.gamePanels[0].getChildByName("IntroPanel_"+t);if(null!=o)if(0==t){var i=this.scr_stepsController.getCurrentStepJson().duration;cc.tween(o).to(1,{opacity:255},{easing:"smooth"}).delay(i).to(1,{opacity:0},{easing:"smooth"}).start()}else cc.tween(o).to(1,{position:{value:cc.v2(o.x,0),easing:"smooth"}}).delay(1).call(function(){var t=e.gamePanels[0].getChildByName("IntroPanel_2");cc.tween(t).to(1,{position:{value:cc.v2(344,0),easing:"smooth"}}).start()}).start()},e.prototype.playTransitionAudio=function(){var t=this;this.transitionAudio&&this.scheduleOnce(function(){t.audioManager.play("transitionAudio",t.transitionAudio,!1,"SFX")},2)},e.prototype.showQuestion=function(t){var e=this;void 0===t&&(t=!1);var o=this.scr_stepsController.getCurrentQuestionIndex(),i=this.questions[o].questionData,n=function(){e.checkAndShowTutorial()||(e.hintLabel.string=e.scr_stepsController.getCurrentStepJson().hint,e.hintSprite.spriteFrame=i.hintSprite,e.hintButton.interactable=!0,e.optionsHandler.show(i.correctAnswerIndex,i.optionKeys))};if(t)this.questions[o].reset(),n();else{var s=this.scr_stepsController.getCurrentStepJson().duration;this.scheduleOnce(n,s)}},e.prototype.checkAndShowTutorial=function(){return!this.isTutorialShown&&(this.tutorialManager.node.active=!0,this.tutorialManager.show(),this.isTutorialShown=!0,!0)},e.prototype.onSubmit=function(t,e){this.selectedOptionIndex=t,this.isCorrect=e,this.hintButton.interactable=!1,this.currentQuestion.playFeedback(t)},e.prototype.showFeedback=function(t,e){void 0===e&&(e=!1),this.scr_stepsController.playFeedback(t,this.isCorrect,e);for(var o=0,i=0,n=t;i<n.length;i++){var s=n[i];o+=this.scr_stepsController.getCurrentStepJson().feedBack[s].duration}return o},Object.defineProperty(e.prototype,"currentQuestion",{get:function(){var t=this.scr_stepsController.getCurrentQuestionIndex();return this.questions[t]},enumerable:!0,configurable:!0}),e.prototype.showHint=function(){this.hintScreen.opacity=0,this.hintScreen.active=!0,cc.tween(this.hintScreen).to(.2,{opacity:255}).start(),this.hintAudio&&this.audioManager.play("hintAudio",this.hintAudio,!1,"SFX")},e.prototype.hideHint=function(){var t=this;cc.tween(this.hintScreen).to(.2,{opacity:0}).call(function(){return t.hintScreen.active=!1}).start(),this.hintAudio&&this.audioManager.play("hintAudio",this.hintAudio,!1,"SFX")},n([g(cc.Node)],e.prototype,"canvas",void 0),n([g(h.default)],e.prototype,"tutorialManager",void 0),n([g(l.default)],e.prototype,"optionsHandler",void 0),n([g(cc.Node)],e.prototype,"hintPanel",void 0),n([g([cc.Node])],e.prototype,"gamePanels",void 0),n([g({type:cc.AudioClip})],e.prototype,"backgroundMusic",void 0),n([g({type:cc.AudioClip})],e.prototype,"ambientMusic",void 0),n([g({type:cc.AudioClip})],e.prototype,"hintAudio",void 0),n([g({type:cc.AudioClip})],e.prototype,"transitionAudio",void 0),e=n([u],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../../../../framework/prefab/template7/Template7_OptionHandler":"Template7_OptionHandler","../../../../framework/prefab/template7/Template7_Turorial":"Template7_Turorial","../../../../framework/scripts/AnalyticsManager":"AnalyticsManager","../../../../framework/scripts/AudioManager":"AudioManager","../../../../framework/scripts/StepsController":"StepsController","../../../../framework/scripts/UIManager":"UIManager","./TXPL06SCI04E01_BaseQuestion":"TXPL06SCI04E01_BaseQuestion"}],TXPL06SCI04E01_QuestionFive:[function(t,e,o){"use strict";cc._RF.push(e,"e44b78ouqZJeLEoQ5gYVbUp","TXPL06SCI04E01_QuestionFive");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./TXPL06SCI04E01_BaseQuestion"),r=cc._decorator,a=r.ccclass,c=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.human=null,e.optionLabels=[],e}return i(e,t),e.prototype.start=function(){t.prototype.start.call(this),this.optionLabels.forEach(function(t){t.horizontalAlign=cc.Label.HorizontalAlign.CENTER,t.fontSize=25})},e.prototype.playFeedbackOne=function(){var e=this;t.prototype.playFeedbackOne.call(this);var o=this.node.getComponent(cc.Animation).play("WF2Q5").duration;this.scheduleOnce(function(){var t=e.human.getComponent(cc.Animation).play("AryaSad").duration;e.scheduleOnce(function(){e.isFeedbackCompleted=!0,e.gameManager.showFeedback(e.questionData.getFeedbackArray(e.selectedOption))},t)},o)},e.prototype.playFeedbackTwo=function(){var e=this;t.prototype.playFeedbackTwo.call(this);var o=this.node.getComponent(cc.Animation).play("WF1Q5").duration;this.scheduleOnce(function(){var t=e.human.getComponent(cc.Animation).play("AryaSad").duration;e.scheduleOnce(function(){e.isFeedbackCompleted=!0,e.gameManager.showFeedback(e.questionData.getFeedbackArray(e.selectedOption))},t)},o)},e.prototype.playFeedbackThree=function(){t.prototype.playFeedbackThree.call(this);var e=this.node.getComponent(cc.Animation),o=this.questionData.getFeedbackArray(this.selectedOption),i=e.play("CFQ5");i.duration,i.speed;this.isFeedbackCompleted=!0,this.gameManager.showFeedback(o)},e.prototype.reset=function(){t.prototype.reset.call(this),this.resetAnim(this.node),this.resetAnim(this.human,"AryaSad"),this.node.getComponent(cc.Animation).play("Q5Idle")},n([c(cc.Node)],e.prototype,"human",void 0),n([c([cc.Label])],e.prototype,"optionLabels",void 0),e=n([a],e)}(s.default);o.default=p,cc._RF.pop()},{"./TXPL06SCI04E01_BaseQuestion":"TXPL06SCI04E01_BaseQuestion"}],TXPL06SCI04E01_QuestionFour:[function(t,e,o){"use strict";cc._RF.push(e,"b7a59I7NzpCeoLFmPpeSxn7","TXPL06SCI04E01_QuestionFour");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./TXPL06SCI04E01_BaseQuestion"),r=cc._decorator,a=r.ccclass,c=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.highlights=null,e.walls=null,e.materials=null,e.human=null,e.optionLabels=[],e.feedbackNode=null,e}return i(e,t),e.prototype.start=function(){t.prototype.start.call(this),this.optionLabels.forEach(function(t){t.horizontalAlign=cc.Label.HorizontalAlign.LEFT,t.fontSize=24})},e.prototype.playFeedbackOne=function(){var e=this;t.prototype.playFeedbackOne.call(this),this.setActive(this.materials,!1,function(){e.feedbackNode=e.node.getChildByName("CF"),e.setActive(e.feedbackNode,!0,function(){var t=e.gameManager.showFeedback(e.questionData.getFeedbackArray(e.selectedOption));e.scheduleOnce(function(){var t=e.walls.getChildByName("FirstWall");e.setActive(e.feedbackNode,!1),e.setActive(t,!1,function(){e.moveNode(e.walls,e.walls.getPosition(),e.walls.getPosition().add(cc.v2(0,800)),2,function(){var t=e.human.getComponent(cc.Animation).play("AryaQ4Walk").duration;e.scheduleOnce(function(){e.isFeedbackCompleted=!0,e.gameManager.onFeedbackPlayComplete()},t)})})},t)})})},e.prototype.playFeedbackTwo=function(){var e=this;t.prototype.playFeedbackTwo.call(this),this.setActive(this.materials,!1,function(){e.feedbackNode=e.node.getChildByName("WF1"),e.setActive(e.feedbackNode,!0,function(){var t=e.human.getComponent(cc.Animation).play("AryaSad").duration;e.scheduleOnce(function(){e.isFeedbackCompleted=!0,e.gameManager.showFeedback(e.questionData.getFeedbackArray(e.selectedOption))},t)})})},e.prototype.playFeedbackThree=function(){var e=this;t.prototype.playFeedbackThree.call(this),this.setActive(this.materials,!1,function(){e.feedbackNode=e.node.getChildByName("WF2"),e.setActive(e.feedbackNode,!0,function(){var t=e.human.getComponent(cc.Animation).play("AryaSad").duration;e.scheduleOnce(function(){e.isFeedbackCompleted=!0,e.gameManager.showFeedback(e.questionData.getFeedbackArray(e.selectedOption))},t)})})},e.prototype.reset=function(){t.prototype.reset.call(this),this.resetAnim(this.node),this.resetAnim(this.human,"AryaSad"),this.blinkNode(this.highlights,1,3),this.setActive(this.materials,!0),this.feedbackNode&&(this.feedbackNode.active=!1)},n([c(cc.Node)],e.prototype,"highlights",void 0),n([c(cc.Node)],e.prototype,"walls",void 0),n([c(cc.Node)],e.prototype,"materials",void 0),n([c(cc.Node)],e.prototype,"human",void 0),n([c([cc.Label])],e.prototype,"optionLabels",void 0),e=n([a],e)}(s.default);o.default=p,cc._RF.pop()},{"./TXPL06SCI04E01_BaseQuestion":"TXPL06SCI04E01_BaseQuestion"}],TXPL06SCI04E01_QuestionOne:[function(t,e,o){"use strict";cc._RF.push(e,"312c3D69dRKzYZgX9tfJoJ9","TXPL06SCI04E01_QuestionOne");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./TXPL06SCI04E01_BaseQuestion"),r=cc._decorator,a=r.ccclass,c=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.thermocolBlock=null,e.woodBlock=null,e.aluminiumBlock=null,e.doorBoxPosition=null,e.human=null,e.thermocolBlockClip=null,e.woodBlockClip=null,e.door=null,e.doorAnimDuration=1,e.doorTween=null,e.optionSelectedCallback=null,e.isBoxBroken=!1,e.boxInitialPos=null,e}return i(e,t),e.prototype.start=function(){this.door=this.node.getChildByName("Door"),t.prototype.start.call(this),this.animateDoor()},e.prototype.playFeedbackOne=function(){var e=this;t.prototype.playFeedbackOne.call(this),this.fadeOut(this.woodBlock,.5,function(){e.fadeIn(e.woodBlock,.5,function(){e.isBoxBroken=!0,e.audioManager.play(e.woodBlockClip.name,e.woodBlockClip,!1,"SFX");var t=e.woodBlock.getComponent(cc.Animation).play("SoftwoodBox").duration;e.scheduleOnce(function(){e.woodBlock.setSiblingIndex(8),t=e.human.getComponent(cc.Animation).play("AryaSad").duration,e.scheduleOnce(function(){e.isFeedbackCompleted=!0,e.gameManager.showFeedback(e.questionData.getFeedbackArray(e.selectedOption))},t)},t)})})},e.prototype.playFeedbackTwo=function(){var e=this;t.prototype.playFeedbackTwo.call(this);var o=this.questionData.getFeedbackArray(this.selectedOption);this.fadeOut(this.aluminiumBlock,.5,function(){e.scheduleOnce(function(){return e.doorTween.stop()},.8),e.fadeIn(e.aluminiumBlock,.5,function(){var t=e.gameManager.showFeedback([o[0]],!0);e.scheduleOnce(function(){e.gameManager.showFeedback([o[1]]),e.scheduleOnce(function(){e.human.setSiblingIndex(8);var t=e.human.getComponent(cc.Animation).play("AryaWalk"),o=t.duration/t.speed;e.scheduleOnce(function(){var t=e.human.getComponent(cc.Animation).play("AryaCrawl"),o=t.duration/t.speed;e.scheduleOnce(function(){return e.human.setSiblingIndex(6)},.8),e.scheduleOnce(function(){e.isFeedbackCompleted=!0,e.gameManager.onFeedbackPlayComplete()},o)},o)},1)},t+1.2)})})},e.prototype.playFeedbackThree=function(){var e=this;t.prototype.playFeedbackThree.call(this),this.fadeOut(this.thermocolBlock,.5,function(){e.fadeIn(e.thermocolBlock,.5,function(){e.isBoxBroken=!0,e.audioManager.play(e.thermocolBlockClip.name,e.thermocolBlockClip,!1,"SFX");var t=e.thermocolBlock.getComponent(cc.Animation).play("ThermocolBox").duration;e.scheduleOnce(function(){t=e.human.getComponent(cc.Animation).play("AryaSad").duration,e.scheduleOnce(function(){e.isFeedbackCompleted=!0,e.gameManager.showFeedback(e.questionData.getFeedbackArray(e.selectedOption))},t)},t)})})},e.prototype.animateDoor=function(){var t=cc.tween().to(this.doorAnimDuration,{position:cc.v2(this.door.x,373)}).call(this.onDoorOpenend.bind(this)).delay(.5).to(this.doorAnimDuration,{position:cc.v2(this.door.x,263)}).call(this.onDoorClosed.bind(this)).delay(.5);this.doorTween=cc.tween(this.door).repeatForever(t).start()},e.prototype.onDoorOpenend=function(){this.optionSelectedCallback&&this.optionSelectedCallback()},e.prototype.onDoorClosed=function(){this.isBoxBroken&&this.doorTween.stop()},e.prototype.fadeOut=function(t,e,o){var i=this;cc.tween(t).to(e,{opacity:0}).call(function(){i.boxInitialPos=t.getPosition(),t.setPosition(i.doorBoxPosition.getPosition()),i.optionSelectedCallback=o}).start()},e.prototype.fadeIn=function(t,e,o){cc.tween(t).to(e,{opacity:255}).call(o).start()},e.prototype.reset=function(){if(t.prototype.reset.call(this),this.optionSelectedCallback=null,this.isBoxBroken=!1,this.door.setPosition(cc.v2(this.door.x,263)),this.resetAnim(this.human,"AryaSad"),this.resetAnim(this.woodBlock,"SoftwoodBox"),this.resetAnim(this.thermocolBlock,"ThermocolBox"),this.resetAnim(this.aluminiumBlock),this.woodBlock.setSiblingIndex(5),this.human.setSiblingIndex(6),this.boxInitialPos){switch(this.selectedOption){case 0:this.woodBlock.setPosition(this.boxInitialPos);break;case 1:this.aluminiumBlock.setPosition(this.boxInitialPos);break;case 2:this.thermocolBlock.setPosition(this.boxInitialPos)}this.animateDoor()}},n([c(cc.Node)],e.prototype,"thermocolBlock",void 0),n([c(cc.Node)],e.prototype,"woodBlock",void 0),n([c(cc.Node)],e.prototype,"aluminiumBlock",void 0),n([c(cc.Node)],e.prototype,"doorBoxPosition",void 0),n([c(cc.Node)],e.prototype,"human",void 0),n([c({type:cc.AudioClip})],e.prototype,"thermocolBlockClip",void 0),n([c({type:cc.AudioClip})],e.prototype,"woodBlockClip",void 0),e=n([a],e)}(s.default);o.default=p,cc._RF.pop()},{"./TXPL06SCI04E01_BaseQuestion":"TXPL06SCI04E01_BaseQuestion"}],TXPL06SCI04E01_QuestionSix:[function(t,e,o){"use strict";cc._RF.push(e,"43b2f2hmNFIYrV/+kqQuWdZ","TXPL06SCI04E01_QuestionSix");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./TXPL06SCI04E01_BaseQuestion"),r=cc._decorator,a=r.ccclass,c=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.highlight=null,e.human=null,e}return i(e,t),e.prototype.start=function(){t.prototype.start.call(this)},e.prototype.playFeedbackOne=function(){var e=this;t.prototype.playFeedbackOne.call(this);var o=this.node.getComponent(cc.Animation).play("WF1Q6").duration;this.scheduleOnce(function(){e.blinkNode(e.highlight,1,3,function(){var t=e.human.getComponent(cc.Animation).play("AryaSad").duration;e.scheduleOnce(function(){e.isFeedbackCompleted=!0,e.gameManager.showFeedback(e.questionData.getFeedbackArray(e.selectedOption))},t)})},o)},e.prototype.playFeedbackTwo=function(){var e=this;t.prototype.playFeedbackTwo.call(this);var o=this.node.getComponent(cc.Animation).play("CFQ6").duration;this.scheduleOnce(function(){e.isFeedbackCompleted=!0,e.gameManager.showFeedback(e.questionData.getFeedbackArray(e.selectedOption))},o)},e.prototype.playFeedbackThree=function(){var e=this;t.prototype.playFeedbackThree.call(this);var o=this.node.getComponent(cc.Animation).play("WF2Q6").duration;this.scheduleOnce(function(){e.blinkNode(e.highlight,1,3,function(){var t=e.human.getComponent(cc.Animation).play("AryaSad").duration;e.scheduleOnce(function(){e.isFeedbackCompleted=!0,e.gameManager.showFeedback(e.questionData.getFeedbackArray(e.selectedOption))},t)})},o)},e.prototype.reset=function(){t.prototype.reset.call(this),this.resetAnim(this.node),this.resetAnim(this.human,"AryaSad"),this.node.getComponent(cc.Animation).play("Q6Idle")},n([c(cc.Node)],e.prototype,"highlight",void 0),n([c(cc.Node)],e.prototype,"human",void 0),e=n([a],e)}(s.default);o.default=p,cc._RF.pop()},{"./TXPL06SCI04E01_BaseQuestion":"TXPL06SCI04E01_BaseQuestion"}],TXPL06SCI04E01_QuestionThree:[function(t,e,o){"use strict";cc._RF.push(e,"daf34QbiNpMna42sImJ5ByF","TXPL06SCI04E01_QuestionThree");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./TXPL06SCI04E01_BaseQuestion"),r=cc._decorator,a=r.ccclass,c=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.steelPlank=null,e.human=null,e.water=null,e}return i(e,t),e.prototype.start=function(){this.water=this.node.getChildByName("Water"),t.prototype.start.call(this)},e.prototype.playFeedbackOne=function(){var e=this;t.prototype.playFeedbackOne.call(this);var o=this.node.getComponent(cc.Animation).play("AryaWrongSurfQ3"),i=o.duration/o.speed;this.scheduleOnce(function(){return e.water.setSiblingIndex(11)},2.7),this.scheduleOnce(function(){e.isFeedbackCompleted=!0,e.gameManager.showFeedback(e.questionData.getFeedbackArray(e.selectedOption))},i)},e.prototype.playFeedbackTwo=function(){var e=this;t.prototype.playFeedbackTwo.call(this);var o=this.steelPlank.getComponent(cc.Animation).play("SteelPlankQ3").duration;this.scheduleOnce(function(){return e.water.setSiblingIndex(11)},1),this.scheduleOnce(function(){var t=e.human.getComponent(cc.Animation).play("AryaDisappointed").duration;e.scheduleOnce(function(){e.isFeedbackCompleted=!0,e.gameManager.showFeedback(e.questionData.getFeedbackArray(e.selectedOption))},t)},o)},e.prototype.playFeedbackThree=function(){var e=this;t.prototype.playFeedbackThree.call(this);var o=this.node.getComponent(cc.Animation);o.play("AryaSurfQ3").duration;this.scheduleOnce(function(){o.pause("AryaSurfQ3"),e.isFeedbackCompleted=!0,e.gameManager.showFeedback(e.questionData.getFeedbackArray(e.selectedOption)),e.scheduleOnce(function(){return o.resume("AryaSurfQ3")},7)},.67)},e.prototype.reset=function(){t.prototype.reset.call(this),this.resetAnim(this.node),this.resetAnim(this.human,"AryaDisappointed"),this.resetAnim(this.steelPlank,"SteelPlankQ3"),this.node.getComponent(cc.Animation).play("Q3Idle"),this.water.setSiblingIndex(6)},n([c(cc.Node)],e.prototype,"steelPlank",void 0),n([c(cc.Node)],e.prototype,"human",void 0),e=n([a],e)}(s.default);o.default=p,cc._RF.pop()},{"./TXPL06SCI04E01_BaseQuestion":"TXPL06SCI04E01_BaseQuestion"}],TXPL06SCI04E01_QuestionTwo:[function(t,e,o){"use strict";cc._RF.push(e,"80c46AELrpH3oCGez7eUwx5","TXPL06SCI04E01_QuestionTwo");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./TXPL06SCI04E01_BaseQuestion"),r=cc._decorator,a=r.ccclass,c=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.thermocolSheet=null,e.woodenPlank=null,e.metalRod=null,e.human=null,e.buttonClickClip=null,e.door=null,e}return i(e,t),e.prototype.start=function(){this.door=this.node.getChildByName("Door"),t.prototype.start.call(this)},e.prototype.playFeedbackOne=function(){var e=this;t.prototype.playFeedbackOne.call(this);var o=this.metalRod.getComponent(cc.Animation).play("MetalRod").duration;this.scheduleOnce(function(){return e.metalRod.setSiblingIndex(8)},1),this.scheduleOnce(function(){e.audioManager.play(e.buttonClickClip.name,e.buttonClickClip,!1,"SFX"),e.liftDoor(),e.isFeedbackCompleted=!0,e.gameManager.showFeedback(e.questionData.getFeedbackArray(e.selectedOption))},o)},e.prototype.playFeedbackTwo=function(){var e=this;t.prototype.playFeedbackTwo.call(this);var o=this.woodenPlank.getComponent(cc.Animation).play("WoodenFloating").duration;this.scheduleOnce(function(){var t=e.human.getComponent(cc.Animation).play("AryaDisappointed").duration;e.scheduleOnce(function(){e.isFeedbackCompleted=!0,e.gameManager.showFeedback(e.questionData.getFeedbackArray(e.selectedOption))},t)},o)},e.prototype.playFeedbackThree=function(){var e=this;t.prototype.playFeedbackThree.call(this);var o=this.thermocolSheet.getComponent(cc.Animation).play("ThermocolFloating").duration;this.scheduleOnce(function(){var t=e.human.getComponent(cc.Animation).play("AryaDisappointed").duration;e.scheduleOnce(function(){e.isFeedbackCompleted=!0,e.gameManager.showFeedback(e.questionData.getFeedbackArray(e.selectedOption))},t)},o)},e.prototype.liftDoor=function(t){cc.tween(this.door).to(1,{position:cc.v2(this.door.x,332)}).call(t).start()},e.prototype.reset=function(){t.prototype.reset.call(this),this.door.setPosition(cc.v2(this.door.x,157)),this.resetAnim(this.human,"AryaDisappointed"),this.resetAnim(this.thermocolSheet,"ThermocolFloating"),this.resetAnim(this.metalRod,"MetalRod"),this.resetAnim(this.woodenPlank,"WoodenFloating"),this.metalRod.setSiblingIndex(11)},n([c(cc.Node)],e.prototype,"thermocolSheet",void 0),n([c(cc.Node)],e.prototype,"woodenPlank",void 0),n([c(cc.Node)],e.prototype,"metalRod",void 0),n([c(cc.Node)],e.prototype,"human",void 0),n([c({type:cc.AudioClip})],e.prototype,"buttonClickClip",void 0),e=n([a],e)}(s.default);o.default=p,cc._RF.pop()},{"./TXPL06SCI04E01_BaseQuestion":"TXPL06SCI04E01_BaseQuestion"}],TXPL06SCI05E01_GameModels:[function(t,e,o){"use strict";var i;cc._RF.push(e,"f3e591PifhGf545xIVm1Z75","TXPL06SCI05E01_GameModels"),Object.defineProperty(o,"__esModule",{value:!0}),function(t){t[t.WATER=0]="WATER",t[t.BG=1]="BG",t[t.CORRECT=2]="CORRECT",t[t.WRONG=3]="WRONG",t[t.WRONG2=4]="WRONG2"}(o.CustomNode||(o.CustomNode={})),function(t){t[t.HAPPY=0]="HAPPY",t[t.SAD=1]="SAD",t[t.IDLE=2]="IDLE"}(o.Character||(o.Character={})),function(t){t[t.Q1=0]="Q1",t[t.Q2=1]="Q2",t[t.Q3=2]="Q3",t[t.Q4=3]="Q4"}(o.question||(o.question={})),function(t){t[t.BACKPACK_POP=0]="BACKPACK_POP",t[t.BACKPACK_TAP=1]="BACKPACK_TAP",t[t.CORRECT_ANSWER=2]="CORRECT_ANSWER",t[t.PIPE_ATTACHING_TANK=3]="PIPE_ATTACHING_TANK",t[t.PIPE_TAP=4]="PIPE_TAP",t[t.TANK_TAP=5]="TANK_TAP",t[t.CLICK_SFX=6]="CLICK_SFX"}(i=o.AudioClips||(o.AudioClips={})),o.getAudioName=function(t){switch(t){case i.BACKPACK_POP:return"BACKPACK_POP";case i.BACKPACK_TAP:return"BACKPACK_TAP";case i.CORRECT_ANSWER:return"CORRECT_ANSWER";case i.PIPE_ATTACHING_TANK:return"PIPE_ATTACHING_TANK";case i.PIPE_TAP:return"PIPE_TAP";case i.TANK_TAP:return"TANK_TAP";case i.CLICK_SFX:return"CLICK_SFX";default:return""}},o.getTankID=function(t){switch(t){case"Tank1":return 0;case"Tank2":return 1;case"Tank3":return 2;case"Tank4":return 3}},cc._RF.pop()},{}],TXPL06SCI05E01_Separation:[function(t,e,o){"use strict";cc._RF.push(e,"fc26ehY/o9Gpqt8pwAzsR7O","TXPL06SCI05E01_Separation");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/AnalyticsManager"),r=t("../../../../framework/scripts/AudioManager"),a=t("../../../../framework/scripts/StepsController"),c=t("../../../../framework/scripts/UIManager"),p=t("./TXPL06SCI05E01_GameModels"),l=cc._decorator,h=l.ccclass,d=l.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.aud_bgm=null,e.introNode=null,e.transitionNode=null,e.gamePlayNode=null,e.bag=null,e.optionTank=null,e.character=null,e.tank=[],e.pipeUp=[],e.pipeDown=[],e.reservoir=[],e.reservoirTextures=[],e.aquarium=[],e.creature=[],e.tankTextures=[],e.transitionTextures=[],e.transitionTankNodes=[],e.transitionCharacter=null,e.optionPipe=null,e.specialOptionNode=[],e.audioClips=[],e.mActivePipe=[],e.mActiveQuestion=null,e.mTapEnable=!0,e.mLastAquariumIndex=0,e}return i(e,t),e.prototype.onLoad=function(){this.canvas=cc.find("CommonCanvas"),this.scr_stepsController=this.canvas.getComponent(a.default),this.scr_uiManager=this.canvas.getComponent(c.default),this.scr_audioManager=this.canvas.getComponent(r.default),this.scr_analyticsManager=this.canvas.getComponent(s.default),this.canvas.on("OnLoadStep",this.stepsHandler.bind(this)),this.canvas.on("OnCommonButtonClick",this.onCommonButtonClick.bind(this)),this.canvas.on("OnAnswerVerification",this.onAnswerVerification.bind(this))},e.prototype.start=function(){this.scr_stepsController.Initialise("TXPL06SCI05E01_Separation"),this.scr_audioManager.play("bgm",this.aud_bgm,!0,"BGM")},e.prototype.stepsHandler=function(t){switch(console.log("Steps handler. Next step is "+t),this.character.play(this.character.getClips()[p.Character.IDLE].name).wrapMode=cc.WrapMode.Loop,t){case 1:this.scr_uiManager.hideHeaderText(),this.scheduleOnce(function(){this.introNode.active=!1,this.transitionNode.active=!0,this.scr_analyticsManager.sendOnLevelStart(1)}.bind(this),1.5);break;case 2:case 5:case 8:case 11:this.setActiveQuestion(t),this.updateGameElements(),this.scr_uiManager.hideHeaderText(),this.scheduleOnce(function(){this.transitionNode.active=!1,this.gamePlayNode.active=!0,this.scheduleOnce(function(){this.playAnimation(this.bag,cc.WrapMode.Normal),this.scr_audioManager.play(p.getAudioName(p.AudioClips.BACKPACK_POP),this.audioClips[p.AudioClips.BACKPACK_POP],!1,"SFX")}.bind(this),1.5)}.bind(this),2);break;case 3:case 6:case 9:case 12:this.scheduleOnce(function(){this.playAnimation(this.optionPipe,cc.WrapMode.Normal)}.bind(this),2.5);break;case 4:case 7:case 10:this.resetUI(),this.playQuestionTransition(this.mActiveQuestion);break;case 13:this.scheduleOnce(function(){this.transitionNode.active=!0,this.transitionCharacter.node.active=!1,this.gamePlayNode.active=!1,this.transitionNode.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this.transitionTextures[this.mActiveQuestion]),this.transitionTankNodes.forEach(function(t){t.active=!1}),this.canvas.emit("OnEndScreenReach",{}),this.scr_uiManager.setActiveCloseButton(!1)}.bind(this),1.5)}},e.prototype.onCommonButtonClick=function(t){this.scr_uiManager.CommonButtonType.NextQuestion==t?(this.scr_stepsController.getCurrentStep()%3==0&&this.scr_analyticsManager.sendOnLevelEnd(this.mActiveQuestion+1),this.scr_stepsController.loadNextStep()):this.scr_uiManager.CommonButtonType.TryAgain==t&&this.resetUI()},e.prototype.onAnswerVerification=function(t){switch(console.log("Answer submitted "+t.isCorrect),this.scr_stepsController.getCurrentStep()){case 2:case 5:case 8:case 11:this.playReservoirToTankAnimation(t.isCorrect,t.answer);break;case 3:case 6:case 9:case 12:this.playTankToAquariumAnimation(t.isCorrect)}},e.prototype.playAnimation=function(t,e){t.play(t.getClips()[0].name).wrapMode=e,e==cc.WrapMode.Reverse&&(t==this.bag?t.on("stop",this.bagAnimationCompleted,this):t==this.optionTank&&t.on("stop",this.optionTankAnimationCompleted,this))},e.prototype.onBagTapped=function(){this.scr_audioManager.play(p.getAudioName(p.AudioClips.BACKPACK_TAP),this.audioClips[p.AudioClips.BACKPACK_TAP],!1,"SFX"),this.scr_analyticsManager.sendOnGenericButtonClick(this.scr_stepsController.getCurrentQuestionIndex(),"bag"),this.playAnimation(this.bag,cc.WrapMode.Reverse)},e.prototype.bagAnimationCompleted=function(){this.bag.off("stop",this.bagAnimationCompleted,this),this.playAnimation(this.optionTank,cc.WrapMode.Normal)},e.prototype.onOptionTankTapped=function(t,e){this.scr_audioManager.play(p.getAudioName(p.AudioClips.TANK_TAP),this.audioClips[p.AudioClips.TANK_TAP],!1,"SFX"),this.tank[p.CustomNode.WATER].getParent().active=!0,this.tank[p.CustomNode.WATER].active=!1,this.mActiveQuestion==p.question.Q2&&"Tank3"==e?this.tank[p.CustomNode.BG].getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this.tankTextures[4]):this.tank[p.CustomNode.BG].getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this.tankTextures[p.getTankID(e)]),this.scr_stepsController.onOptionTap({optionName:e}),this.playAnimation(this.optionTank,cc.WrapMode.Reverse)},e.prototype.optionTankAnimationCompleted=function(){this.optionTank.off("stop",this.optionTankAnimationCompleted,this)},e.prototype.onOptionPipeTapped=function(t,e){this.scr_audioManager.play(p.getAudioName(p.AudioClips.PIPE_TAP),this.audioClips[p.AudioClips.PIPE_TAP],!1,"SFX"),"Pipe1"==e?(this.pipeDown[p.CustomNode.BG].getParent().active=!0,this.mActivePipe=this.pipeDown):(this.pipeUp[p.CustomNode.BG].getParent().active=!0,this.mActivePipe=this.pipeUp),this.scr_stepsController.onOptionTap({optionName:e}),this.playAnimation(this.optionPipe,cc.WrapMode.Reverse)},e.prototype.playReservoirToTankAnimation=function(t,e){if(this.tank[p.CustomNode.CORRECT].active=!1,this.tank[p.CustomNode.WRONG].active=!1,this.tank[p.CustomNode.WRONG2].active=!1,t){this.scr_audioManager.play(p.getAudioName(p.AudioClips.CORRECT_ANSWER),this.audioClips[p.AudioClips.CORRECT_ANSWER],!1,"SFX"),this.tank[p.CustomNode.CORRECT].active=!0,this.tank[p.CustomNode.WATER].active=!0,this.character.play(this.character.getClips()[p.Character.HAPPY].name).wrapMode=cc.WrapMode.Normal;var o=this.tank[p.CustomNode.WATER].getComponent(cc.Animation);o.play(o.getClips()[3*this.mActiveQuestion].name);var i=this.reservoir[p.CustomNode.WATER].getComponent(cc.Animation);i.play(i.getClips()[this.mActiveQuestion].name)}else"Tank4"==e?this.tank[p.CustomNode.WRONG2].active=!0:this.tank[p.CustomNode.WRONG].active=!0,this.character.play(this.character.getClips()[p.Character.SAD].name).wrapMode=cc.WrapMode.Normal},e.prototype.playTankToAquariumAnimation=function(t){var e=this.tank[p.CustomNode.WATER].getComponent(cc.Animation),o=this.aquarium[p.CustomNode.WATER].getComponent(cc.Animation);this.mActivePipe[p.CustomNode.CORRECT].active=!1,this.mActivePipe[p.CustomNode.WRONG].active=!1,this.scr_audioManager.play(p.getAudioName(p.AudioClips.PIPE_ATTACHING_TANK),this.audioClips[p.AudioClips.PIPE_ATTACHING_TANK],!1,"SFX"),t?(this.scr_audioManager.play(p.getAudioName(p.AudioClips.CORRECT_ANSWER),this.audioClips[p.AudioClips.CORRECT_ANSWER],!1,"SFX"),this.mActivePipe[p.CustomNode.CORRECT].active=!0,this.character.play(this.character.getClips()[p.Character.HAPPY].name).wrapMode=cc.WrapMode.Normal,e.play(e.getClips()[3*this.mActiveQuestion+1].name),this.mLastAquariumIndex=2*this.mActiveQuestion,o.play(o.getClips()[this.mLastAquariumIndex].name),this.creature[this.mActiveQuestion].children[0].active=!1,this.creature[this.mActiveQuestion].children[1].active=!0):(this.mActivePipe[p.CustomNode.WRONG].active=!0,this.character.play(this.character.getClips()[p.Character.SAD].name).wrapMode=cc.WrapMode.Normal,e.play(e.getClips()[3*this.mActiveQuestion+2].name),this.mLastAquariumIndex=2*this.mActiveQuestion+1,o.play(o.getClips()[this.mLastAquariumIndex].name))},e.prototype.resetUI=function(){switch(this.scr_stepsController.getCurrentStep()){case 2:case 5:case 8:case 11:this.resetPartA(),this.scheduleOnce(function(){this.playAnimation(this.optionTank,cc.WrapMode.Normal)}.bind(this),1.5);break;case 3:case 6:case 9:case 12:this.resetPartB(),this.scheduleOnce(function(){this.playAnimation(this.optionPipe,cc.WrapMode.Normal)}.bind(this),2.5);break;default:this.resetPartA(),this.resetPartB()}},e.prototype.resetAfterTryAgain=function(){this.scr_stepsController.loadNextStep(this.scr_stepsController.getCurrentStep())},e.prototype.resetPartA=function(){this.tank[p.CustomNode.WATER].getParent().active=!1;var t=this.reservoir[p.CustomNode.WATER].getComponent(cc.Animation);t.setCurrentTime(0,t.getClips()[this.mActiveQuestion].name),this.character.play(this.character.getClips()[p.Character.IDLE].name).wrapMode=cc.WrapMode.Loop},e.prototype.resetPartB=function(){var t=this.aquarium[p.CustomNode.WATER].getComponent(cc.Animation),e=this.tank[p.CustomNode.WATER].getComponent(cc.Animation);this.mActivePipe[p.CustomNode.BG].getParent().active=!1,t.setCurrentTime(0,t.getClips()[this.mLastAquariumIndex].name);var o=3*this.mActiveQuestion+2;e.setCurrentTime(0,e.getClips()[o].name)},e.prototype.playQuestionTransition=function(t){this.gamePlayNode.active=!1,this.transitionNode.active=!0,this.transitionCharacter.node.active=!0,this.transitionCharacter.play(this.transitionCharacter.getClips()[this.mActiveQuestion].name),this.transitionNode.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this.transitionTextures[t]),this.transitionTankNodes.forEach(function(t){t.active=!1}),this.transitionTankNodes[t].active=!0,this.mTapEnable=!0,this.scheduleOnce(function(){this.onTransitionTankTapped(null,this.mActiveQuestion+2)}.bind(this),15)},e.prototype.onTransitionTankTapped=function(t,e){this.mTapEnable&&(this.scr_audioManager.play(p.getAudioName(p.AudioClips.CLICK_SFX),this.audioClips[p.AudioClips.CLICK_SFX],!1,"SFX"),this.scr_analyticsManager.sendOnLevelStart(parseInt(e)),this.mTapEnable=!1,this.unscheduleAllCallbacks(),this.scr_stepsController.loadNextStep())},e.prototype.setActiveQuestion=function(t){switch(t){case 2:this.mActiveQuestion=p.question.Q1;break;case 5:this.mActiveQuestion=p.question.Q2;break;case 8:this.mActiveQuestion=p.question.Q3;break;case 11:this.mActiveQuestion=p.question.Q4}},e.prototype.updateGameElements=function(){this.creature.forEach(function(t){t.active=!1}),this.creature[this.mActiveQuestion].active=!0,this.creature[this.mActiveQuestion].children[0].active=!0,this.reservoir[p.CustomNode.WATER].getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this.reservoirTextures[this.mActiveQuestion]),this.specialOptionNode[1].active=!1,this.specialOptionNode[0].active=!1,this.mActiveQuestion==p.question.Q2?this.specialOptionNode[1].active=!0:this.specialOptionNode[0].active=!0},n([d(cc.Node)],e.prototype,"canvas",void 0),n([d({type:cc.AudioClip})],e.prototype,"aud_bgm",void 0),n([d(cc.Node)],e.prototype,"introNode",void 0),n([d(cc.Node)],e.prototype,"transitionNode",void 0),n([d(cc.Node)],e.prototype,"gamePlayNode",void 0),n([d(cc.Animation)],e.prototype,"bag",void 0),n([d(cc.Animation)],e.prototype,"optionTank",void 0),n([d(cc.Animation)],e.prototype,"character",void 0),n([d(cc.Node)],e.prototype,"tank",void 0),n([d(cc.Node)],e.prototype,"pipeUp",void 0),n([d(cc.Node)],e.prototype,"pipeDown",void 0),n([d(cc.Node)],e.prototype,"reservoir",void 0),n([d({type:cc.Texture2D})],e.prototype,"reservoirTextures",void 0),n([d(cc.Node)],e.prototype,"aquarium",void 0),n([d(cc.Node)],e.prototype,"creature",void 0),n([d({type:cc.Texture2D})],e.prototype,"tankTextures",void 0),n([d({type:cc.Texture2D})],e.prototype,"transitionTextures",void 0),n([d(cc.Node)],e.prototype,"transitionTankNodes",void 0),n([d(cc.Animation)],e.prototype,"transitionCharacter",void 0),n([d(cc.Animation)],e.prototype,"optionPipe",void 0),n([d(cc.Node)],e.prototype,"specialOptionNode",void 0),n([d({type:cc.AudioClip})],e.prototype,"audioClips",void 0),e=n([h],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../../framework/scripts/AnalyticsManager":"AnalyticsManager","../../../../framework/scripts/AudioManager":"AudioManager","../../../../framework/scripts/StepsController":"StepsController","../../../../framework/scripts/UIManager":"UIManager","./TXPL06SCI05E01_GameModels":"TXPL06SCI05E01_GameModels"}],TXPL07MAT02E04_Decimals1:[function(t,e,o){"use strict";cc._RF.push(e,"a9860eHtvhBwKGDdnOOELo8","TXPL07MAT02E04_Decimals1");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/prefab/QuestionProgressBar"),r=t("../../../../framework/prefab/template2/Template2_OptionHandler"),a=t("../../../../framework/prefab/template2/Template2_Tutorial"),c=t("../../../../framework/scripts/AnalyticsManager"),p=t("../../../../framework/scripts/AudioManager"),l=t("../../../../framework/scripts/StepsController"),h=t("../../../../framework/scripts/UIManager"),d=cc._decorator,u=d.ccclass,g=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.questionProgressBar=null,e.options=null,e.tutorial=null,e.canvas=null,e.aud_bgm=null,e.img_intro=null,e.bubble_intro1_soldier=null,e.bubble_intro1_doctor=null,e.bubble_intro2_soldier=null,e.bubble_intro2_doctor=null,e.img_outro=null,e.squad_A_yellow=null,e.squad_B_yellow=null,e.squad_C_yellow=null,e.squad_D_yellow=null,e.squad_E_yellow=null,e.squad_F_yellow=null,e.question_panel=null,e.q_top=null,e.q_middle=null,e.q_bottom=null,e.q_characters=[],e.q1_CF=null,e.q1_WF1=null,e.q1_WF2=null,e.q1_WF3=null,e.q2_CF=null,e.q2_WF=null,e.q3_CF=null,e.q3_WF=null,e.q4_CF1=null,e.q4_CF2=null,e.q4_WF1=null,e.q4_WF2_3=null,e.q5_CF=null,e.q5_WF=null,e.q6_CF=null,e.q6_WF=null,e.q5_yellow=null,e.q6_yellow=null,e.q3_CF_line=null,e.q4_CF_line1=null,e.q4_CF_line2=null,e.q4_WF1_line=null,e.q5_CF_line=null,e.q6_CF_line=null,e.q4_options=[],e.q_Images=[],e.timer_txt=null,e.timer_sprite=null,e.timer_blue=null,e.timer_red=null,e.aud_ambience=null,e.aud_correct=null,e.aud_wrong=null,e.aud_lateAnswer=null,e.aud_timer=null,e.lateAnswer_popup=null,e.placeholder_general=null,e.placeholder_doctor=null,e.squad_ABC_yellow=null,e.squad_DEF_yellow=null,e.decimal_yellow=null,e.txt_wholeSquad=null,e.txt_fractionalSquad=null,e.lastSelectedOption=0,e.level=0,e.canShowTutorial=!0,e.count=60,e.is_1=!0,e.is_2=!0,e.is_3=!0,e.is_4=!0,e.is_5=!0,e.is_6=!0,e.once=!0,e.firstAttemptAnswers=0,e.isAnswerTriedAgain=!1,e}return i(e,t),e.prototype.onLoad=function(){this.scr_stepsController=this.canvas.getComponent(l.default),this.uiManager=this.canvas.getComponent(h.default),this.audioManager=this.canvas.getComponent(p.default),this.analyticsManager=this.canvas.getComponent(c.default),this.canvas.on("OnLoadStep",this.stepsHandler.bind(this)),this.canvas.on("OnCommonButtonClick",this.onCommonButtonClick.bind(this)),this.scr_questionProgressBar=this.questionProgressBar.getComponent(s.default),this.options.node.on("onOptionChange",this.OptionChanged.bind(this)),this.options.node.on("onSubmit",this.OptionSelected.bind(this))},e.prototype.start=function(){this.scr_stepsController.Initialise("TXPL07MAT02E04_Decimals1"),this.audioManager.play("bgm",this.aud_bgm,!0,"BGM",.4)},e.prototype.stepsHandler=function(t){switch(console.log("Steps handler. Current step is "+t),t){case 0:this.setupIntro_A();break;case 1:this.setupIntro_A2();break;case 2:this.setupIntro_B();break;case 3:this.setupIntro_B2();break;case 4:this.setupQuestion1();break;case 5:this.setupQuestion1_B();break;case 6:this.setupQuestion2();break;case 7:this.setupQuestion3();break;case 8:this.setupQuestion4();break;case 9:this.setupQuestion4_A2();break;case 10:this.setupQuestion4_B();break;case 11:this.setupQuestion5();break;case 12:this.setupQuestion6();break;case 13:this.setupOutro()}},e.prototype.setupIntro_A=function(){this.uiManager.changeHeaderCharacter(this.placeholder_doctor),this.audioManager.play("sfx",this.aud_ambience,!0,"SFX",.7),this.img_intro.active=!0,this.bubble_intro1_doctor.active=!0,this.bubble_intro1_soldier.active=!1},e.prototype.setupIntro_A2=function(){this.uiManager.changeHeaderCharacter(this.placeholder_general),this.bubble_intro1_doctor.active=!1,this.bubble_intro1_soldier.active=!0},e.prototype.setupIntro_B=function(){this.uiManager.changeHeaderCharacter(this.placeholder_doctor),this.audioManager.stop("sfx"),this.img_intro.active=!1,this.question_panel.active=!0,this.q_characters[0].active=!0,this.q_characters[1].active=!0,this.bubble_intro2_doctor.active=!0,this.bubble_intro2_soldier.active=!1,this.scheduleOnce(function(){this.squad_A_yellow.active=!0},3),this.scheduleOnce(function(){this.squad_A_yellow.active=!1,this.squad_F_yellow.active=!0},8.5)},e.prototype.setupIntro_B2=function(){this.squad_A_yellow.active=!1,this.squad_F_yellow.active=!1,this.scheduleOnce(function(){this.squad_B_yellow.active=!0,this.squad_C_yellow.active=!0,this.squad_D_yellow.active=!0,this.squad_E_yellow.active=!0},1),this.scheduleOnce(function(){this.littleBlink(this.squad_B_yellow)},5.5),this.scheduleOnce(function(){this.littleBlink(this.squad_C_yellow)},6.3),this.scheduleOnce(function(){this.littleBlink(this.squad_D_yellow)},7),this.scheduleOnce(function(){this.littleBlink(this.squad_E_yellow)},8.5)},e.prototype.littleBlink=function(t){t.active=!1,this.scheduleOnce(function(){t.active=!0},.25)},e.prototype.mediumBlink=function(t){t.active=!0,this.scheduleOnce(function(){t.active=!1},.25),this.scheduleOnce(function(){t.active=!0},.5)},e.prototype.mediumBlink_2=function(t){t.active=!0,this.scheduleOnce(function(){t.active=!1},.25),this.scheduleOnce(function(){t.active=!0},.5),this.scheduleOnce(function(){t.active=!1},.75)},e.prototype.setupQuestion1=function(){this.uiManager.changeHeaderCharacter(this.placeholder_doctor),this.questionProgressBar.active=!0,this.uiManager.headerDefaultPosY=320,this.level=1,this.q_characters[0].active=!1,this.q_characters[1].active=!1,this.bubble_intro1_doctor.active=!1,this.bubble_intro1_soldier.active=!1,this.bubble_intro2_doctor.active=!1,this.bubble_intro2_soldier.active=!1,this.disableRedGreen(),this.timer_sprite.node.active=!0},e.prototype.setupQuestion1_B=function(){this.uiManager.changeHeaderCharacter(this.placeholder_doctor),this.disableRedGreen(),this.is_1?(this.scheduleOnce(function(){this.options.show(2,["3","1","2","4"],"note",null),this.schedule(this.Timer,1,60,1),this.tutorial.show()},7.5),this.is_1=!1):(this.options.show(2,["3","1","2","4"],"note",null),this.schedule(this.Timer,1,60,1))},e.prototype.setupQuestion2=function(){this.uiManager.changeHeaderCharacter(this.placeholder_doctor),this.level=2,this.disableRedGreen(),this.is_2?(this.scheduleOnce(function(){this.options.show(0,["3x100","3x1","3x10","3x0.01"],"note",null),this.schedule(this.Timer,1,60,1)},6.2),this.is_2=!1):(this.options.show(0,["3x100","3x1","3x10","3x0.01"],"note",null),this.schedule(this.Timer,1,60,1))},e.prototype.setupQuestion3=function(){this.uiManager.changeHeaderCharacter(this.placeholder_doctor),this.level=3,this.disableRedGreen(),this.is_3?(this.scheduleOnce(function(){this.options.show(2,["22.0000","31.8424","318.4240","3184.2400"],"note",null),this.schedule(this.Timer,1,60,1)},4),this.is_3=!1):(this.options.show(2,["22.0000","31.8424","318.4240","3184.2400"],"note",null),this.schedule(this.Timer,1,60,1))},e.prototype.setupQuestion4=function(){this.uiManager.changeHeaderCharacter(this.placeholder_doctor),this.level=4,this.disableRedGreen(),this.scheduleOnce(function(){this.squad_ABC_yellow.active=!0,this.mediumBlink(this.squad_ABC_yellow)},2.5),this.scheduleOnce(function(){this.squad_ABC_yellow.active=!1,this.squad_DEF_yellow.active=!0,this.mediumBlink(this.squad_DEF_yellow)},8.5)},e.prototype.setupQuestion4_A2=function(){var t=this;this.squad_ABC_yellow.active=!1,this.squad_DEF_yellow.active=!1,this.txt_wholeSquad.active=!0,this.txt_wholeSquad.opacity=0,this.txt_fractionalSquad.active=!0,this.txt_fractionalSquad.opacity=0,cc.tween(this.txt_wholeSquad).to(3.8,{}).to(.5,{opacity:255}).call(function(){t.mediumBlink_2(t.squad_ABC_yellow)}).start(),cc.tween(this.txt_fractionalSquad).to(8.8,{}).to(.5,{opacity:255}).call(function(){t.mediumBlink_2(t.squad_DEF_yellow)}).start(),this.scheduleOnce(function(){this.mediumBlink_2(this.decimal_yellow)},12.6)},e.prototype.setupQuestion4_B=function(){this.uiManager.changeHeaderCharacter(this.placeholder_doctor),this.disableRedGreen(),this.is_4?(this.scheduleOnce(function(){var t=this;this.options.show(3,null,"note",this.q4_options),this.schedule(this.Timer,1,60,1),cc.tween(this.txt_wholeSquad).to(.5,{opacity:0}).call(function(){t.txt_wholeSquad.active=!1}).start(),cc.tween(this.txt_fractionalSquad).to(.5,{opacity:0}).call(function(){t.txt_fractionalSquad.active=!1}).start()},5.5),this.is_4=!1):(this.options.show(3,null,"note",this.q4_options),this.schedule(this.Timer,1,60,1))},e.prototype.setupQuestion5=function(){this.uiManager.changeHeaderCharacter(this.placeholder_doctor),this.level=5,this.disableRedGreen(),this.q_Images[0].spriteFrame=null,this.q_Images[1].spriteFrame=null,this.q_Images[2].spriteFrame=null,this.q_Images[3].spriteFrame=null,this.is_5?(this.scheduleOnce(function(){this.options.show(0,["8.4","84","840","0.84"],"note",null),this.schedule(this.Timer,1,60,1)},11.3),this.is_5=!1,this.scheduleOnce(function(){this.q5_yellow.active=!0},1)):(this.options.show(0,["8.4","84","840","0.84"],"note",null),this.schedule(this.Timer,1,60,1),this.q5_yellow.active=!0)},e.prototype.setupQuestion6=function(){this.uiManager.changeHeaderCharacter(this.placeholder_doctor),this.level=6,this.disableRedGreen(),this.q5_yellow.active=!1,this.is_6?(this.scheduleOnce(function(){this.options.show(1,["318.242","310.024","31.24","31.024"],"note",null),this.schedule(this.Timer,1,60,1)},6.7),this.is_6=!1,this.scheduleOnce(function(){this.q6_yellow.active=!0},3.1)):(this.options.show(1,["318.242","310.024","31.24","31.024"],"note",null),this.schedule(this.Timer,1,60,1),this.q6_yellow.active=!0)},e.prototype.setupOutro=function(){this.uiManager.changeHeaderCharacter(this.placeholder_doctor),this.audioManager.play("sfx",this.aud_ambience,!0,"SFX",.7),this.questionProgressBar.active=!1,this.uiManager.headerDefaultPosY=380,this.canvas.emit("OnEndScreenReach",{}),this.uiManager.setActiveCloseButton(!1),this.level=7,this.disableRedGreen(),this.question_panel.active=!1,this.timer_sprite.node.active=!1,this.q6_yellow.active=!1,this.img_outro.active=!0,this.scheduleOnce(function(){this.scr_stepsController.onAllStepsComplete()},14.2)},e.prototype.OptionChanged=function(t,e){},e.prototype.OptionSelected=function(t,e){this.audioManager.stop("timer"),this.lastSelectedOption=t+1,this.audioManager.stopVOAudios(),this.unschedule(this.Timer),this.once=!0,e?(this.isAnswerTriedAgain?this.scr_questionProgressBar.UpdateProgressQuestionBar(this.scr_stepsController.getCurrentQuestionIndex(),!1):(this.firstAttemptAnswers++,this.scr_questionProgressBar.UpdateProgressQuestionBar(this.scr_stepsController.getCurrentQuestionIndex(),!0)),this.isAnswerTriedAgain=!1):this.isAnswerTriedAgain=!0,1==this.level?(0==t?(this.blink(this.q1_WF1),this.scheduleOnce(function(){this.audioManager.play("sfx",this.aud_wrong,!1,"SFX",1),this.scr_stepsController.playFeedback([0],!1,!1)}.bind(this),2),this.scheduleOnce(function(){this.uiManager.setActiveTryAgainButton(!0)}.bind(this),7)):1==t&&(this.blink(this.q1_WF2),this.scheduleOnce(function(){this.audioManager.play("sfx",this.aud_wrong,!1,"SFX",1),this.scr_stepsController.playFeedback([1],!1,!1)}.bind(this),2),this.scheduleOnce(function(){this.uiManager.setActiveTryAgainButton(!0)}.bind(this),7)),2==t?(this.blink(this.q1_CF),this.scheduleOnce(function(){this.audioManager.play("sfx",this.aud_correct,!1,"SFX",1),this.scr_stepsController.playFeedback([2],!0,!1)}.bind(this),2),this.scheduleOnce(function(){this.uiManager.setActiveNextButton(!0)}.bind(this),7)):3==t&&(this.blink(this.q1_WF3),this.scheduleOnce(function(){this.audioManager.play("sfx",this.aud_wrong,!1,"SFX",1),this.scr_stepsController.playFeedback([3],!1,!1)}.bind(this),2),this.scheduleOnce(function(){this.uiManager.setActiveTryAgainButton(!0)}.bind(this),7))):2==this.level?(0==t?(this.blink(this.q2_CF),this.scheduleOnce(function(){this.audioManager.play("sfx",this.aud_correct,!1,"SFX",1),this.scr_stepsController.playFeedback([0],!0,!1)}.bind(this),2),this.scheduleOnce(function(){this.uiManager.setActiveNextButton(!0)}.bind(this),7)):1==t&&(this.blink(this.q2_WF),this.scheduleOnce(function(){this.audioManager.play("sfx",this.aud_wrong,!1,"SFX",1),this.scr_stepsController.playFeedback([1],!1,!1)}.bind(this),2),this.scheduleOnce(function(){this.uiManager.setActiveTryAgainButton(!0)}.bind(this),7)),2==t?(this.blink(this.q2_WF),this.scheduleOnce(function(){this.audioManager.play("sfx",this.aud_wrong,!1,"SFX",1),this.scr_stepsController.playFeedback([2],!1,!1)}.bind(this),2),this.scheduleOnce(function(){this.uiManager.setActiveTryAgainButton(!0)}.bind(this),7)):3==t&&(this.blink(this.q2_WF),this.scheduleOnce(function(){this.audioManager.play("sfx",this.aud_wrong,!1,"SFX",1),this.scr_stepsController.playFeedback([3],!1,!1)}.bind(this),2),this.scheduleOnce(function(){this.uiManager.setActiveTryAgainButton(!0)}.bind(this),7))):3==this.level?(0==t?(this.blink(this.q3_WF),this.scheduleOnce(function(){this.audioManager.play("sfx",this.aud_wrong,!1,"SFX",1),this.scr_stepsController.playFeedback([0],!1,!1)}.bind(this),2),this.scheduleOnce(function(){this.uiManager.setActiveTryAgainButton(!0)}.bind(this),7)):1==t&&(this.blink(this.q3_WF),this.scheduleOnce(function(){this.audioManager.play("sfx",this.aud_wrong,!1,"SFX",1),this.scr_stepsController.playFeedback([1],!1,!1)}.bind(this),2),this.scheduleOnce(function(){this.uiManager.setActiveTryAgainButton(!0)}.bind(this),7)),2==t?(cc.tween(this.q_top).to(.3,{position:cc.v3(0,20,0)}).start(),cc.tween(this.q_bottom).to(.3,{position:cc.v3(0,-10,0)}).start(),cc.tween(this.q3_CF_line).to(.2,{}).to(.3,{opacity:255}).start(),this.scheduleOnce(function(){this.blink(this.q3_CF)},.5),this.scheduleOnce(function(){this.audioManager.play("sfx",this.aud_correct,!1,"SFX",1),this.scr_stepsController.playFeedback([2],!0,!1)}.bind(this),2.5),this.scheduleOnce(function(){this.uiManager.setActiveNextButton(!0)}.bind(this),7.5)):3==t&&(this.blink(this.q3_WF),this.scheduleOnce(function(){this.audioManager.play("sfx",this.aud_wrong,!1,"SFX",1),this.scr_stepsController.playFeedback([3],!1,!1)}.bind(this),2),this.scheduleOnce(function(){this.uiManager.setActiveTryAgainButton(!0)}.bind(this),7))):4==this.level?(0==t?(cc.tween(this.q_top).to(.3,{position:cc.v3(0,20,0)}).start(),cc.tween(this.q_bottom).to(.3,{position:cc.v3(0,-10,0)}).start(),cc.tween(this.q4_WF1_line).to(.2,{}).to(.3,{opacity:255}).start(),this.scheduleOnce(function(){this.blink(this.q4_WF1)},.5),this.scheduleOnce(function(){this.audioManager.play("sfx",this.aud_wrong,!1,"SFX",1),this.scr_stepsController.playFeedback([0],!1,!1)}.bind(this),2.5),this.scheduleOnce(function(){this.uiManager.setActiveTryAgainButton(!0)}.bind(this),7)):1==t&&(this.blink(this.q4_WF2_3),this.scheduleOnce(function(){this.audioManager.play("sfx",this.aud_wrong,!1,"SFX",1),this.scr_stepsController.playFeedback([1],!1,!1)}.bind(this),2),this.scheduleOnce(function(){this.uiManager.setActiveTryAgainButton(!0)}.bind(this),7)),2==t?(this.blink(this.q4_WF2_3),this.scheduleOnce(function(){this.audioManager.play("sfx",this.aud_wrong,!1,"SFX",1),this.scr_stepsController.playFeedback([2],!1,!1)}.bind(this),2),this.scheduleOnce(function(){this.uiManager.setActiveTryAgainButton(!0)}.bind(this),7)):3==t&&(cc.tween(this.q_top).to(.3,{opacity:0,position:cc.v3(0,20,0)}).start(),cc.tween(this.q_bottom).to(.3,{position:cc.v3(0,-10,0)}).start(),cc.tween(this.q4_CF_line1).to(.5,{}).to(.5,{opacity:255}).start(),cc.tween(this.q4_CF_line2).to(6,{}).to(.5,{opacity:255}).start(),this.scheduleOnce(function(){this.blink(this.q4_CF1)},1),this.scheduleOnce(function(){this.blink(this.q4_CF2)},6.5),this.scheduleOnce(function(){this.audioManager.play("sfx",this.aud_correct,!1,"SFX",1),this.scr_stepsController.playFeedback([3],!0,!1)}.bind(this),3),this.scheduleOnce(function(){this.uiManager.setActiveNextButton(!0)}.bind(this),8))):5==this.level?(this.q5_yellow.active=!1,0==t?(cc.tween(this.q_top).to(.3,{position:cc.v3(0,20,0)}).start(),cc.tween(this.q_bottom).to(.3,{position:cc.v3(0,-10,0)}).start(),cc.tween(this.q5_CF_line).to(.2,{}).to(.3,{opacity:255}).start(),this.scheduleOnce(function(){this.blink(this.q5_CF)},.5),this.scheduleOnce(function(){this.audioManager.play("sfx",this.aud_correct,!1,"SFX",1),this.scr_stepsController.playFeedback([0],!0,!1)}.bind(this),2.5),this.scheduleOnce(function(){this.uiManager.setActiveNextButton(!0)}.bind(this),7.5)):1==t&&(this.blink(this.q5_WF),this.scheduleOnce(function(){this.audioManager.play("sfx",this.aud_wrong,!1,"SFX",1),this.scr_stepsController.playFeedback([1],!1,!1)}.bind(this),2),this.scheduleOnce(function(){this.uiManager.setActiveTryAgainButton(!0)}.bind(this),7)),2==t?(this.blink(this.q5_WF),this.scheduleOnce(function(){this.audioManager.play("sfx",this.aud_wrong,!1,"SFX",1),this.scr_stepsController.playFeedback([2],!1,!1)}.bind(this),2),this.scheduleOnce(function(){this.uiManager.setActiveTryAgainButton(!0)}.bind(this),7)):3==t&&(this.blink(this.q5_WF),this.scheduleOnce(function(){this.audioManager.play("sfx",this.aud_wrong,!1,"SFX",1),this.scr_stepsController.playFeedback([3],!1,!1)}.bind(this),2),this.scheduleOnce(function(){this.uiManager.setActiveTryAgainButton(!0)}.bind(this),7))):6==this.level&&(this.q6_yellow.active=!1,0==t?(this.blink(this.q6_WF),this.scheduleOnce(function(){this.audioManager.play("sfx",this.aud_wrong,!1,"SFX",1),this.scr_stepsController.playFeedback([0],!1,!1)}.bind(this),2),this.scheduleOnce(function(){this.uiManager.setActiveTryAgainButton(!0)}.bind(this),7)):1==t&&(cc.tween(this.q_top).to(.3,{position:cc.v3(0,20,0)}).start(),cc.tween(this.q_bottom).to(.3,{position:cc.v3(0,-10,0)}).start(),cc.tween(this.q6_CF_line).to(.2,{}).to(.3,{opacity:255}).start(),this.scheduleOnce(function(){this.blink(this.q6_CF)},.5),this.scheduleOnce(function(){this.audioManager.play("sfx",this.aud_correct,!1,"SFX",1),this.scr_stepsController.playFeedback([1],!0,!1)}.bind(this),2.5),this.scheduleOnce(function(){this.uiManager.setActiveNextButton(!0)}.bind(this),7.5)),2==t?(this.blink(this.q6_WF),this.scheduleOnce(function(){this.audioManager.play("sfx",this.aud_wrong,!1,"SFX",1),this.scr_stepsController.playFeedback([2],!1,!1)}.bind(this),2),this.scheduleOnce(function(){this.uiManager.setActiveTryAgainButton(!0)}.bind(this),7)):3==t&&(this.blink(this.q6_WF),this.scheduleOnce(function(){this.audioManager.play("sfx",this.aud_wrong,!1,"SFX",1),this.scr_stepsController.playFeedback([3],!1,!1)}.bind(this),2),this.scheduleOnce(function(){this.uiManager.setActiveTryAgainButton(!0)}.bind(this),7)))},e.prototype.blink=function(t){t.active=!0,this.scheduleOnce(function(){t.active=!1},.35),this.scheduleOnce(function(){t.active=!0},.7),this.scheduleOnce(function(){t.active=!1},1.05),this.scheduleOnce(function(){t.active=!0},1.4),this.scheduleOnce(function(){t.active=!1},1.75),this.scheduleOnce(function(){t.active=!0},2.1),this.scheduleOnce(function(){t.active=!1},2.45),this.scheduleOnce(function(){t.active=!0},2.8)},e.prototype.Timer=function(){this.count--,this.timer_txt.string=this.count.toString(),this.count<=5&&this.once&&(this.timer_sprite.spriteFrame=this.timer_red,this.audioManager.play("timer",this.aud_timer,!0,"TIMER",1),this.once=!1),this.count<=0&&(this.unschedule(this.Timer),this.options.hide(),this.ShowLateAnswerPopup())},e.prototype.ShowLateAnswerPopup=function(){var t=this;this.audioManager.stop("timer"),this.once=!0,this.lateAnswer_popup.active=!0,cc.tween(this.lateAnswer_popup).to(.7,{opacity:255}).call(function(){t.audioManager.play("vo",t.aud_lateAnswer,!1,"VO",1)}).start()},e.prototype.Close_Popup=function(){this.audioManager.stopVOAudios(),this.lateAnswer_popup.opacity=0,this.lateAnswer_popup.active=!1,this.isAnswerTriedAgain=!0,this.stepsHandler(this.scr_stepsController.getCurrentStep()),this.analyticsManager.sendOnTryAgain(this.scr_stepsController.getCurrentQuestionIndex(),5)},e.prototype.disableRedGreen=function(){this.q1_CF.active=!1,this.q2_CF.active=!1,this.q3_CF.active=!1,this.q4_CF1.active=!1,this.q4_CF2.active=!1,this.q5_CF.active=!1,this.q6_CF.active=!1,this.q1_WF1.active=!1,this.q1_WF2.active=!1,this.q1_WF3.active=!1,this.q2_WF.active=!1,this.q3_WF.active=!1,this.q4_WF1.active=!1,this.q4_WF2_3.active=!1,this.q5_WF.active=!1,this.q6_WF.active=!1,this.q5_yellow.active=!1,this.q6_yellow.active=!1,this.q3_CF_line.opacity=0,this.q4_CF_line1.opacity=0,this.q4_CF_line2.opacity=0,this.q4_WF1_line.opacity=0,this.q5_CF_line.opacity=0,this.q6_CF_line.opacity=0,this.squad_A_yellow.active=!1,this.squad_B_yellow.active=!1,this.squad_C_yellow.active=!1,this.squad_D_yellow.active=!1,this.squad_E_yellow.active=!1,this.squad_F_yellow.active=!1,this.q_top.setPosition(0,0),this.q_middle.setPosition(0,0),this.q_bottom.setPosition(0,0),this.q_top.opacity=255,this.q_middle.opacity=255,this.q_bottom.opacity=255,this.timer_txt.string="60",this.count=60,this.timer_sprite.spriteFrame=this.timer_blue},e.prototype.onCommonButtonClick=function(t){this.uiManager.CommonButtonType.NextQuestion==t?(this.scr_stepsController.loadNextStep(),this.analyticsManager.sendNextQuestionStart(this.scr_stepsController.getCurrentQuestionIndex(),!1,this.analyticsManager.Phylum.Click)):this.uiManager.CommonButtonType.TryAgain==t&&(this.isAnswerTriedAgain=!0,this.stepsHandler(this.scr_stepsController.getCurrentStep()),this.analyticsManager.sendOnTryAgain(this.scr_stepsController.getCurrentQuestionIndex(),parseInt(this.lastSelectedOption.toString())))},n([g(cc.Node)],e.prototype,"questionProgressBar",void 0),n([g(r.default)],e.prototype,"options",void 0),n([g(a.default)],e.prototype,"tutorial",void 0),n([g(cc.Node)],e.prototype,"canvas",void 0),n([g({type:cc.AudioClip})],e.prototype,"aud_bgm",void 0),n([g(cc.Node)],e.prototype,"img_intro",void 0),n([g(cc.Node)],e.prototype,"bubble_intro1_soldier",void 0),n([g(cc.Node)],e.prototype,"bubble_intro1_doctor",void 0),n([g(cc.Node)],e.prototype,"bubble_intro2_soldier",void 0),n([g(cc.Node)],e.prototype,"bubble_intro2_doctor",void 0),n([g(cc.Node)],e.prototype,"img_outro",void 0),n([g(cc.Node)],e.prototype,"squad_A_yellow",void 0),n([g(cc.Node)],e.prototype,"squad_B_yellow",void 0),n([g(cc.Node)],e.prototype,"squad_C_yellow",void 0),n([g(cc.Node)],e.prototype,"squad_D_yellow",void 0),n([g(cc.Node)],e.prototype,"squad_E_yellow",void 0),n([g(cc.Node)],e.prototype,"squad_F_yellow",void 0),n([g(cc.Node)],e.prototype,"question_panel",void 0),n([g(cc.Node)],e.prototype,"q_top",void 0),n([g(cc.Node)],e.prototype,"q_middle",void 0),n([g(cc.Node)],e.prototype,"q_bottom",void 0),n([g(cc.Node)],e.prototype,"q_characters",void 0),n([g(cc.Node)],e.prototype,"q1_CF",void 0),n([g(cc.Node)],e.prototype,"q1_WF1",void 0),n([g(cc.Node)],e.prototype,"q1_WF2",void 0),n([g(cc.Node)],e.prototype,"q1_WF3",void 0),n([g(cc.Node)],e.prototype,"q2_CF",void 0),n([g(cc.Node)],e.prototype,"q2_WF",void 0),n([g(cc.Node)],e.prototype,"q3_CF",void 0),n([g(cc.Node)],e.prototype,"q3_WF",void 0),n([g(cc.Node)],e.prototype,"q4_CF1",void 0),n([g(cc.Node)],e.prototype,"q4_CF2",void 0),n([g(cc.Node)],e.prototype,"q4_WF1",void 0),n([g(cc.Node)],e.prototype,"q4_WF2_3",void 0),n([g(cc.Node)],e.prototype,"q5_CF",void 0),n([g(cc.Node)],e.prototype,"q5_WF",void 0),n([g(cc.Node)],e.prototype,"q6_CF",void 0),n([g(cc.Node)],e.prototype,"q6_WF",void 0),n([g(cc.Node)],e.prototype,"q5_yellow",void 0),n([g(cc.Node)],e.prototype,"q6_yellow",void 0),n([g(cc.Node)],e.prototype,"q3_CF_line",void 0),n([g(cc.Node)],e.prototype,"q4_CF_line1",void 0),n([g(cc.Node)],e.prototype,"q4_CF_line2",void 0),n([g(cc.Node)],e.prototype,"q4_WF1_line",void 0),n([g(cc.Node)],e.prototype,"q5_CF_line",void 0),n([g(cc.Node)],e.prototype,"q6_CF_line",void 0),n([g(cc.SpriteFrame)],e.prototype,"q4_options",void 0),n([g(cc.Sprite)],e.prototype,"q_Images",void 0),n([g(cc.Label)],e.prototype,"timer_txt",void 0),n([g(cc.Sprite)],e.prototype,"timer_sprite",void 0),n([g(cc.SpriteFrame)],e.prototype,"timer_blue",void 0),n([g(cc.SpriteFrame)],e.prototype,"timer_red",void 0),n([g({type:cc.AudioClip})],e.prototype,"aud_ambience",void 0),n([g({type:cc.AudioClip})],e.prototype,"aud_correct",void 0),n([g({type:cc.AudioClip})],e.prototype,"aud_wrong",void 0),n([g({type:cc.AudioClip})],e.prototype,"aud_lateAnswer",void 0),n([g({type:cc.AudioClip})],e.prototype,"aud_timer",void 0),n([g(cc.Node)],e.prototype,"lateAnswer_popup",void 0),n([g(cc.SpriteFrame)],e.prototype,"placeholder_general",void 0),n([g(cc.SpriteFrame)],e.prototype,"placeholder_doctor",void 0),n([g(cc.Node)],e.prototype,"squad_ABC_yellow",void 0),n([g(cc.Node)],e.prototype,"squad_DEF_yellow",void 0),n([g(cc.Node)],e.prototype,"decimal_yellow",void 0),n([g(cc.Node)],e.prototype,"txt_wholeSquad",void 0),n([g(cc.Node)],e.prototype,"txt_fractionalSquad",void 0),e=n([u],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../../../../framework/prefab/QuestionProgressBar":"QuestionProgressBar","../../../../framework/prefab/template2/Template2_OptionHandler":"Template2_OptionHandler","../../../../framework/prefab/template2/Template2_Tutorial":"Template2_Tutorial","../../../../framework/scripts/AnalyticsManager":"AnalyticsManager","../../../../framework/scripts/AudioManager":"AudioManager","../../../../framework/scripts/StepsController":"StepsController","../../../../framework/scripts/UIManager":"UIManager"}],TXPL07SCI17E01_ButtonStyle:[function(t,e,o){"use strict";cc._RF.push(e,"3b1fcDxCE1Dx6i7f5S/IZMU","TXPL07SCI17E01_ButtonStyle");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this.node.getComponent(cc.Button).node.on("touchstart",this.onButtonPressStart,this),this.node.getComponent(cc.Button).node.on("touchend",this.onButtonPressEnd,this),this.node.getComponent(cc.Button).node.on("touchcancel",this.onButtonPressEnd,this)},e.prototype.onButtonPressStart=function(){this.node.color=new cc.Color(178,178,178,255)},e.prototype.onButtonPressEnd=function(t){console.log("touch event ",t),this.node.color=new cc.Color(255,255,255,255)},e.prototype.start=function(){},e=n([r],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],TXPL07SCI17E01_PhasesOfmoon1:[function(t,e,o){"use strict";cc._RF.push(e,"f331fXv+V9L2onPjGwEifwA","TXPL07SCI17E01_PhasesOfmoon1");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/AudioManager"),r=t("../../../../framework/scripts/AnalyticsManager"),a=t("../../../../framework/scripts/StepsController"),c=t("../../../../framework/scripts/UIManager"),p=t("../../../../framework/prefab/QuestionProgressBar"),l=t("./TXPL07SCI17E01_SelectionPanel"),h=cc._decorator,d=h.ccclass,u=h.property,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.questionProgressBar=null,e.introsetup=null,e.playsetup=null,e.selectionPanel=null,e.anim_sunrays=null,e.anim_moonrays=null,e.moondial=null,e.bowlSetup=null,e.moonReflections=[],e.outrosetup=null,e.aud_bgm=null,e.aud_correctfeedback=null,e.aud_wrongfeedback=null,e.aud_sunglow=null,e.aud_moonglow=null,e.aud_liquidboil=null,e.scr_selectionPanel=null,e.correctDialNo=0,e.selectedDialNo=0,e.disabledDialNo=0,e.delaySelectionUI=5,e.optionsOnDial=[],e.outroVisuals=null,e.outroFeedback=null,e.firstAttemptAnswers=0,e.isAnswerTriedAgain=!1,e.labelGamePause=null,e}return i(e,t),e.prototype.onLoad=function(){this.scr_stepsController=this.canvas.getComponent(a.default),this.uiManager=this.canvas.getComponent(c.default),this.audioManager=this.canvas.getComponent(s.default),this.scr_analyticsManager=this.canvas.getComponent(r.default),this.canvas.on("OnLoadStep",this.stepsHandler.bind(this)),this.canvas.on("OnCommonButtonClick",this.onCommonButtonClick.bind(this)),this.canvas.on("OnAnswerVerification",this.onAnswerVerification.bind(this)),this.scr_questionProgressBar=this.questionProgressBar.getComponent(p.default),this.canvas.getChildByName("Main Camera").getComponent(cc.Camera).backgroundColor=cc.Color.BLACK,this.scr_selectionPanel=this.selectionPanel.getComponent(l.default),this.node.on("OnDialSelection",this.OnDialSelection.bind(this)),this.outrosetup.active=!0,this.outroVisuals=this.outrosetup.getChildByName("Visuals"),this.outroFeedback=this.outrosetup.getChildByName("Quantitative_feedback")},e.prototype.start=function(){this.scr_stepsController.Initialise("TXPL08SCI17E01_PhasesOfmoon1"),this.disableAllExceptThis(null)},e.prototype.stepsHandler=function(t){switch(console.log("Steps handler. Next step is "+t),t>=2&&t<7&&this.StartPlay(),t){case 0:this.uiManager.setHeaderYpos(420),this.IntroSeqencing(),this.audioManager.play("bgm",this.aud_bgm,!0,"BGM",.6);break;case 2:this.uiManager.setHeaderYpos(380),this.correctDialNo=5,this.disabledDialNo=3,this.anim_sunrays.stop(),this.anim_moonrays.stop(),this.SetOptionsArray(),this.SetupQuestion();break;case 3:this.correctDialNo=1,this.disabledDialNo=4,this.anim_sunrays.stop(),this.anim_moonrays.stop(),this.SetOptionsArray(),this.SetupQuestion();break;case 4:this.correctDialNo=2,this.disabledDialNo=1,this.anim_sunrays.stop(),this.anim_moonrays.stop(),this.SetOptionsArray(),this.SetupQuestion();break;case 5:this.correctDialNo=3,this.disabledDialNo=5,this.anim_sunrays.stop(),this.anim_moonrays.stop(),this.SetOptionsArray(),this.SetupQuestion();break;case 6:this.correctDialNo=4,this.disabledDialNo=1,this.anim_sunrays.stop(),this.anim_moonrays.stop(),this.SetOptionsArray(),this.SetupQuestion();break;case 7:this.canvas.emit("OnEndScreenReach",{}),this.uiManager.setHeaderYpos(-120),this.OutroSequencing()}},e.prototype.SetOptionsArray=function(){var t=[1,2,3,4,5];this.optionsOnDial.length=0;for(var e=0;e<5;e++)t[e]!=this.disabledDialNo&&this.optionsOnDial.push(t[e])},e.prototype.onCommonButtonClick=function(t){this.uiManager.CommonButtonType.NextQuestion==t?(this.delaySelectionUI=5,this.scr_analyticsManager.sendNextQuestionStart(this.scr_stepsController.getCurrentQuestionIndex(),!1,this.scr_analyticsManager.Phylum.Click),this.scr_stepsController.loadNextStep()):this.uiManager.CommonButtonType.TryAgain==t&&(this.scr_analyticsManager.sendOnTryAgain(this.scr_stepsController.getCurrentQuestionIndex(),this.optionsOnDial.indexOf(this.selectedDialNo)+1),this.audioManager.stop("liquidboil"),this.isAnswerTriedAgain=!0,this.resetAfterTryAgain())},e.prototype.resetAfterTryAgain=function(){this.delaySelectionUI=1,this.stepsHandler(this.scr_stepsController.getCurrentStep())},e.prototype.onAnswerVerification=function(t){console.log("Answer submitted "+t.isCorrect),this.scr_stepsController.getCurrentStep()},e.prototype.OnDialSelection=function(t){this.selectedDialNo=t;var e=!1;t==this.correctDialNo?(e=!0,"correct",this.audioManager.play("correctfeedback",this.aud_correctfeedback,!1,"SFX"),this.CorrectOptionFeedback()):(this.audioManager.play("arongfeedback",this.aud_wrongfeedback,!1,"SFX"),this.WrongOptionFeedback()),this.scr_analyticsManager.sendSubmitAnswers(this.scr_stepsController.getCurrentQuestionIndex(),e,"click"),this.HideSelectionPanel(),this.moondial.children.forEach(function(e){e.name==t.toString()&&(e.getChildByName("moon").opacity=255)})},e.prototype.CorrectOptionFeedback=function(){this.scr_stepsController.playFeedback([0],!0,!1),this.SetupSunMoonRaysNodes(),this.anim_sunrays.play("showsunrays",0),this.audioManager.play("sunglow",this.aud_sunglow,!1),this.scheduleOnce(function(){this.bowlSetup.getChildByName("moonphase").getComponent(cc.Sprite).spriteFrame=this.moonReflections[this.correctDialNo-1],this.audioManager.play("moonglow",this.aud_moonglow,!1),this.anim_moonrays.play("showmoonrays",0),this.uiManager.setActiveNextButton(!0)}.bind(this),2),this.isAnswerTriedAgain?this.scr_questionProgressBar.UpdateProgressQuestionBar(this.scr_stepsController.getCurrentQuestionIndex(),!1):(this.firstAttemptAnswers++,this.scr_questionProgressBar.UpdateProgressQuestionBar(this.scr_stepsController.getCurrentQuestionIndex(),!0)),this.isAnswerTriedAgain=!1},e.prototype.WrongOptionFeedback=function(){this.scr_stepsController.playFeedback([1],!0,!1),this.SetupSunMoonRaysNodes(),this.anim_sunrays.play("showsunrays",0),this.audioManager.play("sunglow",this.aud_sunglow,!1),this.scheduleOnce(function(){this.bowlSetup.getChildByName("bubbles").opacity=255,this.audioManager.play("liquidboil",this.aud_liquidboil,!0),this.bowlSetup.getChildByName("bubbles").getComponent(cc.Animation).play("bowlbubbles",0),this.audioManager.play("moonglow",this.aud_moonglow,!1),this.anim_moonrays.play("showmoonrays",0),this.uiManager.setActiveTryAgainButton(!0)}.bind(this),2)},e.prototype.SetupSunMoonRaysNodes=function(){switch(this.selectedDialNo){case 1:this.anim_sunrays.node.scaleX=.475,this.anim_sunrays.node.setPosition(208,0),this.anim_moonrays.node.angle=180,this.anim_moonrays.node.scaleX=1;break;case 2:this.anim_sunrays.node.scaleX=.6,this.anim_sunrays.node.setPosition(145,117),this.anim_moonrays.node.angle=218,this.anim_moonrays.node.scaleX=.9;break;case 3:this.anim_sunrays.node.scaleX=.86,this.anim_sunrays.node.setPosition(0,162),this.anim_moonrays.node.angle=270,this.anim_moonrays.node.scaleX=.75;break;case 4:this.anim_sunrays.node.scaleX=1.04,this.anim_sunrays.node.setPosition(-149,116),this.anim_moonrays.node.angle=322,this.anim_moonrays.node.scaleX=.9;break;case 5:this.anim_sunrays.node.scaleX=1.1,this.anim_sunrays.node.setPosition(-208,0),this.anim_moonrays.node.angle=0,this.anim_moonrays.node.scaleX=1}},e.prototype.IntroSeqencing=function(){this.disableAllExceptThis(this.introsetup),this.introsetup.getComponent(cc.Animation).play()},e.prototype.StartPlay=function(){this.disableAllExceptThis(this.playsetup),this.bowlSetup.getChildByName("bubbles").opacity=0,this.bowlSetup.getChildByName("bubbles").getComponent(cc.Animation).stop(),this.bowlSetup.getChildByName("moonphase").getComponent(cc.Sprite).spriteFrame=null,this.anim_sunrays.node.opacity=0,this.anim_moonrays.node.opacity=0},e.prototype.OutroSequencing=function(){this.uiManager.setActiveCloseButton(!1),console.log("Outro sequence"),this.disableAllExceptThis(this.outrosetup),this.outroVisuals.opacity=255,this.outroFeedback.opacity=0},e.prototype.SetupQuestion=function(){this.InitializeMoonDial(),this.scr_selectionPanel.InitializeSelectionPanel(this.disabledDialNo,this.correctDialNo),this.scheduleOnce(function(){this.ShowSelectionPanel()}.bind(this),this.delaySelectionUI)},e.prototype.InitializeMoonDial=function(){var t=this;this.moondial.children.forEach(function(e){e.opacity=255,e.getChildByName("moon").opacity=0,e.name==t.disabledDialNo.toString()&&(e.opacity=0)})},e.prototype.ShowSelectionPanel=function(){this.selectionPanel.runAction(cc.moveBy(.5,cc.v2(0,300)).easing(cc.easeQuadraticActionInOut()))},e.prototype.HideSelectionPanel=function(){this.selectionPanel.runAction(cc.moveBy(.5,cc.v2(0,-300)).easing(cc.easeQuadraticActionInOut()))},e.prototype.disableAllExceptThis=function(t){this.introsetup.active=!1,this.playsetup.active=!1,this.outrosetup.active=!1,null!=t&&(t.active=!0)},e.prototype.setActiveFooterText=function(t,e){if(void 0===e&&(e=""),console.log("Footer text is ",e),t){var o=cc.moveTo(1,0,-300);this.node.getChildByName("CustomUI").getChildByName("CustomFooterText").runAction(o),this.node.getChildByName("CustomUI").getChildByName("CustomFooterText").getChildByName("Content").getChildByName("mainContent").getComponent(cc.Label).string=e}else{o=cc.moveTo(1,0,-600);this.node.getChildByName("CustomUI").getChildByName("CustomFooterText").runAction(o)}},n([u(cc.Node)],e.prototype,"canvas",void 0),n([u(cc.Node)],e.prototype,"questionProgressBar",void 0),n([u(cc.Node)],e.prototype,"introsetup",void 0),n([u(cc.Node)],e.prototype,"playsetup",void 0),n([u(cc.Node)],e.prototype,"selectionPanel",void 0),n([u(cc.Animation)],e.prototype,"anim_sunrays",void 0),n([u(cc.Animation)],e.prototype,"anim_moonrays",void 0),n([u(cc.Node)],e.prototype,"moondial",void 0),n([u(cc.Node)],e.prototype,"bowlSetup",void 0),n([u(cc.SpriteFrame)],e.prototype,"moonReflections",void 0),n([u(cc.Node)],e.prototype,"outrosetup",void 0),n([u({type:cc.AudioClip})],e.prototype,"aud_bgm",void 0),n([u({type:cc.AudioClip})],e.prototype,"aud_correctfeedback",void 0),n([u({type:cc.AudioClip})],e.prototype,"aud_wrongfeedback",void 0),n([u({type:cc.AudioClip})],e.prototype,"aud_sunglow",void 0),n([u({type:cc.AudioClip})],e.prototype,"aud_moonglow",void 0),n([u({type:cc.AudioClip})],e.prototype,"aud_liquidboil",void 0),n([u(cc.Node)],e.prototype,"labelGamePause",void 0),e=n([d],e)}(cc.Component);o.default=g,cc._RF.pop()},{"../../../../framework/prefab/QuestionProgressBar":"QuestionProgressBar","../../../../framework/scripts/AnalyticsManager":"AnalyticsManager","../../../../framework/scripts/AudioManager":"AudioManager","../../../../framework/scripts/StepsController":"StepsController","../../../../framework/scripts/UIManager":"UIManager","./TXPL07SCI17E01_SelectionPanel":"TXPL07SCI17E01_SelectionPanel"}],TXPL07SCI17E01_SelectionPanel:[function(t,e,o){"use strict";cc._RF.push(e,"1b4711ItgNCMaZm1+YlrRx7","TXPL07SCI17E01_SelectionPanel");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/AudioManager"),r=t("../../../../framework/scripts/AnalyticsManager"),a=t("../../../../framework/scripts/StepsController"),c=cc._decorator,p=c.ccclass,l=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameNode=null,e.aud_buttontap=null,e.canvas=null,e.txt_optioncase=null,e.btn_submit=null,e.dial_array=[1,2,3,4,5],e.dial_clockNo=0,e.disabledDialNo=0,e.selectedDialNo=0,e.correctDialNo=0,e}return i(e,t),e.prototype.onLoad=function(){this.txt_optioncase=this.node.getChildByName("optioncase").getChildByName("text"),this.btn_submit=this.node.getChildByName("submit").getComponent(cc.Button),this.audioManager=this.canvas.getComponent(s.default),this.scr_analyticsManager=this.canvas.getComponent(r.default),this.scr_stepsController=this.canvas.getComponent(a.default)},e.prototype.buttonCall=function(t){console.log("event ",t)},e.prototype.start=function(){},e.prototype.InitializeSelectionPanel=function(t,e){this.node.y=-600,this.disabledDialNo=t,this.dial_clockNo=t,this.correctDialNo=e,this.txt_optioncase.getComponent("TextLoader").changeLabel("selectmoonphase"),this.btn_submit.interactable=!1,this.btn_submit.node.opacity=125},e.prototype.OnRightArrowCLick=function(t){console.log("right click , ",this.dial_clockNo),this.audioManager.play("buttontap",this.aud_buttontap,!1),this.btn_submit.interactable=!0,this.btn_submit.node.opacity=255,this.dial_clockNo++,this.dial_clockNo>5&&(this.dial_clockNo=1),this.dial_clockNo==this.disabledDialNo&&this.dial_clockNo++,this.dial_clockNo>5&&(this.dial_clockNo=1),this.txt_optioncase.getComponent("TextLoader").changeLabel("position"+this.dial_clockNo.toString());var e="increment,1,1:"+this.dial_clockNo.toString();this.scr_analyticsManager.sendOnScrollWheelChange(this.scr_stepsController.getCurrentQuestionIndex(),e,1)},e.prototype.OnLeftArrowClick=function(){console.log("left click ,",this.dial_clockNo),this.audioManager.play("buttontap",this.aud_buttontap,!1),this.btn_submit.interactable=!0,this.btn_submit.node.opacity=255,this.dial_clockNo--,this.dial_clockNo<1&&(this.dial_clockNo=5),this.dial_clockNo==this.disabledDialNo&&this.dial_clockNo--,this.dial_clockNo<1&&(this.dial_clockNo=5),this.txt_optioncase.getComponent("TextLoader").changeLabel("position"+this.dial_clockNo.toString());var t="decrement,1,1:"+this.dial_clockNo.toString();this.scr_analyticsManager.sendOnScrollWheelChange(this.scr_stepsController.getCurrentQuestionIndex(),t,1)},e.prototype.OnSubmitButtonClick=function(){console.log("submit"),this.audioManager.play("buttontap",this.aud_buttontap,!1),this.btn_submit.interactable=!1,this.selectedDialNo=this.dial_clockNo,this.gameNode.emit("OnDialSelection",this.selectedDialNo)},n([l(cc.Node)],e.prototype,"gameNode",void 0),n([l({type:cc.AudioClip})],e.prototype,"aud_buttontap",void 0),n([l(cc.Node)],e.prototype,"canvas",void 0),e=n([p],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../../framework/scripts/AnalyticsManager":"AnalyticsManager","../../../../framework/scripts/AudioManager":"AudioManager","../../../../framework/scripts/StepsController":"StepsController"}],TXPL07SCI17E02_ButtonStyle:[function(t,e,o){"use strict";cc._RF.push(e,"879a53rUsZJsInNhVvZ02ck","TXPL07SCI17E02_ButtonStyle");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.onLoad=function(){this.node.getComponent(cc.Button).node.on("touchstart",this.onButtonPressStart,this),this.node.getComponent(cc.Button).node.on("touchend",this.onButtonPressEnd,this),this.node.getComponent(cc.Button).node.on("touchcancel",this.onButtonPressEnd,this)},e.prototype.onButtonPressStart=function(){this.node.color=new cc.Color(178,178,178,255)},e.prototype.onButtonPressEnd=function(t){console.log("touch event ",t),this.node.color=new cc.Color(255,255,255,255)},e.prototype.start=function(){},e=n([r],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],TXPL07SCI17E02_PhasesOfmoon2:[function(t,e,o){"use strict";cc._RF.push(e,"b7076GHdP1OPK4jWIIK1caz","TXPL07SCI17E02_PhasesOfmoon2");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/AudioManager"),r=t("../../../../framework/scripts/AnalyticsManager"),a=t("../../../../framework/scripts/StepsController"),c=t("../../../../framework/scripts/UIManager"),p=t("../../../../framework/prefab/QuestionProgressBar"),l=t("./TXPL07SCI17E02_SelectionPanel"),h=t("../../../../framework/prefab/TemplateQuantitativeFeedback"),d=cc._decorator,u=d.ccclass,g=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.questionProgressBar=null,e.introsetup=null,e.playsetup=null,e.selectionPanel=null,e.anim_sunrays=null,e.anim_moonrays=null,e.moondial=null,e.bowlSetup=null,e.moonReflections=[],e.outrosetup=null,e.aud_bgm=null,e.aud_correctfeedback=null,e.aud_wrongfeedback=null,e.aud_sunglow=null,e.aud_moonglow=null,e.aud_liquidboil=null,e.scr_selectionPanel=null,e.correctDialNo=0,e.selectedDialNo=0,e.disabledDialNo=0,e.optionsOnDial=[],e.outroVisuals=null,e.outroFeedback=null,e.firstAttemptAnswers=0,e.isAnswerTriedAgain=!1,e}return i(e,t),e.prototype.onLoad=function(){this.scr_stepsController=this.canvas.getComponent(a.default),this.uiManager=this.canvas.getComponent(c.default),this.audioManager=this.canvas.getComponent(s.default),this.scr_analyticsManager=this.canvas.getComponent(r.default),this.canvas.on("OnLoadStep",this.stepsHandler.bind(this)),this.canvas.on("OnCommonButtonClick",this.onCommonButtonClick.bind(this)),this.canvas.on("OnAnswerVerification",this.onAnswerVerification.bind(this)),this.scr_questionProgressBar=this.questionProgressBar.getComponent(p.default),this.canvas.getChildByName("Main Camera").getComponent(cc.Camera).backgroundColor=cc.Color.BLACK,this.scr_selectionPanel=this.selectionPanel.getComponent(l.default),this.node.on("OnDialSelection",this.OnDialSelection.bind(this)),this.outrosetup.active=!0,this.outroVisuals=this.outrosetup.getChildByName("Visuals"),this.outroFeedback=this.outrosetup.getChildByName("Quantitative_feedback")},e.prototype.start=function(){this.scr_stepsController.Initialise("TXPL08SCI17E02_PhasesOfmoon2"),this.IntroSeqencing(),this.audioManager.play("bgm",this.aud_bgm,!0,"BGM")},e.prototype.stepsHandler=function(t){switch(console.log("Steps handler. Next step is "+t),t>=2&&t<7&&this.StartPlay(),t){case 0:break;case 2:this.correctDialNo=1,this.disabledDialNo=5,this.anim_sunrays.stop(),this.anim_moonrays.stop(),this.SetOptionsArray(),this.SetupQuestion();break;case 3:this.correctDialNo=5,this.disabledDialNo=2,this.anim_sunrays.stop(),this.anim_moonrays.stop(),this.SetOptionsArray(),this.SetupQuestion();break;case 4:this.correctDialNo=3,this.disabledDialNo=1,this.anim_sunrays.stop(),this.anim_moonrays.stop(),this.SetOptionsArray(),this.SetupQuestion();break;case 5:this.correctDialNo=4,this.disabledDialNo=3,this.anim_sunrays.stop(),this.anim_moonrays.stop(),this.SetOptionsArray(),this.SetupQuestion();break;case 6:this.correctDialNo=2,this.disabledDialNo=5,this.anim_sunrays.stop(),this.anim_moonrays.stop(),this.SetOptionsArray(),this.SetupQuestion();break;case 7:this.OutroSequencing()}},e.prototype.SetOptionsArray=function(){var t=[1,2,3,4,5];this.optionsOnDial.length=0;for(var e=0;e<5;e++)t[e]!=this.disabledDialNo&&this.optionsOnDial.push(t[e])},e.prototype.onCommonButtonClick=function(t){this.uiManager.CommonButtonType.NextQuestion==t?(this.scr_analyticsManager.sendNextQuestionStart(this.scr_stepsController.getCurrentQuestionIndex(),!1,this.scr_analyticsManager.Phylum.Click),this.scr_stepsController.loadNextStep()):this.uiManager.CommonButtonType.TryAgain==t&&(this.scr_analyticsManager.sendOnTryAgain(this.scr_stepsController.getCurrentQuestionIndex(),this.optionsOnDial.indexOf(this.selectedDialNo)+1),this.audioManager.stop("liquidboil"),this.isAnswerTriedAgain=!0,this.resetAfterTryAgain())},e.prototype.resetAfterTryAgain=function(){this.scr_stepsController.loadNextStep(this.scr_stepsController.getCurrentStep())},e.prototype.onAnswerVerification=function(t){console.log("Answer submitted "+t.isCorrect),this.scr_stepsController.getCurrentStep()},e.prototype.OnDialSelection=function(t){this.selectedDialNo=t;var e=!1;t==this.correctDialNo?(e=!0,"correct",this.audioManager.play("correctfeedback",this.aud_correctfeedback,!1,"SFX"),this.CorrectOptionFeedback()):(this.audioManager.play("arongfeedback",this.aud_wrongfeedback,!1,"SFX"),this.WrongOptionFeedback()),this.scr_analyticsManager.sendSubmitAnswers(this.scr_stepsController.getCurrentQuestionIndex(),e,"click"),this.HideSelectionPanel(),this.moondial.children.forEach(function(e){e.name==t.toString()&&(e.getChildByName("moon").opacity=255)})},e.prototype.CorrectOptionFeedback=function(){this.scr_stepsController.playFeedback([0],!0,!1),this.SetupSunMoonRaysNodes(),this.anim_sunrays.play("showsunrays",0),this.audioManager.play("sunglow",this.aud_sunglow,!1),this.scheduleOnce(function(){this.bowlSetup.getChildByName("moonphase").getComponent(cc.Sprite).spriteFrame=this.moonReflections[this.correctDialNo-1],this.audioManager.play("moonglow",this.aud_moonglow,!1),this.anim_moonrays.play("showmoonrays",0),this.uiManager.setActiveNextButton(!0)}.bind(this),2),this.isAnswerTriedAgain?this.scr_questionProgressBar.UpdateProgressQuestionBar(this.scr_stepsController.getCurrentQuestionIndex(),!1):(this.firstAttemptAnswers++,this.scr_questionProgressBar.UpdateProgressQuestionBar(this.scr_stepsController.getCurrentQuestionIndex(),!0)),this.isAnswerTriedAgain=!1},e.prototype.WrongOptionFeedback=function(){this.scr_stepsController.playFeedback([1],!0,!1),this.SetupSunMoonRaysNodes(),this.anim_sunrays.play("showsunrays",0),this.audioManager.play("sunglow",this.aud_sunglow,!1),this.scheduleOnce(function(){this.bowlSetup.getChildByName("bubbles").opacity=255,this.audioManager.play("liquidboil",this.aud_liquidboil,!0),this.bowlSetup.getChildByName("bubbles").getComponent(cc.Animation).play("bowlbubbles",0),this.audioManager.play("moonglow",this.aud_moonglow,!1),this.anim_moonrays.play("showmoonrays",0),this.uiManager.setActiveTryAgainButton(!0)}.bind(this),2)},e.prototype.SetupSunMoonRaysNodes=function(){switch(this.selectedDialNo){case 5:this.anim_sunrays.node.scaleX=.475,this.anim_sunrays.node.setPosition(208,0),this.anim_moonrays.node.angle=180,this.anim_moonrays.node.scaleX=1;break;case 4:this.anim_sunrays.node.scaleX=.6,this.anim_sunrays.node.setPosition(145,-105),this.anim_moonrays.node.angle=146,this.anim_moonrays.node.scaleX=.9;break;case 3:this.anim_sunrays.node.scaleX=.86,this.anim_sunrays.node.setPosition(0,-162),this.anim_moonrays.node.angle=90,this.anim_moonrays.node.scaleX=.78;break;case 2:this.anim_sunrays.node.scaleX=1.04,this.anim_sunrays.node.setPosition(-149,-105),this.anim_moonrays.node.angle=34.5,this.anim_moonrays.node.scaleX=.9;break;case 1:this.anim_sunrays.node.scaleX=1.1,this.anim_sunrays.node.setPosition(-208,0),this.anim_moonrays.node.angle=0,this.anim_moonrays.node.scaleX=1}},e.prototype.IntroSeqencing=function(){this.disableAllExceptThis(this.introsetup),this.introsetup.getComponent(cc.Animation).play()},e.prototype.StartPlay=function(){this.disableAllExceptThis(this.playsetup),this.bowlSetup.getChildByName("bubbles").opacity=0,this.bowlSetup.getChildByName("bubbles").getComponent(cc.Animation).stop(),this.bowlSetup.getChildByName("moonphase").getComponent(cc.Sprite).spriteFrame=null,this.anim_sunrays.node.opacity=0,this.anim_moonrays.node.opacity=0},e.prototype.OutroSequencing=function(){this.canvas.emit("OnEndScreenReach",{}),this.uiManager.setActiveCloseButton(!1),console.log("Outro sequence"),this.disableAllExceptThis(this.outrosetup),this.setActiveFooterText(!0,this.scr_stepsController.getTextByKey("outroText")),this.scheduleOnce(function(){this.setActiveFooterText(!1)}.bind(this),8),this.outroVisuals.opacity=255,this.outroFeedback.opacity=0,this.scheduleOnce(function(){this.outroVisuals.runAction(cc.fadeOut(.5)),this.outroFeedback.runAction(cc.fadeIn(.5)),this.outroFeedback.getComponent(h.default).SetQuantitativeFeedback(5,this.firstAttemptAnswers)}.bind(this),12)},e.prototype.SetupQuestion=function(){this.InitializeMoonDial(),this.scr_selectionPanel.InitializeSelectionPanel(this.disabledDialNo,this.correctDialNo),this.scheduleOnce(function(){this.ShowSelectionPanel()}.bind(this),2)},e.prototype.InitializeMoonDial=function(){var t=this;this.moondial.children.forEach(function(e){e.opacity=255,e.getChildByName("moon").opacity=0,e.name==t.disabledDialNo.toString()&&(e.opacity=0)})},e.prototype.ShowSelectionPanel=function(){this.selectionPanel.runAction(cc.moveBy(.5,cc.v2(0,300)))},e.prototype.HideSelectionPanel=function(){this.selectionPanel.runAction(cc.moveBy(.5,cc.v2(0,-300)))},e.prototype.disableAllExceptThis=function(t){this.introsetup.active=!1,this.playsetup.active=!1,this.outrosetup.active=!1,t.active=!0},e.prototype.setActiveFooterText=function(t,e){if(void 0===e&&(e=""),console.log("Footer text is ",e),t){var o=cc.moveTo(1,0,-300);this.node.getChildByName("CustomUI").getChildByName("CustomFooterText").runAction(o),this.node.getChildByName("CustomUI").getChildByName("CustomFooterText").getChildByName("Content").getChildByName("mainContent").getComponent(cc.Label).string=e}else{o=cc.moveTo(1,0,-600);this.node.getChildByName("CustomUI").getChildByName("CustomFooterText").runAction(o)}},n([g(cc.Node)],e.prototype,"canvas",void 0),n([g(cc.Node)],e.prototype,"questionProgressBar",void 0),n([g(cc.Node)],e.prototype,"introsetup",void 0),n([g(cc.Node)],e.prototype,"playsetup",void 0),n([g(cc.Node)],e.prototype,"selectionPanel",void 0),n([g(cc.Animation)],e.prototype,"anim_sunrays",void 0),n([g(cc.Animation)],e.prototype,"anim_moonrays",void 0),n([g(cc.Node)],e.prototype,"moondial",void 0),n([g(cc.Node)],e.prototype,"bowlSetup",void 0),n([g(cc.SpriteFrame)],e.prototype,"moonReflections",void 0),n([g(cc.Node)],e.prototype,"outrosetup",void 0),n([g({type:cc.AudioClip})],e.prototype,"aud_bgm",void 0),n([g({type:cc.AudioClip})],e.prototype,"aud_correctfeedback",void 0),n([g({type:cc.AudioClip})],e.prototype,"aud_wrongfeedback",void 0),n([g({type:cc.AudioClip})],e.prototype,"aud_sunglow",void 0),n([g({type:cc.AudioClip})],e.prototype,"aud_moonglow",void 0),n([g({type:cc.AudioClip})],e.prototype,"aud_liquidboil",void 0),e=n([u],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../../../../framework/prefab/QuestionProgressBar":"QuestionProgressBar","../../../../framework/prefab/TemplateQuantitativeFeedback":"TemplateQuantitativeFeedback","../../../../framework/scripts/AnalyticsManager":"AnalyticsManager","../../../../framework/scripts/AudioManager":"AudioManager","../../../../framework/scripts/StepsController":"StepsController","../../../../framework/scripts/UIManager":"UIManager","./TXPL07SCI17E02_SelectionPanel":"TXPL07SCI17E02_SelectionPanel"}],TXPL07SCI17E02_SelectionPanel:[function(t,e,o){"use strict";cc._RF.push(e,"8f93eqeh71D54c5Hzh7PtSw","TXPL07SCI17E02_SelectionPanel");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/AudioManager"),r=t("../../../../framework/scripts/AnalyticsManager"),a=t("../../../../framework/scripts/StepsController"),c=cc._decorator,p=c.ccclass,l=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gameNode=null,e.aud_buttontap=null,e.canvas=null,e.txt_optioncase=null,e.btn_submit=null,e.dial_array=[1,2,3,4,5],e.dial_clockNo=0,e.disabledDialNo=0,e.selectedDialNo=0,e.correctDialNo=0,e}return i(e,t),e.prototype.onLoad=function(){this.txt_optioncase=this.node.getChildByName("optioncase").getChildByName("text"),this.btn_submit=this.node.getChildByName("submit").getComponent(cc.Button),this.audioManager=this.canvas.getComponent(s.default),this.scr_analyticsManager=this.canvas.getComponent(r.default),this.scr_stepsController=this.canvas.getComponent(a.default)},e.prototype.buttonCall=function(t){console.log("event ",t)},e.prototype.start=function(){},e.prototype.InitializeSelectionPanel=function(t,e){this.node.y=-600,this.disabledDialNo=t,this.dial_clockNo=t,this.correctDialNo=e,this.txt_optioncase.getComponent("TextLoader").changeLabel("selectmoonphase"),this.btn_submit.interactable=!1,this.btn_submit.node.opacity=125},e.prototype.OnRightArrowCLick=function(t){console.log("right click , ",this.dial_clockNo),this.audioManager.play("buttontap",this.aud_buttontap,!1),this.btn_submit.interactable=!0,this.btn_submit.node.opacity=255,this.dial_clockNo++,this.dial_clockNo>5&&(this.dial_clockNo=1),this.dial_clockNo==this.disabledDialNo&&this.dial_clockNo++,this.dial_clockNo>5&&(this.dial_clockNo=1),this.txt_optioncase.getComponent("TextLoader").changeLabel("position"+this.dial_clockNo.toString());var e="increment,1,1:"+this.dial_clockNo.toString();this.scr_analyticsManager.sendOnScrollWheelChange(this.scr_stepsController.getCurrentQuestionIndex(),e,1)},e.prototype.OnLeftArrowClick=function(){console.log("left click ,",this.dial_clockNo),this.audioManager.play("buttontap",this.aud_buttontap,!1),this.btn_submit.interactable=!0,this.btn_submit.node.opacity=255,this.dial_clockNo--,this.dial_clockNo<1&&(this.dial_clockNo=5),this.dial_clockNo==this.disabledDialNo&&this.dial_clockNo--,this.dial_clockNo<1&&(this.dial_clockNo=5),this.txt_optioncase.getComponent("TextLoader").changeLabel("position"+this.dial_clockNo.toString());var t="decrement,1,1:"+this.dial_clockNo.toString();this.scr_analyticsManager.sendOnScrollWheelChange(this.scr_stepsController.getCurrentQuestionIndex(),t,1)},e.prototype.OnSubmitButtonClick=function(){console.log("submit"),this.audioManager.play("buttontap",this.aud_buttontap,!1),this.btn_submit.interactable=!1,this.selectedDialNo=this.dial_clockNo,this.gameNode.emit("OnDialSelection",this.selectedDialNo)},n([l(cc.Node)],e.prototype,"gameNode",void 0),n([l({type:cc.AudioClip})],e.prototype,"aud_buttontap",void 0),n([l(cc.Node)],e.prototype,"canvas",void 0),e=n([p],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../../framework/scripts/AnalyticsManager":"AnalyticsManager","../../../../framework/scripts/AudioManager":"AudioManager","../../../../framework/scripts/StepsController":"StepsController"}],TXPL08MAT16E01_Divisibility_1:[function(t,e,o){"use strict";cc._RF.push(e,"90965GXv/hPRYa69ZY7vZ88","TXPL08MAT16E01_Divisibility_1");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/AnalyticsManager"),r=t("../../../../framework/scripts/AudioManager"),a=t("../../../../framework/scripts/StepsController"),c=t("../../../../framework/scripts/UIManager"),p=t("../../../../framework/scripts/utilities/TextLoader"),l=t("./TXPL08MAT16E01_Drag_Drop"),h=t("./TXPL08MAT16E01_GameModels"),d=cc._decorator,u=d.ccclass,g=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.aud_bgm=null,e.introNode=null,e.panelAnimations=[],e.gamePlayNode=null,e.optionNode=null,e.optionObject=[],e.optionBox=[],e.outputPart=[],e.leftOverPart=[],e.inputDoor=null,e.spark=null,e.output=null,e.outputDoor=null,e.leftover=null,e.leftOverDoor=null,e.intermediateNode=null,e.intermediateLabel=null,e.completeNode=null,e.progressBar=null,e.indicators=[],e.activeSprite=null,e.outputName=null,e.leftOverName=null,e.leftOverCount=null,e.audioClips=[],e.hintButton=null,e.hintPopup=null,e.blanket=null,e.txtMessage=null,e.greenIndicator=null,e.redIndicator=null,e.reportNode=null,e.firstAttemptCount=null,e.reportText=null,e.mActivePart=null,e.mInProgress=!1,e.mProgressPercent=0,e.mObjectName=null,e.mFirstAttempts=[],e}return i(e,t),e.prototype.onLoad=function(){this.scr_stepsController=this.canvas.getComponent(a.default),this.uiManager=this.canvas.getComponent(c.default),this.audioManager=this.canvas.getComponent(r.default),this.scr_analyticsManager=this.canvas.getComponent(s.default),this.canvas.on("OnLoadStep",this.stepsHandler.bind(this)),this.canvas.on("OnCommonButtonClick",this.onCommonButtonClick.bind(this)),this.canvas.on("OnAnswerVerification",this.onAnswerVerification.bind(this)),this.node.on("OnOptionDropped",this.onOptionDropped.bind(this)),this.node.on("OnOptionDraggingStarted",this.onOptionDragStarted.bind(this)),this.hintPopup.removeFromParent(),this.canvas.addChild(this.hintPopup),this.blanket.on(cc.Node.EventType.TOUCH_START,this.hideHintPopup.bind(this))},e.prototype.start=function(){this.scr_stepsController.Initialise("TXPL08MAT16E01_Divisibility_1"),this.audioManager.play("bgm",this.aud_bgm,!0,"BGM");for(var t=0;t<9;t++)this.mFirstAttempts.push(!0)},e.prototype.stepsHandler=function(t){switch(console.log("Steps handler. Next step is "+t),t){case 0:this.uiManager.setHeaderYpos(450);case 1:case 2:case 3:this.panelAnimations[t].play(this.panelAnimations[t].getClips()[0].name);break;case 4:this.uiManager.hideHeaderText(),this.uiManager.setHeaderYpos(400),this.scheduleOnce(function(){this.introNode.active=!1,this.gamePlayNode.active=!0,this.updateOptions(h.Parts.ARM)}.bind(this),1.5);break;case 5:case 6:this.updateOptions(h.Parts.ARM);break;case 7:this.uiManager.setHeaderYpos(450),this.scheduleOnce(function(){this.gamePlayNode.active=!1,this.intermediateNode.active=!0,this.panelAnimations[4].play(this.panelAnimations[4].getClips()[0].name),this.intermediateLabel.string="Antenna Production \n Department"}.bind(this),1.5);break;case 8:this.uiManager.hideHeaderText(),this.panelAnimations[5].play(this.panelAnimations[5].getClips()[0].name);break;case 9:this.uiManager.showFooterText(this.scr_stepsController.getTextByKey("intermediateStep1")),this.scheduleOnce(function(){this.uiManager.setActiveNextButton(!0)}.bind(this),3);break;case 10:this.uiManager.hideHeaderText(),this.uiManager.setHeaderYpos(400),this.scheduleOnce(function(){this.panelAnimations[4].setCurrentTime(0,this.panelAnimations[4].getClips()[0].name),this.panelAnimations[5].setCurrentTime(0,this.panelAnimations[5].getClips()[0].name),this.intermediateNode.active=!1,this.gamePlayNode.active=!0}.bind(this),1.5);case 11:case 12:this.updateOptions(h.Parts.ANTENNA);break;case 13:this.uiManager.setHeaderYpos(450),this.scheduleOnce(function(){this.gamePlayNode.active=!1,this.intermediateNode.active=!0,this.panelAnimations[4].play(this.panelAnimations[4].getClips()[0].name),this.intermediateLabel.string="Leg Production \n Department"}.bind(this),1.5);break;case 14:this.uiManager.hideHeaderText(),this.panelAnimations[5].play(this.panelAnimations[5].getClips()[0].name);break;case 15:this.uiManager.showFooterText(this.scr_stepsController.getTextByKey("intermediateStep2")),this.scheduleOnce(function(){this.uiManager.setActiveNextButton(!0)}.bind(this),3);break;case 16:this.uiManager.hideHeaderText(),this.uiManager.setHeaderYpos(400),this.scheduleOnce(function(){this.intermediateNode.active=!1,this.gamePlayNode.active=!0}.bind(this),1.5);case 17:case 18:this.updateOptions(h.Parts.LEG);break;case 19:this.uiManager.setActiveCloseButton(!1),this.canvas.emit("OnEndScreenReach",{}),this.uiManager.setHeaderYpos(450),this.scheduleOnce(function(){this.gamePlayNode.active=!1,this.completeNode.active=!0,this.panelAnimations[6].play(this.panelAnimations[6].getClips()[0].name),this.intermediateLabel.string=""}.bind(this),1.5);break;case 20:this.uiManager.hideHeaderText(),this.panelAnimations[7].play(this.panelAnimations[7].getClips()[0].name);break;case 21:this.uiManager.showFooterText(this.scr_stepsController.getTextByKey("completionState"));break;case 22:this.uiManager.hideHeaderText(),this.scheduleOnce(function(){var t=this.getFirstAttemptCount();this.firstAttemptCount.string=""+t,this.reportText.getComponent(p.default).changeLabel("endScreenComplete"),t!=this.scr_stepsController.getTotalQuestions()&&this.reportText.getComponent(p.default).changeLabel("endScreenIncomplete"),this.reportNode.active=!0}.bind(this),1.5)}},e.prototype.onCommonButtonClick=function(t){this.uiManager.CommonButtonType.NextQuestion==t?this.scr_stepsController.loadNextStep():this.uiManager.CommonButtonType.TryAgain==t&&this.resetAfterTryAgain()},e.prototype.resetUI=function(){this.inputDoor.play(this.inputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Reverse,this.inputDoor.off("stop",this.onInputDoorAnimationComplete,this),this.outputDoor.play(this.outputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Normal,this.leftOverDoor.play(this.outputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Normal,this.greenIndicator.active=!1,this.redIndicator.active=!1,this.hideHintPopup()},e.prototype.resetAfterTryAgain=function(){this.mFirstAttempts[this.scr_stepsController.getCurrentQuestionIndex()-1]=!1,this.scr_stepsController.loadNextStep(this.scr_stepsController.getCurrentStep())},e.prototype.onOptionDragStarted=function(t){this.scr_stepsController.onOptionDragStarted({optionName:t}),this.audioManager.play(h.getAudioName(h.AudioClips.BOX_PICKUP),this.audioClips[h.AudioClips.BOX_PICKUP],!1,"SFX")},e.prototype.onOptionDropped=function(t){this.uiManager.hideHeaderText(),this.mObjectName=t,this.inputDoor.play(this.inputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Normal,this.audioManager.play(h.getAudioName(h.AudioClips.DOOR_CLOSE),this.audioClips[h.AudioClips.DOOR_CLOSE],!1,"SFX"),this.inputDoor.on("stop",this.onInputDoorAnimationComplete,this),this.enableOptions(!1),this.optionNode.play(this.optionNode.getClips()[1].name),this.optionNode.on("stop",this.onSparkAnimationComplete,this),this.audioManager.play(h.getAudioName(h.AudioClips.CONVEYOR_BELT),this.audioClips[h.AudioClips.CONVEYOR_BELT],!0,"SFX")},e.prototype.onInputDoorAnimationComplete=function(){this.spark.play(this.spark.getClips()[0].name).wrapMode=cc.WrapMode.Normal,this.audioManager.play(h.getAudioName(h.AudioClips.MACHINE_PROCESS),this.audioClips[h.AudioClips.MACHINE_PROCESS],!1,"SFX")},e.prototype.onSparkAnimationComplete=function(){this.scr_stepsController.onOptionDropped({optionName:this.mObjectName}),this.stopConveyorBeltAudio()},e.prototype.onAnswerVerification=function(t){if(this.leftover.active=!1,console.log("Answer submitted "+t.isCorrect),t.isCorrect)this.mInProgress=!0,this.audioManager.play(h.getAudioName(h.AudioClips.CORRECT_ANSWER),this.audioClips[h.AudioClips.CORRECT_ANSWER],!1,"SFX"),this.audioManager.play(h.getAudioName(h.AudioClips.PROGRESS_BAR),this.audioClips[h.AudioClips.PROGRESS_BAR],!1,"SFX"),this.greenIndicator.active=!0;else{this.audioManager.play(h.getAudioName(h.AudioClips.WRONG_ANSWER),this.audioClips[h.AudioClips.WRONG_ANSWER],!1,"SFX"),this.leftover.active=!0,this.leftover.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this.leftOverPart[this.mActivePart]);var e=parseInt(t.answer)%this.getDivisor(this.mActivePart);this.leftOverCount.string="\xd7"+e,this.leftOverName.string=h.getPartsName(this.mActivePart),this.redIndicator.active=!0}this.output.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this.outputPart[this.mActivePart]),this.outputName.string=h.getPartsName(this.mActivePart),this.outputDoor.play(this.outputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Reverse,this.leftOverDoor.play(this.outputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Reverse,this.audioManager.play(h.getAudioName(h.AudioClips.DOOR_OPEN),this.audioClips[h.AudioClips.DOOR_OPEN],!1,"SFX")},e.prototype.updateOptions=function(t){var e=this;1==this.scr_stepsController.getCurrentQuestionIndex()&&this.mFirstAttempts[0]||this.resetUI(),this.progressBar.progress=this.getProgressPercent(this.scr_stepsController.getCurrentQuestionIndex()-1),this.mActivePart=t;var o=0;this.scr_stepsController.getCurrentStepJson().userInput.forEach(function(i){e.optionObject[o].getComponent(l.default).setName(h.getPartsName(t)),e.optionObject[o++].getComponent(l.default).updatePlaceHolderObject(e.optionBox[t],i,t)}),this.enableOptions(!1),this.optionNode.play(this.optionNode.getClips()[0].name),this.audioManager.play(h.getAudioName(h.AudioClips.CONVEYOR_BELT),this.audioClips[h.AudioClips.CONVEYOR_BELT],!0,"SFX"),this.optionNode.off("stop",this.onSparkAnimationComplete,this),this.optionNode.on("stop",this.stopConveyorBeltAudio,this)},e.prototype.stopConveyorBeltAudio=function(){this.audioManager.stop(h.getAudioName(h.AudioClips.CONVEYOR_BELT)),this.optionNode.off("stop",this.stopConveyorBeltAudio,this),this.enableOptions(!0)},e.prototype.enableOptions=function(t){this.optionObject.forEach(function(e){e.getComponent(l.default).enableTouch(t)})},e.prototype.update=function(t){if(this.mInProgress){var e=100*this.getProgressPercent(this.scr_stepsController.getCurrentQuestionIndex());this.mProgressPercent<e?(this.mProgressPercent++,this.progressBar.progress=this.mProgressPercent/100,this.mProgressPercent>=e&&this.mFirstAttempts[this.scr_stepsController.getCurrentQuestionIndex()-1]&&(this.indicators[this.scr_stepsController.getCurrentQuestionIndex()-1].spriteFrame=new cc.SpriteFrame(this.activeSprite))):this.mInProgress=!1}},e.prototype.showHintPopup=function(){this.scr_analyticsManager.sendOnHintButtonClick(this.scr_stepsController.getCurrentQuestionIndex()),this.scr_analyticsManager.sendOnHintView(this.scr_stepsController.getCurrentQuestionIndex()),this.hintPopup.active=!0,this.txtMessage.getComponent(p.default).changeLabel(this.getHintKey())},e.prototype.hideHintPopup=function(){this.hintPopup.active=!1},e.prototype.getFirstAttemptCount=function(){var t=0;return this.mFirstAttempts.forEach(function(e){e&&t++}),t},e.prototype.getProgressPercent=function(t){switch(t){case 1:return.1;case 2:return.2;case 3:return.3;case 4:return.4;case 5:return.5;case 6:return.625;case 7:return.75;case 8:return.875;case 9:return 1}return 0},e.prototype.getDivisor=function(t){switch(t){case h.Parts.ARM:return 2;case h.Parts.ANTENNA:return 3;case h.Parts.LEG:return 6}},e.prototype.getHintKey=function(){switch(this.scr_stepsController.getCurrentQuestionIndex()){case 1:case 2:case 3:return"hint1";case 4:case 5:case 6:return"hint2";case 7:case 8:case 9:return"hint3"}return"hint1"},n([g(cc.Node)],e.prototype,"canvas",void 0),n([g({type:cc.AudioClip})],e.prototype,"aud_bgm",void 0),n([g(cc.Node)],e.prototype,"introNode",void 0),n([g(cc.Animation)],e.prototype,"panelAnimations",void 0),n([g(cc.Node)],e.prototype,"gamePlayNode",void 0),n([g(cc.Animation)],e.prototype,"optionNode",void 0),n([g(cc.Node)],e.prototype,"optionObject",void 0),n([g({type:cc.Texture2D})],e.prototype,"optionBox",void 0),n([g({type:cc.Texture2D})],e.prototype,"outputPart",void 0),n([g({type:cc.Texture2D})],e.prototype,"leftOverPart",void 0),n([g(cc.Animation)],e.prototype,"inputDoor",void 0),n([g(cc.Animation)],e.prototype,"spark",void 0),n([g(cc.Node)],e.prototype,"output",void 0),n([g(cc.Animation)],e.prototype,"outputDoor",void 0),n([g(cc.Node)],e.prototype,"leftover",void 0),n([g(cc.Animation)],e.prototype,"leftOverDoor",void 0),n([g(cc.Node)],e.prototype,"intermediateNode",void 0),n([g(cc.Label)],e.prototype,"intermediateLabel",void 0),n([g(cc.Node)],e.prototype,"completeNode",void 0),n([g(cc.ProgressBar)],e.prototype,"progressBar",void 0),n([g(cc.Sprite)],e.prototype,"indicators",void 0),n([g({type:cc.Texture2D})],e.prototype,"activeSprite",void 0),n([g(cc.Label)],e.prototype,"outputName",void 0),n([g(cc.Label)],e.prototype,"leftOverName",void 0),n([g(cc.Label)],e.prototype,"leftOverCount",void 0),n([g({type:cc.AudioClip})],e.prototype,"audioClips",void 0),n([g(cc.Node)],e.prototype,"hintButton",void 0),n([g(cc.Node)],e.prototype,"hintPopup",void 0),n([g(cc.Node)],e.prototype,"blanket",void 0),n([g(cc.Label)],e.prototype,"txtMessage",void 0),n([g(cc.Node)],e.prototype,"greenIndicator",void 0),n([g(cc.Node)],e.prototype,"redIndicator",void 0),n([g(cc.Node)],e.prototype,"reportNode",void 0),n([g(cc.Label)],e.prototype,"firstAttemptCount",void 0),n([g(cc.Label)],e.prototype,"reportText",void 0),e=n([u],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../../../../framework/scripts/AnalyticsManager":"AnalyticsManager","../../../../framework/scripts/AudioManager":"AudioManager","../../../../framework/scripts/StepsController":"StepsController","../../../../framework/scripts/UIManager":"UIManager","../../../../framework/scripts/utilities/TextLoader":"TextLoader","./TXPL08MAT16E01_Drag_Drop":"TXPL08MAT16E01_Drag_Drop","./TXPL08MAT16E01_GameModels":"TXPL08MAT16E01_GameModels"}],TXPL08MAT16E01_Drag_Drop:[function(t,e,o){"use strict";cc._RF.push(e,"5fa7bgJ8vlGypl/3Cax0me0","TXPL08MAT16E01_Drag_Drop");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./TXPL08MAT16E01_GameModels"),r=cc._decorator,a=r.ccclass,c=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dropPlace=null,e.startPos=null,e.gameNode=null,e.placeHolderObject=null,e.optionName=null,e.optionCount=null,e.inputName=null,e.inputCount=null,e.currentDraggingObject=null,e.mName="",e.mCount="",e.mIsTouchEnabled=!1,e}return i(e,t),e.prototype.setName=function(t){this.mName=t,this.node.active=!0},e.prototype.updatePlaceHolderObject=function(t,e,o){this.mCount=e,this.placeHolderObject.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t),this.node.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t),this.placeHolderObject.active=!1,this.optionName.string=this.inputName.string=this.mName,this.optionCount.string=e,5==this.optionCount.string.length?this.optionCount.node.setPosition(16,this.optionCount.node.getPosition().y):4==this.optionCount.string.length?this.optionCount.node.setPosition(10,this.optionCount.node.getPosition().y):this.optionCount.node.setPosition(13,this.optionCount.node.getPosition().y),this.optionName.node.setPosition(9,this.optionName.node.getPosition().y),this.inputName.node.setPosition(13,this.optionName.node.getPosition().y),o==s.Parts.ANTENNA&&(this.optionName.node.setPosition(28,this.optionName.node.getPosition().y),this.inputName.node.setPosition(25,this.optionName.node.getPosition().y))},e.prototype.enableTouch=function(t){this.mIsTouchEnabled=t},e.prototype.start=function(){this.startPos=new cc.Vec2(this.node.position.x,this.node.position.y),this.gameNode.on("OnOptionDraggingStarted",function(t){this.currentDraggingObject=t}.bind(this)),this.gameNode.on("OnOptionDraggingEnded",function(t){this.currentDraggingObject=t}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_START,function(t){this.mIsTouchEnabled&&(null!=this.currentDraggingObject&&""!=this.currentDraggingObject||this.gameNode.emit("OnOptionDraggingStarted",this.mCount))}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){if(this.currentDraggingObject==this.mCount){var e=t.touch.getDelta();this.node.x+=e.x,this.node.y+=e.y}}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_END,function(t){if(this.currentDraggingObject==this.mCount){this.gameNode.emit("OnOptionDraggingEnded","");var e=this.node.parent.convertToWorldSpaceAR(this.node.position),o=this.dropPlace.convertToNodeSpaceAR(e);cc.Intersection.pointInPolygon(new cc.Vec2(o.x,o.y),this.dropPlace.getComponent(cc.PolygonCollider).world.points)?(this.placeHolderObject.active=!0,this.inputCount.string=this.mCount,this.node.active=!1,this.gameNode.emit("OnOptionDropped",this.mCount),this.node.position=this.startPos,this.node.scale=1):this.node.runAction(cc.moveTo(.3,this.startPos))}}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(t){if(this.currentDraggingObject==this.mCount){this.gameNode.emit("OnOptionDraggingEnded","");var e=this.node.parent.convertToWorldSpaceAR(this.node.position),o=this.dropPlace.convertToNodeSpaceAR(e);cc.Intersection.pointInPolygon(new cc.Vec2(o.x,o.y),this.dropPlace.getComponent(cc.PolygonCollider).world.points)?(this.placeHolderObject.active=!0,this.inputCount.string=this.mCount,this.node.active=!1,this.gameNode.emit("OnOptionDropped",this.mCount),this.node.position=this.startPos,this.node.scale=1):this.node.runAction(cc.moveTo(.3,this.startPos))}}.bind(this))},e.prototype.update=function(t){var e=this.node.parent.convertToWorldSpaceAR(this.node.position),o=this.dropPlace.convertToNodeSpaceAR(e);cc.Intersection.pointInPolygon(new cc.Vec2(o.x,o.y),this.dropPlace.getComponent(cc.PolygonCollider).world.points)?this.node.scale>.8?this.node.scale-=2*t:this.node.scale<.8&&(this.node.scale=.8):this.node.scale<1?this.node.scale+=2*t:this.node.scale>1&&(this.node.scale=1)},n([c(cc.Node)],e.prototype,"dropPlace",void 0),n([c(cc.Node)],e.prototype,"gameNode",void 0),n([c(cc.Node)],e.prototype,"placeHolderObject",void 0),n([c(cc.Label)],e.prototype,"optionName",void 0),n([c(cc.Label)],e.prototype,"optionCount",void 0),n([c(cc.Label)],e.prototype,"inputName",void 0),n([c(cc.Label)],e.prototype,"inputCount",void 0),e=n([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./TXPL08MAT16E01_GameModels":"TXPL08MAT16E01_GameModels"}],TXPL08MAT16E01_GameModels:[function(t,e,o){"use strict";var i,n;cc._RF.push(e,"b7c518PoNRGzIVsLq9s/n4f","TXPL08MAT16E01_GameModels"),Object.defineProperty(o,"__esModule",{value:!0}),function(t){t[t.ARM=0]="ARM",t[t.ANTENNA=1]="ANTENNA",t[t.LEG=2]="LEG"}(i=o.Parts||(o.Parts={})),function(t){t[t.CONVEYOR_BELT=0]="CONVEYOR_BELT",t[t.CORRECT_ANSWER=1]="CORRECT_ANSWER",t[t.DOOR_CLOSE=2]="DOOR_CLOSE",t[t.DOOR_OPEN=3]="DOOR_OPEN",t[t.PROGRESS_BAR=4]="PROGRESS_BAR",t[t.WRONG_ANSWER=5]="WRONG_ANSWER",t[t.MACHINE_PROCESS=6]="MACHINE_PROCESS",t[t.BOX_PICKUP=7]="BOX_PICKUP"}(n=o.AudioClips||(o.AudioClips={})),o.getAudioName=function(t){switch(t){case n.CONVEYOR_BELT:return"CONVEYOR_BELT";case n.CORRECT_ANSWER:return"CORRECT_ANSWER";case n.DOOR_CLOSE:return"DOOR_CLOSE";case n.DOOR_OPEN:return"DOOR_OPEN";case n.PROGRESS_BAR:return"PROGRESS_BAR";case n.WRONG_ANSWER:return"WRONG_ANSWER";case n.MACHINE_PROCESS:return"MACHINE_PROCESS";case n.BOX_PICKUP:return"BOX_PICKUP";default:return""}},o.getPartsName=function(t){switch(t){case i.ARM:return"Arms";case i.ANTENNA:return"Antennas";case i.LEG:return"Legs";default:return""}},cc._RF.pop()},{}],TXPL08MAT16E02_Divisibility_2:[function(t,e,o){"use strict";cc._RF.push(e,"b6f6fGMe4pIGrBmzYudfelS","TXPL08MAT16E02_Divisibility_2");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/AnalyticsManager"),r=t("../../../../framework/scripts/AudioManager"),a=t("../../../../framework/scripts/StepsController"),c=t("../../../../framework/scripts/UIManager"),p=t("../../../../framework/scripts/utilities/TextLoader"),l=t("./TXPL08MAT16E02_Drag_Drop"),h=t("./TXPL08MAT16E02_GameModels"),d=cc._decorator,u=d.ccclass,g=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.aud_bgm=null,e.introNode=null,e.panelAnimations=[],e.gamePlayNode=null,e.optionNode=null,e.optionObject=[],e.optionBox=[],e.outputPart=[],e.leftOverPart=[],e.inputDoor=null,e.questionInput=null,e.questionCountLabel=null,e.spark=null,e.processingDoor=null,e.output=null,e.outputDoor=null,e.leftover=null,e.leftOverDoor=null,e.intermediateNode=null,e.intermediateLabel=null,e.completeNode=null,e.progressBar=null,e.indicators=[],e.activeSprite=null,e.leftOverCount=null,e.audioClips=[],e.hintButton=null,e.hintPopup=null,e.blanket=null,e.txtMessage=null,e.greenIndicator=null,e.redIndicator=null,e.reportNode=null,e.firstAttemptCount=null,e.reportText=null,e.mActivePart=null,e.mInProgress=!1,e.mProgressPercent=0,e.mObjectName=null,e.mFirstAttempts=[],e}return i(e,t),e.prototype.onLoad=function(){this.scr_stepsController=this.canvas.getComponent(a.default),this.uiManager=this.canvas.getComponent(c.default),this.audioManager=this.canvas.getComponent(r.default),this.scr_analyticsManager=this.canvas.getComponent(s.default),this.canvas.on("OnLoadStep",this.stepsHandler.bind(this)),this.canvas.on("OnCommonButtonClick",this.onCommonButtonClick.bind(this)),this.canvas.on("OnAnswerVerification",this.onAnswerVerification.bind(this)),this.node.on("OnOptionDropped",this.onOptionDropped.bind(this)),this.node.on("OnOptionDraggingStarted",this.onOptionDragStarted.bind(this)),this.hintPopup.removeFromParent(),this.canvas.addChild(this.hintPopup),this.blanket.on(cc.Node.EventType.TOUCH_START,this.hideHintPopup.bind(this))},e.prototype.start=function(){this.scr_stepsController.Initialise("TXPL08MAT16E02_Divisibility_2"),this.audioManager.play("bgm",this.aud_bgm,!0,"BGM");for(var t=0;t<9;t++)this.mFirstAttempts.push(!0)},e.prototype.stepsHandler=function(t){switch(console.log("Steps handler. Next step is "+t),t){case 0:this.uiManager.setHeaderYpos(450);case 1:case 2:case 3:this.panelAnimations[t].play(this.panelAnimations[t].getClips()[0].name);break;case 4:this.uiManager.hideHeaderText(),this.uiManager.setHeaderYpos(400),this.scheduleOnce(function(){this.introNode.active=!1,this.gamePlayNode.active=!0,this.updateOptions(h.Parts.ANTENNA)}.bind(this),1.5);break;case 5:case 6:this.updateOptions(h.Parts.ANTENNA);break;case 7:this.uiManager.setHeaderYpos(450),this.scheduleOnce(function(){this.gamePlayNode.active=!1,this.intermediateNode.active=!0,this.panelAnimations[4].play(this.panelAnimations[4].getClips()[0].name),this.intermediateLabel.string="Arms Assembly"}.bind(this),1.5);break;case 8:this.uiManager.hideHeaderText(),this.panelAnimations[5].play(this.panelAnimations[5].getClips()[0].name);break;case 9:this.uiManager.showFooterText(this.scr_stepsController.getTextByKey("intermediateStep1")),this.scheduleOnce(function(){this.uiManager.setActiveNextButton(!0)}.bind(this),3);break;case 10:this.uiManager.hideHeaderText(),this.uiManager.setHeaderYpos(400),this.scheduleOnce(function(){this.panelAnimations[4].setCurrentTime(0,this.panelAnimations[4].getClips()[0].name),this.panelAnimations[5].setCurrentTime(0,this.panelAnimations[5].getClips()[0].name),this.intermediateNode.active=!1,this.gamePlayNode.active=!0}.bind(this),1.5);case 11:case 12:this.updateOptions(h.Parts.ARM);break;case 13:this.uiManager.setHeaderYpos(450),this.scheduleOnce(function(){this.gamePlayNode.active=!1,this.intermediateNode.active=!0,this.panelAnimations[4].play(this.panelAnimations[4].getClips()[0].name),this.intermediateLabel.string="Leg Assembly"}.bind(this),1.5);break;case 14:this.uiManager.hideHeaderText(),this.panelAnimations[5].play(this.panelAnimations[5].getClips()[0].name);break;case 15:this.uiManager.showFooterText(this.scr_stepsController.getTextByKey("intermediateStep2")),this.scheduleOnce(function(){this.uiManager.setActiveNextButton(!0)}.bind(this),3);break;case 16:this.uiManager.hideHeaderText(),this.uiManager.setHeaderYpos(400),this.scheduleOnce(function(){this.intermediateNode.active=!1,this.gamePlayNode.active=!0}.bind(this),1.5);case 17:case 18:this.updateOptions(h.Parts.LEG);break;case 19:this.uiManager.setActiveCloseButton(!1),this.canvas.emit("OnEndScreenReach",{}),this.uiManager.setHeaderYpos(450),this.scheduleOnce(function(){this.gamePlayNode.active=!1,this.completeNode.active=!0,this.panelAnimations[6].play(this.panelAnimations[6].getClips()[0].name),this.intermediateLabel.string=""}.bind(this),1.5);break;case 20:this.uiManager.hideHeaderText(),this.panelAnimations[7].play(this.panelAnimations[7].getClips()[0].name);break;case 21:this.uiManager.showFooterText(this.scr_stepsController.getTextByKey("completionState"));break;case 22:this.uiManager.hideHeaderText(),this.scheduleOnce(function(){var t=this.getFirstAttemptCount();this.firstAttemptCount.string=""+t,this.reportText.getComponent(p.default).changeLabel("endScreenComplete"),t!=this.scr_stepsController.getTotalQuestions()&&this.reportText.getComponent(p.default).changeLabel("endScreenIncomplete"),this.reportNode.active=!0}.bind(this),1.5)}},e.prototype.onCommonButtonClick=function(t){this.uiManager.CommonButtonType.NextQuestion==t?this.scr_stepsController.loadNextStep():this.uiManager.CommonButtonType.TryAgain==t&&this.resetAfterTryAgain()},e.prototype.resetUI=function(){this.inputDoor.play(this.inputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Reverse,this.inputDoor.off("stop",this.onInputDoorAnimationComplete,this),this.outputDoor.play(this.outputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Normal,this.leftOverDoor.play(this.outputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Normal,this.processingDoor.play(this.processingDoor.getClips()[0].name).wrapMode=cc.WrapMode.Reverse,this.greenIndicator.active=!1,this.redIndicator.active=!1,this.hideHintPopup()},e.prototype.resetAfterTryAgain=function(){this.mFirstAttempts[this.scr_stepsController.getCurrentQuestionIndex()-1]=!1,this.scr_stepsController.loadNextStep(this.scr_stepsController.getCurrentStep())},e.prototype.onOptionDragStarted=function(t){this.scr_stepsController.onOptionDragStarted({optionName:t}),this.audioManager.play(h.getAudioName(h.AudioClips.BOX_PICKUP),this.audioClips[h.AudioClips.BOX_PICKUP],!1,"SFX")},e.prototype.onOptionDropped=function(t){this.uiManager.hideHeaderText(),this.mObjectName=t,this.inputDoor.play(this.inputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Normal,this.processingDoor.play(this.processingDoor.getClips()[0].name).wrapMode=cc.WrapMode.Normal,this.audioManager.play(h.getAudioName(h.AudioClips.DOOR_CLOSE),this.audioClips[h.AudioClips.DOOR_CLOSE],!1,"SFX"),this.inputDoor.on("stop",this.onInputDoorAnimationComplete,this),this.enableOptions(!1),this.optionNode.play(this.optionNode.getClips()[1].name),this.optionNode.on("stop",this.onSparkAnimationComplete,this),this.audioManager.play(h.getAudioName(h.AudioClips.CONVEYOR_BELT),this.audioClips[h.AudioClips.CONVEYOR_BELT],!0,"SFX")},e.prototype.onInputDoorAnimationComplete=function(){this.spark.play(this.spark.getClips()[0].name).wrapMode=cc.WrapMode.Normal,this.audioManager.play(h.getAudioName(h.AudioClips.MACHINE_PROCESS),this.audioClips[h.AudioClips.MACHINE_PROCESS],!1,"SFX")},e.prototype.onSparkAnimationComplete=function(){this.scr_stepsController.onOptionDropped({optionName:this.mObjectName}),this.stopConveyorBeltAudio()},e.prototype.onAnswerVerification=function(t){if(this.leftover.active=!1,console.log("Answer submitted "+t.isCorrect),t.isCorrect)this.mInProgress=!0,this.audioManager.play(h.getAudioName(h.AudioClips.CORRECT_ANSWER),this.audioClips[h.AudioClips.CORRECT_ANSWER],!1,"SFX"),this.audioManager.play(h.getAudioName(h.AudioClips.PROGRESS_BAR),this.audioClips[h.AudioClips.PROGRESS_BAR],!1,"SFX"),this.greenIndicator.active=!0;else{this.audioManager.play(h.getAudioName(h.AudioClips.WRONG_ANSWER),this.audioClips[h.AudioClips.WRONG_ANSWER],!1,"SFX"),this.leftover.active=!0,this.leftover.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this.leftOverPart[this.mActivePart]);var e=parseInt(t.answer)%this.getDivisor(this.mActivePart);this.leftOverCount.string="\xd7"+e,this.redIndicator.active=!0}this.output.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this.outputPart[this.mActivePart]),this.outputDoor.play(this.outputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Reverse,this.leftOverDoor.play(this.outputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Reverse,this.audioManager.play(h.getAudioName(h.AudioClips.DOOR_OPEN),this.audioClips[h.AudioClips.DOOR_OPEN],!1,"SFX")},e.prototype.updateOptions=function(t){var e=this;1==this.scr_stepsController.getCurrentQuestionIndex()&&this.mFirstAttempts[0]||this.resetUI(),this.progressBar.progress=this.getProgressPercent(this.scr_stepsController.getCurrentQuestionIndex()-1),this.mActivePart=t;var o=this.scr_stepsController.getCurrentStepJson(),i=0;this.questionInput.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this.leftOverPart[t]),this.questionCountLabel.string="\xd7"+this.getDivisor(t),o.userInput.forEach(function(o){e.optionObject[i].getComponent(l.default).setName(h.getPartsName(t)),e.optionObject[i++].getComponent(l.default).updatePlaceHolderObject(e.optionBox[t],o,t)}),this.enableOptions(!1),this.optionNode.play(this.optionNode.getClips()[0].name),this.audioManager.play(h.getAudioName(h.AudioClips.CONVEYOR_BELT),this.audioClips[h.AudioClips.CONVEYOR_BELT],!0,"SFX"),this.optionNode.off("stop",this.onSparkAnimationComplete,this),this.optionNode.on("stop",this.stopConveyorBeltAudio,this)},e.prototype.stopConveyorBeltAudio=function(){this.audioManager.stop(h.getAudioName(h.AudioClips.CONVEYOR_BELT)),this.optionNode.off("stop",this.stopConveyorBeltAudio,this),this.enableOptions(!0)},e.prototype.enableOptions=function(t){this.optionObject.forEach(function(e){e.getComponent(l.default).enableTouch(t)})},e.prototype.update=function(t){if(this.mInProgress){var e=100*this.getProgressPercent(this.scr_stepsController.getCurrentQuestionIndex());this.mProgressPercent<e?(this.mProgressPercent++,this.progressBar.progress=this.mProgressPercent/100,this.mProgressPercent>=e&&this.mFirstAttempts[this.scr_stepsController.getCurrentQuestionIndex()-1]&&(this.indicators[this.scr_stepsController.getCurrentQuestionIndex()-1].spriteFrame=new cc.SpriteFrame(this.activeSprite))):this.mInProgress=!1}},e.prototype.showHintPopup=function(){this.scr_analyticsManager.sendOnHintButtonClick(this.scr_stepsController.getCurrentQuestionIndex()),this.scr_analyticsManager.sendOnHintView(this.scr_stepsController.getCurrentQuestionIndex()),this.hintPopup.active=!0,this.txtMessage.getComponent(p.default).changeLabel(this.getHintKey())},e.prototype.hideHintPopup=function(){this.hintPopup.active=!1},e.prototype.getFirstAttemptCount=function(){var t=0;return this.mFirstAttempts.forEach(function(e){e&&t++}),t},e.prototype.getProgressPercent=function(t){switch(t){case 1:return.1;case 2:return.2;case 3:return.3;case 4:return.4;case 5:return.5;case 6:return.625;case 7:return.75;case 8:return.875;case 9:return 1}return 0},e.prototype.getDivisor=function(t){switch(t){case h.Parts.ARM:return 4;case h.Parts.ANTENNA:return 9;case h.Parts.LEG:return 8}},e.prototype.getHintKey=function(){switch(this.scr_stepsController.getCurrentQuestionIndex()){case 1:case 2:case 3:return"hint1";case 4:case 5:case 6:return"hint2";case 7:case 8:case 9:return"hint3"}return"hint1"},n([g(cc.Node)],e.prototype,"canvas",void 0),n([g({type:cc.AudioClip})],e.prototype,"aud_bgm",void 0),n([g(cc.Node)],e.prototype,"introNode",void 0),n([g(cc.Animation)],e.prototype,"panelAnimations",void 0),n([g(cc.Node)],e.prototype,"gamePlayNode",void 0),n([g(cc.Animation)],e.prototype,"optionNode",void 0),n([g(cc.Node)],e.prototype,"optionObject",void 0),n([g({type:cc.Texture2D})],e.prototype,"optionBox",void 0),n([g({type:cc.Texture2D})],e.prototype,"outputPart",void 0),n([g({type:cc.Texture2D})],e.prototype,"leftOverPart",void 0),n([g(cc.Animation)],e.prototype,"inputDoor",void 0),n([g(cc.Node)],e.prototype,"questionInput",void 0),n([g(cc.Label)],e.prototype,"questionCountLabel",void 0),n([g(cc.Animation)],e.prototype,"spark",void 0),n([g(cc.Animation)],e.prototype,"processingDoor",void 0),n([g(cc.Node)],e.prototype,"output",void 0),n([g(cc.Animation)],e.prototype,"outputDoor",void 0),n([g(cc.Node)],e.prototype,"leftover",void 0),n([g(cc.Animation)],e.prototype,"leftOverDoor",void 0),n([g(cc.Node)],e.prototype,"intermediateNode",void 0),n([g(cc.Label)],e.prototype,"intermediateLabel",void 0),n([g(cc.Node)],e.prototype,"completeNode",void 0),n([g(cc.ProgressBar)],e.prototype,"progressBar",void 0),n([g(cc.Sprite)],e.prototype,"indicators",void 0),n([g({type:cc.Texture2D})],e.prototype,"activeSprite",void 0),n([g(cc.Label)],e.prototype,"leftOverCount",void 0),n([g({type:cc.AudioClip})],e.prototype,"audioClips",void 0),n([g(cc.Node)],e.prototype,"hintButton",void 0),n([g(cc.Node)],e.prototype,"hintPopup",void 0),n([g(cc.Node)],e.prototype,"blanket",void 0),n([g(cc.Label)],e.prototype,"txtMessage",void 0),n([g(cc.Node)],e.prototype,"greenIndicator",void 0),n([g(cc.Node)],e.prototype,"redIndicator",void 0),n([g(cc.Node)],e.prototype,"reportNode",void 0),n([g(cc.Label)],e.prototype,"firstAttemptCount",void 0),n([g(cc.Label)],e.prototype,"reportText",void 0),e=n([u],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../../../../framework/scripts/AnalyticsManager":"AnalyticsManager","../../../../framework/scripts/AudioManager":"AudioManager","../../../../framework/scripts/StepsController":"StepsController","../../../../framework/scripts/UIManager":"UIManager","../../../../framework/scripts/utilities/TextLoader":"TextLoader","./TXPL08MAT16E02_Drag_Drop":"TXPL08MAT16E02_Drag_Drop","./TXPL08MAT16E02_GameModels":"TXPL08MAT16E02_GameModels"}],TXPL08MAT16E02_Drag_Drop:[function(t,e,o){"use strict";cc._RF.push(e,"4c59dLU1adCea0mgWhQTQRP","TXPL08MAT16E02_Drag_Drop");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./TXPL08MAT16E02_GameModels"),r=cc._decorator,a=r.ccclass,c=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dropPlace=null,e.startPos=null,e.gameNode=null,e.placeHolderObject=null,e.optionName=null,e.optionCount=null,e.inputName=null,e.inputCount=null,e.currentDraggingObject=null,e.mName="",e.mCount="",e.mIsTouchEnabled=!1,e}return i(e,t),e.prototype.setName=function(t){this.mName=t,this.node.active=!0},e.prototype.updatePlaceHolderObject=function(t,e,o){this.mCount=e,this.placeHolderObject.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t),this.node.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t),this.placeHolderObject.active=!1,this.optionName.string=this.inputName.string=this.mName,this.optionCount.string=e,this.optionCount.fontSize=26,7==this.optionCount.string.length?(this.optionCount.fontSize=22,this.optionCount.node.setPosition(25,this.optionCount.node.getPosition().y)):6==this.optionCount.string.length?this.optionCount.node.setPosition(25,this.optionCount.node.getPosition().y):5==this.optionCount.string.length?this.optionCount.node.setPosition(16,this.optionCount.node.getPosition().y):4==this.optionCount.string.length?this.optionCount.node.setPosition(10,this.optionCount.node.getPosition().y):this.optionCount.node.setPosition(9,this.optionCount.node.getPosition().y),this.optionName.node.setPosition(6,this.optionName.node.getPosition().y),this.inputName.node.setPosition(8,this.optionName.node.getPosition().y),o==s.Parts.ANTENNA&&(this.optionName.node.setPosition(18,this.optionName.node.getPosition().y),this.inputName.node.setPosition(18,this.optionName.node.getPosition().y))},e.prototype.enableTouch=function(t){this.mIsTouchEnabled=t},e.prototype.start=function(){this.startPos=new cc.Vec2(this.node.position.x,this.node.position.y),this.gameNode.on("OnOptionDraggingStarted",function(t){this.currentDraggingObject=t}.bind(this)),this.gameNode.on("OnOptionDraggingEnded",function(t){this.currentDraggingObject=t}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_START,function(t){this.mIsTouchEnabled&&(null!=this.currentDraggingObject&&""!=this.currentDraggingObject||this.gameNode.emit("OnOptionDraggingStarted",this.mCount))}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){if(this.currentDraggingObject==this.mCount){var e=t.touch.getDelta();this.node.x+=e.x,this.node.y+=e.y}}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_END,function(t){if(this.currentDraggingObject==this.mCount){this.gameNode.emit("OnOptionDraggingEnded","");var e=this.node.parent.convertToWorldSpaceAR(this.node.position),o=this.dropPlace.convertToNodeSpaceAR(e);cc.Intersection.pointInPolygon(new cc.Vec2(o.x,o.y),this.dropPlace.getComponent(cc.PolygonCollider).world.points)?(this.placeHolderObject.active=!0,this.inputCount.string=this.mCount,this.node.active=!1,this.gameNode.emit("OnOptionDropped",this.mCount),this.node.position=this.startPos,this.node.scale=1):this.node.runAction(cc.moveTo(.3,this.startPos))}}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(t){if(this.currentDraggingObject==this.mCount){this.gameNode.emit("OnOptionDraggingEnded","");var e=this.node.parent.convertToWorldSpaceAR(this.node.position),o=this.dropPlace.convertToNodeSpaceAR(e);cc.Intersection.pointInPolygon(new cc.Vec2(o.x,o.y),this.dropPlace.getComponent(cc.PolygonCollider).world.points)?(this.placeHolderObject.active=!0,this.inputCount.string=this.mCount,this.node.active=!1,this.gameNode.emit("OnOptionDropped",this.mCount),this.node.position=this.startPos):this.node.runAction(cc.moveTo(.3,this.startPos))}}.bind(this))},e.prototype.update=function(t){var e=this.node.parent.convertToWorldSpaceAR(this.node.position),o=this.dropPlace.convertToNodeSpaceAR(e);cc.Intersection.pointInPolygon(new cc.Vec2(o.x,o.y),this.dropPlace.getComponent(cc.PolygonCollider).world.points)?this.node.scale>.8?this.node.scale-=2*t:this.node.scale<.8&&(this.node.scale=.8):this.node.scale<1?this.node.scale+=2*t:this.node.scale>1&&(this.node.scale=1)},n([c(cc.Node)],e.prototype,"dropPlace",void 0),n([c(cc.Node)],e.prototype,"gameNode",void 0),n([c(cc.Node)],e.prototype,"placeHolderObject",void 0),n([c(cc.Label)],e.prototype,"optionName",void 0),n([c(cc.Label)],e.prototype,"optionCount",void 0),n([c(cc.Label)],e.prototype,"inputName",void 0),n([c(cc.Label)],e.prototype,"inputCount",void 0),e=n([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./TXPL08MAT16E02_GameModels":"TXPL08MAT16E02_GameModels"}],TXPL08MAT16E02_GameModels:[function(t,e,o){"use strict";var i,n;cc._RF.push(e,"91775xiGZVJspm2nYH7Rs1i","TXPL08MAT16E02_GameModels"),Object.defineProperty(o,"__esModule",{value:!0}),function(t){t[t.ANTENNA=0]="ANTENNA",t[t.ARM=1]="ARM",t[t.LEG=2]="LEG"}(i=o.Parts||(o.Parts={})),function(t){t[t.CONVEYOR_BELT=0]="CONVEYOR_BELT",t[t.CORRECT_ANSWER=1]="CORRECT_ANSWER",t[t.DOOR_CLOSE=2]="DOOR_CLOSE",t[t.DOOR_OPEN=3]="DOOR_OPEN",t[t.PROGRESS_BAR=4]="PROGRESS_BAR",t[t.WRONG_ANSWER=5]="WRONG_ANSWER",t[t.MACHINE_PROCESS=6]="MACHINE_PROCESS",t[t.BOX_PICKUP=7]="BOX_PICKUP"}(n=o.AudioClips||(o.AudioClips={})),o.getAudioName=function(t){switch(t){case n.CONVEYOR_BELT:return"CONVEYOR_BELT";case n.CORRECT_ANSWER:return"CORRECT_ANSWER";case n.DOOR_CLOSE:return"DOOR_CLOSE";case n.DOOR_OPEN:return"DOOR_OPEN";case n.PROGRESS_BAR:return"PROGRESS_BAR";case n.WRONG_ANSWER:return"WRONG_ANSWER";case n.MACHINE_PROCESS:return"MACHINE_PROCESS";case n.BOX_PICKUP:return"BOX_PICKUP";default:return""}},o.getPartsName=function(t){switch(t){case i.ARM:return"Arms";case i.ANTENNA:return"Antennas";case i.LEG:return"Legs";default:return""}},cc._RF.pop()},{}],TXPL08MAT16E03_Divisibility_3:[function(t,e,o){"use strict";cc._RF.push(e,"b5ff8RllXpE3JvRsOFrGJFt","TXPL08MAT16E03_Divisibility_3");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../../../framework/scripts/AnalyticsManager"),r=t("../../../../framework/scripts/AudioManager"),a=t("../../../../framework/scripts/StepsController"),c=t("../../../../framework/scripts/UIManager"),p=t("../../../../framework/scripts/utilities/TextLoader"),l=t("./TXPL08MAT16E03_Drag_Drop"),h=t("./TXPL08MAT16E03_GameModels"),d=cc._decorator,u=d.ccclass,g=d.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.aud_bgm=null,e.introNode=null,e.panelAnimations=[],e.gamePlayNode=null,e.optionNode=null,e.optionObject=[],e.optionBox=[],e.outputBox=[],e.leftOverBox=[],e.packagingBox=[],e.inputDoor=null,e.packageInput=null,e.spark=null,e.processingDoor=null,e.output=null,e.outputDoor=null,e.leftover=null,e.leftOverDoor=null,e.completeNode=null,e.progressBar=null,e.indicators=[],e.activeSprite=null,e.leftOverCount=null,e.audioClips=[],e.hintButton=null,e.hintPopup=null,e.blanket=null,e.txtMessage=null,e.greenIndicator=null,e.redIndicator=null,e.finalTextNode=null,e.reportNode=null,e.firstAttemptCount=null,e.reportText=null,e.mActiveBox=null,e.mInProgress=!1,e.mProgressPercent=0,e.mObjectName=null,e.mFirstAttempts=[],e}return i(e,t),e.prototype.onLoad=function(){this.scr_stepsController=this.canvas.getComponent(a.default),this.uiManager=this.canvas.getComponent(c.default),this.audioManager=this.canvas.getComponent(r.default),this.scr_analyticsManager=this.canvas.getComponent(s.default),this.canvas.on("OnLoadStep",this.stepsHandler.bind(this)),this.canvas.on("OnCommonButtonClick",this.onCommonButtonClick.bind(this)),this.canvas.on("OnAnswerVerification",this.onAnswerVerification.bind(this)),this.node.on("OnOptionDropped",this.onOptionDropped.bind(this)),this.node.on("OnOptionDraggingStarted",this.onOptionDragStarted.bind(this)),this.hintPopup.removeFromParent(),this.canvas.addChild(this.hintPopup),this.blanket.on(cc.Node.EventType.TOUCH_START,this.hideHintPopup.bind(this))},e.prototype.start=function(){this.scr_stepsController.Initialise("TXPL08MAT16E03_Divisibility_3"),this.audioManager.play("bgm",this.aud_bgm,!0,"BGM");for(var t=0;t<9;t++)this.mFirstAttempts.push(!0)},e.prototype.stepsHandler=function(t){switch(console.log("Steps handler. Next step is "+t),t){case 0:this.uiManager.setHeaderYpos(450);case 1:case 2:case 3:this.panelAnimations[t].play(this.panelAnimations[t].getClips()[0].name);break;case 4:this.uiManager.hideHeaderText(),this.uiManager.setHeaderYpos(400),this.scheduleOnce(function(){this.introNode.active=!1,this.gamePlayNode.active=!0,this.updateOptions(h.Box.FIVE)}.bind(this),2);break;case 5:case 6:this.scheduleOnce(function(){this.updateOptions(h.Box.FIVE)}.bind(this),2);break;case 7:case 8:case 9:this.scheduleOnce(function(){this.updateOptions(h.Box.TEN)}.bind(this),2);break;case 10:case 11:case 12:this.scheduleOnce(function(){this.updateOptions(h.Box.ELEVEN)}.bind(this),2);break;case 13:this.uiManager.setActiveCloseButton(!1),this.canvas.emit("OnEndScreenReach",{}),this.uiManager.setHeaderYpos(450),this.scheduleOnce(function(){this.gamePlayNode.active=!1,this.completeNode.active=!0,this.panelAnimations[4].play(this.panelAnimations[4].getClips()[0].name)}.bind(this),1.5);break;case 14:this.uiManager.hideHeaderText(),this.panelAnimations[5].play(this.panelAnimations[5].getClips()[0].name);break;case 15:this.finalTextNode.getParent().active=!0,this.uiManager.showFooterText(this.scr_stepsController.getTextByKey("completionState1"));break;case 16:this.uiManager.hideFooterText(),this.scheduleOnce(function(){this.uiManager.showFooterText(this.scr_stepsController.getTextByKey("completionState2"))}.bind(this),1.5);break;case 17:this.uiManager.hideFooterText(),this.scheduleOnce(function(){this.finalTextNode.runAction(cc.moveTo(1,0,-225))}.bind(this),1.5);break;case 18:this.finalTextNode.runAction(cc.moveTo(1,0,-700)),this.scheduleOnce(function(){this.finalTextNode.getParent().active=!1;var t=this.getFirstAttemptCount();this.firstAttemptCount.string=""+t,this.reportText.getComponent(p.default).changeLabel("endScreenComplete"),t!=this.scr_stepsController.getTotalQuestions()&&this.reportText.getComponent(p.default).changeLabel("endScreenIncomplete"),this.reportNode.active=!0}.bind(this),1.5)}},e.prototype.onCommonButtonClick=function(t){this.uiManager.CommonButtonType.NextQuestion==t?this.scr_stepsController.loadNextStep():this.uiManager.CommonButtonType.TryAgain==t&&this.resetAfterTryAgain()},e.prototype.resetUI=function(){this.inputDoor.play(this.inputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Reverse,this.inputDoor.off("stop",this.onInputDoorAnimationComplete,this),this.outputDoor.play(this.outputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Normal,this.leftOverDoor.play(this.outputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Normal,this.processingDoor.play(this.processingDoor.getClips()[0].name).wrapMode=cc.WrapMode.Reverse,this.greenIndicator.active=!1,this.redIndicator.active=!1,this.hideHintPopup()},e.prototype.resetAfterTryAgain=function(){this.mFirstAttempts[this.scr_stepsController.getCurrentQuestionIndex()-1]=!1,this.scr_stepsController.loadNextStep(this.scr_stepsController.getCurrentStep())},e.prototype.onOptionDragStarted=function(t){this.scr_stepsController.onOptionDragStarted({optionName:t}),this.audioManager.play(h.getAudioName(h.AudioClips.BOX_PICKUP),this.audioClips[h.AudioClips.BOX_PICKUP],!1,"SFX")},e.prototype.onOptionDropped=function(t){this.uiManager.hideHeaderText(),this.mObjectName=t,this.inputDoor.play(this.inputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Normal,this.processingDoor.play(this.processingDoor.getClips()[0].name).wrapMode=cc.WrapMode.Normal,this.audioManager.play(h.getAudioName(h.AudioClips.DOOR_CLOSE),this.audioClips[h.AudioClips.DOOR_CLOSE],!1,"SFX"),this.inputDoor.on("stop",this.onInputDoorAnimationComplete,this),this.enableOptions(!1),this.optionNode.play(this.optionNode.getClips()[1].name),this.optionNode.on("stop",this.onSparkAnimationComplete,this),this.audioManager.play(h.getAudioName(h.AudioClips.CONVEYOR_BELT),this.audioClips[h.AudioClips.CONVEYOR_BELT],!0,"SFX")},e.prototype.onInputDoorAnimationComplete=function(){this.spark.play(this.spark.getClips()[0].name).wrapMode=cc.WrapMode.Normal,this.audioManager.play(h.getAudioName(h.AudioClips.MACHINE_PROCESS),this.audioClips[h.AudioClips.MACHINE_PROCESS],!1,"SFX")},e.prototype.onSparkAnimationComplete=function(){this.scr_stepsController.onOptionDropped({optionName:this.mObjectName}),this.stopConveyorBeltAudio()},e.prototype.onAnswerVerification=function(t){if(this.leftover.active=!1,console.log("Answer submitted "+t.isCorrect),t.isCorrect)this.mInProgress=!0,this.audioManager.play(h.getAudioName(h.AudioClips.CORRECT_ANSWER),this.audioClips[h.AudioClips.CORRECT_ANSWER],!1,"SFX"),this.audioManager.play(h.getAudioName(h.AudioClips.PROGRESS_BAR),this.audioClips[h.AudioClips.PROGRESS_BAR],!1,"SFX"),this.greenIndicator.active=!0;else{this.audioManager.play(h.getAudioName(h.AudioClips.WRONG_ANSWER),this.audioClips[h.AudioClips.WRONG_ANSWER],!1,"SFX"),this.leftover.active=!0,this.leftover.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this.leftOverBox[this.mActiveBox]);var e=parseInt(t.answer)%this.getDivisor(this.mActiveBox);this.leftOverCount.string="\xd7"+e,this.redIndicator.active=!0}this.output.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this.outputBox[this.mActiveBox]),this.outputDoor.play(this.outputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Reverse,this.leftOverDoor.play(this.outputDoor.getClips()[0].name).wrapMode=cc.WrapMode.Reverse,this.audioManager.play(h.getAudioName(h.AudioClips.DOOR_OPEN),this.audioClips[h.AudioClips.DOOR_OPEN],!1,"SFX")},e.prototype.updateOptions=function(t){var e=this;1==this.scr_stepsController.getCurrentQuestionIndex()&&this.mFirstAttempts[0]||this.resetUI(),this.progressBar.progress=this.getProgressPercent(this.scr_stepsController.getCurrentQuestionIndex()-1),this.mActiveBox=t;var o=this.scr_stepsController.getCurrentStepJson(),i=0;this.packageInput.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this.packagingBox[t]),o.userInput.forEach(function(o){e.optionObject[i++].getComponent(l.default).updatePlaceHolderObject(e.optionBox[t],o)}),this.enableOptions(!1),this.optionNode.play(this.optionNode.getClips()[0].name),this.audioManager.play(h.getAudioName(h.AudioClips.CONVEYOR_BELT),this.audioClips[h.AudioClips.CONVEYOR_BELT],!0,"SFX"),this.optionNode.off("stop",this.onSparkAnimationComplete,this),this.optionNode.on("stop",this.stopConveyorBeltAudio,this)},e.prototype.stopConveyorBeltAudio=function(){this.audioManager.stop(h.getAudioName(h.AudioClips.CONVEYOR_BELT)),this.optionNode.off("stop",this.stopConveyorBeltAudio,this),this.enableOptions(!0)},e.prototype.enableOptions=function(t){this.optionObject.forEach(function(e){e.getComponent(l.default).enableTouch(t)})},e.prototype.update=function(t){if(this.mInProgress){var e=100*this.getProgressPercent(this.scr_stepsController.getCurrentQuestionIndex());this.mProgressPercent<e?(this.mProgressPercent++,this.progressBar.progress=this.mProgressPercent/100,this.mProgressPercent>=e&&this.mFirstAttempts[this.scr_stepsController.getCurrentQuestionIndex()-1]&&(this.indicators[this.scr_stepsController.getCurrentQuestionIndex()-1].spriteFrame=new cc.SpriteFrame(this.activeSprite))):this.mInProgress=!1}},e.prototype.showHintPopup=function(){this.scr_analyticsManager.sendOnHintButtonClick(this.scr_stepsController.getCurrentQuestionIndex()),this.scr_analyticsManager.sendOnHintView(this.scr_stepsController.getCurrentQuestionIndex()),this.hintPopup.active=!0,this.txtMessage.getComponent(p.default).changeLabel(this.getHintKey())},e.prototype.hideHintPopup=function(){this.hintPopup.active=!1},e.prototype.getFirstAttemptCount=function(){var t=0;return this.mFirstAttempts.forEach(function(e){e&&t++}),t},e.prototype.getProgressPercent=function(t){switch(t){case 1:return.1;case 2:return.2;case 3:return.3;case 4:return.4;case 5:return.5;case 6:return.625;case 7:return.75;case 8:return.875;case 9:return 1}return 0},e.prototype.getDivisor=function(t){switch(t){case h.Box.FIVE:return 5;case h.Box.TEN:return 10;case h.Box.ELEVEN:return 11}},e.prototype.getHintKey=function(){switch(this.scr_stepsController.getCurrentQuestionIndex()){case 1:case 2:case 3:return"hint1";case 4:case 5:case 6:return"hint2";case 7:case 8:case 9:return"hint3"}return"hint1"},n([g(cc.Node)],e.prototype,"canvas",void 0),n([g({type:cc.AudioClip})],e.prototype,"aud_bgm",void 0),n([g(cc.Node)],e.prototype,"introNode",void 0),n([g(cc.Animation)],e.prototype,"panelAnimations",void 0),n([g(cc.Node)],e.prototype,"gamePlayNode",void 0),n([g(cc.Animation)],e.prototype,"optionNode",void 0),n([g(cc.Node)],e.prototype,"optionObject",void 0),n([g({type:cc.Texture2D})],e.prototype,"optionBox",void 0),n([g({type:cc.Texture2D})],e.prototype,"outputBox",void 0),n([g({type:cc.Texture2D})],e.prototype,"leftOverBox",void 0),n([g({type:cc.Texture2D})],e.prototype,"packagingBox",void 0),n([g(cc.Animation)],e.prototype,"inputDoor",void 0),n([g(cc.Node)],e.prototype,"packageInput",void 0),n([g(cc.Animation)],e.prototype,"spark",void 0),n([g(cc.Animation)],e.prototype,"processingDoor",void 0),n([g(cc.Node)],e.prototype,"output",void 0),n([g(cc.Animation)],e.prototype,"outputDoor",void 0),n([g(cc.Node)],e.prototype,"leftover",void 0),n([g(cc.Animation)],e.prototype,"leftOverDoor",void 0),n([g(cc.Node)],e.prototype,"completeNode",void 0),n([g(cc.ProgressBar)],e.prototype,"progressBar",void 0),n([g(cc.Sprite)],e.prototype,"indicators",void 0),n([g({type:cc.Texture2D})],e.prototype,"activeSprite",void 0),n([g(cc.Label)],e.prototype,"leftOverCount",void 0),n([g({type:cc.AudioClip})],e.prototype,"audioClips",void 0),n([g(cc.Node)],e.prototype,"hintButton",void 0),n([g(cc.Node)],e.prototype,"hintPopup",void 0),n([g(cc.Node)],e.prototype,"blanket",void 0),n([g(cc.Label)],e.prototype,"txtMessage",void 0),n([g(cc.Node)],e.prototype,"greenIndicator",void 0),n([g(cc.Node)],e.prototype,"redIndicator",void 0),n([g(cc.Node)],e.prototype,"finalTextNode",void 0),n([g(cc.Node)],e.prototype,"reportNode",void 0),n([g(cc.Label)],e.prototype,"firstAttemptCount",void 0),n([g(cc.Label)],e.prototype,"reportText",void 0),e=n([u],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../../../../framework/scripts/AnalyticsManager":"AnalyticsManager","../../../../framework/scripts/AudioManager":"AudioManager","../../../../framework/scripts/StepsController":"StepsController","../../../../framework/scripts/UIManager":"UIManager","../../../../framework/scripts/utilities/TextLoader":"TextLoader","./TXPL08MAT16E03_Drag_Drop":"TXPL08MAT16E03_Drag_Drop","./TXPL08MAT16E03_GameModels":"TXPL08MAT16E03_GameModels"}],TXPL08MAT16E03_Drag_Drop:[function(t,e,o){"use strict";cc._RF.push(e,"9caeaj/oTpEbIJuLdDde/cS","TXPL08MAT16E03_Drag_Drop");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=s.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dropPlace=null,e.startPos=null,e.gameNode=null,e.placeHolderObject=null,e.optionCount=null,e.inputCount=null,e.currentDraggingObject=null,e.mCount="",e.mIsTouchEnabled=!1,e}return i(e,t),e.prototype.updatePlaceHolderObject=function(t,e){this.node.active=!0,this.mCount=e,this.placeHolderObject.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t),this.node.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t),this.placeHolderObject.active=!1,this.optionCount.string=e},e.prototype.enableTouch=function(t){this.mIsTouchEnabled=t},e.prototype.start=function(){this.startPos=new cc.Vec2(this.node.position.x,this.node.position.y),this.gameNode.on("OnOptionDraggingStarted",function(t){this.currentDraggingObject=t}.bind(this)),this.gameNode.on("OnOptionDraggingEnded",function(t){this.currentDraggingObject=t}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_START,function(t){this.mIsTouchEnabled&&(null!=this.currentDraggingObject&&""!=this.currentDraggingObject||this.gameNode.emit("OnOptionDraggingStarted",this.mCount))}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){if(this.currentDraggingObject==this.mCount){var e=t.touch.getDelta();this.node.x+=e.x,this.node.y+=e.y}}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_END,function(t){if(this.currentDraggingObject==this.mCount){this.gameNode.emit("OnOptionDraggingEnded","");var e=this.node.parent.convertToWorldSpaceAR(this.node.position),o=this.dropPlace.convertToNodeSpaceAR(e);cc.Intersection.pointInPolygon(new cc.Vec2(o.x,o.y),this.dropPlace.getComponent(cc.PolygonCollider).world.points)?(this.placeHolderObject.active=!0,this.inputCount.string=this.mCount,this.node.active=!1,this.gameNode.emit("OnOptionDropped",this.mCount),this.node.position=this.startPos,this.node.scale=1):this.node.runAction(cc.moveTo(.3,this.startPos))}}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(t){if(this.currentDraggingObject==this.mCount){this.gameNode.emit("OnOptionDraggingEnded","");var e=this.node.parent.convertToWorldSpaceAR(this.node.position),o=this.dropPlace.convertToNodeSpaceAR(e);cc.Intersection.pointInPolygon(new cc.Vec2(o.x,o.y),this.dropPlace.getComponent(cc.PolygonCollider).world.points)?(this.placeHolderObject.active=!0,this.inputCount.string=this.mCount,this.node.active=!1,this.gameNode.emit("OnOptionDropped",this.mCount),this.node.position=this.startPos,this.node.scale=1):this.node.runAction(cc.moveTo(.3,this.startPos))}}.bind(this))},e.prototype.update=function(t){var e=this.node.parent.convertToWorldSpaceAR(this.node.position),o=this.dropPlace.convertToNodeSpaceAR(e);cc.Intersection.pointInPolygon(new cc.Vec2(o.x,o.y),this.dropPlace.getComponent(cc.PolygonCollider).world.points)?this.node.scale>.8?this.node.scale-=2*t:this.node.scale<.8&&(this.node.scale=.8):this.node.scale<1?this.node.scale+=2*t:this.node.scale>1&&(this.node.scale=1)},n([a(cc.Node)],e.prototype,"dropPlace",void 0),n([a(cc.Node)],e.prototype,"gameNode",void 0),n([a(cc.Node)],e.prototype,"placeHolderObject",void 0),n([a(cc.Label)],e.prototype,"optionCount",void 0),n([a(cc.Label)],e.prototype,"inputCount",void 0),e=n([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],TXPL08MAT16E03_GameModels:[function(t,e,o){"use strict";var i;cc._RF.push(e,"5d79eg7xX5EXbJ9Pf4slq7A","TXPL08MAT16E03_GameModels"),Object.defineProperty(o,"__esModule",{value:!0}),function(t){t[t.FIVE=0]="FIVE",t[t.TEN=1]="TEN",t[t.ELEVEN=2]="ELEVEN"}(o.Box||(o.Box={})),function(t){t[t.CONVEYOR_BELT=0]="CONVEYOR_BELT",t[t.CORRECT_ANSWER=1]="CORRECT_ANSWER",t[t.DOOR_CLOSE=2]="DOOR_CLOSE",t[t.DOOR_OPEN=3]="DOOR_OPEN",t[t.PROGRESS_BAR=4]="PROGRESS_BAR",t[t.WRONG_ANSWER=5]="WRONG_ANSWER",t[t.MACHINE_PROCESS=6]="MACHINE_PROCESS",t[t.BOX_PICKUP=7]="BOX_PICKUP"}(i=o.AudioClips||(o.AudioClips={})),o.getAudioName=function(t){switch(t){case i.CONVEYOR_BELT:return"CONVEYOR_BELT";case i.CORRECT_ANSWER:return"CORRECT_ANSWER";case i.DOOR_CLOSE:return"DOOR_CLOSE";case i.DOOR_OPEN:return"DOOR_OPEN";case i.PROGRESS_BAR:return"PROGRESS_BAR";case i.WRONG_ANSWER:return"WRONG_ANSWER";case i.MACHINE_PROCESS:return"MACHINE_PROCESS";case i.BOX_PICKUP:return"BOX_PICKUP";default:return""}},cc._RF.pop()},{}],Template11_ItemSelection:[function(t,e,o){"use strict";cc._RF.push(e,"a0001u6EiRG5rl4CIanx7r+","Template11_ItemSelection");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=s.property,c=cc.Enum({YES:0,NO:1}),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.itemName="",e.correctFeedbackAudio=null,e.wrongFeedbackAudio=null,e.isNeeded=c.YES,e}return i(e,t),e.prototype.start=function(){},e.prototype.getIconTexture=function(){return this.icon},e.prototype.getItemName=function(){return this.itemName},e.prototype.getDescription=function(){return this.itemName},e.prototype.getItemsBuyStatus=function(){return this.isNeeded},e.prototype.getCorrectFeedbackText=function(){return this.itemName+"_CF"},e.prototype.getCorrectFeedbackAudio=function(){return this.correctFeedbackAudio},e.prototype.getWrongFeedbackText=function(){return this.itemName+"_WF"},e.prototype.getWrongFeedbackAudio=function(){return this.wrongFeedbackAudio},n([a({type:cc.Texture2D})],e.prototype,"icon",void 0),n([a],e.prototype,"itemName",void 0),n([a({type:cc.AudioClip})],e.prototype,"correctFeedbackAudio",void 0),n([a({type:cc.AudioClip})],e.prototype,"wrongFeedbackAudio",void 0),n([a({type:c})],e.prototype,"isNeeded",void 0),e=n([r],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],Template11:[function(t,e,o){"use strict";cc._RF.push(e,"1af77WgVZlIcJi3JCt2ERlp","Template11");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../scripts/AnalyticsManager"),r=t("../../scripts/AudioManager"),a=t("../../scripts/StepsController"),c=t("./Template11_ItemSelection"),p=cc._decorator,l=p.ccclass,h=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.fontColor=cc.Color.BLACK,e.popupNode=null,e.blanket=null,e.itemIcon=null,e.itemName=null,e.description=null,e.buyNode=null,e.nextButtonNode=null,e.tryAgainButtonNode=null,e.items=[],e.itemsNeeded=[],e.itemsNotNeeded=[],e.showOnlyIcons=!1,e.iconBox=null,e.tapSound=null,e.popupSound=null,e.correctAudio=null,e.wrongAudio=null,e.mActiveItem=null,e.mActiveItemComponent=null,e.mAcceptedItemCount=0,e.mRejectedItemCount=0,e.mCallback=null,e.mButtonTapped=0,e}return i(e,t),e.prototype.onLoad=function(){this.audioManager=this.canvas.getComponent(r.default),this.analyticsManager=this.canvas.getComponent(s.default),this.stepController=this.canvas.getComponent(a.default),this.blanket.on(cc.Node.EventType.TOUCH_START,this.onTapOutsidePopupArea.bind(this))},e.prototype.initialize=function(t){var e=this;this.mCallback=t,this.enableInteraction(!1),this.itemsNeeded.forEach(function(t){t.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e.iconBox),t.getChildByName("Name").color=e.fontColor}),this.itemsNotNeeded.forEach(function(t){t.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(e.iconBox),t.getChildByName("Name").color=e.fontColor}),this.itemName.node.color=this.fontColor,this.description.node.color=this.fontColor,this.itemsNeeded[0].getParent().getChildByName("Title").color=this.fontColor,this.itemsNotNeeded[0].getParent().getChildByName("Title").color=this.fontColor,this.buyNode.getChildByName("Buy_Btn").getChildByName("Background").getChildByName("Label").color=this.fontColor,this.buyNode.getChildByName("DontBuy_Btn").getChildByName("Background").getChildByName("Label").color=this.fontColor,this.nextButtonNode.getChildByName("Background").getChildByName("Label").color=this.fontColor,this.tryAgainButtonNode.getChildByName("Background").getChildByName("Label").color=this.fontColor},e.prototype.enableInteraction=function(t){this.items.forEach(function(e){e.getComponent(cc.Button).enabled=t})},e.prototype.onItemTapped=function(t,e){this.audioManager.play("Tap Sound",this.tapSound,!1,"SFX"),this.mActiveItem=this.items[parseInt(e)],this.mActiveItemComponent=this.mActiveItem.getComponent(c.default),this.itemIcon.spriteFrame=new cc.SpriteFrame(this.mActiveItemComponent.getIconTexture()),this.itemName.string=this.mActiveItemComponent.getItemName(),this.description.string=this.stepController.getTextByKey(this.mActiveItemComponent.getDescription()),this.popupNode.active=!0,this.audioManager.play("Popup Sound",this.popupSound,!1,"SFX"),this.buyNode.active=!0,this.nextButtonNode.active=!1,this.tryAgainButtonNode.active=!1},e.prototype.onBuyButtonTapped=function(t,e){var o;this.audioManager.play("Tap Sound",this.tapSound,!1,"SFX"),this.mButtonTapped=parseInt(e)+1,o="0"==e?this.buyNode.getChildByName("Buy_Btn").getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string.toLowerCase():this.buyNode.getChildByName("DontBuy_Btn").getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string.toLowerCase(),this.analyticsManager.sendOnGenericButtonClick(1,o),parseInt(e)==this.mActiveItemComponent.getItemsBuyStatus()?this.showCorrectFeedBack():this.showWrongFeedback(),this.buyNode.active=!1},e.prototype.showCorrectFeedBack=function(){this.description.string=this.stepController.getTextByKey(this.mActiveItemComponent.getCorrectFeedbackText()),this.audioManager.play("Correct",this.correctAudio,!1,"SFX");var t=this.mActiveItemComponent.getCorrectFeedbackAudio();this.scheduleOnce(function(){this.playAudio(t,!0)}.bind(this),1)},e.prototype.showWrongFeedback=function(){this.description.string=this.stepController.getTextByKey(this.mActiveItemComponent.getWrongFeedbackText()),this.audioManager.play("Wrong",this.wrongAudio,!1,"SFX");var t=this.mActiveItemComponent.getWrongFeedbackAudio();this.scheduleOnce(function(){this.playAudio(t,!1)}.bind(this),.5)},e.prototype.playAudio=function(t,e){var o=2;if(null!=t){var i=this.audioManager.play(t.name,t,!1,"VO");o=cc.audioEngine.getDuration(i)}this.scheduleOnce(function(){e?this.nextButtonNode.active=!0:this.tryAgainButtonNode.active=!0}.bind(this),o)},e.prototype.onNextButtonTapped=function(){var t=this.nextButtonNode.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string.toLowerCase();this.analyticsManager.sendOnGenericButtonClick(1,t),this.audioManager.play("Tap Sound",this.tapSound,!1,"SFX"),this.popupNode.active=!1,this.mActiveItem.active=!1,this.updateItemBoard()},e.prototype.OnTryAgainButtonTapped=function(){var t=this.tryAgainButtonNode.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string.toLowerCase();this.analyticsManager.sendOnGenericButtonClick(1,t),this.audioManager.play("Tap Sound",this.tapSound,!1,"SFX"),this.popupNode.active=!1},e.prototype.onTapOutsidePopupArea=function(){},e.prototype.updateItemBoard=function(){0==this.mActiveItemComponent.getItemsBuyStatus()?(this.itemsNeeded[this.mAcceptedItemCount].getChildByName("Item").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this.mActiveItemComponent.getIconTexture()),this.showOnlyIcons||(this.itemsNeeded[this.mAcceptedItemCount].getChildByName("Name").getComponent(cc.Label).string=this.mActiveItemComponent.getItemName()),this.itemsNeeded[this.mAcceptedItemCount++].active=!0):(this.itemsNotNeeded[this.mRejectedItemCount].getChildByName("Item").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(this.mActiveItemComponent.getIconTexture()),this.showOnlyIcons||(this.itemsNotNeeded[this.mRejectedItemCount].getChildByName("Name").getComponent(cc.Label).string=this.mActiveItemComponent.getItemName()),this.itemsNotNeeded[this.mRejectedItemCount++].active=!0),this.mAcceptedItemCount+this.mRejectedItemCount>=this.items.length&&this.mCallback&&this.mCallback()},n([h(cc.Node)],e.prototype,"canvas",void 0),n([h(cc.color)],e.prototype,"fontColor",void 0),n([h(cc.Node)],e.prototype,"popupNode",void 0),n([h(cc.Node)],e.prototype,"blanket",void 0),n([h(cc.Sprite)],e.prototype,"itemIcon",void 0),n([h(cc.Label)],e.prototype,"itemName",void 0),n([h(cc.Label)],e.prototype,"description",void 0),n([h(cc.Node)],e.prototype,"buyNode",void 0),n([h(cc.Node)],e.prototype,"nextButtonNode",void 0),n([h(cc.Node)],e.prototype,"tryAgainButtonNode",void 0),n([h(cc.Node)],e.prototype,"items",void 0),n([h(cc.Node)],e.prototype,"itemsNeeded",void 0),n([h(cc.Node)],e.prototype,"itemsNotNeeded",void 0),n([h(cc.Boolean)],e.prototype,"showOnlyIcons",void 0),n([h({type:cc.Texture2D})],e.prototype,"iconBox",void 0),n([h({type:cc.AudioClip})],e.prototype,"tapSound",void 0),n([h({type:cc.AudioClip})],e.prototype,"popupSound",void 0),n([h({type:cc.AudioClip})],e.prototype,"correctAudio",void 0),n([h({type:cc.AudioClip})],e.prototype,"wrongAudio",void 0),e=n([l],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../../scripts/AnalyticsManager":"AnalyticsManager","../../scripts/AudioManager":"AudioManager","../../scripts/StepsController":"StepsController","./Template11_ItemSelection":"Template11_ItemSelection"}],Template12_OptionDrag:[function(t,e,o){"use strict";cc._RF.push(e,"a50dejkGGtJeq/0CZMr4iYL","Template12_OptionDrag");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./Template12_OptionHandler"),r=cc._decorator,a=r.ccclass,c=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.optionHandler=null,e.overrideBounds=!1,e.bottomLeftBouunds=cc.v2(0,0),e.topRightBouunds=cc.v2(0,0),e.targetPos=[],e.minDistanceFromTarget=20,e.canvas=null,e.gameNode=null,e.originalParent=null,e.initialPos=cc.v3(0,0,0),e.offsetPos=cc.v3(0,0,0),e.optionIndex=-1,e.isActivated=!1,e.didDragStart=!1,e}var o;return i(e,t),o=e,e.prototype.onLoad=function(){this.canvas=cc.find("CommonCanvas"),this.gameNode=cc.find("GameNode"),this.originalParent=this.node.parent,this.initialPos=this.node.position},e.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart.bind(this),this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove.bind(this),this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd.bind(this),this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd.bind(this),this)},e.prototype.onTouchStart=function(t){if(this.isActivated&&null==o.currentDraggedOption){o.currentDraggedOption=this,this.didDragStart=!0;var e=this.node.convertToWorldSpaceAR(cc.v2(0,0)),i=this.canvas.convertToNodeSpaceAR(e);this.node.parent=this.gameNode,this.node.position=cc.v3(i),this.offsetPos=cc.Vec3.subtract(this.offsetPos,this.node.position,cc.v3(t.getLocation()))}},e.prototype.onTouchMove=function(t){if(this.isActivated&&o.currentDraggedOption==this){this.didDragStart&&(this.didDragStart=!1,this.optionHandler.onDragStart(this.optionIndex));var e=cc.v3(0,0,0);e=cc.Vec3.add(e,this.offsetPos,cc.v3(t.getLocation()));var i=-this.canvas.getContentSize().width/2-this.node.width/2-cc.view.getViewportRect().x*this.canvas.getContentSize().width/cc.view.getViewportRect().width,n=-1*i,s=-this.canvas.getContentSize().height/2-this.node.height/2-cc.view.getViewportRect().y*this.canvas.getContentSize().height/cc.view.getViewportRect().height,r=-1*s;this.overrideBounds&&(i=this.bottomLeftBouunds.x,s=this.bottomLeftBouunds.y,n=this.topRightBouunds.x,r=this.topRightBouunds.y,e.x<i?e.x=i:e.x>n&&(e.x=n),e.y<s?e.y=s:e.y>r&&(e.y=r)),this.node.position=e}},e.prototype.onTouchEnd=function(t){if(this.isActivated&&o.currentDraggedOption==this){o.currentDraggedOption=null,this.didDragStart=!1,this.optionHandler.onDragEnd(this.optionIndex);for(var e=Number.MAX_VALUE,i=-1,n=0;n<this.targetPos.length;n++){var s=cc.Vec3.distance(this.node.position,cc.v3(this.targetPos[n]));s<e&&(e=s,i=n)}e<=this.minDistanceFromTarget&&this.optionHandler.isPositionValid(i)?(this.deactivate(),this.node.active=!1,this.node.parent=this.originalParent,this.node.position=this.initialPos,this.optionHandler.onOptionPlaced(this.optionIndex,i)):(this.node.parent=this.originalParent,this.node.position=this.initialPos)}},e.prototype.activate=function(t){void 0!=t&&(this.optionIndex=t),this.isActivated=!0},e.prototype.deactivate=function(){this.isActivated=!1},e.prototype.reset=function(){this.node.parent=this.originalParent,this.node.position=this.initialPos,this.node.active=!0,this.activate()},e.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart.bind(this),this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove.bind(this),this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd.bind(this),this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd.bind(this),this)},e.currentDraggedOption=null,n([c(s.default)],e.prototype,"optionHandler",void 0),n([c(cc.Boolean)],e.prototype,"overrideBounds",void 0),n([c(cc.Vec2)],e.prototype,"bottomLeftBouunds",void 0),n([c(cc.Vec2)],e.prototype,"topRightBouunds",void 0),n([c(cc.Vec3)],e.prototype,"targetPos",void 0),n([c(cc.Boolean)],e.prototype,"minDistanceFromTarget",void 0),e=o=n([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./Template12_OptionHandler":"Template12_OptionHandler"}],Template12_OptionHandler:[function(t,e,o){"use strict";cc._RF.push(e,"fad88wPuPlJVKByRxaCoqXR","Template12_OptionHandler");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../scripts/AudioManager"),r=t("../../scripts/utilities/TextLoader"),a=t("./Template12_OptionDrag"),c=cc._decorator,p=c.ccclass,l=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startPosition=-700,e.endPosition=-300,e.autoHide=!0,e.handleAutoGrayEffect=!1,e.enabledOption=null,e.disabledOption=null,e.enabledReset=null,e.disabledReset=null,e.enabledSubmit=null,e.disabledSubmit=null,e.showOptionsSfx=null,e.hideOptionsSfx=null,e.dragStartSfx=null,e.optionPlacedSfx=null,e.resetClickSfx=null,e.submitClickSfx=null,e.options=[],e.optionBGs=[],e.optionImages=[],e.optionLabels=[],e.optionTextLoaders=[],e.optionDrags=[],e.resetButton=null,e.resetSprite=null,e.resetImage=null,e.resetLabel=null,e.resetTextLoader=null,e.submitButton=null,e.submitSprite=null,e.submitImage=null,e.submitLabel=null,e.submitTextLoader=null,e.timeToShowOrHide=.5,e.delayToAutoHide=.5,e.audioManager=null,e.selection=new Map,e}return i(e,t),e.prototype.onLoad=function(){this.getReferences()},e.prototype.getReferences=function(){var t=this;this.audioManager=cc.find("CommonCanvas").getComponent(s.default);var e=this.node.getChildByName("Options");this.options=e.children,this.options.forEach(function(e){var o=e.getChildByName("Background").getComponent(cc.Sprite);t.optionBGs.push(o);var i=o.node.getChildByName("Drag").getComponent(a.default);t.optionDrags.push(i),t.optionImages.push(i.node.getChildByName("Image").getComponent(cc.Sprite));var n=o.node.getChildByName("Label").getComponent(cc.Label);t.optionLabels.push(n),t.optionTextLoaders.push(n.node.getComponent(r.default))}),this.resetButton=this.node.getChildByName("Reset").getComponent(cc.Button),this.resetSprite=this.resetButton.target.getComponent(cc.Sprite),this.resetImage=this.resetButton.target.getChildByName("Image").getComponent(cc.Sprite),this.resetLabel=this.resetButton.target.getChildByName("Label").getComponent(cc.Label),this.resetTextLoader=this.resetLabel.getComponent(r.default),this.submitButton=this.node.getChildByName("Submit").getComponent(cc.Button),this.submitSprite=this.submitButton.target.getComponent(cc.Sprite),this.submitImage=this.submitButton.target.getChildByName("Image").getComponent(cc.Sprite),this.submitLabel=this.submitButton.target.getChildByName("Label").getComponent(cc.Label),this.submitTextLoader=this.submitLabel.getComponent(r.default)},e.prototype.show=function(t,e,o,i,n,s){var r=this;this.selection.clear();var a=!1,c=!1;a=t&&t.length>0,c=e&&e.length>0;var p=a&&c;if(this.optionLabels.forEach(function(t){t.verticalAlign=p?cc.Label.VerticalAlign.BOTTOM:cc.Label.VerticalAlign.CENTER}),a)for(var l=0;l<this.optionTextLoaders.length;l++)this.optionTextLoaders[l].changeLabel(t[l]);if(this.optionLabels.forEach(function(t){t.node.active=a}),c)for(l=0;l<this.optionImages.length;l++)this.optionImages[l].spriteFrame=e[l];this.optionImages.forEach(function(t){t.node.active=c}),this.enabledOption&&this.optionBGs.forEach(function(t){t.spriteFrame=r.enabledOption}),a=null!=o&&""!=o,c=null!=i,this.resetLabel.verticalAlign=a&&c?cc.Label.VerticalAlign.BOTTOM:cc.Label.VerticalAlign.CENTER,a&&this.resetTextLoader.changeLabel(o),this.resetLabel.node.active=a,c&&(this.resetImage.spriteFrame=i),this.resetImage.node.active=c,a=null!=n&&""!=n,c=null!=s,this.submitLabel.verticalAlign=a&&c?cc.Label.VerticalAlign.BOTTOM:cc.Label.VerticalAlign.CENTER,a&&this.submitTextLoader.changeLabel(n),this.submitLabel.node.active=a,c&&(this.submitImage.spriteFrame=s),this.submitImage.node.active=c,this.optionDrags.forEach(function(t){t.reset(),t.deactivate()}),this.disableReset(),this.disableSubmit(),cc.tween(this.node).to(this.timeToShowOrHide,{y:this.endPosition}).call(function(){for(var t=0;t<r.optionDrags.length;t++)r.optionDrags[t].activate(t);r.node.emit("onOptionsShown")}).start(),this.showOptionsSfx&&this.audioManager.play("showOptionsSfx",this.showOptionsSfx,!1,"SFX")},e.prototype.disableReset=function(){this.disabledReset&&(this.resetSprite.spriteFrame=this.disabledReset),this.resetButton.interactable=!1,this.handleAutoGrayEffect&&(this.resetButton.enableAutoGrayEffect=!0)},e.prototype.disableSubmit=function(){this.disabledSubmit&&(this.submitSprite.spriteFrame=this.disabledSubmit),this.submitButton.interactable=!1,this.handleAutoGrayEffect&&(this.submitButton.enableAutoGrayEffect=!0)},e.prototype.onDragStart=function(t){this.dragStartSfx&&this.audioManager.play("dragStartSfx",this.dragStartSfx,!1,"SFX"),this.node.emit("onDragStart",t)},e.prototype.onDragEnd=function(t){this.node.emit("onDragEnd",t)},e.prototype.onOptionPlaced=function(t,e){this.selection.set(t,e),this.optionPlacedSfx&&this.audioManager.play("optionPlacedSfx",this.optionPlacedSfx,!1,"SFX"),this.resetButton.interactable=!0,this.enabledReset&&(this.resetSprite.spriteFrame=this.enabledReset);for(var o=!0,i=0;i<this.options.length;i++)if(!this.selection.has(i)){o=!1;break}o&&(this.submitButton.interactable=!0,this.enabledSubmit&&(this.submitSprite.spriteFrame=this.enabledSubmit)),this.node.emit("onOptionPlaced",t,e)},e.prototype.onClickReset=function(){this.selection.clear(),this.resetClickSfx&&this.audioManager.play("resetClickSfx",this.resetClickSfx,!1,"SFX"),this.optionDrags.forEach(function(t){t.reset()}),this.disableReset(),this.disableSubmit(),this.node.emit("onReset")},e.prototype.onClickSubmit=function(){var t=this;this.submitClickSfx&&this.audioManager.play("submitClickSfx",this.submitClickSfx,!1,"SFX"),this.disableReset(),this.disableSubmit(),this.disabledOption&&this.optionBGs.forEach(function(e){e.spriteFrame=t.disabledOption}),this.node.emit("onSubmit",this.selection),this.autoHide&&this.scheduleOnce(this.hide.bind(this),this.delayToAutoHide)},e.prototype.hide=function(){var t=this;cc.tween(this.node).to(this.timeToShowOrHide,{y:this.startPosition}).call(function(){t.node.emit("onOptionsHide")}).start(),this.hideOptionsSfx&&this.audioManager.play("hideOptionsSfx",this.hideOptionsSfx,!1,"SFX")},e.prototype.isPositionValid=function(t){for(var e=0;e<this.options.length;e++)if(this.selection.has(e)&&this.selection.get(e)==t)return!1;return!0},n([l({type:cc.Float})],e.prototype,"startPosition",void 0),n([l({type:cc.Float})],e.prototype,"endPosition",void 0),n([l(cc.Boolean)],e.prototype,"autoHide",void 0),n([l(cc.Boolean)],e.prototype,"handleAutoGrayEffect",void 0),n([l(cc.SpriteFrame)],e.prototype,"enabledOption",void 0),n([l(cc.SpriteFrame)],e.prototype,"disabledOption",void 0),n([l(cc.SpriteFrame)],e.prototype,"enabledReset",void 0),n([l(cc.SpriteFrame)],e.prototype,"disabledReset",void 0),n([l(cc.SpriteFrame)],e.prototype,"enabledSubmit",void 0),n([l(cc.SpriteFrame)],e.prototype,"disabledSubmit",void 0),n([l({type:cc.AudioClip})],e.prototype,"showOptionsSfx",void 0),n([l({type:cc.AudioClip})],e.prototype,"hideOptionsSfx",void 0),n([l({type:cc.AudioClip})],e.prototype,"dragStartSfx",void 0),n([l({type:cc.AudioClip})],e.prototype,"optionPlacedSfx",void 0),n([l({type:cc.AudioClip})],e.prototype,"resetClickSfx",void 0),n([l({type:cc.AudioClip})],e.prototype,"submitClickSfx",void 0),e=n([p],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../scripts/AudioManager":"AudioManager","../../scripts/utilities/TextLoader":"TextLoader","./Template12_OptionDrag":"Template12_OptionDrag"}],Template12_Tutorial:[function(t,e,o){"use strict";cc._RF.push(e,"eff19ClsyFL2ZWuZIFbslFr","Template12_Tutorial");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../scripts/AnalyticsManager"),r=t("../../scripts/StepsController"),a=cc._decorator,c=a.ccclass,p=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.repeat=2,e.hand=null,e.option_1=null,e.option_2=null,e.reset=null,e.submit=null,e.handPositionAtOption1=cc.v3(0,0,0),e.handPositionAtOption2=cc.v3(0,0,0),e.handPositionAtTarget1=cc.v3(0,0,0),e.handPositionAtTarget2=cc.v3(0,0,0),e.handPositionAtReset=cc.v3(0,0,0),e.handPositionAtSubmit=cc.v3(0,0,0),e.timeToMoveToOption1=1,e.timeToMoveToTarget2=1,e.timeToMoveToReset=1,e.timeToMoveToOption1FromReset=1,e.timeToMoveToTarget1=1,e.timeToMoveToOption2=1,e.timeToMoveToTarget2FromOption2=1,e.timeToMoveToSubmit=1,e.timeToScale=.2,e.handScaleDownTo=.7,e.delay=.3,e.overlayButton=null,e.closeButton=null,e.analyticsManager=null,e.stepsController=null,e.handDefaultPosition=cc.v3(0,0,0),e.handOriginalScale=0,e}return i(e,t),e.prototype.onLoad=function(){this.analyticsManager=cc.find("CommonCanvas").getComponent(s.default),this.stepsController=cc.find("CommonCanvas").getComponent(r.default),this.handDefaultPosition=this.hand.position,this.handOriginalScale=this.hand.scale,this.node.active=!1},e.prototype.show=function(){var t=this;this.analyticsManager.sendOnViewTutorial(this.stepsController.getCurrentQuestionIndex()),this.overlayButton.interactable=!1,this.closeButton.interactable=!1,this.node.opacity=0,this.node.active=!0,cc.tween(this.node).to(1,{opacity:255}).call(function(){t.overlayButton.interactable=!0,t.closeButton.interactable=!0}).start(),this.scheduleOnce(this.moveHand.bind(this),1)},e.prototype.moveHand=function(){var t=this;cc.tween(this.hand).repeat(this.repeat,cc.tween().call(function(){t.hand.position=t.handDefaultPosition,t.hand.scale=t.handOriginalScale,t.reset.scale=1,t.submit.scale=1,t.option_1.position=t.handPositionAtOption1,t.option_2.position=t.handPositionAtOption2}).to(this.timeToMoveToOption1,{position:this.handPositionAtOption1}).delay(this.delay).to(this.timeToScale,{scale:this.handScaleDownTo}).delay(this.delay).call(function(){cc.tween(t.option_1).to(t.timeToMoveToTarget2,{position:t.handPositionAtTarget2}).start()}).to(this.timeToMoveToTarget2,{position:this.handPositionAtTarget2}).to(this.timeToScale,{scale:this.handOriginalScale}).delay(this.delay).to(this.timeToMoveToReset,{position:this.handPositionAtReset}).delay(this.delay).to(this.timeToScale,{scale:this.handScaleDownTo}).call(function(){t.reset.scale=.9}).to(this.timeToScale,{scale:this.handOriginalScale}).call(function(){t.reset.scale=1,t.option_1.position=t.handPositionAtOption1}).delay(this.delay).to(this.timeToMoveToOption1FromReset,{position:this.handPositionAtOption1}).delay(this.delay).to(this.timeToScale,{scale:this.handScaleDownTo}).delay(this.delay).call(function(){cc.tween(t.option_1).to(t.timeToMoveToTarget1,{position:t.handPositionAtTarget1}).start()}).to(this.timeToMoveToTarget1,{position:this.handPositionAtTarget1}).to(this.timeToScale,{scale:this.handOriginalScale}).delay(this.delay).to(this.timeToMoveToOption2,{position:this.handPositionAtOption2}).delay(this.delay).to(this.timeToScale,{scale:this.handScaleDownTo}).delay(this.delay).call(function(){cc.tween(t.option_2).to(t.timeToMoveToTarget2FromOption2,{position:t.handPositionAtTarget2}).start()}).to(this.timeToMoveToTarget2FromOption2,{position:this.handPositionAtTarget2}).to(this.timeToScale,{scale:this.handOriginalScale}).delay(this.delay).to(this.timeToMoveToSubmit,{position:this.handPositionAtSubmit}).delay(this.delay).to(this.timeToScale,{scale:this.handScaleDownTo}).call(function(){t.submit.scale=.9}).to(this.timeToScale,{scale:this.handOriginalScale}).call(function(){t.submit.scale=1}).delay(.5)).call(function(){t.stop()}).start()},e.prototype.stop=function(){cc.Tween.stopAllByTarget(this.node),cc.Tween.stopAllByTarget(this.hand),cc.Tween.stopAllByTarget(this.option_1),cc.Tween.stopAllByTarget(this.option_2),this.unscheduleAllCallbacks(),this.node.opacity=0,this.node.active=!1,this.node.emit("onTutorialStop")},e.prototype.onClickStop=function(){this.stop()},n([p({type:cc.Integer})],e.prototype,"repeat",void 0),n([p(cc.Node)],e.prototype,"hand",void 0),n([p(cc.Node)],e.prototype,"option_1",void 0),n([p(cc.Node)],e.prototype,"option_2",void 0),n([p(cc.Node)],e.prototype,"reset",void 0),n([p(cc.Node)],e.prototype,"submit",void 0),n([p(cc.Vec3)],e.prototype,"handPositionAtOption1",void 0),n([p(cc.Vec3)],e.prototype,"handPositionAtOption2",void 0),n([p(cc.Vec3)],e.prototype,"handPositionAtTarget1",void 0),n([p(cc.Vec3)],e.prototype,"handPositionAtTarget2",void 0),n([p(cc.Vec3)],e.prototype,"handPositionAtReset",void 0),n([p(cc.Vec3)],e.prototype,"handPositionAtSubmit",void 0),n([p({type:cc.Float})],e.prototype,"timeToMoveToOption1",void 0),n([p({type:cc.Float})],e.prototype,"timeToMoveToTarget2",void 0),n([p({type:cc.Float})],e.prototype,"timeToMoveToReset",void 0),n([p({type:cc.Float})],e.prototype,"timeToMoveToOption1FromReset",void 0),n([p({type:cc.Float})],e.prototype,"timeToMoveToTarget1",void 0),n([p({type:cc.Float})],e.prototype,"timeToMoveToOption2",void 0),n([p({type:cc.Float})],e.prototype,"timeToMoveToTarget2FromOption2",void 0),n([p({type:cc.Float})],e.prototype,"timeToMoveToSubmit",void 0),n([p({type:cc.Float})],e.prototype,"timeToScale",void 0),n([p({type:cc.Float})],e.prototype,"handScaleDownTo",void 0),n([p({type:cc.Float})],e.prototype,"delay",void 0),n([p(cc.Button)],e.prototype,"overlayButton",void 0),n([p(cc.Button)],e.prototype,"closeButton",void 0),e=n([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../scripts/AnalyticsManager":"AnalyticsManager","../../scripts/StepsController":"StepsController"}],Template1SelectionPanel:[function(t,e,o){"use strict";cc._RF.push(e,"3c55bAOJfdE2oYphFSbaR+/","Template1SelectionPanel");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../scripts/AudioManager"),r=t("../../scripts/AnalyticsManager"),a=t("../../scripts/StepsController"),c=t("../../scripts/utilities/TextLoader"),p=cc._decorator,l=p.ccclass,h=p.property,d=cc.Enum({COLOR:0,SPRITE:1,NONE:2}),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e.gameNode=null,e.tutorial=null,e.slider_options=null,e.sliderbutton=null,e.btn_submit=null,e.isInfoPanelNeeded=!1,e.infoTextPanel=null,e.options=[],e.optionButtonTransition=d.COLOR,e.spr_normal=null,e.spr_highlighted=null,e.color_optionsNormal=cc.Color.WHITE,e.color_optionsSelected=cc.Color.WHITE,e.aud_submit=null,e.aud_slider=null,e.selectedOptionId=5,e.fireButtonEnableOption=5,e.isTutorialShown=!1,e.tutorialcount=0,e.isTutorialClosed=!1,e.onloadNfirecallback=null,e}return i(e,t),e.prototype.onLoad=function(){this.audioManager=this.canvas.getComponent(s.default),this.scr_analyticsManager=this.canvas.getComponent(r.default),this.scr_stepsController=this.canvas.getComponent(a.default),this.isInfoPanelNeeded&&(this.infoTextPanel.parent.active=!0),this.sliderbutton.on("touchend",this.OnOptionsDragged,this),this.sliderbutton.on("touchcancel",this.OnOptionsDragged,this),this.slider_options.node.on("touchend",this.OnOptionsDragged,this),this.slider_options.node.on("touchcancel",this.OnOptionsDragged,this),this.tutorial.opacity=0,this.tutorial.getComponent(cc.Button).interactable=!1,this.btn_submit.node.on("touchstart",this.onSubmitButtonPressStart,this),this.btn_submit.node.on("touchend",this.onSubmitButtonPressEnd,this),this.btn_submit.node.on("touchcancel",this.onSubmitButtonPressEnd,this),this.tutorial.active=!1},e.prototype.onSubmitButtonPressStart=function(){this.btn_submit.interactable&&this.btn_submit.node.runAction(cc.scaleTo(.05,.9))},e.prototype.onSubmitButtonPressEnd=function(){this.btn_submit.node.runAction(cc.scaleTo(.05,1))},e.prototype.ShowTutorial=function(){this.tutorialcount++,1==this.tutorialcount&&this.scr_analyticsManager.sendOnViewTutorial(this.scr_stepsController.getCurrentQuestionIndex()),this.isTutorialClosed||(this.tutorial.active=!0),this.isTutorialShown=!0,this.scheduleOnce(function(){this.tutorial.getComponent(cc.Button).interactable=!0}.bind(this),2);var t=this.tutorial.getChildByName("MainPanelMiniature"),e=t.getChildByName("slider_options").getComponent(cc.Slider);e.enabled=!1;var o=t.getChildByName("sliderbutton").getChildByName("handicon");o.setPosition(0,-30);var i=t.getChildByName("options").children[2];i.getComponent(cc.Sprite).spriteFrame=this.spr_normal,i.color=this.color_optionsNormal;var n=t.getChildByName("options").children[3];n.getComponent(cc.Sprite).spriteFrame=this.spr_normal,n.color=this.color_optionsNormal;var s=t.getChildByName("submitbutton").getComponent(cc.Button);s.interactable=!1,this.tutorial.parent=this.gameNode.parent,this.tutorial.zIndex=1,this.tutorial.setPosition(this.gameNode.getPosition()),console.log("Tutorial ",this.tutorial),e.progress=.5;this.tutorial.runAction(cc.fadeIn(.5)),this.scheduleOnce(function(){var t=this;cc.tween(e).to(.6,{progress:.625}).call(function(){t.optionButtonTransition==d.SPRITE?i.getComponent(cc.Sprite).spriteFrame=t.spr_highlighted:t.optionButtonTransition==d.COLOR&&(i.color=t.color_optionsSelected),s.interactable=!0}).start()},1.75),this.scheduleOnce(function(){var t=this;cc.tween(e).to(.6,{progress:.875}).call(function(){t.optionButtonTransition==d.SPRITE?(i.getComponent(cc.Sprite).spriteFrame=t.spr_normal,n.getComponent(cc.Sprite).spriteFrame=t.spr_highlighted):t.optionButtonTransition==d.COLOR&&(i.color=t.color_optionsNormal,n.color=t.color_optionsSelected)}).start()},3),this.scheduleOnce(function(){o.runAction(cc.moveTo(1,cc.v2(200,30))),this.scheduleOnce(function(){o.runAction(cc.sequence(cc.scaleTo(.25,.75),cc.delayTime(.1),cc.scaleTo(.25,1))),this.scheduleOnce(function(){s.transition==d.SPRITE&&(s.node.getComponent(cc.Sprite).spriteFrame=s.pressedSprite),s.node.runAction(cc.scaleTo(.05,.9)),this.scheduleOnce(function(){s.transition==d.SPRITE&&(s.node.getComponent(cc.Sprite).spriteFrame=s.normalSprite),s.node.runAction(cc.scaleTo(.05,1)),this.scheduleOnce(function(){this.tutorialcount<2?this.ShowTutorial():this.tutorial.activeInHierarchy&&this.OnCloseTutorial()},1)},.35)},.2)},1.2)},3.6)},e.prototype.OnCloseTutorial=function(){console.log("close button clicked"),this.tutorial.active=!1,this.isTutorialClosed=!0,this.unscheduleAllCallbacks(),this.gameNode.emit("OnTutorialClosed")},e.prototype.InitializeSelectionPanelWithInfo=function(t,e,o,i){void 0===i&&(i=5),this.onloadNfirecallback=e,this.infoTextPanel.getComponent(c.default).changeLabel(o),this.fireButtonEnableOption=i,this.slider_options.progress=.5;for(var n="",s=0;s<this.options.length;s++)n=t[s],this.options[s].getChildByName("text").getComponent(c.default).changeLabel(n);this.SetOptions(5,!0),this.btn_submit.interactable=!1,this.btn_submit.node.opacity=125,this.selectedOptionId=5},e.prototype.InitializeSelectionPanel=function(t,e,o){void 0===o&&(o=5),this.onloadNfirecallback=e,this.fireButtonEnableOption=o,this.slider_options.progress=.5;for(var i="",n=0;n<this.options.length;n++)i=t[n],this.options[n].getChildByName("text").getComponent(c.default).changeLabel(i);this.SetOptions(5,!0),this.btn_submit.interactable=!1,this.btn_submit.node.opacity=125,this.selectedOptionId=5},e.prototype.ResetSelectionPanel=function(){this.slider_options.progress=.5,this.SetOptions(5,!0),this.btn_submit.interactable=!1,this.btn_submit.node.opacity=125,this.selectedOptionId=5},e.prototype.OnLoadNFire=function(){this.btn_submit.interactable=!1,this.onloadNfirecallback(this.selectedOptionId),this.audioManager.play("loadnfire",this.aud_submit,!1,"SFX"),this.scheduleOnce(function(){this.HideSelectionPanel()}.bind(this),.25)},e.prototype.ShowSelectionPanel=function(){this.node.runAction(cc.moveTo(.5,cc.v2(0,-280)))},e.prototype.HideSelectionPanel=function(){this.node.runAction(cc.moveTo(.5,cc.v2(0,-620)))},e.prototype.OnOptionsDragged=function(t){this.btn_submit.interactable=!0,this.slider_options.progress>=0&&this.slider_options.progress<=.25?(cc.tween(this.slider_options).to(.2,{progress:.125}).start(),this.SetOptions(0)):this.slider_options.progress>.25&&this.slider_options.progress<=.5?(cc.tween(this.slider_options).to(.2,{progress:.375}).start(),this.SetOptions(1)):this.slider_options.progress>.5&&this.slider_options.progress<=.75?(cc.tween(this.slider_options).to(.2,{progress:.625}).start(),this.SetOptions(2)):this.slider_options.progress>.75&&this.slider_options.progress<=1&&(cc.tween(this.slider_options).to(.2,{progress:.875}).start(),this.SetOptions(3)),this.aud_slider&&this.audioManager.play("slideaud",this.aud_slider,!1,"SFX")},e.prototype.SetOptions=function(t,e){var o=this;void 0===e&&(e=!1),this.selectedOptionId=t,this.fireButtonEnableOption<4?t==this.fireButtonEnableOption?(this.btn_submit.interactable=!0,this.btn_submit.node.opacity=255):(this.btn_submit.interactable=!1,this.btn_submit.node.opacity=125):(this.btn_submit.interactable=!0,this.btn_submit.node.opacity=255),this.options.forEach(function(t){o.optionButtonTransition==d.SPRITE?t.getComponent(cc.Sprite).spriteFrame=o.spr_normal:o.optionButtonTransition==d.COLOR&&(t.color=o.color_optionsNormal)}),t<this.options.length&&(this.optionButtonTransition==d.SPRITE?this.options[t].getComponent(cc.Sprite).spriteFrame=this.spr_highlighted:this.optionButtonTransition==d.COLOR&&(this.options[t].color=this.color_optionsSelected))},n([h(cc.Node)],e.prototype,"canvas",void 0),n([h(cc.Node)],e.prototype,"gameNode",void 0),n([h(cc.Node)],e.prototype,"tutorial",void 0),n([h(cc.Slider)],e.prototype,"slider_options",void 0),n([h(cc.Node)],e.prototype,"sliderbutton",void 0),n([h(cc.Button)],e.prototype,"btn_submit",void 0),n([h],e.prototype,"isInfoPanelNeeded",void 0),n([h(cc.Node)],e.prototype,"infoTextPanel",void 0),n([h(cc.Node)],e.prototype,"options",void 0),n([h({type:d})],e.prototype,"optionButtonTransition",void 0),n([h(cc.SpriteFrame)],e.prototype,"spr_normal",void 0),n([h(cc.SpriteFrame)],e.prototype,"spr_highlighted",void 0),n([h(cc.Color)],e.prototype,"color_optionsNormal",void 0),n([h(cc.Color)],e.prototype,"color_optionsSelected",void 0),n([h({type:cc.AudioClip})],e.prototype,"aud_submit",void 0),n([h({type:cc.AudioClip})],e.prototype,"aud_slider",void 0),e=n([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../scripts/AnalyticsManager":"AnalyticsManager","../../scripts/AudioManager":"AudioManager","../../scripts/StepsController":"StepsController","../../scripts/utilities/TextLoader":"TextLoader"}],Template2_OptionHandler:[function(t,e,o){"use strict";cc._RF.push(e,"55f1c6L7V1PToW0olQFhqaH","Template2_OptionHandler");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../scripts/AudioManager"),r=t("../../scripts/utilities/TextLoader"),a=cc._decorator,c=a.ccclass,p=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startPosition=0,e.endPosition=0,e.autoHideOnSubmit=!0,e.handleAutoGrayEffect=!1,e.defautlSliderValue=0,e.sliderValuesForOptions=[],e.optionBG=null,e.enabledOptionBGSprite=null,e.disabledOptionBGSpriteFrame=null,e.toggleContainer=null,e.disabledOptionSprite=null,e.optionHighlightSprite=null,e.optionCorrectSprite=null,e.optionWrongSprite=null,e.slider=null,e.enabledSliderSprite=null,e.disabledSliderSprite=null,e.pointerButton=null,e.enabledPointerSprite=null,e.disabledPointerSprite=null,e.submitButton=null,e.enabledSubmitSprite=null,e.disabledSubmitSprite=null,e.showOptionsSfx=null,e.hideOptionsSfx=null,e.optionChooseSfx=null,e.submitClickSfx=null,e.correctAnswerSfx=null,e.wrongAnswerSfx=null,e.audioManager=null,e.optionToggles=[],e.optionSprites=[],e.optionHighlightSprites=[],e.optionImages=[],e.optionLabels=[],e.optionTextLoaders=[],e.sliderSprite=null,e.pointerSprite=null,e.submitSprite=null,e.submitImage=null,e.submitLabel=null,e.submitTextLoader=null,e.isActivated=!1,e.selectedOption=-1,e.correctOption=-1,e.isCorrect=!1,e.timeToShowOrHide=1,e}return i(e,t),e.prototype.onLoad=function(){this.getReferences(),this.subscribeEvents(),this.initialize()},e.prototype.getReferences=function(){var t=this;this.audioManager=cc.find("CommonCanvas").getComponent(s.default),this.optionToggles=this.toggleContainer.toggleItems,this.optionToggles.forEach(function(e){t.optionSprites.push(e.target.getComponent(cc.Sprite)),t.optionHighlightSprites.push(e.checkMark),t.optionImages.push(e.node.getChildByName("Image").getComponent(cc.Sprite));var o=e.node.getChildByName("Label").getComponent(cc.Label);t.optionLabels.push(o),t.optionTextLoaders.push(o.node.getComponent(r.default))}),this.sliderSprite=this.slider.node.getChildByName("Background").getComponent(cc.Sprite),this.pointerSprite=this.pointerButton.target.getComponent(cc.Sprite),this.submitSprite=this.submitButton.target.getComponent(cc.Sprite),this.submitImage=this.submitButton.target.getChildByName("Image").getComponent(cc.Sprite),this.submitLabel=this.submitButton.target.getChildByName("Label").getComponent(cc.Label),this.submitTextLoader=this.submitLabel.getComponent(r.default)},e.prototype.subscribeEvents=function(){this.slider.node.on("slide",this.onSlide,this),this.slider.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.slider.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this),this.pointerButton.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.pointerButton.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e.prototype.initialize=function(){this.node.y=this.startPosition,this.optionToggles.forEach(function(t){t.interactable=!1})},e.prototype.show=function(t,e,o,i,n){var s=this;this.correctOption=t,this.selectedOption=-1,this.isCorrect=!1,this.enabledOptionBGSprite&&(this.optionBG.spriteFrame=this.enabledOptionBGSprite),this.handleAutoGrayEffect&&this.optionToggles.forEach(function(t){t.enableAutoGrayEffect=!1});var r=e&&e.length>0&&i&&i.length>0;if(this.optionLabels.forEach(function(t){t.verticalAlign=r?cc.Label.VerticalAlign.BOTTOM:cc.Label.VerticalAlign.CENTER}),e&&e.length>0)for(var a=0;a<this.optionTextLoaders.length;a++)this.optionTextLoaders[a].changeLabel(e[a]),this.optionTextLoaders[a].node.active=!0;else for(a=0;a<this.optionTextLoaders.length;a++)this.optionTextLoaders[a].node.active=!1;if(i&&i.length>0)for(a=0;a<this.optionImages.length;a++)this.optionImages[a].spriteFrame=i[a],this.optionImages[a].node.active=!0;else for(a=0;a<this.optionImages.length;a++)this.optionImages[a].node.active=!0;return this.optionHighlightSprite&&this.optionHighlightSprites.forEach(function(t){t.spriteFrame=s.optionHighlightSprite}),this.toggleContainer.allowSwitchOff=!0,this.optionToggles.forEach(function(t){t.isChecked=!1}),this.slider.enabled=!1,this.slider.progress=this.defautlSliderValue,this.enabledSliderSprite&&(this.sliderSprite.spriteFrame=this.enabledSliderSprite),this.pointerButton.interactable=!1,this.handleAutoGrayEffect&&(this.pointerButton.enableAutoGrayEffect=!1),this.enabledPointerSprite&&(this.pointerSprite.spriteFrame=this.enabledPointerSprite),r=o&&o.length>0&&null!=n,this.submitLabel.verticalAlign=r?cc.Label.VerticalAlign.BOTTOM:cc.Label.VerticalAlign.CENTER,null!=o&&""!=o?(this.submitTextLoader.changeLabel(o),this.submitTextLoader.node.active=!0):this.submitTextLoader.node.active=!1,n?(this.submitImage.spriteFrame=n,this.submitImage.node.active=!0):this.submitImage.node.active=!1,this.submitButton.interactable=!1,this.disabledSubmitSprite?(this.submitSprite.spriteFrame=this.disabledSubmitSprite,this.handleAutoGrayEffect&&(this.submitButton.enableAutoGrayEffect=!1)):this.handleAutoGrayEffect&&(this.submitButton.enableAutoGrayEffect=!0),cc.tween(this.node).to(this.timeToShowOrHide,{y:this.endPosition}).call(function(){s.slider.enabled=!0,s.pointerButton.interactable=!0,s.handleAutoGrayEffect&&(s.pointerButton.enableAutoGrayEffect=!1),s.isActivated=!0,s.node.emit("onOptionsShown")}).start(),this.showOptionsSfx&&this.audioManager.play("showOptionsSfx",this.showOptionsSfx,!1,"SFX"),this.timeToShowOrHide},e.prototype.onSlide=function(t){this.onSliderValueChange(!1)},e.prototype.onTouchEnd=function(){this.onSliderValueChange(!0)},e.prototype.onSliderValueChange=function(t){if(this.isActivated){for(var e=this.slider.progress,o=this.selectedOption,i=!1,n=this.sliderValuesForOptions.length-1;n>0;n--)if(e>=(this.sliderValuesForOptions[n]+this.sliderValuesForOptions[n-1])/2){e=this.sliderValuesForOptions[n],this.selectedOption=n,i=!0;break}i||(e=this.sliderValuesForOptions[0],this.selectedOption=0),t&&cc.tween(this.slider).to(.1,{progress:e}).start(),o!=this.selectedOption&&this.onOptionChange(o,this.selectedOption)}},e.prototype.onOptionChange=function(t,e){this.optionChooseSfx&&this.audioManager.play("optionChoose",this.optionChooseSfx,!1,"SFX"),this.optionToggles[this.selectedOption].isChecked=!0,this.enabledSubmitSprite&&(this.submitSprite.spriteFrame=this.enabledSubmitSprite),this.submitButton.interactable=!0,this.handleAutoGrayEffect&&(this.submitButton.enableAutoGrayEffect=!1),this.selectedOption=e,this.node.emit("onOptionChange",t,e)},e.prototype.onClickSubmit=function(){var t=this;this.isActivated=!1,this.submitClickSfx&&this.audioManager.play("optionChoose",this.submitClickSfx,!1,"SFX"),this.disabledOptionBGSpriteFrame&&(this.optionBG.spriteFrame=this.disabledOptionBGSpriteFrame),this.disabledOptionSprite?(this.optionSprites.forEach(function(e){e.spriteFrame=t.disabledOptionSprite}),this.handleAutoGrayEffect&&this.optionToggles.forEach(function(t){t.enableAutoGrayEffect=!1})):this.handleAutoGrayEffect&&this.optionToggles.forEach(function(t){t.enableAutoGrayEffect=!0}),this.slider.enabled=!1,this.disabledSliderSprite&&(this.sliderSprite.spriteFrame=this.disabledSliderSprite),this.pointerButton.interactable=!1,this.disabledPointerSprite?(this.pointerSprite.spriteFrame=this.disabledPointerSprite,this.handleAutoGrayEffect&&(this.pointerButton.enableAutoGrayEffect=!1)):this.handleAutoGrayEffect&&(this.pointerButton.enableAutoGrayEffect=!0),this.submitButton.interactable=!1,this.disabledSubmitSprite?(this.submitSprite.spriteFrame=this.disabledSubmitSprite,this.handleAutoGrayEffect&&(this.submitButton.enableAutoGrayEffect=!1)):this.handleAutoGrayEffect&&(this.submitButton.enableAutoGrayEffect=!0),this.isCorrect=this.selectedOption==this.correctOption,this.scheduleOnce(this.playAnswer.bind(this),.5),this.node.emit("onSubmit",this.selectedOption,this.isCorrect),this.autoHideOnSubmit&&this.scheduleOnce(this.hide.bind(this),.5)},e.prototype.playAnswer=function(){this.isCorrect?(this.optionCorrectSprite&&(this.optionHighlightSprites[this.selectedOption].spriteFrame=this.optionCorrectSprite),this.correctAnswerSfx&&this.audioManager.play("correctAnswerSfx",this.correctAnswerSfx,!1,"SFX")):(this.optionWrongSprite&&(this.optionHighlightSprites[this.selectedOption].spriteFrame=this.optionWrongSprite),this.wrongAnswerSfx&&this.audioManager.play("wrongAnswerSfx",this.wrongAnswerSfx,!1,"SFX"))},e.prototype.hide=function(){var t=this;return cc.tween(this.node).to(this.timeToShowOrHide,{y:this.startPosition}).call(function(){t.node.emit("onOptionsHide")}).start(),this.hideOptionsSfx&&this.audioManager.play("hideOptionsSfx",this.hideOptionsSfx,!1,"SFX"),this.timeToShowOrHide},n([p(cc.Float)],e.prototype,"startPosition",void 0),n([p(cc.Float)],e.prototype,"endPosition",void 0),n([p(cc.Boolean)],e.prototype,"autoHideOnSubmit",void 0),n([p(cc.Boolean)],e.prototype,"handleAutoGrayEffect",void 0),n([p({type:cc.Float})],e.prototype,"defautlSliderValue",void 0),n([p({type:cc.Float})],e.prototype,"sliderValuesForOptions",void 0),n([p(cc.Sprite)],e.prototype,"optionBG",void 0),n([p(cc.SpriteFrame)],e.prototype,"enabledOptionBGSprite",void 0),n([p(cc.SpriteFrame)],e.prototype,"disabledOptionBGSpriteFrame",void 0),n([p(cc.ToggleContainer)],e.prototype,"toggleContainer",void 0),n([p(cc.SpriteFrame)],e.prototype,"disabledOptionSprite",void 0),n([p(cc.SpriteFrame)],e.prototype,"optionHighlightSprite",void 0),n([p(cc.SpriteFrame)],e.prototype,"optionCorrectSprite",void 0),n([p(cc.SpriteFrame)],e.prototype,"optionWrongSprite",void 0),n([p(cc.Slider)],e.prototype,"slider",void 0),n([p(cc.SpriteFrame)],e.prototype,"enabledSliderSprite",void 0),n([p(cc.SpriteFrame)],e.prototype,"disabledSliderSprite",void 0),n([p(cc.Button)],e.prototype,"pointerButton",void 0),n([p(cc.SpriteFrame)],e.prototype,"enabledPointerSprite",void 0),n([p(cc.SpriteFrame)],e.prototype,"disabledPointerSprite",void 0),n([p(cc.Button)],e.prototype,"submitButton",void 0),n([p(cc.SpriteFrame)],e.prototype,"enabledSubmitSprite",void 0),n([p(cc.SpriteFrame)],e.prototype,"disabledSubmitSprite",void 0),n([p({type:cc.AudioClip})],e.prototype,"showOptionsSfx",void 0),n([p({type:cc.AudioClip})],e.prototype,"hideOptionsSfx",void 0),n([p({type:cc.AudioClip})],e.prototype,"optionChooseSfx",void 0),n([p({type:cc.AudioClip})],e.prototype,"submitClickSfx",void 0),n([p({type:cc.AudioClip})],e.prototype,"correctAnswerSfx",void 0),n([p({type:cc.AudioClip})],e.prototype,"wrongAnswerSfx",void 0),e=n([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../scripts/AudioManager":"AudioManager","../../scripts/utilities/TextLoader":"TextLoader"}],Template2_Tutorial:[function(t,e,o){"use strict";cc._RF.push(e,"a3072lErwNDv5xk0jpI/F6+","Template2_Tutorial");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../scripts/AnalyticsManager"),r=t("../../scripts/StepsController"),a=cc._decorator,c=a.ccclass,p=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.repeat=2,e.hand=null,e.handPositionAtPointer=cc.v3(0,0,0),e.handPositionAtOption1=cc.v3(0,0,0),e.handPositionAtOption2=cc.v3(0,0,0),e.handPositionAtSubmit=cc.v3(0,0,0),e.handScaleDownTo=.7,e.submitButtonScaleDownTo=.9,e.optionHighlight1=null,e.optionHighlight2=null,e.slider=null,e.pointer=null,e.submit=null,e.overlayButton=null,e.closeButton=null,e.analyticsManager=null,e.stepsController=null,e.pointerDefaultPosition=cc.v3(0,0,0),e.handDefaultPosition=cc.v3(0,0,0),e.handOriginalScale=0,e.submitOriginalScale=0,e.timeToMoveToPointer=.75,e.timeToMoveToOption1=.5,e.timeToMoveToOption2=.6,e.timeToMoveToSubmit=.75,e.timeToScale=.3,e.delay=.3,e}return i(e,t),e.prototype.onLoad=function(){this.analyticsManager=cc.find("CommonCanvas").getComponent(s.default),this.stepsController=cc.find("CommonCanvas").getComponent(r.default),this.pointerDefaultPosition=this.pointer.position,this.handDefaultPosition=this.hand.position,this.handOriginalScale=this.hand.scale,this.submitOriginalScale=this.submit.scale,this.node.active=!1},e.prototype.show=function(){var t=this;this.analyticsManager.sendOnViewTutorial(this.stepsController.getCurrentQuestionIndex()),this.overlayButton.interactable=!1,this.closeButton.interactable=!1,this.node.opacity=0,this.node.active=!0,cc.tween(this.node).to(1,{opacity:255}).call(function(){t.overlayButton.interactable=!0,t.closeButton.interactable=!0}).start(),this.scheduleOnce(this.moveHand.bind(this),1)},e.prototype.moveHand=function(){var t=this;cc.tween(this.hand).repeat(this.repeat,cc.tween().call(function(){t.pointer.position=t.pointerDefaultPosition,t.hand.position=t.handDefaultPosition,t.optionHighlight1.active=!1,t.optionHighlight2.active=!1,t.submit.scale=1}).to(this.timeToMoveToPointer,{position:this.handPositionAtPointer}).to(this.timeToScale,{scale:this.handScaleDownTo}).delay(this.delay).call(function(){t.hand.position=t.handPositionAtOption1;var e=t.hand.convertToWorldSpaceAR(cc.v3(0,0,0)),o=t.slider.convertToNodeSpaceAR(e);t.hand.position=t.handPositionAtPointer,cc.tween(t.pointer).to(t.timeToMoveToOption1,{position:o}).start()}).to(this.timeToMoveToOption1,{position:this.handPositionAtOption1}).call(function(){t.optionHighlight1.active=!0}).delay(this.delay).call(function(){t.hand.position=t.handPositionAtOption2;var e=t.hand.convertToWorldSpaceAR(cc.v3(0,0,0)),o=t.slider.convertToNodeSpaceAR(e);t.hand.position=t.handPositionAtOption1,cc.tween(t.pointer).to(t.timeToMoveToOption2,{position:o}).start()}).to(this.timeToMoveToOption2,{position:this.handPositionAtOption2}).call(function(){t.optionHighlight1.active=!1,t.optionHighlight2.active=!0}).delay(this.delay).to(this.timeToScale,{scale:this.handOriginalScale}).delay(this.delay).to(this.timeToMoveToSubmit,{position:this.handPositionAtSubmit}).to(this.timeToScale,{scale:this.handScaleDownTo}).call(function(){t.submit.scale=t.submitButtonScaleDownTo}).to(this.timeToScale,{scale:this.handOriginalScale}).call(function(){t.submit.scale=t.submitOriginalScale}).delay(.5)).call(function(){t.stop()}).start()},e.prototype.onClickStop=function(){this.stop()},e.prototype.stop=function(){cc.Tween.stopAllByTarget(this.node),cc.Tween.stopAllByTarget(this.hand),cc.Tween.stopAllByTarget(this.pointer),this.unscheduleAllCallbacks(),this.node.opacity=0,this.node.active=!1,this.node.emit("onTutorialStop")},n([p({type:cc.Integer})],e.prototype,"repeat",void 0),n([p(cc.Node)],e.prototype,"hand",void 0),n([p(cc.Vec3)],e.prototype,"handPositionAtPointer",void 0),n([p(cc.Vec3)],e.prototype,"handPositionAtOption1",void 0),n([p(cc.Vec3)],e.prototype,"handPositionAtOption2",void 0),n([p(cc.Vec3)],e.prototype,"handPositionAtSubmit",void 0),n([p({type:cc.Float})],e.prototype,"handScaleDownTo",void 0),n([p({type:cc.Float})],e.prototype,"submitButtonScaleDownTo",void 0),n([p(cc.Node)],e.prototype,"optionHighlight1",void 0),n([p(cc.Node)],e.prototype,"optionHighlight2",void 0),n([p(cc.Node)],e.prototype,"slider",void 0),n([p(cc.Node)],e.prototype,"pointer",void 0),n([p(cc.Node)],e.prototype,"submit",void 0),n([p(cc.Button)],e.prototype,"overlayButton",void 0),n([p(cc.Button)],e.prototype,"closeButton",void 0),e=n([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../scripts/AnalyticsManager":"AnalyticsManager","../../scripts/StepsController":"StepsController"}],Template3_OptionHandler:[function(t,e,o){"use strict";cc._RF.push(e,"c2a7aRTJzxJMKVwupGjNHh2","Template3_OptionHandler");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../scripts/AudioManager"),r=t("../../scripts/utilities/TextLoader"),a=cc._decorator,c=a.ccclass,p=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startPosition=0,e.endPosition=0,e.autoHideOnSubmit=!0,e.submitInactiveSpriteFrame=null,e.highlightSpriteFrame=null,e.correctSpriteFrame=null,e.wrongSpriteFrame=null,e.showOptionsSfx=null,e.hideOptionsSfx=null,e.optionClickSfx=null,e.submitClickSfx=null,e.toggleContainer=null,e.optionToggles=[],e.optionSprites=[],e.optionHighlightsSprites=[],e.optionLabels=[],e.optionRichTexts=[],e.optionTextLoaders=[],e.submitButton=null,e.submitButtonSprite=null,e.submitSprite=null,e.submitLabel=null,e.submitTextLoader=null,e.submitActiveSpriteFrame=null,e.audioManager=null,e.previousSelectedOption=-1,e.selectedOption=-1,e.correctOption=-1,e}return i(e,t),e.prototype.onLoad=function(){this.getReferences(),this.initialize()},e.prototype.getReferences=function(){var t=this;this.audioManager=cc.find("CommonCanvas").getComponent(s.default),this.toggleContainer=this.node.getChildByName("ToggleContainer").getComponent(cc.ToggleContainer),this.optionToggles=this.toggleContainer.toggleItems,this.optionToggles.forEach(function(e){var o=e.node.children[0],i=0;0==o.children.length&&(i=1,o=e.node),t.optionSprites.push(o.children[i].getComponent(cc.Sprite)),t.optionHighlightsSprites.push(o.children[i+1].getComponent(cc.Sprite));var n=o.children[2+i].getComponent(cc.RichText);null!=n?(t.optionRichTexts.push(n),t.optionTextLoaders.push(n.node.getComponent(r.default))):(t.optionLabels.push(o.children[2+i].getComponent(cc.Label)),t.optionTextLoaders.push(o.children[2+i].getComponent(r.default)))}),this.submitButton=this.node.getChildByName("Submit").getComponent(cc.Button),null==this.submitButton.target?this.submitButtonSprite=this.submitButton.getComponent(cc.Sprite):this.submitButtonSprite=this.submitButton.target.getComponent(cc.Sprite);var e=this.submitButton.node.children[0];0==e.children.length&&(e=this.submitButton.node),this.submitSprite=e.children[0].getComponent(cc.Sprite),this.submitLabel=e.children[1].getComponent(cc.Label),this.submitTextLoader=this.submitLabel.node.getComponent(r.default)},e.prototype.initialize=function(){this.node.y=this.startPosition,this.submitActiveSpriteFrame=this.submitButtonSprite.spriteFrame},e.prototype.show=function(t,e,o,i,n){var s=this;this.correctOption=t,this.enableOrDisableOptions(!1),this.submitButton.interactable=!1,this.submitInactiveSpriteFrame&&(this.submitButtonSprite.spriteFrame=this.submitInactiveSpriteFrame);var r=e&&e.length>0&&i&&i.length>0;if(this.optionLabels.forEach(function(t){t.verticalAlign=r?cc.Label.VerticalAlign.BOTTOM:cc.Label.VerticalAlign.CENTER}),r=o&&o.length>0&&null!=n,this.submitLabel.verticalAlign=r?cc.Label.VerticalAlign.BOTTOM:cc.Label.VerticalAlign.CENTER,e&&e.length>0)for(var a=0;a<this.optionTextLoaders.length;a++)this.optionTextLoaders[a].changeLabel(e[a]),this.optionTextLoaders[a].node.active=!0;else for(a=0;a<this.optionTextLoaders.length;a++)this.optionTextLoaders[a].node.active=!1;if(null!=o&&""!=o?(this.submitTextLoader.changeLabel(o),this.submitTextLoader.node.active=!0):this.submitTextLoader.node.active=!1,i)for(a=0;a<this.optionSprites.length;a++)this.optionSprites[a].spriteFrame=i[a],this.optionSprites[a].node.active=!0;else for(a=0;a<this.optionSprites.length;a++)this.optionSprites[a].node.active=!0;n?(this.submitSprite.spriteFrame=n,this.submitSprite.node.active=!0):this.submitSprite.node.active=!1,this.optionHighlightsSprites.forEach(function(t){t.spriteFrame=s.highlightSpriteFrame}),this.toggleContainer.allowSwitchOff=!0,this.optionToggles.forEach(function(t){t.isChecked=!1}),cc.tween(this.node).to(1,{y:this.endPosition}).call(function(){s.enableOrDisableOptions(!0),s.node.emit("onOptionsShown")}).start(),this.showOptionsSfx&&this.audioManager.play("showOptionsSfx",this.showOptionsSfx,!1,"SFX")},e.prototype.enableOrDisableOptions=function(t){this.optionToggles.forEach(function(e){e.interactable=t})},e.prototype.hide=function(){var t=this;cc.tween(this.node).to(1,{y:this.startPosition}).call(function(){t.node.emit("onOptionsHide")}).start(),this.hideOptionsSfx&&this.audioManager.play("hideOptionsSfx",this.hideOptionsSfx,!1,"SFX")},e.prototype.onClickOption=function(t,e){e=parseInt(e.toString()),this.toggleContainer.allowSwitchOff=!1,this.previousSelectedOption=this.selectedOption,this.selectedOption=e,this.submitButton.interactable=!0,this.submitButtonSprite.spriteFrame=this.submitActiveSpriteFrame,this.optionClickSfx&&this.audioManager.play("optionClickSfx",this.optionClickSfx,!1,"SFX"),this.node.emit("onOptionChange",this.previousSelectedOption,this.selectedOption)},e.prototype.onClickSubmit=function(){this.enableOrDisableOptions(!1),this.submitButton.interactable=!1,this.submitInactiveSpriteFrame&&(this.submitButtonSprite.spriteFrame=this.submitInactiveSpriteFrame),this.autoHideOnSubmit&&this.scheduleOnce(this.hide.bind(this),.5);var t=this.selectedOption==this.correctOption;this.optionHighlightsSprites[this.selectedOption].spriteFrame=t?this.correctSpriteFrame:this.wrongSpriteFrame,this.submitClickSfx&&this.audioManager.play("submitClickSfx",this.submitClickSfx,!1,"SFX"),this.node.emit("onSubmit",this.selectedOption,t)},n([p(cc.Float)],e.prototype,"startPosition",void 0),n([p(cc.Float)],e.prototype,"endPosition",void 0),n([p(cc.Boolean)],e.prototype,"autoHideOnSubmit",void 0),n([p(cc.SpriteFrame)],e.prototype,"submitInactiveSpriteFrame",void 0),n([p(cc.SpriteFrame)],e.prototype,"highlightSpriteFrame",void 0),n([p(cc.SpriteFrame)],e.prototype,"correctSpriteFrame",void 0),n([p(cc.SpriteFrame)],e.prototype,"wrongSpriteFrame",void 0),n([p({type:cc.AudioClip})],e.prototype,"showOptionsSfx",void 0),n([p({type:cc.AudioClip})],e.prototype,"hideOptionsSfx",void 0),n([p({type:cc.AudioClip})],e.prototype,"optionClickSfx",void 0),n([p({type:cc.AudioClip})],e.prototype,"submitClickSfx",void 0),e=n([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../scripts/AudioManager":"AudioManager","../../scripts/utilities/TextLoader":"TextLoader"}],Template3_Tutorial:[function(t,e,o){"use strict";cc._RF.push(e,"38983vvhhRLS5TYIMxvl3lY","Template3_Tutorial");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../scripts/AnalyticsManager"),r=t("../../scripts/StepsController"),a=cc._decorator,c=a.ccclass,p=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.repeat=2,e.hand=null,e.option1Checkmark=null,e.option2Checkmark=null,e.handPositionAtOption1=cc.v3(-302.224,-46.52,0),e.handPositionAtOption2=cc.v3(55.912,-46.52,0),e.handPositionAtSubmit=cc.v3(379.193,-44.83,0),e.scaleDownHandTo=.7,e.timeToMoveToOption1=.8,e.timeToMoveToOption2=1,e.timeToMoveToSubmit=1,e.timeToScaleHand=.2,e.delay=.3,e.overlayButton=null,e.closeButton=null,e.submitButton=null,e.handDefaultPosition=cc.v3(0,0,0),e.handOriginalScale=0,e}return i(e,t),e.prototype.onLoad=function(){this.analyticsManager=cc.find("CommonCanvas").getComponent(s.default),this.stepsController=cc.find("CommonCanvas").getComponent(r.default),null==this.hand&&(this.hand=this.node.getChildByName("HandIcon")),this.handDefaultPosition=this.hand.position,this.handOriginalScale=this.hand.scale;var t=this.node.getChildByName("Options").getChildByName("ToggleContainer");null==this.option1Checkmark&&(this.option1Checkmark=t.getChildByName("toggle1").getChildByName("checkmark_1")),null==this.option2Checkmark&&(this.option2Checkmark=t.getChildByName("toggle2").getChildByName("checkmark_2")),this.node.active=!1},e.prototype.show=function(){var t=this;this.analyticsManager.sendOnViewTutorial(this.stepsController.getCurrentQuestionIndex()),this.overlayButton.interactable=!1,this.closeButton.interactable=!1,this.submitButton.interactable=!1,this.node.opacity=0,this.node.active=!0,cc.tween(this.node).to(1,{opacity:255}).call(function(){t.overlayButton.interactable=!0,t.closeButton.interactable=!0}).start(),this.scheduleOnce(this.moveHand.bind(this),1)},e.prototype.moveHand=function(){var t=this;cc.tween(this.hand).repeat(this.repeat,cc.tween().call(function(){t.hand.position=t.handDefaultPosition,t.hand.scale=t.handOriginalScale,t.option1Checkmark.active=!1,t.option2Checkmark.active=!1,t.submitButton.interactable=!1,t.submitButton.node.scale=1}).to(this.timeToMoveToOption1,{position:this.handPositionAtOption1}).to(this.timeToScaleHand,{scale:this.scaleDownHandTo}).call(function(){t.option1Checkmark.active=!0,t.submitButton.interactable=!0}).to(this.timeToScaleHand,{scale:this.handOriginalScale}).delay(this.delay).to(this.timeToMoveToOption2,{position:this.handPositionAtOption2}).to(this.timeToScaleHand,{scale:this.scaleDownHandTo}).call(function(){t.option1Checkmark.active=!1,t.option2Checkmark.active=!0}).to(this.timeToScaleHand,{scale:this.handOriginalScale}).delay(this.delay).to(this.timeToMoveToSubmit,{position:this.handPositionAtSubmit}).to(this.timeToScaleHand,{scale:this.scaleDownHandTo}).call(function(){t.submitButton.node.scale=.9}).delay(this.delay).to(this.timeToScaleHand,{scale:this.handOriginalScale}).call(function(){t.submitButton.node.scale=1}).delay(.5)).call(function(){t.stopTutorial()}).start()},e.prototype.stopTutorial=function(){cc.Tween.stopAllByTarget(this.node),cc.Tween.stopAllByTarget(this.hand),this.unscheduleAllCallbacks(),this.node.opacity=0,this.node.active=!1,this.node.emit("onTutorialStop")},n([p({type:cc.Integer})],e.prototype,"repeat",void 0),n([p(cc.Node)],e.prototype,"hand",void 0),n([p(cc.Node)],e.prototype,"option1Checkmark",void 0),n([p(cc.Node)],e.prototype,"option2Checkmark",void 0),n([p(cc.Vec3)],e.prototype,"handPositionAtOption1",void 0),n([p(cc.Vec3)],e.prototype,"handPositionAtOption2",void 0),n([p(cc.Vec3)],e.prototype,"handPositionAtSubmit",void 0),n([p({type:cc.Float})],e.prototype,"scaleDownHandTo",void 0),n([p({type:cc.Float})],e.prototype,"timeToMoveToOption1",void 0),n([p({type:cc.Float})],e.prototype,"timeToMoveToOption2",void 0),n([p({type:cc.Float})],e.prototype,"timeToMoveToSubmit",void 0),n([p({type:cc.Float})],e.prototype,"timeToScaleHand",void 0),n([p({type:cc.Float})],e.prototype,"delay",void 0),n([p(cc.Button)],e.prototype,"overlayButton",void 0),n([p(cc.Button)],e.prototype,"closeButton",void 0),n([p(cc.Button)],e.prototype,"submitButton",void 0),e=n([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../scripts/AnalyticsManager":"AnalyticsManager","../../scripts/StepsController":"StepsController"}],Template4_OptionHandler:[function(t,e,o){"use strict";cc._RF.push(e,"c1b1bcixVpBqLh1jcTVPWBc","Template4_OptionHandler");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../scripts/AudioManager"),r=t("../../scripts/utilities/TextLoader"),a=cc._decorator,c=a.ccclass,p=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startPosition=0,e.endPosition=0,e.autoHideOnSubmit=!0,e.handleAutoGrayEffect=!1,e.correctOption=-1,e.bgSprite=null,e.enabledBGSprite=null,e.disabledBGSprite=null,e.optionNode=null,e.enabledOptionBGSprite=null,e.disabledOptionBGSprite=null,e.leftButton=null,e.rightButton=null,e.submitButton=null,e.enabledSubmitSprite=null,e.disabledSubmitSprite=null,e.showOptionsSfx=null,e.hideOptionsSfx=null,e.optionChooseSfx=null,e.submitClickSfx=null,e.correctAnswerSfx=null,e.wrongAnswerSfx=null,e.audioManager=null,e.optionBGSprite=null,e.optionImage=null,e.optionLabel=null,e.optionTextLoader=null,e.submitSprite=null,e.submitImage=null,e.submitLabel=null,e.submitTextLoader=null,e.numberOfOptions=0,e.optionImages=[],e.optionKeys=[],e.isUsingImages=!1,e.isUsingTexts=!1,e.selectedOption=-1,e.isCorrect=!1,e.timeToShowOrHide=.5,e}return i(e,t),e.prototype.onLoad=function(){this.getReferences(),this.initialize()},e.prototype.getReferences=function(){this.audioManager=cc.find("CommonCanvas").getComponent(s.default),this.optionBGSprite=this.optionNode.getChildByName("Background").getComponent(cc.Sprite),this.optionImage=this.optionNode.getChildByName("Image").getComponent(cc.Sprite),this.optionLabel=this.optionNode.getChildByName("Label").getComponent(cc.Label),this.optionTextLoader=this.optionLabel.getComponent(r.default),this.submitSprite=this.submitButton.target.getComponent(cc.Sprite),this.submitImage=this.submitButton.target.getChildByName("Image").getComponent(cc.Sprite),this.submitLabel=this.submitButton.target.getChildByName("Label").getComponent(cc.Label),this.submitTextLoader=this.submitLabel.getComponent(r.default)},e.prototype.initialize=function(){this.node.y=this.startPosition},e.prototype.onClickLeftButton=function(){var t=-1;t=-1==this.selectedOption||0==this.selectedOption?this.numberOfOptions-1:this.selectedOption-1,this.onOptionChange(t)},e.prototype.onClickRightButton=function(){var t=-1;t=this.selectedOption==this.numberOfOptions-1?0:this.selectedOption+1,this.onOptionChange(t)},e.prototype.onOptionChange=function(t){if(t!=this.selectedOption){this.isUsingImages&&(this.optionImage.spriteFrame=this.optionImages[t]),this.isUsingTexts&&this.optionTextLoader.changeLabel(this.optionKeys[t]),this.optionImage.node.active=this.isUsingImages,this.optionTextLoader.node.active=this.isUsingTexts,this.optionChooseSfx&&this.audioManager.play("optionChooseSfx",this.optionChooseSfx,!1,"SFX"),this.enabledSubmitSprite&&(this.submitSprite.spriteFrame=this.enabledSubmitSprite),this.submitButton.interactable=!0,this.handleAutoGrayEffect&&(this.submitButton.enableAutoGrayEffect=!1);var e=this.selectedOption;this.selectedOption=t,this.node.emit("onOptionChange",e,this.selectedOption)}},e.prototype.onClickSubmit=function(){this.submitClickSfx&&this.audioManager.play("submitClickSfx",this.submitClickSfx,!1,"SFX"),this.disabledBGSprite&&(this.bgSprite.spriteFrame=this.disabledBGSprite),this.disabledOptionBGSprite&&(this.optionBGSprite.spriteFrame=this.disabledOptionBGSprite),this.leftButton.interactable=!1,this.rightButton.interactable=!1,this.submitButton.interactable=!1,this.disabledSubmitSprite?(this.submitSprite.spriteFrame=this.disabledSubmitSprite,this.handleAutoGrayEffect&&(this.submitButton.enableAutoGrayEffect=!1)):this.handleAutoGrayEffect&&(this.submitButton.enableAutoGrayEffect=!0),this.isCorrect=this.selectedOption==this.correctOption,this.scheduleOnce(this.playFeedback.bind(this),.5),this.node.emit("onSubmit",this.selectedOption,this.isCorrect),this.autoHideOnSubmit&&this.scheduleOnce(this.hide.bind(this),.5)},e.prototype.playFeedback=function(){this.isCorrect&&this.correctAnswerSfx&&this.audioManager.play("correctAnswerSfx",this.correctAnswerSfx,!1,"SFX"),!this.isCorrect&&this.wrongAnswerSfx&&this.audioManager.play("wrongAnswerSfx",this.wrongAnswerSfx,!1,"SFX")},e.prototype.show=function(t,e,o,i,n,s){var r=this;this.correctOption=t,this.selectedOption=-1,this.isCorrect=!1,this.optionImages=i,this.optionKeys=o,this.isUsingImages=i&&i.length>0,this.isUsingTexts=o&&o.length>0,this.isUsingImages?this.numberOfOptions=i.length:this.numberOfOptions=o.length,this.enabledBGSprite&&(this.bgSprite.spriteFrame=this.enabledBGSprite),this.enabledOptionBGSprite&&(this.optionBGSprite.spriteFrame=this.enabledOptionBGSprite);var a=this.isUsingImages&&this.isUsingTexts;this.optionLabel.verticalAlign=a?cc.Label.VerticalAlign.BOTTOM:cc.Label.VerticalAlign.CENTER,this.optionTextLoader.changeLabel(e),this.optionTextLoader.node.active=!0,this.optionImage.node.active=!1,this.leftButton.interactable=!1,this.rightButton.interactable=!1,a=n&&n.length>0&&null!=s,this.submitLabel.verticalAlign=a?cc.Label.VerticalAlign.BOTTOM:cc.Label.VerticalAlign.CENTER,null!=n&&""!=n?(this.submitTextLoader.changeLabel(n),this.submitTextLoader.node.active=!0):this.submitTextLoader.node.active=!1,s?(this.submitImage.spriteFrame=s,this.submitImage.node.active=!0):this.submitImage.node.active=!1,this.submitButton.interactable=!1,this.disabledSubmitSprite?(this.submitSprite.spriteFrame=this.disabledSubmitSprite,this.handleAutoGrayEffect&&(this.submitButton.enableAutoGrayEffect=!1)):this.handleAutoGrayEffect&&(this.submitButton.enableAutoGrayEffect=!0),cc.tween(this.node).to(this.timeToShowOrHide,{y:this.endPosition}).call(function(){r.leftButton.interactable=!0,r.rightButton.interactable=!0,r.node.emit("onOptionsShown")}).start(),this.showOptionsSfx&&this.audioManager.play("showOptionsSfx",this.showOptionsSfx,!1,"SFX")},e.prototype.hide=function(){var t=this;cc.tween(this.node).to(this.timeToShowOrHide,{y:this.startPosition}).call(function(){t.node.emit("onOptionsHide")}).start(),this.hideOptionsSfx&&this.audioManager.play("hideOptionsSfx",this.hideOptionsSfx,!1,"SFX")},n([p({type:cc.Float})],e.prototype,"startPosition",void 0),n([p({type:cc.Float})],e.prototype,"endPosition",void 0),n([p(cc.Boolean)],e.prototype,"autoHideOnSubmit",void 0),n([p(cc.Boolean)],e.prototype,"handleAutoGrayEffect",void 0),n([p({type:cc.Integer})],e.prototype,"correctOption",void 0),n([p(cc.Sprite)],e.prototype,"bgSprite",void 0),n([p(cc.SpriteFrame)],e.prototype,"enabledBGSprite",void 0),n([p(cc.SpriteFrame)],e.prototype,"disabledBGSprite",void 0),n([p(cc.Node)],e.prototype,"optionNode",void 0),n([p(cc.SpriteFrame)],e.prototype,"enabledOptionBGSprite",void 0),n([p(cc.SpriteFrame)],e.prototype,"disabledOptionBGSprite",void 0),n([p(cc.Button)],e.prototype,"leftButton",void 0),n([p(cc.Button)],e.prototype,"rightButton",void 0),n([p(cc.Button)],e.prototype,"submitButton",void 0),n([p(cc.SpriteFrame)],e.prototype,"enabledSubmitSprite",void 0),n([p(cc.SpriteFrame)],e.prototype,"disabledSubmitSprite",void 0),n([p({type:cc.AudioClip})],e.prototype,"showOptionsSfx",void 0),n([p({type:cc.AudioClip})],e.prototype,"hideOptionsSfx",void 0),n([p({type:cc.AudioClip})],e.prototype,"optionChooseSfx",void 0),n([p({type:cc.AudioClip})],e.prototype,"submitClickSfx",void 0),n([p({type:cc.AudioClip})],e.prototype,"correctAnswerSfx",void 0),n([p({type:cc.AudioClip})],e.prototype,"wrongAnswerSfx",void 0),e=n([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../scripts/AudioManager":"AudioManager","../../scripts/utilities/TextLoader":"TextLoader"}],Template4_Tutorial:[function(t,e,o){"use strict";cc._RF.push(e,"00a74zK/TND2ajVV5xjQhY1","Template4_Tutorial");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../scripts/AnalyticsManager"),r=t("../../scripts/StepsController"),a=t("../../scripts/utilities/TextLoader"),c=cc._decorator,p=c.ccclass,l=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.repeat=2,e.hand=null,e.leftButtonSprite=null,e.rightButtonSprite=null,e.submitSprite=null,e.disabledSubmitSprite=null,e.buttonPressedColor=cc.Color.GRAY,e.handPositionAtLeftButton=cc.v3(0,0,0),e.handPositionAtRightButton=cc.v3(0,0,0),e.handPositionAtSubmittButton=cc.v3(0,0,0),e.handScaleDownTo=.7,e.timeToMoveToLeftButton=1,e.timeToMoveToRightButton=1,e.timeToMoveToSubmitButton=1,e.timeToScale=1,e.delay=.3,e.textLoader=null,e.defaultKey="",e.optionKeys=[],e.overlayButton=null,e.closeButton=null,e.stepsController=null,e.analyticsManager=null,e.handDefaultPosition=cc.v3(0,0,0),e.originalScaleOfHand=0,e.normalColorOfButtons=cc.Color.WHITE,e.enabledSubmitSprite=null,e}return i(e,t),e.prototype.onLoad=function(){this.analyticsManager=cc.find("CommonCanvas").getComponent(s.default),this.stepsController=cc.find("CommonCanvas").getComponent(r.default),this.handDefaultPosition=this.hand.position,this.originalScaleOfHand=this.hand.scale,this.normalColorOfButtons=this.leftButtonSprite.node.color,this.enabledSubmitSprite=this.submitSprite.spriteFrame,this.node.active=!1},e.prototype.start=function(){this.textLoader.changeLabel(this.defaultKey)},e.prototype.show=function(){var t=this;this.analyticsManager.sendOnViewTutorial(this.stepsController.getCurrentQuestionIndex()),this.overlayButton.interactable=!1,this.closeButton.interactable=!1,this.node.opacity=0,this.node.active=!0,cc.tween(this.node).to(1,{opacity:255}).call(function(){t.overlayButton.interactable=!0,t.closeButton.interactable=!0}).start(),this.scheduleOnce(this.moveHand.bind(this),1)},e.prototype.moveHand=function(){var t=this;cc.tween(this.hand).repeat(this.repeat,cc.tween().call(function(){t.hand.position=t.handDefaultPosition,t.leftButtonSprite.node.color=t.normalColorOfButtons,t.rightButtonSprite.node.color=t.normalColorOfButtons,t.disabledSubmitSprite&&(t.submitSprite.spriteFrame=t.disabledSubmitSprite),t.textLoader.changeLabel(t.defaultKey)}).to(this.timeToMoveToLeftButton,{position:this.handPositionAtLeftButton}).to(this.timeToScale,{scale:this.handScaleDownTo}).call(function(){t.leftButtonSprite.node.color=t.buttonPressedColor,t.enabledSubmitSprite&&(t.submitSprite.spriteFrame=t.enabledSubmitSprite),t.textLoader.changeLabel(t.optionKeys[t.optionKeys.length-1])}).delay(this.delay).call(function(){t.leftButtonSprite.node.color=t.normalColorOfButtons}).to(this.timeToScale,{scale:this.originalScaleOfHand}).delay(this.delay).to(this.timeToScale,{scale:this.handScaleDownTo}).call(function(){t.leftButtonSprite.node.color=t.buttonPressedColor,t.textLoader.changeLabel(t.optionKeys[t.optionKeys.length-2])}).delay(this.delay).call(function(){t.leftButtonSprite.node.color=t.normalColorOfButtons}).to(this.timeToScale,{scale:this.originalScaleOfHand}).delay(this.delay).to(this.timeToMoveToRightButton,{position:this.handPositionAtRightButton}).to(this.timeToScale,{scale:this.handScaleDownTo}).call(function(){t.rightButtonSprite.node.color=t.buttonPressedColor,t.textLoader.changeLabel(t.optionKeys[t.optionKeys.length-1])}).delay(this.delay).call(function(){t.rightButtonSprite.node.color=t.normalColorOfButtons}).to(this.timeToScale,{scale:this.originalScaleOfHand}).delay(this.delay).to(this.timeToMoveToSubmitButton,{position:this.handPositionAtSubmittButton}).to(this.timeToScale,{scale:this.handScaleDownTo}).call(function(){t.submitSprite.node.scale=.9}).delay(this.delay).call(function(){t.submitSprite.node.scale=1}).to(this.timeToScale,{scale:this.originalScaleOfHand}).delay(this.delay)).call(function(){t.stop()}).start()},e.prototype.onClickStop=function(){this.stop()},e.prototype.stop=function(){cc.Tween.stopAllByTarget(this.node),cc.Tween.stopAllByTarget(this.hand),this.unscheduleAllCallbacks(),this.node.opacity=0,this.node.active=!1,this.node.emit("onTutorialStop")},n([l({type:cc.Integer})],e.prototype,"repeat",void 0),n([l(cc.Node)],e.prototype,"hand",void 0),n([l(cc.Sprite)],e.prototype,"leftButtonSprite",void 0),n([l(cc.Sprite)],e.prototype,"rightButtonSprite",void 0),n([l(cc.Sprite)],e.prototype,"submitSprite",void 0),n([l(cc.SpriteFrame)],e.prototype,"disabledSubmitSprite",void 0),n([l(cc.Color)],e.prototype,"buttonPressedColor",void 0),n([l(cc.Vec3)],e.prototype,"handPositionAtLeftButton",void 0),n([l(cc.Vec3)],e.prototype,"handPositionAtRightButton",void 0),n([l(cc.Vec3)],e.prototype,"handPositionAtSubmittButton",void 0),n([l({type:cc.Float})],e.prototype,"handScaleDownTo",void 0),n([l({type:cc.Float})],e.prototype,"timeToMoveToLeftButton",void 0),n([l({type:cc.Float})],e.prototype,"timeToMoveToRightButton",void 0),n([l({type:cc.Float})],e.prototype,"timeToMoveToSubmitButton",void 0),n([l({type:cc.Float})],e.prototype,"timeToScale",void 0),n([l({type:cc.Float})],e.prototype,"delay",void 0),n([l(a.default)],e.prototype,"textLoader",void 0),n([l({type:cc.String})],e.prototype,"defaultKey",void 0),n([l({type:cc.String})],e.prototype,"optionKeys",void 0),n([l(cc.Button)],e.prototype,"overlayButton",void 0),n([l(cc.Button)],e.prototype,"closeButton",void 0),e=n([p],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../scripts/AnalyticsManager":"AnalyticsManager","../../scripts/StepsController":"StepsController","../../scripts/utilities/TextLoader":"TextLoader"}],Template5_OptionDrag:[function(t,e,o){"use strict";cc._RF.push(e,"1f256bXt3xAVJPGSr8mte6+","Template5_OptionDrag");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./Template5_OptionHandler"),r=cc._decorator,a=r.ccclass,c=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.optionHandler=null,e.targetPos=cc.v3(0,0,0),e.minDistanceFromTarget=20,e.canvas=null,e.gameNode=null,e.originalParent=null,e.initialPos=cc.v3(0,0,0),e.offsetPos=cc.v3(0,0,0),e.optionIndex=-1,e.isActivated=!1,e.isDragStarted=!1,e}var o;return i(e,t),o=e,e.prototype.onLoad=function(){this.canvas=cc.find("CommonCanvas"),this.gameNode=cc.find("GameNode"),this.originalParent=this.node.parent,this.initialPos=this.node.position},e.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart.bind(this),this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove.bind(this),this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd.bind(this),this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd.bind(this),this)},e.prototype.onTouchStart=function(t){if(this.isActivated&&!this.isAnyOtherOptionsBeingDragged()){o.currentDraggedOption=this,this.isDragStarted=!1;var e=this.node.convertToWorldSpaceAR(cc.v2(0,0)),i=this.canvas.convertToNodeSpaceAR(e);this.node.parent=this.gameNode,this.node.position=cc.v3(i),this.offsetPos=cc.Vec3.subtract(this.offsetPos,this.node.position,cc.v3(t.getLocation()))}},e.prototype.isAnyOtherOptionsBeingDragged=function(){return null!=o.currentDraggedOption&&o.currentDraggedOption!=this},e.prototype.onTouchMove=function(t){if(this.isActivated&&o.currentDraggedOption==this){this.isDragStarted||(this.isDragStarted=!0,this.optionHandler.onDragStart(this.optionIndex));var e=cc.v3(0,0,0);e=cc.Vec3.add(e,this.offsetPos,cc.v3(t.getLocation())),this.node.position=e}},e.prototype.onTouchEnd=function(t){this.isActivated&&(o.currentDraggedOption==this&&(o.currentDraggedOption=null,this.optionHandler.onDragEnd(this.optionIndex),cc.Vec3.distance(this.node.position,this.targetPos)<=this.minDistanceFromTarget?(this.deactivate(),this.node.active=!1,this.node.parent=this.originalParent,this.node.position=this.initialPos,this.optionHandler.onOptionPlaced(this.optionIndex)):(this.node.parent=this.originalParent,this.node.position=this.initialPos)))},e.prototype.activate=function(t){void 0!=t&&(this.optionIndex=t),this.isActivated=!0},e.prototype.deactivate=function(){this.isActivated=!1},e.prototype.reset=function(){this.node.parent=this.originalParent,this.node.position=this.initialPos,this.node.active=!0,this.activate()},e.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart.bind(this),this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove.bind(this),this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd.bind(this),this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd.bind(this),this)},e.currentDraggedOption=null,n([c(s.default)],e.prototype,"optionHandler",void 0),n([c(cc.Vec3)],e.prototype,"targetPos",void 0),n([c(cc.Boolean)],e.prototype,"minDistanceFromTarget",void 0),e=o=n([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./Template5_OptionHandler":"Template5_OptionHandler"}],Template5_OptionHandler:[function(t,e,o){"use strict";cc._RF.push(e,"f08195nLeJMJIDvSimmk03t","Template5_OptionHandler");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../scripts/AudioManager"),r=t("../../scripts/utilities/TextLoader"),a=t("./Template5_OptionDrag"),c=cc._decorator,p=c.ccclass,l=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startPosition=-700,e.endPosition=-300,e.autoHide=!0,e.enabledOption=null,e.disabledOption=null,e.showOptionsSfx=null,e.hideOptionsSfx=null,e.dragStartSfx=null,e.optionPlacedSfx=null,e.options=[],e.optionBGs=[],e.optionImages=[],e.optionLabels=[],e.optionTextLoaders=[],e.optionDrags=[],e.timeToShowOrHide=.5,e.delayToAutoHide=.5,e.audioManager=null,e.correctOption=-1,e}return i(e,t),e.prototype.onLoad=function(){this.getReferences()},e.prototype.getReferences=function(){var t=this;this.audioManager=cc.find("CommonCanvas").getComponent(s.default);var e=this.node.getChildByName("Options");this.options=e.children,this.options.forEach(function(e){t.optionDrags.push(e.getComponent(a.default));var o=e.getChildByName("Background").getComponent(cc.Sprite);t.optionBGs.push(o),t.optionImages.push(o.node.getChildByName("Image").getComponent(cc.Sprite));var i=o.node.getChildByName("Label").getComponent(cc.Label);t.optionLabels.push(i),t.optionTextLoaders.push(i.node.getComponent(r.default))})},e.prototype.show=function(t,e,o,i){var n=this;this.correctOption=t;var s,r;if(s=e&&e.length>0,r=o&&o.length>0,void 0==i||i){var a=s&&r;this.optionLabels.forEach(function(t){t.verticalAlign=a?cc.Label.VerticalAlign.BOTTOM:cc.Label.VerticalAlign.CENTER})}if(s)for(var c=0;c<this.optionTextLoaders.length;c++)this.optionTextLoaders[c].changeLabel(e[c]);if(this.optionLabels.forEach(function(t){t.node.active=s}),r)for(c=0;c<this.optionImages.length;c++)this.optionImages[c].spriteFrame=o[c];this.optionImages.forEach(function(t){t.node.active=r}),this.enabledOption&&this.optionBGs.forEach(function(t){t.spriteFrame=n.enabledOption}),this.optionDrags.forEach(function(t){t.reset(),t.deactivate()}),cc.tween(this.node).to(this.timeToShowOrHide,{y:this.endPosition}).call(function(){for(var t=0;t<n.optionDrags.length;t++)n.optionDrags[t].activate(t);n.node.emit("onOptionsShown")}).start(),this.showOptionsSfx&&this.audioManager.play("showOptionsSfx",this.showOptionsSfx,!1,"SFX")},e.prototype.onDragStart=function(t){this.dragStartSfx&&this.audioManager.play("dragStartSfx",this.dragStartSfx,!1,"SFX"),this.node.emit("onDragStart",t)},e.prototype.onDragEnd=function(t){this.node.emit("onDragEnd",t)},e.prototype.onOptionPlaced=function(t){var e=t==this.correctOption;this.optionPlacedSfx&&this.audioManager.play("optionPlacedSfx",this.optionPlacedSfx,!1,"SFX"),this.optionDrags.forEach(function(t){t.deactivate()}),this.node.emit("onOptionPlaced",e,t),this.autoHide&&this.scheduleOnce(this.hide.bind(this),this.delayToAutoHide)},e.prototype.hide=function(){var t=this;cc.tween(this.node).to(this.timeToShowOrHide,{y:this.startPosition}).call(function(){t.node.emit("onOptionsHide")}).start(),this.hideOptionsSfx&&this.audioManager.play("hideOptionsSfx",this.hideOptionsSfx,!1,"SFX")},e.prototype.changeTargetPosition=function(t){this.optionDrags.forEach(function(e){e.targetPos=t})},n([l({type:cc.Float})],e.prototype,"startPosition",void 0),n([l({type:cc.Float})],e.prototype,"endPosition",void 0),n([l(cc.Boolean)],e.prototype,"autoHide",void 0),n([l(cc.SpriteFrame)],e.prototype,"enabledOption",void 0),n([l(cc.SpriteFrame)],e.prototype,"disabledOption",void 0),n([l({type:cc.AudioClip})],e.prototype,"showOptionsSfx",void 0),n([l({type:cc.AudioClip})],e.prototype,"hideOptionsSfx",void 0),n([l({type:cc.AudioClip})],e.prototype,"dragStartSfx",void 0),n([l({type:cc.AudioClip})],e.prototype,"optionPlacedSfx",void 0),e=n([p],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../scripts/AudioManager":"AudioManager","../../scripts/utilities/TextLoader":"TextLoader","./Template5_OptionDrag":"Template5_OptionDrag"}],Template5_Tutorial:[function(t,e,o){"use strict";cc._RF.push(e,"174fcE/g4NAhYDHy33SR6I9","Template5_Tutorial");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../scripts/AnalyticsManager"),r=t("../../scripts/StepsController"),a=cc._decorator,c=a.ccclass,p=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.repeat=2,e.hand=null,e.option=null,e.handPositionAtOption=cc.v3(0,0,0),e.handPositionAtTarget=cc.v3(0,0,0),e.timeToMoveToOption=1,e.timeToMoveToTarget=1,e.timeToScale=.2,e.handScaleDownTo=.7,e.delay=.2,e.overlayButton=null,e.closeButton=null,e.analyticsManager=null,e.stepsController=null,e.handDefaultPosition=cc.v3(0,0,0),e.handOriginalScale=0,e}return i(e,t),e.prototype.onLoad=function(){this.analyticsManager=cc.find("CommonCanvas").getComponent(s.default),this.stepsController=cc.find("CommonCanvas").getComponent(r.default),this.handDefaultPosition=this.hand.position,this.handOriginalScale=this.hand.scale,this.node.active=!1},e.prototype.show=function(){var t=this;this.analyticsManager.sendOnViewTutorial(this.stepsController.getCurrentQuestionIndex()),this.overlayButton.interactable=!1,this.closeButton.interactable=!1,this.node.opacity=0,this.node.active=!0,cc.tween(this.node).to(1,{opacity:255}).call(function(){t.overlayButton.interactable=!0,t.closeButton.interactable=!0}).start(),this.scheduleOnce(this.moveHand.bind(this),1)},e.prototype.moveHand=function(){var t=this;cc.tween(this.hand).repeat(this.repeat,cc.tween().call(function(){t.hand.position=t.handDefaultPosition,t.hand.scale=t.handOriginalScale,t.option.position=t.handPositionAtOption}).delay(this.delay).to(this.timeToMoveToOption,{position:this.handPositionAtOption}).delay(this.delay).to(this.timeToScale,{scale:this.handScaleDownTo}).delay(this.delay).call(function(){cc.tween(t.option).to(t.timeToMoveToTarget,{position:t.handPositionAtTarget}).start()}).to(this.timeToMoveToTarget,{position:this.handPositionAtTarget}).to(this.timeToScale,{scale:this.handOriginalScale}).delay(this.delay).delay(.5)).call(function(){t.stop()}).start()},e.prototype.stop=function(){cc.Tween.stopAllByTarget(this.node),cc.Tween.stopAllByTarget(this.hand),cc.Tween.stopAllByTarget(this.option),this.unscheduleAllCallbacks(),this.node.opacity=0,this.node.active=!1,this.node.emit("onTutorialStop")},e.prototype.onClickStop=function(){this.stop()},n([p({type:cc.Integer})],e.prototype,"repeat",void 0),n([p(cc.Node)],e.prototype,"hand",void 0),n([p(cc.Node)],e.prototype,"option",void 0),n([p(cc.Vec3)],e.prototype,"handPositionAtOption",void 0),n([p(cc.Vec3)],e.prototype,"handPositionAtTarget",void 0),n([p({type:cc.Float})],e.prototype,"timeToMoveToOption",void 0),n([p({type:cc.Float})],e.prototype,"timeToMoveToTarget",void 0),n([p({type:cc.Float})],e.prototype,"timeToScale",void 0),n([p({type:cc.Float})],e.prototype,"handScaleDownTo",void 0),n([p({type:cc.Float})],e.prototype,"delay",void 0),n([p(cc.Button)],e.prototype,"overlayButton",void 0),n([p(cc.Button)],e.prototype,"closeButton",void 0),e=n([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../scripts/AnalyticsManager":"AnalyticsManager","../../scripts/StepsController":"StepsController"}],Template7_OptionHandler:[function(t,e,o){"use strict";cc._RF.push(e,"567cd0XTlRPNJP1KmqDGBxp","Template7_OptionHandler");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../scripts/AudioManager"),r=t("../../scripts/utilities/TextLoader"),a=cc._decorator,c=a.ccclass,p=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startPosition=0,e.endPosition=0,e.autoHide=!0,e.handleAutoGrayEffect=!1,e.enabledBGSprite=null,e.disabledBGSprite=null,e.toggleContainer=null,e.enabledOptionSprite=null,e.disabledOptionSprite=null,e.showOptionsSfx=null,e.hideOptionsSfx=null,e.optionChooseSfx=null,e.correctAnswerSfx=null,e.wrongAnswerSfx=null,e.audioManager=null,e.timeToShowOrHide=.5,e.bg=null,e.toggles=[],e.toggleSprites=[],e.toggleImages=[],e.toggleLabels=[],e.toggleTextLoaders=[],e.correctOption=-1,e.isCorrect=!1,e}return i(e,t),e.prototype.onLoad=function(){this.getReferences(),this.initialize()},e.prototype.getReferences=function(){var t=this;this.audioManager=cc.find("CommonCanvas").getComponent(s.default),this.bg=this.node.getChildByName("BG").getComponent(cc.Sprite),this.toggles=this.toggleContainer.toggleItems,this.toggles.forEach(function(e){var o=e.node.getChildByName("Background");t.toggleSprites.push(o.getComponent(cc.Sprite)),t.toggleImages.push(o.getChildByName("Image").getComponent(cc.Sprite)),t.toggleLabels.push(o.getChildByName("Label").getComponent(cc.Label)),t.toggleTextLoaders.push(o.getChildByName("Label").getComponent(r.default))})},e.prototype.initialize=function(){var t=this;this.node.y=this.startPosition,this.toggles.forEach(function(e){e.node.on("toggle",t.onClickToggle.bind(t),t)})},e.prototype.onClickToggle=function(t){var e=this;this.toggleContainer.allowSwitchOff=!1,this.disabledBGSprite&&(this.bg.spriteFrame=this.disabledBGSprite),this.disabledOptionSprite&&this.toggleSprites.forEach(function(t){t.spriteFrame=e.disabledOptionSprite}),this.toggles.forEach(function(t){t.interactable=!1,e.handleAutoGrayEffect&&(t.enableAutoGrayEffect=!0)});var o=this.toggles.indexOf(t);this.isCorrect=o==this.correctOption,this.optionChooseSfx&&this.audioManager.play("optionChooseSfx",this.optionChooseSfx,!1,"SFX"),this.scheduleOnce(this.playFeedback.bind(this),.5),this.node.emit("onOptionSelected",o,this.isCorrect),this.autoHide&&this.scheduleOnce(this.hide.bind(this),.5)},e.prototype.playFeedback=function(){this.isCorrect&&this.correctAnswerSfx&&this.audioManager.play("correctAnswerSfx",this.correctAnswerSfx,!1,"SFX"),!this.isCorrect&&this.wrongAnswerSfx&&this.audioManager.play("wrongAnswerSfx",this.wrongAnswerSfx,!1,"SFX")},e.prototype.show=function(t,e,o){var i=this;this.correctOption=t,this.isCorrect=!1;var n=e&&e.length>0,s=o&&o.length>0,r=n&&s;if(this.toggleLabels.forEach(function(t){t.verticalAlign=r?cc.Label.VerticalAlign.BOTTOM:cc.Label.VerticalAlign.CENTER}),this.enabledBGSprite&&(this.bg.spriteFrame=this.enabledBGSprite),n)for(var a=0;a<this.toggleTextLoaders.length;a++)this.toggleTextLoaders[a].changeLabel(e[a]),this.toggleTextLoaders[a].node.active=!0;else this.toggleTextLoaders.forEach(function(t){t.node.active=!1});if(s)for(a=0;a<this.toggleImages.length;a++)this.toggleImages[a].spriteFrame=o[a],this.toggleImages[a].node.active=!0;else this.toggleImages.forEach(function(t){t.node.active=!1});this.enabledOptionSprite&&this.toggleSprites.forEach(function(t){t.spriteFrame=i.enabledOptionSprite}),this.toggleContainer.allowSwitchOff=!0,this.toggles.forEach(function(t){t.interactable=!1,t.enableAutoGrayEffect=!1,t.isChecked=!1}),cc.tween(this.node).to(this.timeToShowOrHide,{y:this.endPosition}).call(function(){i.toggles.forEach(function(t){t.interactable=!0,i.handleAutoGrayEffect&&(t.enableAutoGrayEffect=!1),i.node.emit("onOptionsShown")})}).start(),this.showOptionsSfx&&this.audioManager.play("showOptionsSfx",this.showOptionsSfx,!1,"SFX")},e.prototype.hide=function(){var t=this;cc.tween(this.node).to(this.timeToShowOrHide,{y:this.startPosition}).call(function(){t.node.emit("onOptionsHide")}).start(),this.hideOptionsSfx&&this.audioManager.play("hideOptionsSfx",this.hideOptionsSfx,!1,"SFX")},n([p({type:cc.Float})],e.prototype,"startPosition",void 0),n([p({type:cc.Float})],e.prototype,"endPosition",void 0),n([p(cc.Boolean)],e.prototype,"autoHide",void 0),n([p(cc.Boolean)],e.prototype,"handleAutoGrayEffect",void 0),n([p(cc.SpriteFrame)],e.prototype,"enabledBGSprite",void 0),n([p(cc.SpriteFrame)],e.prototype,"disabledBGSprite",void 0),n([p(cc.ToggleContainer)],e.prototype,"toggleContainer",void 0),n([p(cc.SpriteFrame)],e.prototype,"enabledOptionSprite",void 0),n([p(cc.SpriteFrame)],e.prototype,"disabledOptionSprite",void 0),n([p({type:cc.AudioClip})],e.prototype,"showOptionsSfx",void 0),n([p({type:cc.AudioClip})],e.prototype,"hideOptionsSfx",void 0),n([p({type:cc.AudioClip})],e.prototype,"optionChooseSfx",void 0),n([p({type:cc.AudioClip})],e.prototype,"correctAnswerSfx",void 0),n([p({type:cc.AudioClip})],e.prototype,"wrongAnswerSfx",void 0),e=n([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../scripts/AudioManager":"AudioManager","../../scripts/utilities/TextLoader":"TextLoader"}],Template7_Turorial:[function(t,e,o){"use strict";cc._RF.push(e,"498e7OnaTVOIrQEx+ypZCHb","Template7_Turorial");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../scripts/AnalyticsManager"),r=t("../../scripts/StepsController"),a=cc._decorator,c=a.ccclass,p=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.repeat=2,e.hand=null,e.option=null,e.handPositionAtOption=cc.v3(0,0,0),e.handScaleDownTo=.7,e.timeToMoveToOption=.5,e.timeToScale=.2,e.delay=.3,e.overlayButton=null,e.closeButton=null,e.analyticsManager=null,e.stepsController=null,e.handDefaultPosition=cc.v3(0,0,0),e.handOriginalScale=0,e.optionHighlight=null,e}return i(e,t),e.prototype.onLoad=function(){this.analyticsManager=cc.find("CommonCanvas").getComponent(s.default),this.stepsController=cc.find("CommonCanvas").getComponent(r.default),this.handDefaultPosition=this.hand.position,this.handOriginalScale=this.hand.scale,this.optionHighlight=this.option.getChildByName("checkmark"),this.node.active=!1},e.prototype.show=function(){var t=this;this.analyticsManager.sendOnViewTutorial(this.stepsController.getCurrentQuestionIndex()),this.overlayButton.interactable=!1,this.closeButton.interactable=!1,this.node.opacity=0,this.node.active=!0,cc.tween(this.node).to(1,{opacity:255}).call(function(){t.overlayButton.interactable=!0,t.closeButton.interactable=!0}).start(),this.scheduleOnce(this.moveHand.bind(this),1)},e.prototype.moveHand=function(){var t=this;cc.tween(this.hand).repeat(this.repeat,cc.tween().call(function(){t.hand.position=t.handDefaultPosition,t.option.scale=1,t.optionHighlight&&(t.optionHighlight.active=!1)}).to(this.timeToMoveToOption,{position:this.handPositionAtOption}).to(this.timeToScale,{scale:this.handScaleDownTo}).call(function(){t.option.scale=.9,t.optionHighlight&&(t.optionHighlight.active=!0)}).delay(this.delay).to(this.timeToScale,{scale:this.handOriginalScale}).call(function(){t.option.scale=1}).delay(.5)).call(function(){t.stop()}).start()},e.prototype.onClickStop=function(){this.stop()},e.prototype.stop=function(){cc.Tween.stopAllByTarget(this.node),cc.Tween.stopAllByTarget(this.hand),this.unscheduleAllCallbacks(),this.node.opacity=0,this.node.active=!1,this.node.emit("onTutorialStop")},n([p({type:cc.Integer})],e.prototype,"repeat",void 0),n([p(cc.Node)],e.prototype,"hand",void 0),n([p(cc.Node)],e.prototype,"option",void 0),n([p(cc.Vec3)],e.prototype,"handPositionAtOption",void 0),n([p({type:cc.Float})],e.prototype,"handScaleDownTo",void 0),n([p({type:cc.Float})],e.prototype,"timeToMoveToOption",void 0),n([p({type:cc.Float})],e.prototype,"timeToScale",void 0),n([p({type:cc.Float})],e.prototype,"delay",void 0),n([p(cc.Button)],e.prototype,"overlayButton",void 0),n([p(cc.Button)],e.prototype,"closeButton",void 0),e=n([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../scripts/AnalyticsManager":"AnalyticsManager","../../scripts/StepsController":"StepsController"}],TemplateQuantitativeFeedback:[function(t,e,o){"use strict";cc._RF.push(e,"d98bdh1Dy1O+KogIrglzRxN","TemplateQuantitativeFeedback");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../scripts/utilities/TextLoader"),r=cc._decorator,a=r.ccclass,c=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spr_iconbg=null,e.spr_statementsbg=null,e.spr_numbg=null,e.spr_feedbackbg=null,e.iconnode=null,e.totalquestionanswerednode=null,e.firstattemptanswers=null,e.numbg1node=null,e.numbg2node=null,e.feedbacknode=null,e}return i(e,t),e.prototype.onLoad=function(){this.iconnode=this.node.getChildByName("icon"),this.totalquestionanswerednode=this.node.getChildByName("totalquestionanswered"),this.firstattemptanswers=this.node.getChildByName("firstattemptanswers"),this.numbg1node=this.node.getChildByName("numbg1"),this.numbg2node=this.node.getChildByName("numbg2"),this.feedbacknode=this.node.getChildByName("feedbackbg")},e.prototype.SetQuantitativeFeedback=function(t,e){this.iconnode.getComponent(cc.Sprite).spriteFrame=this.spr_iconbg,this.totalquestionanswerednode.getComponent(cc.Sprite).spriteFrame=this.spr_statementsbg,this.totalquestionanswerednode.getChildByName("text").getComponent(s.default).changeLabel("totalquestionanswered"),this.firstattemptanswers.getComponent(cc.Sprite).spriteFrame=this.spr_statementsbg,this.firstattemptanswers.getChildByName("text").getComponent(s.default).changeLabel("firstattemptanswers"),this.numbg1node.getComponent(cc.Sprite).spriteFrame=this.spr_numbg,this.numbg1node.getChildByName("text").getComponent(s.default).changeLabel(t.toString()),this.numbg2node.getComponent(cc.Sprite).spriteFrame=this.spr_numbg,this.feedbacknode.getComponent(cc.Sprite).spriteFrame=this.spr_feedbackbg,this.numbg2node.getChildByName("text").getComponent(s.default).changeLabel(e.toString()),e<t?this.feedbacknode.getChildByName("text").getComponent(s.default).changeLabel("endscreenincomplete"):this.feedbacknode.getChildByName("text").getComponent(s.default).changeLabel("endscreencomplete")},n([c(cc.SpriteFrame)],e.prototype,"spr_iconbg",void 0),n([c(cc.SpriteFrame)],e.prototype,"spr_statementsbg",void 0),n([c(cc.SpriteFrame)],e.prototype,"spr_numbg",void 0),n([c(cc.SpriteFrame)],e.prototype,"spr_feedbackbg",void 0),e=n([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../scripts/utilities/TextLoader":"TextLoader"}],TextLoader:[function(t,e,o){"use strict";cc._RF.push(e,"12492sHvd9F37N/GAfwOXlp","TextLoader");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../StepsController"),r=cc._decorator,a=r.ccclass,c=r.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.key="hello",e.commmonCanvas=null,e.jsonData=null,e.richTextLabel=null,e}return i(e,t),e.prototype.start=function(){this.node.getComponent(cc.RichText)?(this.richTextLabel=this.node.getComponent(cc.RichText),this.richTextLabel.string=this.key):(this.label=this.node.getComponent(cc.Label),this.label.string=this.key),this.commmonCanvas=cc.find("CommonCanvas"),this.scr_stepsController=this.commmonCanvas.getComponent(s.default),this.scr_stepsController.getTextByKey(this.key)&&(this.node.getComponent(cc.RichText)?this.richTextLabel.string=this.scr_stepsController.getTextByKey(this.key):this.label.string=this.scr_stepsController.getTextByKey(this.key)),this.commmonCanvas.on("OnJsonLoadComplete",function(t){this.jsonData=t,t.gameTexts.hasOwnProperty(this.key)&&(this.node.getComponent(cc.RichText)?this.richTextLabel.string=t.gameTexts[this.key]:this.label.string=t.gameTexts[this.key])}.bind(this))},e.prototype.changeLabel=function(t){this.node.getComponent(cc.RichText)?(this.richTextLabel=this.node.getComponent(cc.RichText),this.richTextLabel.string=t):(this.label=this.node.getComponent(cc.Label),this.label.string=t),this.key=t,this.commmonCanvas=cc.find("CommonCanvas"),this.scr_stepsController=this.commmonCanvas.getComponent(s.default),this.scr_stepsController.getTextByKey(t)&&(this.node.getComponent(cc.RichText)?this.richTextLabel.string=this.scr_stepsController.getTextByKey(this.key):this.label.string=this.scr_stepsController.getTextByKey(this.key))},n([c],e.prototype,"key",void 0),e=n([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../StepsController":"StepsController"}],TutorialTemplate:[function(t,e,o){"use strict";cc._RF.push(e,"2c3f57ACWdAmKo2KzkSVih0","TutorialTemplate");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../scripts/AnalyticsManager"),r=t("../../scripts/StepsController"),a=cc._decorator,c=a.ccclass,p=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bg=null,e.hand=null,e.activateTapTutorial=!1,e.repeatTapTutorial=-1,e.startPositionTapTutorial=new cc.Vec2(0,0),e.activateDragTutorial=!1,e.repeatDragTutorial=-1,e.startPositionDragTutorial=new cc.Vec2(0,0),e.endPositionDragTutorial=new cc.Vec2(0,0),e.mCounter=0,e.mStartPosition=null,e.mEndPosition=null,e.mRepeatCount=0,e.mAnalyticManager=null,e.mStepController=null,e.mInitialize=!1,e}return i(e,t),e.prototype.onLoad=function(){this.bg.on(cc.Node.EventType.TOUCH_START,this.stopTutorial,this),this.mCounter=0},e.prototype.initialize=function(){this.mInitialize||(this.mAnalyticManager=cc.find("CommonCanvas").getComponent(s.default),this.mStepController=cc.find("CommonCanvas").getComponent(r.default),this.mInitialize=!0)},e.prototype.stopTutorial=function(){this.mCounter<1||(this.mCallback&&this.mCallback(),this.node.stopAllActions(),this.hand.stopAllActions(),this.node.active=!1)},e.prototype.playTapTutorial=function(t){this.mCallback=t,this.activateTapTutorial?(this.initialize(),this.mAnalyticManager.sendOnViewTutorial(this.mStepController.getCurrentQuestionIndex()),this.mStartPosition=this.startPositionTapTutorial,this.mRepeatCount=this.repeatTapTutorial,this.hand.setPosition(this.mStartPosition),this.node.active=!0,this.repeatTapTutorial>0?this.node.runAction(cc.repeat(cc.sequence(cc.callFunc(this.scaleHand,this),cc.delayTime(2),cc.callFunc(this.checkAnimationCompletion,this)),this.repeatTapTutorial)):this.node.runAction(cc.repeatForever(cc.sequence(cc.callFunc(this.scaleHand,this),cc.delayTime(2),cc.callFunc(this.checkAnimationCompletion,this))))):this.mCallback()},e.prototype.playDragTutorial=function(t){this.mCallback=t,this.activateDragTutorial?(this.initialize(),this.activateDragTutorial=!1,this.mAnalyticManager.sendOnViewTutorial(this.mStepController.getCurrentQuestionIndex()),this.mStartPosition=this.startPositionDragTutorial,this.mRepeatCount=this.repeatDragTutorial,this.mEndPosition=this.endPositionDragTutorial,this.hand.setPosition(this.mStartPosition),this.node.active=!0,this.repeatDragTutorial>0?this.node.runAction(cc.repeat(cc.sequence(cc.callFunc(this.setStartPosition,this),cc.callFunc(this.scaleDown,this),cc.delayTime(.75),cc.callFunc(this.moveHand,this),cc.delayTime(1.25),cc.callFunc(this.scaleUp,this),cc.delayTime(.75),cc.callFunc(this.checkAnimationCompletion,this),cc.delayTime(.25)),this.repeatTapTutorial)):this.node.runAction(cc.repeatForever(cc.sequence(cc.callFunc(this.setStartPosition,this),cc.callFunc(this.scaleDown,this),cc.delayTime(.75),cc.callFunc(this.moveHand,this),cc.delayTime(1.25),cc.callFunc(this.scaleUp,this),cc.delayTime(.75),cc.callFunc(this.checkAnimationCompletion,this),cc.delayTime(.25))))):this.mCallback()},e.prototype.setStartPosition=function(){this.hand.setPosition(this.mStartPosition)},e.prototype.moveHand=function(){this.setStartPosition(),this.hand.runAction(cc.moveTo(1,this.mEndPosition))},e.prototype.scaleUp=function(){this.hand.runAction(cc.scaleTo(.5,1))},e.prototype.scaleDown=function(){this.hand.runAction(cc.scaleTo(.5,.8))},e.prototype.scaleHand=function(){this.hand.runAction(cc.sequence(cc.scaleTo(.5,.8),cc.scaleTo(.5,1),cc.delayTime(.5)))},e.prototype.checkAnimationCompletion=function(){this.mCounter++,this.mCounter==this.mRepeatCount&&this.stopTutorial()},n([p(cc.Node)],e.prototype,"bg",void 0),n([p(cc.Node)],e.prototype,"hand",void 0),n([p(cc.Boolean)],e.prototype,"activateTapTutorial",void 0),n([p({type:Number,visible:function(){return this.activateTapTutorial}})],e.prototype,"repeatTapTutorial",void 0),n([p({type:cc.Vec2,visible:function(){return this.activateTapTutorial}})],e.prototype,"startPositionTapTutorial",void 0),n([p(cc.Boolean)],e.prototype,"activateDragTutorial",void 0),n([p({type:Number,visible:function(){return this.activateDragTutorial}})],e.prototype,"repeatDragTutorial",void 0),n([p({type:cc.Vec2,visible:function(){return this.activateDragTutorial}})],e.prototype,"startPositionDragTutorial",void 0),n([p({type:cc.Vec2,visible:function(){return this.activateDragTutorial}})],e.prototype,"endPositionDragTutorial",void 0),e=n([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../scripts/AnalyticsManager":"AnalyticsManager","../../scripts/StepsController":"StepsController"}],UIManager:[function(t,e,o){"use strict";cc._RF.push(e,"d1167OD2SNCs48bKYHEbyTE","UIManager");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./AnalyticsManager"),r=t("./StepsController"),a=t("./AudioManager"),c=t("./ExitPayloadManager"),p=t("./ExpressionGenerateManager"),l=cc._decorator,h=l.ccclass,d=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isHintsButtonWithText=!1,e.isCustomHintPanel=!1,e.headerMargin=[0,0,0,0],e.headerDefaultPosY=380,e.headerDefaultPosX=0,e.headerLabelOffset=[0,0],e.footerMargin=[0,0,0,0],e.footerDefaultShowPosY=-300,e.footerDefaultHidePosY=-700,e.footerDefaultPosX=0,e.footerLabelOffset=[0,0],e.footerButtonDefaultPosX=0,e.footerButtonDefaultPosY=-340,e.isHeaderCharacterEnabled=!1,e.CommonButtonType=cc.Enum({NextQuestion:0,TryAgain:1,Close:2,PlayAgain:3,NextGame:4,Hint:5,StartScreenPlay:6}),e.EventNames=cc.Enum({OnCommonButtonClick:"OnCommonButtonClick"}),e.clipButtonTap=null,e.isHideHeaderAfterStep=!0,e.isHideFooterAfterStep=!0,e.isFooterTextHiding=!1,e}return i(e,t),e.prototype.onLoad=function(){this.scr_analyticsManager=this.node.getComponent(s.default),this.scr_stepsController=this.node.getComponent(r.default),this.scr_audioManager=this.node.getComponent(a.default),this.scr_bridgeIntegration=this.node.getComponent("BridgeIntegration"),this.scr_exitPayloadManager=this.node.getComponent(c.default),this.nodeHeader=this.node.getChildByName("PlayArea").getChildByName("HeaderText"),this.labelHeader=this.nodeHeader.getChildByName("HeaderBG").getChildByName("label").getComponent(cc.RichText),this.nodeFooter=this.node.getChildByName("PlayArea").getChildByName("FooterText"),this.labelFooter=this.nodeFooter.getChildByName("Content").getChildByName("mainContent").getComponent(cc.RichText),this.labelFooterTitle=this.nodeFooter.getChildByName("Content").getChildByName("title").getComponent(cc.RichText),this.endScreenButtons=this.node.getChildByName("PlayArea").getChildByName("EndScreenButtons"),this.footerButtons=this.node.getChildByName("PlayArea").getChildByName("FooterButtons"),this.nodeCloseButton=this.node.getChildByName("PlayArea").getChildByName("CloseButton"),this.hintsPanel=this.node.getChildByName("PlayArea").getChildByName("HintsPanel"),this.startScreen=this.node.getChildByName("PlayArea").getChildByName("StartScreen"),this.node.on("OnAllStepComplete",this.onAllStepComplete.bind(this)),this.node.on("OnJsonLoadComplete",this.onJosnLoadComplete.bind(this)),cc.loader.loadRes("common/audio/button_click",cc.AudioClip,function(t,e){t?cc.error(t.message||t):this.clipButtonTap=e}.bind(this)),this.node.on("OnExpressionLoadComplete",this.onExpressionLoadComplete,this)},e.prototype.onJosnLoadComplete=function(t){var e=cc.color(0,0,0,255);if(t.hasOwnProperty("uiElements")){if(t.uiElements.hasOwnProperty("gameStartScreen")&&this.loadGameStartScreen(t.uiElements.gameStartScreen),t.uiElements.hasOwnProperty("headerText")){if(this.loadCustomUIBackgroundForHeaderText(t.uiElements.headerText,this.nodeHeader.getChildByName("HeaderBG"),this.nodeHeader.getChildByName("HeaderBG").getChildByName("label")),t.uiElements.headerText.hasOwnProperty("color")){var o=t.uiElements.headerText;e=new cc.Color(o.color[0],o.color[1],o.color[2],o.color[3])}t.uiElements.headerText.hasOwnProperty("hideHeaderAfterStep")&&(this.isHideHeaderAfterStep=t.uiElements.headerText.hideHeaderAfterStep)}t.uiElements.hasOwnProperty("footerText")&&(this.loadCustomUIBackgroundForFooterText(t.uiElements.footerText,this.nodeFooter.getChildByName("FooterBG"),this.nodeFooter.getChildByName("Content").getChildByName("mainContent")),t.uiElements.footerText.hasOwnProperty("hideFooterAfterStep")&&(this.isHideFooterAfterStep=t.uiElements.footerText.hideFooterAfterStep)),t.uiElements.hasOwnProperty("nextButton")&&(this.loadCustomUIBackgroundForButton(t.uiElements.nextButton,this.footerButtons.getChildByName("Button_Next").getChildByName("Background")),this.loadCustomUIBackgroundForButton(t.uiElements.nextButton,this.endScreenButtons.getChildByName("Button_Next").getChildByName("Background"))),t.uiElements.hasOwnProperty("tryAgainButton")&&this.loadCustomUIBackgroundForButton(t.uiElements.tryAgainButton,this.footerButtons.getChildByName("Button_TryAgain").getChildByName("Background")),t.uiElements.hasOwnProperty("replayButton")&&this.loadCustomUIBackgroundForButton(t.uiElements.replayButton,this.endScreenButtons.getChildByName("Button_Replay").getChildByName("Background")),t.uiElements.hasOwnProperty("closeButton")&&this.loadCustomUIBackgroundForButton(t.uiElements.closeButton,this.nodeCloseButton),t.uiElements.hasOwnProperty("headerCharacter")&&this.loadHeaderCharacter(t.uiElements.headerCharacter,this.nodeHeader.getChildByName("Character")),t.uiElements.hasOwnProperty("hints")&&this.loadCustomUIForHints(t.uiElements.hints)}if(t.hasOwnProperty("expressionsRichText")){var i=t.expressionsRichText;p.default.getInstance().createAtlasForMathExpression(i,e,40)}if(t.hasOwnProperty("expressionsCustomSprite")){i=t.expressionsCustomSprite;p.default.getInstance().createAtlasFromImage(i)}if(t.hasOwnProperty("version")){var n=cc.find("CustomUI",this.node.parent.getChildByName("GameNode"));null!=n&&(n.getChildByName("Version").getComponent(cc.Label).string=t.version)}},e.prototype.loadHeaderCharacter=function(t,e){this.isHeaderCharacterEnabled=!0,cc.loader.loadRes(t.background,cc.SpriteFrame,function(t,o){t?cc.error(t.message||t):(e.active=!0,e.getComponent(cc.Sprite).spriteFrame=o)}.bind(this)),t.hasOwnProperty("spacing")&&(e.parent.getComponent(cc.Layout).spacingX=t.spacing)},e.prototype.loadCustomUIBackgroundForHeaderText=function(t,e,o){Array.isArray(t.background)?(this.sprite_headerTextBG=new Array(3),cc.loader.loadRes(t.background[0],cc.SpriteFrame,function(t,e){t?cc.error(t.message||t):this.sprite_headerTextBG[0]=e}.bind(this)),cc.loader.loadRes(t.background[1],cc.SpriteFrame,function(t,e){t?cc.error(t.message||t):this.sprite_headerTextBG[1]=e}.bind(this)),cc.loader.loadRes(t.background[2],cc.SpriteFrame,function(t,o){t?cc.error(t.message||t):(this.sprite_headerTextBG[2]=o,e.getComponent(cc.Sprite).spriteFrame=o)}.bind(this))):cc.loader.loadRes(t.background,cc.SpriteFrame,function(t,o){t?cc.error(t.message||t):e.getComponent(cc.Sprite).spriteFrame=o}.bind(this)),t.hasOwnProperty("padding")&&(e.getComponent(cc.Layout).paddingLeft=t.padding[0],e.getComponent(cc.Layout).paddingRight=t.padding[1],e.getComponent(cc.Layout).paddingTop=t.padding[2],e.getComponent(cc.Layout).paddingBottom=t.padding[3]),t.hasOwnProperty("margin")&&(this.headerMargin[0]=t.margin[0],this.headerMargin[1]=t.margin[1],this.headerMargin[2]=t.margin[2],this.headerMargin[3]=t.margin[3]),t.hasOwnProperty("labelWidth")?this.labelHeader.maxWidth=t.labelWidth:this.labelHeader.maxWidth=800,t.hasOwnProperty("labelOffset")&&(this.headerLabelOffset=t.labelOffset,o.position.x=this.headerLabelOffset[0],o.position.y=this.headerLabelOffset[1]),void 0!==o&&(o.color=new cc.Color(t.color[0],t.color[1],t.color[2],t.color[3]))},e.prototype.loadCustomUIBackgroundForFooterText=function(t,e,o){Array.isArray(t.background)?(this.sprite_footerTextBG=new Array(3),cc.loader.loadRes(t.background[0],cc.SpriteFrame,function(t,e){t?cc.error(t.message||t):this.sprite_footerTextBG[0]=e}.bind(this)),cc.loader.loadRes(t.background[1],cc.SpriteFrame,function(t,e){t?cc.error(t.message||t):this.sprite_footerTextBG[1]=e}.bind(this)),cc.loader.loadRes(t.background[2],cc.SpriteFrame,function(t,o){t?cc.error(t.message||t):(this.sprite_footerTextBG[2]=o,e.getComponent(cc.Sprite).spriteFrame=o)}.bind(this))):cc.loader.loadRes(t.background,cc.SpriteFrame,function(t,o){t?cc.error(t.message||t):e.getComponent(cc.Sprite).spriteFrame=o}.bind(this)),t.hasOwnProperty("margin")&&(this.footerMargin[0]=t.margin[0],this.footerMargin[1]=t.margin[1],this.footerMargin[2]=t.margin[2],this.footerMargin[3]=t.margin[3],this.scheduleOnce(function(){this.nodeFooter.x=this.footerMargin[0]}.bind(this),1)),t.hasOwnProperty("labelWidth")?this.labelFooter.maxWidth=t.labelWidth:this.labelFooter.maxWidth=800,t.hasOwnProperty("labelOffset")&&(this.footerLabelOffset=t.labelOffset,o.position.x=this.footerLabelOffset[0],o.position.y=this.footerLabelOffset[1]),void 0!==o&&(o.color=new cc.Color(t.color[0],t.color[1],t.color[2],t.color[3]))},e.prototype.loadCustomUIBackgroundForButton=function(t,e){cc.loader.loadRes(t.background,cc.SpriteFrame,function(o,i){if(o)cc.error(o.message||o);else{e.getComponent(cc.Sprite).spriteFrame=i;var n=e.getChildByName("Label");n&&(n.color=new cc.Color(t.color[0],t.color[1],t.color[2],t.color[3])),t.hasOwnProperty("labelOffset")&&(n.x=t.labelOffset[0],n.y=t.labelOffset[1])}}.bind(this))},e.prototype.loadCustomUIForHints=function(t){if(t.hasOwnProperty("highlightBG")){if(console.log("Inside hint with highlight"),this.isHintsButtonWithText=!0,cc.loader.loadRes(t.hintsButtonIcon,cc.SpriteFrame,function(t,e){t?cc.error(t.message||t):this.node.getChildByName("PlayArea").getChildByName("HintsTextButton").getComponent(cc.Sprite).spriteFrame=e}.bind(this)),cc.loader.loadRes(t.highlightBG,cc.SpriteFrame,function(t,e){t?cc.error(t.message||t):this.node.getChildByName("PlayArea").getChildByName("HintsTextButton").getChildByName("HintsHighlight").getComponent(cc.Sprite).spriteFrame=e}.bind(this)),t.hasOwnProperty("labelOffset")){var e=this.node.getChildByName("PlayArea").getChildByName("HintsTextButton").getChildByName("label");e.x=t.labelOffset[0],e.y=t.labelOffset[1],e.color=new cc.Color(t.color[0],t.color[1],t.color[2],t.color[3])}}else cc.loader.loadRes(t.hintsButtonIcon,cc.SpriteFrame,function(t,e){t?cc.error(t.message||t):this.node.getChildByName("PlayArea").getChildByName("HintsButton").getComponent(cc.Sprite).spriteFrame=e}.bind(this));t.hasOwnProperty("isCustomHintPanel")&&(this.isCustomHintPanel=t.isCustomHintPanel),cc.loader.loadRes(t.closeButtonBG,cc.SpriteFrame,function(t,e){if(t)cc.error(t.message||t);else{var o=this.node.getChildByName("PlayArea").getChildByName("HintsPanel").getChildByName("HintCloseButton");o.active=!0,o.getChildByName("Background").getComponent(cc.Sprite).spriteFrame=e}}.bind(this)),this.populateHints(t)},e.prototype.loadGameStartScreen=function(t){var e=this.startScreen.getChildByName("PanelBG").getChildByName("Title");e.getComponent(cc.RichText).string=t.titleText;var o=this.startScreen.getChildByName("PanelBG").getChildByName("PlayButton").getChildByName("Background").getChildByName("Label");o.getComponent(cc.Label).string="Play",t.hasOwnProperty("buttonLabelOffset")&&(o.x=t.buttonLabelOffset[0],o.y=t.buttonLabelOffset[1]),t.hasOwnProperty("buttonLabelColor")&&(o.color=new cc.Color(t.buttonLabelColor[0],t.buttonLabelColor[1],t.buttonLabelColor[2],t.buttonLabelColor[3])),t.hasOwnProperty("titleLabelColor")&&(e.color=new cc.Color(t.titleLabelColor[0],t.titleLabelColor[1],t.titleLabelColor[2],t.titleLabelColor[3])),cc.loader.loadRes(t.panelBG,cc.SpriteFrame,function(t,e){t?cc.error(t.message||t):this.startScreen.getChildByName("PanelBG").getComponent(cc.Sprite).spriteFrame=e}.bind(this)),cc.loader.loadRes(t.buttonBG,cc.SpriteFrame,function(t,e){t?cc.error(t.message||t):this.startScreen.getChildByName("PanelBG").getChildByName("PlayButton").getChildByName("Background").getComponent(cc.Sprite).spriteFrame=e}.bind(this)),this.startScreen.active=!0},e.prototype.populateHints=function(t){cc.loader.loadRes(t.hintBG,cc.SpriteFrame,function(t,e){if(t)cc.error(t.message||t);else{var o=this.node.getChildByName("PlayArea").getChildByName("HintsPanel").getChildByName("Hints");o.active=!0,o.getComponent(cc.Sprite).spriteFrame=e;var i=this.hintsPanel.getChildByName("Hints").width/2,n=this.hintsPanel.getChildByName("Hints").height/2;this.hintsPanel.getChildByName("HintCloseButton").position=cc.v3(i,n)}}.bind(this))},e.prototype.showHeaderText=function(t){var e=this;this.nodeHeader.active?cc.tween(this.nodeHeader).to(1,{position:cc.v2(100,this.nodeHeader.position.y),opacity:0}).call(function(){e.labelHeader.string=t}).call(function(){e.labelHeader.string=t,e.nodeHeader.position=new cc.Vec3(-100+e.headerMargin[0],e.headerDefaultPosY+e.headerMargin[2],0),void 0!=e.sprite_headerTextBG&&e.scheduleOnce(function(){this.labelHeader.node.height<40?this.labelHeader.node.parent.getComponent(cc.Sprite).spriteFrame=this.sprite_headerTextBG[0]:this.labelHeader.node.height>40&&this.labelHeader.node.height<70?this.labelHeader.node.parent.getComponent(cc.Sprite).spriteFrame=this.sprite_headerTextBG[1]:this.labelHeader.node.parent.getComponent(cc.Sprite).spriteFrame=this.sprite_headerTextBG[2],this.labelHeader.node.y=this.headerLabelOffset[1]+-this.labelHeader.node.parent.height/2,this.labelHeader.node.x=this.headerLabelOffset[0],this.nodeHeader.getChildByName("Character").y=-this.labelHeader.node.parent.height/2}.bind(e))}).to(1,{position:cc.v2(this.headerDefaultPosX+this.headerMargin[0],this.headerDefaultPosY+this.headerMargin[2]),opacity:255}).start():(this.nodeHeader.active=!0,this.labelHeader.string=t,this.nodeHeader.position=new cc.Vec3(-100,380,0),cc.tween(this.nodeHeader).to(1,{position:cc.v2(this.headerDefaultPosX+this.headerMargin[0],this.headerDefaultPosY+this.headerMargin[2]),opacity:255}).start()),this.setActiveHeaderCharacter(this.isHeaderCharacterEnabled,!0)},e.prototype.hideHeaderText=function(){cc.tween(this.nodeHeader).to(1,{position:cc.v2(100-this.headerDefaultPosX+this.headerMargin[0],this.nodeHeader.position.y),opacity:0}).start()},e.prototype.setHeaderYpos=function(t){void 0===t&&(t=380),this.headerDefaultPosY=t},e.prototype.setHeaderXpos=function(t){void 0===t&&(t=0),this.headerDefaultPosX=t},e.prototype.setFooterYpos=function(t){void 0===t&&(t=-300),this.footerDefaultShowPosY=t},e.prototype.setFooterXpos=function(t){void 0===t&&(t=0),this.footerDefaultPosX=t,this.nodeFooter.x=t},e.prototype.showFooterText=function(t,e){var o=this;void 0===e&&(e=""),cc.tween(this.nodeFooter).call(function(){e.length>1?(o.labelFooterTitle.string=e,o.labelFooterTitle.node.active=!0):o.labelFooterTitle.node.active=!1,o.labelFooter.string=t,void 0!=o.sprite_footerTextBG&&o.scheduleOnce(function(){this.labelFooterTitle.node.active?this.labelFooter.node.height<40?this.nodeFooter.getChildByName("FooterBG").getComponent(cc.Sprite).spriteFrame=this.sprite_footerTextBG[1]:this.nodeFooter.getChildByName("FooterBG").getComponent(cc.Sprite).spriteFrame=this.sprite_footerTextBG[2]:this.labelFooter.node.height<40?this.nodeFooter.getChildByName("FooterBG").getComponent(cc.Sprite).spriteFrame=this.sprite_footerTextBG[0]:this.labelFooter.node.height>40&&this.labelFooter.node.height<70?this.nodeFooter.getChildByName("FooterBG").getComponent(cc.Sprite).spriteFrame=this.sprite_footerTextBG[1]:this.nodeFooter.getChildByName("FooterBG").getComponent(cc.Sprite).spriteFrame=this.sprite_footerTextBG[2],this.labelFooter.node.parent.y=this.footerLabelOffset[1]+this.nodeFooter.getChildByName("FooterBG").height/2,this.labelFooter.node.parent.x=this.footerLabelOffset[0]}.bind(o))}).to(1,{position:cc.v2(this.footerDefaultPosX+this.footerMargin[0],this.footerDefaultShowPosY+this.footerMargin[3])}).start()},e.prototype.hideFooterText=function(){cc.tween(this.nodeFooter).to(1,{position:cc.v2(this.footerDefaultPosX+this.footerMargin[0],this.footerDefaultHidePosY)}).start()},e.prototype.setWidthOfLabelNode=function(t,e,o){void 0===o&&(o=14);var i=e.length*o;t.width=i>800?800:i<700?800:i},e.prototype.setActiveTryAgainButton=function(t){var e=this,o=this.node.getChildByName("PlayArea").getChildByName("FooterButtons");o.getChildByName("Button_TryAgain").getComponent(cc.Button).interactable=t,t?cc.tween(o).call(function(){e.node.getChildByName("PlayArea").getChildByName("FooterButtons").getChildByName("Button_TryAgain").active=t}).to(1,{position:cc.v2(this.footerButtonDefaultPosX,this.footerButtonDefaultPosY)}).start():cc.tween(o).to(1,{position:cc.v2(this.footerButtonDefaultPosX,-750)}).call(function(){e.node.getChildByName("PlayArea").getChildByName("FooterButtons").getChildByName("Button_TryAgain").active=t}).start()},e.prototype.setActiveNextButton=function(t){var e=this,o=this.node.getChildByName("PlayArea").getChildByName("FooterButtons");o.getChildByName("Button_Next").getComponent(cc.Button).interactable=t,t?cc.tween(o).call(function(){e.node.getChildByName("PlayArea").getChildByName("FooterButtons").getChildByName("Button_Next").active=t}).to(1,{position:cc.v2(this.footerButtonDefaultPosX,this.footerButtonDefaultPosY)}).start():cc.tween(o).to(1,{position:cc.v2(this.footerButtonDefaultPosX,-750)}).call(function(){e.node.getChildByName("PlayArea").getChildByName("FooterButtons").getChildByName("Button_Next").active=t}).start()},e.prototype.setActiveHeaderCharacter=function(t,e){void 0===e&&(e=!1),this.isHeaderCharacterEnabled=t,e&&(this.nodeHeader.getChildByName("Character").active=this.isHeaderCharacterEnabled)},e.prototype.setFooterButtonXpos=function(t){void 0===t&&(t=0),this.footerButtonDefaultPosX=t,this.node.getChildByName("PlayArea").getChildByName("FooterButtons").x=t},e.prototype.setFooterButtonYpos=function(t){void 0===t&&(t=0),this.footerButtonDefaultPosY=t},e.prototype.setActiveCloseButton=function(t){this.node.getChildByName("PlayArea").getChildByName("CloseButton").active=t},e.prototype.setActiveHintButton=function(t){this.isHintsButtonWithText?this.node.getChildByName("PlayArea").getChildByName("HintsTextButton").active=t:this.node.getChildByName("PlayArea").getChildByName("HintsButton").active=t},e.prototype.animateHintHighlight=function(){var t=this.node.getChildByName("PlayArea").getChildByName("HintsTextButton").getChildByName("HintsHighlight");cc.tween(t).to(.4,{opacity:255}).to(.4,{opacity:0}).to(.4,{opacity:255}).to(.4,{opacity:0}).to(.4,{opacity:255}).to(.4,{opacity:0}).start()},e.prototype.onClickNextButton=function(){cc.audioEngine.play(this.clipButtonTap,!1,1),this.node.emit(this.EventNames.OnCommonButtonClick,this.CommonButtonType.NextQuestion),this.setActiveNextButton(!1),this.hideFooterText()},e.prototype.onClickTryAgainButton=function(){cc.audioEngine.play(this.clipButtonTap,!1,1),this.node.emit(this.EventNames.OnCommonButtonClick,this.CommonButtonType.TryAgain),this.setActiveTryAgainButton(!1),this.hideFooterText()},e.prototype.onClickReplayButton=function(){this.node.getChildByName("PlayArea").getChildByName("EndScreenButtons").getChildByName("Button_Replay").getComponent(cc.Button).interactable=!1,cc.audioEngine.play(this.clipButtonTap,!1,1),this.scr_analyticsManager.sendOnPlayAgainButtonClick(this.scr_stepsController.getTotalQuestions()),this.node.emit(this.EventNames.OnCommonButtonClick,this.CommonButtonType.PlayAgain),this.scheduleOnce(function(){this.scr_audioManager.stopAll(),cc.director.loadScene(cc.director.getScene().name)}.bind(this),.2)},e.prototype.onClickNextGameButton=function(){this.node.getChildByName("PlayArea").getChildByName("EndScreenButtons").getChildByName("Button_Next").getComponent(cc.Button).interactable=!1,cc.audioEngine.play(this.clipButtonTap,!1,1),this.scr_analyticsManager.sendNextQuestionStart(this.scr_stepsController.getTotalQuestions(),!0,this.scr_analyticsManager.Phylum.Click),this.scr_exitPayloadManager.sendExitPayload(),this.node.emit(this.EventNames.OnCommonButtonClick,this.CommonButtonType.NextGame)},e.prototype.onCloseButtonClick=function(){this.scr_analyticsManager.sendCloseButtonClick(this.scr_stepsController.getCurrentQuestionIndex())},e.prototype.onAllStepComplete=function(t){var e=this;cc.tween(this.endScreenButtons).to(1,{position:cc.v2(0,-300)}).call(function(){e.nodeFooter.active=!1}).start()},e.prototype.onHintsButtonClick=function(){cc.audioEngine.play(this.clipButtonTap,!1,1),this.scr_analyticsManager.sendOnHintButtonClick(this.scr_stepsController.getCurrentQuestionIndex()),this.scr_analyticsManager.sendOnHintView(this.scr_stepsController.getCurrentQuestionIndex()),this.node.emit(this.EventNames.OnCommonButtonClick,this.CommonButtonType.Hint),this.isCustomHintPanel||(this.hintsPanel.active=!0,this.scheduleOnce(function(){var t=this.hintsPanel.getChildByName("Hints").width/2,e=this.hintsPanel.getChildByName("Hints").height/2;this.hintsPanel.getChildByName("HintCloseButton").position=cc.v3(t,e)}.bind(this),.1))},e.prototype.onHintsCloseButtonClick=function(){cc.audioEngine.play(this.clipButtonTap,!1,1),console.log("Hints close button clicked"),this.hintsPanel.active=!1},e.prototype.changeHeaderCharacter=function(t){this.nodeHeader.getChildByName("Character").getComponent(cc.Sprite).spriteFrame=t},e.prototype.onExpressionLoadComplete=function(){console.log("On Expression Load Completed")},e.prototype.setHeaderLineHeight=function(t){void 0===t&&(t=30),this.labelHeader.lineHeight=t},e.prototype.setFooterLineHeight=function(t){void 0===t&&(t=30),this.labelFooter.lineHeight=t},e.prototype.onPlayButtonClick=function(){cc.audioEngine.play(this.clipButtonTap,!1,1),this.startScreen.active=!1,this.node.emit(this.EventNames.OnCommonButtonClick,this.CommonButtonType.StartScreenPlay),this.scr_stepsController.onJsonLoadComplete()},e.prototype.hidePreviousStepUIElements=function(){this.isHideFooterAfterStep&&this.hideFooterText(),this.isHideHeaderAfterStep&&this.hideHeaderText()},e=n([h],e)}(cc.Component));o.default=d,cc._RF.pop()},{"./AnalyticsManager":"AnalyticsManager","./AudioManager":"AudioManager","./ExitPayloadManager":"ExitPayloadManager","./ExpressionGenerateManager":"ExpressionGenerateManager","./StepsController":"StepsController"}],Utilities:[function(t,e,o){"use strict";cc._RF.push(e,"5a767mogr5KLYv6/RjeZZbE","Utilities"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator;i.ccclass,i.property;cc._RF.pop()},{}],ball_anim:[function(t,e,o){"use strict";cc._RF.push(e,"9f430q1VuZIT6cG9u0mnTdY","ball_anim");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=s.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ball=null,e.stopFlag=!0,e}return i(e,t),e.prototype.start=function(){},e.prototype.strike=function(){var t=this;this.stopFlag&&(this.ball.scale=.01,this.ball.setPosition(cc.v2(-3.747,-111.896)),this.stopFlag=!1,this.ball.angle=0,cc.tween(this.ball).call(this.changeY()).to(1.5,{x:270,angle:720,scale:{value:1,easing:"quadIn"}}).call(function(){t.stopFlag=!0}).start())},e.prototype.changeY=function(){this.ball.y=300*Math.sin(this.ball.x*Math.PI/360)-90,this.stopFlag||this.scheduleOnce(this.changeY.bind(this),.025)},n([a(cc.Node)],e.prototype,"ball",void 0),e=n([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],disabler:[function(t,e,o){"use strict";cc._RF.push(e,"330e7olV1FINbeq5cYHjaXY","disabler");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,s=arguments.length,r=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,o,r):n(e,o))||r);return s>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,a=s.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.disableNode=null,e}return i(e,t),e.prototype.start=function(){this.disableNode.active=!1},n([a(cc.Node)],e.prototype,"disableNode",void 0),e=n([r],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],dsbridge:[function(t,e,o){"use strict";function i(t){"@babel/helpers - typeof";return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cc._RF.push(e,"f5db2wsQrJO26qBanoifxfH","dsbridge");var n={default:void 0,call:function(t,e,o){var i="";if("function"==typeof e&&(o=e,e={}),e={data:void 0===e?null:e},"function"==typeof o){var n="dscb"+window.dscb++;window[n]=o,e._dscbstub=n}return e=JSON.stringify(e),window._dsbridge?i=_dsbridge.call(t,e):(window._dswk||-1!=navigator.userAgent.indexOf("_dsbridge"))&&(i=prompt("_dsbridge="+t,e)),JSON.parse(i||"{}").data},register:function(t,e,o){o=o?window._dsaf:window._dsf,window._dsInit||(window._dsInit=!0,setTimeout(function(){n.call("_dsb.dsinit")},0)),"object"==i(e)?o._obs[t]=e:o[t]=e},registerAsyn:function(t,e){this.register(t,e,!0)},hasNativeMethod:function(t,e){return this.call("_dsb.hasNativeMethod",{name:t,type:e||"all"})},disableJavascriptDialogBlock:function(t){this.call("_dsb.disableJavascriptDialogBlock",{disable:!1!==t})}};!function(){if(!window._dsf){var t,e={_dsf:{_obs:{}},_dsaf:{_obs:{}},dscb:0,dsBridge:n,close:function(){n.call("_dsb.closePage")},_handleMessageFromNative:function(t){var e=JSON.parse(t.data),o={id:t.callbackId,complete:!0},i=this._dsf[t.method],s=this._dsaf[t.method],r=function(t,i){o.data=t.apply(i,e),n.call("_dsb.returnValue",o)},a=function(t,i){e.push(function(t,e){o.data=t,o.complete=!1!==e,n.call("_dsb.returnValue",o)}),t.apply(i,e)};if(i)r(i,this._dsf);else if(s)a(s,this._dsaf);else if(!(2>(i=t.method.split(".")).length)){t=i.pop();i=i.join(".");var c=(s=(s=this._dsf._obs)[i]||{})[t];c&&"function"==typeof c?r(c,s):(c=(s=(s=this._dsaf._obs)[i]||{})[t])&&"function"==typeof c&&a(c,s)}}};for(t in e)window[t]=e[t];n.register("_hasJavascriptMethod",function(t,e){return 2>(e=t.split(".")).length?!(!_dsf[e]&&!_dsaf[e]):(t=e.pop(),e=e.join("."),(e=_dsf._obs[e]||_dsaf._obs[e])&&!!e[t])})}}(),e.exports=n,cc._RF.pop()},{}],jsFile2:[function(t,e,o){"use strict";cc._RF.push(e,"614707NjFlPSoEB6td36aaf","jsFile2");var i={callJSFile2:function(){console.log("Hurray callJSFile2")}};e.exports=i,cc._RF.pop()},{}]},{},["dsbridge","QuestionProgressBar","Template11","Template11_ItemSelection","TemplateQuantitativeFeedback","TutorialTemplate","Geometry_Highlight","Geometry_Hint","Geometry_OptionHandler","Geometry_StepsHandler","QuestionProgressV2","Template1SelectionPanel","Template12_OptionDrag","Template12_OptionHandler","Template12_Tutorial","Template2_OptionHandler","Template2_Tutorial","Template3_OptionHandler","Template3_Tutorial","Template4_OptionHandler","Template4_Tutorial","Template5_OptionDrag","Template5_OptionHandler","Template5_Tutorial","Template7_OptionHandler","Template7_Turorial","AnalyticsManager","AudioManager","BridgeIntegration","ExitPayloadManager","ExpressionGenerateManager","StepsController","UIManager","Utilities","StepType_Empty","StepType_Info","StepType_Question_1","StepType_Question_2","StepType_Question_3","StepType_Question_4","CustomPositioningUI","Drag_Drop","ExpressionLoader","TextLoader","EXPL10MAT06E04_BaseQuestion","EXPL10MAT06E04_IntroHandler","EXPL10MAT06E04_OptionHandler","EXPL10MAT06E04_QuestionTypeOne","EXPL10MAT06E04_QuestionTypeTwo","EXPL10MAT06E04_SimilarityOfPlaneFigures","EXPL10MAT06E04_TutorialHandler","EXPL10SCI12E01_ComponentsOfCircuit","EXPL10SCI12E01_QuestionProgressBar","EXPL10SCI12E01_BaseQuestion","EXPL10SCI12E01_QuestionTypeOne","EXPL10SCI12E01_QuestionTypeTwo","EXPL10SCI12E14_ElectricCurrentAndHeating","EXPL10SCI12E14_OptionDrag","EXPL10SCI12E14_OptionsHandler","EXPL10SCI12E14_Placeholder","EXPL10SCI12E14_BaseQuestion","EXPL10SCI12E14_QuestionTypeOne","EXPL10SCI12E14_QuestionTypeTwo","EXPL10SCI14E06_BaseQuestion","EXPL10SCI14E06_NuclearPowerPlant","EXPL10SCI14E06_QuestionTypeFour","EXPL10SCI14E06_QuestionTypeOne","EXPL10SCI14E06_QuestionTypeThree","EXPL10SCI14E06_QuestionTypeTwo","19EXPL04SCI08E01_Rotate_Around","19EXPL04SCI08E01_drag_drop","19EXPL04SCI08E01_solar_system","jsFile2","EXPL04MAT13E01_dragNdrop","EXPL04MAT13E01_patterns1","EXPL04SCI09E01_magnets","EXPL06SCI01E01_animal_nutrition","EXPL06SCI08E01_Bones","EXPL06SCI08E01_dragNdrop","disabler","EXPL06SCI16E01_Drag_Drop","EXPL06SCI16E01_Tap_Detect","EXPL06SCI16E01_Vermicompost","EXPL07SCI04E01_Heat1","EXPL07SCI04E01_dragNdrop","EXPL07SCI04E01_heatTransfer","SharedComponents","EXPL07_Sample","EXPL_selectionpanel","TXPL06MAT03E01_Divisibility_1","TXPL06MAT03E01_Drag_Drop","TXPL06MAT03E01_GameModels","TXPL06MAT03E02_Divisibility_2","TXPL06MAT03E02_Drag_Drop","TXPL06MAT03E02_GameModels","TXPL06MAT03E03_Divisibility_3","TXPL06MAT03E03_Drag_Drop","TXPL06MAT03E03_GameModels","TXPL06SCI04E01_BaseQuestion","TXPL06SCI04E01_PropertiesOfMaterials","TXPL06SCI04E01_QuestionFive","TXPL06SCI04E01_QuestionFour","TXPL06SCI04E01_QuestionOne","TXPL06SCI04E01_QuestionSix","TXPL06SCI04E01_QuestionThree","TXPL06SCI04E01_QuestionTwo","TXPL06SCI05E01_GameModels","TXPL06SCI05E01_Separation","EXPL07SCI04E02_Option_Drag","EXPL07SCI04E02_Pin_Drag","EXPL07SCI04E02_heat_2","TXPL07MAT02E04_Decimals1","TXPL07SCI17E01_ButtonStyle","TXPL07SCI17E01_PhasesOfmoon1","TXPL07SCI17E01_SelectionPanel","TXPL08MAT16E01_Divisibility_1","TXPL08MAT16E01_Drag_Drop","TXPL08MAT16E01_GameModels","TXPL08MAT16E02_Divisibility_2","TXPL08MAT16E02_Drag_Drop","TXPL08MAT16E02_GameModels","TXPL08MAT16E03_Divisibility_3","TXPL08MAT16E03_Drag_Drop","TXPL08MAT16E03_GameModels","TXPL07SCI17E02_ButtonStyle","TXPL07SCI17E02_PhasesOfmoon2","TXPL07SCI17E02_SelectionPanel","EXPL09MAT14E01_Dreamteammode","EXPL09MAT14E01_DynamicAssetList","EXPL09MAT14E01_Questionnanager","EXPL09MAT14E01_Timer","EXPL09MAT14E01_ball_anim","EXPL09MAT14E02_Dreamteammode","EXPL09MAT14E02_DynamicAssetList","EXPL09MAT14E02_Questionnanager","ball_anim"]);